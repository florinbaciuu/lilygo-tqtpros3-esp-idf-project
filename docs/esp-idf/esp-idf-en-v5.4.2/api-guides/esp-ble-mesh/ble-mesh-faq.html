<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-73KGWFC8DM"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-73KGWFC8DM');
        </script><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FAQ - ESP32 -  &mdash; ESP-IDF Programming Guide v5.4.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=a60756f2" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=949a1ff5" />
      <link rel="stylesheet" type="text/css" href="../../_static/theme_overrides.css?v=851bd809" />

  
    <link rel="canonical" href="https://docs.espressif.com/projects/esp-idf/en/stable/esp32/api-guides/esp-ble-mesh/ble-mesh-faq.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=c241bbaf"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=ff8fa330"></script>
        <script src="https://wavedrom.com/skins/default.js"></script>
        <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <script src="../../_static/js/theme.js"></script>

    
        

    <script type="text/javascript">
        DOCUMENTATION_OPTIONS.PAGENAME = 'api-guides/esp-ble-mesh/ble-mesh-faq';
        DOCUMENTATION_OPTIONS.PROJECT_SLUG = 'esp-idf';
        DOCUMENTATION_OPTIONS.LATEST_BRANCH_NAME = 'master';
        DOCUMENTATION_OPTIONS.VERSIONS_URL = 'https://dl.espressif.com/dl/esp-idf/idf_versions.js';
        DOCUMENTATION_OPTIONS.LANGUAGES = ["en", "zh_CN"];
        DOCUMENTATION_OPTIONS.IDF_TARGET = 'esp32';
        DOCUMENTATION_OPTIONS.HAS_IDF_TARGETS = ["esp32", "esp32s2", "esp32s3", "esp32c3", "esp32c2", "esp32c5", "esp32c6", "esp32p4"]
        DOCUMENTATION_OPTIONS.RELEASE = 'v5.4.2';
        DOCUMENTATION_OPTIONS.LANGUAGE_URL = 'en';

    </script>

    <script type="text/javascript" src="https://dl.espressif.com/dl/esp-idf/idf_versions.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Terminology" href="ble-mesh-terminology.html" />
    <link rel="prev" title="Architecture" href="ble-mesh-architecture.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ESP-IDF Programming Guide
              <img src="../../_static/espressif-logo.svg" class="logo" alt="Logo"/>
          </a>

          
            <div class="selectors">
              <select id="target-select" style="width: 150px;" hidden>
                <option value="" disabled selected>Choose target...</option>
              </select>
            </div>
          

          <div class="selectors">
            <select id="version-select" style="width: 150px;" hidden>
              <option value="" disabled selected>Choose version...</option>
            </select>
          </div>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hw-reference/index.html">Hardware Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../app_trace.html">Application Level Tracing Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../startup.html">Application Startup Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../classic-bt/index.html">Bluetooth<sup>®</sup> Classic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ble/index.html">Bluetooth<sup>®</sup> Low Energy</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="ble-mesh-index.html">ESP-BLE-MESH</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ble-mesh-index.html#getting-started">Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble-mesh-index.html#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble-mesh-index.html#demo-videos">Demo Videos</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble-mesh-index.html#faq">FAQ</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="ble-mesh-index.html#related-documents">Related Documents</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="ble-mesh-feature-list.html">Feature List</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble-mesh-architecture.html">Architecture</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">FAQ</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble-mesh-terminology.html">Terminology</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble-mesh-index.html#bluetooth-sig-documentation">Bluetooth SIG Documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bootloader.html">Bootloader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build-system.html">Build System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coexist.html">RF Coexistence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c.html">C Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cplusplus.html">C++ Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code-quality/index.html">Code Quality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core_dump.html">Core Dump</a></li>
<li class="toctree-l2"><a class="reference internal" href="../current-consumption-measurement-modules.html">Current Consumption Measurement of Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deep-sleep-stub.html">Deep-sleep Wake Stubs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error-handling.html">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../esp-wifi-mesh.html">ESP-WIFI-MESH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external-ram.html">Support for External RAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fatal-errors.html">Fatal Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../file-system-considerations.html">File System Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hardware-abstraction.html">Hardware Abstraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hlinterrupts.html">High Priority Interrupts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jtag-debugging/index.html">JTAG Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linker-script-generation.html">Linker Script Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../low-power-mode/index.html">Low Power Modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lwip.html">lwIP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../memory-types.html">Memory Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../openthread.html">OpenThread</a></li>
<li class="toctree-l2"><a class="reference internal" href="../partition-tables.html">Partition Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../performance/index.html">Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reproducible-builds.html">Reproducible Builds</a></li>
<li class="toctree-l2"><a class="reference internal" href="../RF_calibration.html">RF Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stdio.html">Standard I/O and Console Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../thread-local-storage.html">Thread Local Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/index.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unit-tests.html">Unit Testing in ESP32</a></li>
<li class="toctree-l2"><a class="reference internal" href="../host-apps.html">Running ESP-IDF Applications on Host</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wifi.html">Wi-Fi Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wifi-security.html">Wi-Fi Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wifi-expansion.html">Wi-Fi Expansion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../phy.html">PHY</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration-guides/index.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries-and-frameworks/index.html">Libraries and Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contributions Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">ESP-IDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COPYRIGHT.html">Copyrights and Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../languages.html">Switch Between Languages</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ESP-IDF Programming Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">API Guides</a></li>
          <li class="breadcrumb-item"><a href="../ble/index.html">Bluetooth<sup>®</sup> Low Energy</a></li>
          <li class="breadcrumb-item"><a href="ble-mesh-index.html">ESP-BLE-MESH</a></li>
      <li class="breadcrumb-item active">FAQ</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/espressif/esp-idf/blob/v5.4.2/docs/en/api-guides/esp-ble-mesh/ble-mesh-faq.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="faq">
<h1>FAQ<a class="headerlink" href="#faq" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="../../../../../zh_CN/v5.4.2/esp32/api-guides/esp-ble-mesh/ble-mesh-faq.html">[中文]</a></p>
<p>This document provides a summary of frequently asked questions about developing with ESP-BLE-MESH, and is divided into seven sections:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#ble-mesh-faq-provisioner-development"><span class="std std-ref">1. Provisioner Development</span></a></p></li>
<li><p><a class="reference internal" href="#ble-mesh-faq-node-development"><span class="std std-ref">2. Node Development</span></a></p></li>
<li><p><a class="reference internal" href="#ble-mesh-faq-ble-mesh-and-wi-fi-coexistence"><span class="std std-ref">3. ESP-BLE-MESH and Wi-Fi Coexistence</span></a></p></li>
<li><p><a class="reference internal" href="#ble-mesh-faq-fast-provisioning"><span class="std std-ref">4. Fast Provisioning</span></a></p></li>
<li><p><a class="reference internal" href="#ble-mesh-faq-log-help"><span class="std std-ref">5. Log Help</span></a></p></li>
<li><p><a class="reference internal" href="#ble-mesh-faq-example-help"><span class="std std-ref">6. Example Help</span></a></p></li>
<li><p><a class="reference internal" href="#ble-mesh-faq-others"><span class="std std-ref">7. Others</span></a></p></li>
</ul>
<p>Users could refer to the sections for quick answer to their questions. This document will be updated based on the feedback collected via various channels.</p>
<section id="provisioner-development">
<span id="ble-mesh-faq-provisioner-development"></span><h2>1. Provisioner Development<a class="headerlink" href="#provisioner-development" title="Permalink to this heading"></a></h2>
<p>Generally, a Provisioner is used to provision unprovisioned devices and form a mesh network. And after provisioning, roles of the unprovisioned devices will be changed to those of a node.</p>
<section id="what-is-the-flow-for-an-unprovisioned-device-to-join-esp-ble-mesh-network">
<h3>1.1 What Is the Flow for an Unprovisioned Device to Join ESP-BLE-MESH Network?<a class="headerlink" href="#what-is-the-flow-for-an-unprovisioned-device-to-join-esp-ble-mesh-network" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>There are two phases for a device to join ESP-BLE-MESH network via a Provisioner, namely, provisioning and configuration.</p>
<ul class="simple">
<li><p>The phase of provisioning is to assign unicast address, add NetKey and etc. to a device. By provisioning, the device joins the ESP-BLE-MESH network and its role is changed from an unprovisioned device to a node.</p></li>
<li><p>The phase of configuration is to add AppKeys to the node and bind AppKeys to corresponding models. And some items are optional during configuration, including adding subscription addresses to the node, set publication information, etc. By configuration, the node can actually transmit messages to a Provisioner and receive messages from it.</p></li>
</ul>
</div></blockquote>
</section>
<section id="if-a-provisioner-wants-to-change-states-of-a-node-what-requirements-should-be-met-for-a-provisioner">
<h3>1.2 If a Provisioner Wants to Change States of a Node, What Requirements Should Be Met for a Provisioner?<a class="headerlink" href="#if-a-provisioner-wants-to-change-states-of-a-node-what-requirements-should-be-met-for-a-provisioner" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Client model that corresponds to server model of the node is required.</p></li>
<li><p>NetKey and AppKey used to encrypt messages shall be owned by both the node and the Provisioner.</p></li>
<li><p>The address owned by the node shall be known, which could be its unicast address or subscription address.</p></li>
</ul>
</div></blockquote>
</section>
<section id="how-can-netkey-and-appkey-be-used">
<h3>1.3 How Can NetKey and AppKey Be Used?<a class="headerlink" href="#how-can-netkey-and-appkey-be-used" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>NetKey is used for encryption of messages in Network Layer. Nodes with the same NetKey are assumed to be in the same subnet while those with different NetKeys cannot communicate with each other.</p></li>
<li><p>AppKey is used for encryption of messages in Upper Transport Layer. If client model and server model are bound to different AppKeys, the communication cannot be achieved.</p></li>
</ul>
</div></blockquote>
</section>
<section id="how-to-generate-a-netkey-or-appkey-for-provisioner-can-we-use-a-fixed-netkey-or-appkey">
<h3>1.4 How to Generate a NetKey or AppKey for Provisioner? Can We Use a Fixed NetKey or AppKey?<a class="headerlink" href="#how-to-generate-a-netkey-or-appkey-for-provisioner-can-we-use-a-fixed-netkey-or-appkey" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv442esp_ble_mesh_provisioner_add_local_net_keyAL16E_K7uint8_t8uint16_t" title="esp_ble_mesh_provisioner_add_local_net_key"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_provisioner_add_local_net_key()</span></code></a> can be used to add a NetKey with a fixed or random value.</p></li>
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv442esp_ble_mesh_provisioner_add_local_app_keyAL16E_K7uint8_t8uint16_t8uint16_t" title="esp_ble_mesh_provisioner_add_local_app_key"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_provisioner_add_local_app_key()</span></code></a> can be used to add an AppKey with a fixed or random value.</p></li>
</ul>
</div></blockquote>
</section>
<section id="is-the-unicast-address-of-provisioner-fixed">
<h3>1.5 Is the Unicast Address of Provisioner Fixed?<a class="headerlink" href="#is-the-unicast-address-of-provisioner-fixed" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>The value of <code class="code docutils literal notranslate"><span class="pre">prov_unicast_addr</span></code> in <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv419esp_ble_mesh_prov_t" title="esp_ble_mesh_prov_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_prov_t</span></code></a> is used to set the unicast address of Provisioner, it can be set only once during initialization and cannot be changed afterwards.</p>
</div></blockquote>
</section>
<section id="can-the-address-of-provisioner-serve-as-destination-address-of-the-node-reporting-status-message">
<h3>1.6 Can the Address of Provisioner Serve as Destination Address of the Node-reporting-status Message?<a class="headerlink" href="#can-the-address-of-provisioner-serve-as-destination-address-of-the-node-reporting-status-message" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>The unicast address of Provisioner can be set only once during initialization and cannot be changed afterwards. In theory, it can serve as the destination address of the node-reporting-status message, provided that the unicast address of the Provisioner is known by nodes. Nodes can know the unicast address of Provisioner during configuration since Provisioner sends messages to them with its unicast address used as the source address.</p>
<p>Subscription address can also be used. Provisioner subscribes to a group address or virtual address, and nodes send messages to the subscription address.</p>
</div></blockquote>
</section>
<section id="is-the-unicast-address-of-the-node-that-is-firstly-provisioned-by-provisioner-to-esp-ble-mesh-network-fixed">
<h3>1.7 Is the Unicast Address of the Node That Is Firstly Provisioned by ProvIsioner to ESP-BLE-MESH Network Fixed?<a class="headerlink" href="#is-the-unicast-address-of-the-node-that-is-firstly-provisioned-by-provisioner-to-esp-ble-mesh-network-fixed" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>The value of <code class="code docutils literal notranslate"><span class="pre">prov_start_address</span></code> in <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv419esp_ble_mesh_prov_t" title="esp_ble_mesh_prov_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_prov_t</span></code></a> is used to set the starting address when the Provisioner provisions unprovisioned devices, i.e., the unicast address of the node it firstly provisioned. It can be set only once during initialization and cannot be changed afterwards.</p>
</div></blockquote>
</section>
<section id="is-the-unicast-address-of-the-node-that-mobile-app-firstly-provisioned-fixed">
<h3>1.8 Is the Unicast Address of the Node That Mobile App Firstly Provisioned Fixed?<a class="headerlink" href="#is-the-unicast-address-of-the-node-that-mobile-app-firstly-provisioned-fixed" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>The App will decide the unicast address, and currently most of them are fixed.</p>
</div></blockquote>
</section>
<section id="how-to-know-which-unprovisioned-device-is-the-provisioner-that-is-provisioning-currently">
<h3>1.9 How to Know Which Unprovisioned Device Is the ProvIsioner That Is Provisioning Currently?<a class="headerlink" href="#how-to-know-which-unprovisioned-device-is-the-provisioner-that-is-provisioning-currently" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>The value of <code class="code docutils literal notranslate"><span class="pre">prov_attention</span></code> in <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv419esp_ble_mesh_prov_t" title="esp_ble_mesh_prov_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_prov_t</span></code></a> is used by Provisioner set to unprovisioned device during provisioning. It can be set only once during initialization and cannot be changed afterwards. When the unprovisioned device is joining the mesh network, it can display in a specific way like flashing light to notify Provisioner that it is being provisioned.</p>
</div></blockquote>
</section>
<section id="how-many-ways-to-authenticate-the-devices-during-provisioning-which-way-was-used-in-the-provided-examples">
<h3>1.10 How Many Ways to Authenticate the Devices During Provisioning? Which Way Was Used in the <a class="reference external" href="https://github.com/espressif/esp-idf/tree/v5.4.2/examples/bluetooth/esp_ble_mesh">provided examples </a>?<a class="headerlink" href="#how-many-ways-to-authenticate-the-devices-during-provisioning-which-way-was-used-in-the-provided-examples" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>There are four authentication methods, i.e., No OOB, Static OOB, Output OOB and Input OOB. In the provided examples, No OOB is used.</p>
</div></blockquote>
</section>
<section id="what-information-can-be-carried-by-the-advertising-packets-of-the-unprovisioned-device-before-provisioning-into-the-network">
<h3>1.11 What Information Can Be Carried by the Advertising Packets of the Unprovisioned Device Before Provisioning into the Network?<a class="headerlink" href="#what-information-can-be-carried-by-the-advertising-packets-of-the-unprovisioned-device-before-provisioning-into-the-network" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Device UUID</p></li>
<li><p>OOB Info</p></li>
<li><p>URL Hash (optional)</p></li>
</ul>
</div></blockquote>
</section>
<section id="can-such-information-be-used-for-device-identification">
<h3>1.12 Can Such Information Be Used for Device Identification?<a class="headerlink" href="#can-such-information-be-used-for-device-identification" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>For example, each unprovisioned device contains a unique Device UUID, which can be used for device identification.</p>
</div></blockquote>
</section>
<section id="how-is-the-unicast-address-assigned-when-the-node-provisioned-by-provisioner-contains-multiple-elements">
<h3>1.13 How Is the Unicast Address Assigned When the Node Provisioned by ProvIsioner Contains Multiple Elements?<a class="headerlink" href="#how-is-the-unicast-address-assigned-when-the-node-provisioned-by-provisioner-contains-multiple-elements" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Provisioner will assign an unicast address for the primary element of the node, and unicast address of the remaining elements are incremented one by one.</p></li>
<li><p>For example: If an unprovisioned device has three elements, i.e., the primary element, the second element and the third element. After provisioning, the primary element address of the node is 0x0002 while the second element address is 0x0003, and the third element address is 0x0004.</p></li>
</ul>
</div></blockquote>
</section>
<section id="how-can-provisioner-get-and-parse-the-composition-data-of-nodes-through-configuration-client-model">
<h3>1.14 How Can Provisioner Get and Parse the <a class="reference internal" href="ble-mesh-terminology.html#ble-mesh-terminology-composition"><span class="std std-ref">Composition Data</span></a> of Nodes Through Configuration Client Model?<a class="headerlink" href="#how-can-provisioner-get-and-parse-the-composition-data-of-nodes-through-configuration-client-model" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Provisioner can get the Composition Data of nodes using the <a class="reference internal" href="ble-mesh-terminology.html#ble-mesh-terminology-foundation-models"><span class="std std-ref">Configuration Client Model</span></a> API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv436esp_ble_mesh_config_client_set_stateP34esp_ble_mesh_client_common_param_tP35esp_ble_mesh_cfg_client_set_state_t" title="esp_ble_mesh_config_client_set_state"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_config_client_set_state()</span></code></a> with <code class="code docutils literal notranslate"><span class="pre">comp_data_get</span></code> in the parameter <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv435esp_ble_mesh_cfg_client_get_state_t" title="esp_ble_mesh_cfg_client_get_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_cfg_client_get_state_t</span></code></a> set properly.</p></li>
<li><p>Users can refer to the following code to parse the Composition Data:</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdint.h&gt;</span>

<span class="c1">//test date: 0C001A0001000800030000010501000000800100001003103F002A00</span>
<span class="c1">//0C00 1A00 0100 0800 0300 0001 05 01 0000 0080 0100 0010 0310 3F002A00</span>

<span class="c1">// CID is 0x000C</span>
<span class="c1">// PID is 0x001A</span>
<span class="c1">// VID is 0x0001</span>
<span class="c1">// CRPL is 0x0008</span>
<span class="c1">// Features is 0x0003 – Relay and Friend features.</span>
<span class="c1">// Loc is “front” – 0x0100</span>
<span class="c1">// NumS is 5</span>
<span class="c1">// NumV is 1</span>
<span class="c1">// The Bluetooth SIG Models supported are: 0x0000, 0x8000, 0x0001, 0x1000, 0x1003</span>
<span class="c1">// The Vendor Models supported are: Company Identifier 0x003F and Model Identifier 0x002A</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int16_t</span><span class="w"> </span><span class="n">cid</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int16_t</span><span class="w"> </span><span class="n">pid</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int16_t</span><span class="w"> </span><span class="n">vid</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int16_t</span><span class="w"> </span><span class="n">crpl</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int16_t</span><span class="w"> </span><span class="n">features</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int16_t</span><span class="w"> </span><span class="n">all_models</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">sig_models</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">vnd_models</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">esp_ble_mesh_composition_head</span><span class="p">;</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">model_id</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">vendor_id</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">tsModel</span><span class="p">;</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// reserve space for up to 20 SIG models</span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">SIG_models</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">numSIGModels</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// reserve space for up to 4 vendor models</span>
<span class="w">    </span><span class="n">tsModel</span><span class="w"> </span><span class="n">Vendor_models</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">numVendorModels</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">esp_ble_mesh_composition_decode</span><span class="p">;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">decode_comp_data</span><span class="p">(</span><span class="n">esp_ble_mesh_composition_head</span><span class="w"> </span><span class="o">*</span><span class="n">head</span><span class="p">,</span><span class="w"> </span><span class="n">esp_ble_mesh_composition_decode</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">mystr</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">pos_sig_base</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">pos_vnd_base</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>

<span class="w">    </span><span class="n">memcpy</span><span class="p">(</span><span class="n">head</span><span class="p">,</span><span class="w"> </span><span class="n">mystr</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="o">*</span><span class="n">head</span><span class="p">));</span>

<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="o">*</span><span class="n">head</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">head</span><span class="o">-&gt;</span><span class="n">sig_models</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">head</span><span class="o">-&gt;</span><span class="n">vnd_models</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">pos_sig_base</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="o">*</span><span class="n">head</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>

<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">head</span><span class="o">-&gt;</span><span class="n">sig_models</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">data</span><span class="o">-&gt;</span><span class="n">SIG_models</span><span class="p">[</span><span class="n">i</span><span class="o">/</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mystr</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pos_sig_base</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">mystr</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pos_sig_base</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">8</span><span class="p">);</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d: %4.4x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="o">-&gt;</span><span class="n">SIG_models</span><span class="p">[</span><span class="n">i</span><span class="o">/</span><span class="mi">2</span><span class="p">]);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">pos_vnd_base</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">head</span><span class="o">-&gt;</span><span class="n">sig_models</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pos_sig_base</span><span class="p">;</span>

<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">head</span><span class="o">-&gt;</span><span class="n">vnd_models</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">data</span><span class="o">-&gt;</span><span class="n">Vendor_models</span><span class="p">[</span><span class="n">i</span><span class="o">/</span><span class="mi">2</span><span class="p">].</span><span class="n">model_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mystr</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pos_vnd_base</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">mystr</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pos_vnd_base</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">8</span><span class="p">);</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d: %4.4x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="o">-&gt;</span><span class="n">Vendor_models</span><span class="p">[</span><span class="n">i</span><span class="o">/</span><span class="mi">2</span><span class="p">].</span><span class="n">model_id</span><span class="p">);</span>

<span class="w">        </span><span class="n">data</span><span class="o">-&gt;</span><span class="n">Vendor_models</span><span class="p">[</span><span class="n">i</span><span class="o">/</span><span class="mi">2</span><span class="p">].</span><span class="n">vendor_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mystr</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pos_vnd_base</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">mystr</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pos_vnd_base</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">8</span><span class="p">);</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d: %4.4x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="o">-&gt;</span><span class="n">Vendor_models</span><span class="p">[</span><span class="n">i</span><span class="o">/</span><span class="mi">2</span><span class="p">].</span><span class="n">vendor_id</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">app_main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">esp_ble_mesh_composition_head</span><span class="w"> </span><span class="n">head</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="w">    </span><span class="n">esp_ble_mesh_composition_decode</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">mystr</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mh">0x0C</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x1A</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span>
<span class="w">                        </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span>
<span class="w">                        </span><span class="mh">0x03</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span>
<span class="w">                        </span><span class="mh">0x05</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span>
<span class="w">                        </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x80</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span>
<span class="w">                        </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0x03</span><span class="p">,</span><span class="w"> </span><span class="mh">0x10</span><span class="p">,</span>
<span class="w">                        </span><span class="mh">0x3F</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x2A</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">};</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>

<span class="w">    </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decode_comp_data</span><span class="p">(</span><span class="o">&amp;</span><span class="n">head</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">mystr</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">mystr</span><span class="p">));</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;decode_comp_data error&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="how-can-provisioner-further-configure-nodes-through-obtained-composition-data">
<h3>1.15 How Can Provisioner Further Configure Nodes Through Obtained Composition Data?<a class="headerlink" href="#how-can-provisioner-further-configure-nodes-through-obtained-composition-data" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Provisioner do the following configuration by calling the <a class="reference internal" href="ble-mesh-terminology.html#ble-mesh-terminology-foundation-models"><span class="std std-ref">Configuration Client Model</span></a> API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv436esp_ble_mesh_config_client_set_stateP34esp_ble_mesh_client_common_param_tP35esp_ble_mesh_cfg_client_set_state_t" title="esp_ble_mesh_config_client_set_state"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_config_client_set_state()</span></code></a>.</p>
<ul class="simple">
<li><p>Add AppKey to nodes with <code class="code docutils literal notranslate"><span class="pre">app_key_add</span></code> in the parameter <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv435esp_ble_mesh_cfg_client_set_state_t" title="esp_ble_mesh_cfg_client_set_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_cfg_client_set_state_t</span></code></a> set properly.</p></li>
<li><p>Add subscription address to the models of nodes with <code class="code docutils literal notranslate"><span class="pre">model_sub_add</span></code> in the parameter <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv435esp_ble_mesh_cfg_client_set_state_t" title="esp_ble_mesh_cfg_client_set_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_cfg_client_set_state_t</span></code></a> set properly.</p></li>
<li><p>Set publication information to the models of nodes with <code class="code docutils literal notranslate"><span class="pre">model_pub_set</span></code> in the parameter <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv435esp_ble_mesh_cfg_client_set_state_t" title="esp_ble_mesh_cfg_client_set_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_cfg_client_set_state_t</span></code></a> set properly.</p></li>
</ul>
</div></blockquote>
</section>
<section id="can-nodes-add-corresponding-configurations-for-themselves">
<h3>1.16 Can Nodes Add Corresponding Configurations for Themselves?<a class="headerlink" href="#can-nodes-add-corresponding-configurations-for-themselves" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>This method can be used in special cases like testing period.</p>
<ul class="simple">
<li><p>Here is an example to show nodes add new group addresses for their models.</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">esp_err_t</span><span class="w"> </span><span class="nf">example_add_fast_prov_group_address</span><span class="p">(</span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">model_id</span><span class="p">,</span><span class="w"> </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">group_addr</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">esp_ble_mesh_comp_t</span><span class="w"> </span><span class="o">*</span><span class="n">comp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="w">    </span><span class="n">esp_ble_mesh_elem_t</span><span class="w"> </span><span class="o">*</span><span class="n">element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="w">    </span><span class="n">esp_ble_mesh_model_t</span><span class="w"> </span><span class="o">*</span><span class="n">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">ESP_BLE_MESH_ADDR_IS_GROUP</span><span class="p">(</span><span class="n">group_addr</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ESP_ERR_INVALID_ARG</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">comp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp_ble_mesh_get_composition_data</span><span class="p">();</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">comp</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ESP_FAIL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">comp</span><span class="o">-&gt;</span><span class="n">element_count</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">comp</span><span class="o">-&gt;</span><span class="n">elements</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">        </span><span class="n">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp_ble_mesh_find_sig_model</span><span class="p">(</span><span class="n">element</span><span class="p">,</span><span class="w"> </span><span class="n">model_id</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">continue</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">model</span><span class="o">-&gt;</span><span class="n">groups</span><span class="p">);</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">model</span><span class="o">-&gt;</span><span class="n">groups</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">group_addr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">model</span><span class="o">-&gt;</span><span class="n">groups</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">ESP_LOGW</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%s: Group address already exists, element index: %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">__func__</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<span class="w">            </span><span class="k">continue</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">model</span><span class="o">-&gt;</span><span class="n">groups</span><span class="p">);</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">model</span><span class="o">-&gt;</span><span class="n">groups</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ESP_BLE_MESH_ADDR_UNASSIGNED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">model</span><span class="o">-&gt;</span><span class="n">groups</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">group_addr</span><span class="p">;</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">model</span><span class="o">-&gt;</span><span class="n">groups</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">ESP_LOGE</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%s: Model is full of group addresses, element index: %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">__func__</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ESP_OK</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When the NVS storage of the node is enabled, group address added and AppKey bound by this method will not be saved in the NVS when the device is powered off currently. These configuration information can only be saved if they are configured by Configuration Client Model.</p>
</div>
</section>
<section id="how-does-provisioner-control-nodes-by-grouping">
<h3>1.17 How Does Provisioner Control Nodes by Grouping?<a class="headerlink" href="#how-does-provisioner-control-nodes-by-grouping" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Generally there are two approaches to implement group control in ESP-BLE-MESH network, group address approach and virtual address approach. And supposing there are 10 devices, i.e., five devices with blue lights and five devices with red lights.</p>
<ul class="simple">
<li><p>Method 1: 5 blue lights can subscribe to a group address, 5 red lights subscribe to another one. By sending messages to different group addresses, Provisioner can realize group control.</p></li>
<li><p>Method 2: 5 blue lights can subscribe to a virtual address, 5 red lights subscribe to another one. By sending messages to different virtual addresses, Provisioner can realize group control.</p></li>
</ul>
</div></blockquote>
</section>
<section id="how-does-provisioner-add-nodes-to-multiple-subnets">
<h3>1.18 How Does Provisioner Add Nodes to Multiple Subnets?<a class="headerlink" href="#how-does-provisioner-add-nodes-to-multiple-subnets" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Provisioner can add multiple NetKeys to nodes during configuration, and nodes sharing the same NetKey belong to the same subnet. Provisioner can communicate with nodes on different subnets by using different NetKeys.</p>
</div></blockquote>
</section>
<section id="how-does-provisioner-know-if-a-node-in-the-mesh-network-is-offline">
<h3>1.19 How Does ProvIsioner Know If a Node in the Mesh Network Is Offline?<a class="headerlink" href="#how-does-provisioner-know-if-a-node-in-the-mesh-network-is-offline" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Node offline is usually defined as: the condition that the node cannot be properly communicated with other nodes in the mesh network due to power failure or some other reasons.</p>
<p>There is no connection between nodes and nodes in the ESP-BLE-MESH network. They communicate with each other through advertising channels.</p>
<p>An example is given here to show how to detect a node is offline by Provisioner.</p>
<ul class="simple">
<li><p>The node can periodically send heartbeat messages to Provisioner. And if Provisioner failed to receive heartbeat messages in a certain period, the node is considered to be offline.</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The heartbeat message should be designed into a single package (less than 11 bytes), so the transmission and reception of it can be more efficient.</p>
</div>
</section>
<section id="what-operations-should-be-performed-when-provisioner-removes-nodes-from-the-network">
<h3>1.20 What Operations Should Be Performed When Provisioner Removes Nodes from the Network?<a class="headerlink" href="#what-operations-should-be-performed-when-provisioner-removes-nodes-from-the-network" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Usually when Provisioner tries to remove node from the mesh network, the procedure includes three main steps:</p>
<ul class="simple">
<li><p>Firstly, Provisioner adds the node that need to be removed to the &quot;blacklist&quot;.</p></li>
<li><p>Secondly, Provisioner performs the <a class="reference internal" href="ble-mesh-terminology.html#ble-mesh-terminology-network-management"><span class="std std-ref">Key Refresh procedure</span></a>.</p></li>
<li><p>Lastly, the node performs node reset procedure, and switches itself to an unprovisioned device.</p></li>
</ul>
</div></blockquote>
</section>
<section id="in-the-key-refresh-procedure-how-does-provisioner-update-the-netkey-owned-by-nodes">
<h3>1.21 In the Key Refresh Procedure, How Does Provisioner Update the Netkey Owned by Nodes?<a class="headerlink" href="#in-the-key-refresh-procedure-how-does-provisioner-update-the-netkey-owned-by-nodes" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Provisioner updates the NetKey of nodes using the <a class="reference internal" href="ble-mesh-terminology.html#ble-mesh-terminology-foundation-models"><span class="std std-ref">Configuration Client Model</span></a> API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv436esp_ble_mesh_config_client_set_stateP34esp_ble_mesh_client_common_param_tP35esp_ble_mesh_cfg_client_set_state_t" title="esp_ble_mesh_config_client_set_state"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_config_client_set_state()</span></code></a> with <code class="code docutils literal notranslate"><span class="pre">net_key_update</span></code> in the parameter <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv435esp_ble_mesh_cfg_client_set_state_t" title="esp_ble_mesh_cfg_client_set_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_cfg_client_set_state_t</span></code></a> set properly.</p></li>
<li><p>Provisioner updates the AppKey of nodes using the <a class="reference internal" href="ble-mesh-terminology.html#ble-mesh-terminology-foundation-models"><span class="std std-ref">Configuration Client Model</span></a> API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv436esp_ble_mesh_config_client_set_stateP34esp_ble_mesh_client_common_param_tP35esp_ble_mesh_cfg_client_set_state_t" title="esp_ble_mesh_config_client_set_state"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_config_client_set_state()</span></code></a> with <code class="code docutils literal notranslate"><span class="pre">app_key_update</span></code> in the parameter <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv435esp_ble_mesh_cfg_client_set_state_t" title="esp_ble_mesh_cfg_client_set_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_cfg_client_set_state_t</span></code></a> set properly.</p></li>
</ul>
</div></blockquote>
</section>
<section id="how-does-provisioner-manage-nodes-in-the-mesh-network">
<h3>1.22 How Does Provisioner Manage Nodes in the Mesh Network?<a class="headerlink" href="#how-does-provisioner-manage-nodes-in-the-mesh-network" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>ESP-BLE-MESH implements several functions related to basic node management in the example, such as <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_store_node_info()</span></code>. And ESP-BLE-MESH also provides the API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv438esp_ble_mesh_provisioner_set_node_name8uint16_tPKc" title="esp_ble_mesh_provisioner_set_node_name"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_provisioner_set_node_name()</span></code></a> which can be used to set the node's local name and the API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv438esp_ble_mesh_provisioner_get_node_name8uint16_t" title="esp_ble_mesh_provisioner_get_node_name"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_provisioner_get_node_name()</span></code></a> which can be used to get the node's local name.</p>
</div></blockquote>
</section>
<section id="what-does-provisioner-need-when-trying-to-control-the-server-model-of-nodes">
<h3>1.23 What Does Provisioner Need When Trying to Control the Server Model of Nodes?<a class="headerlink" href="#what-does-provisioner-need-when-trying-to-control-the-server-model-of-nodes" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Provisioner must include corresponding client model before controlling the server model of nodes.</p>
<p>Provisioner shall add its local NetKey and AppKey.</p>
<ul class="simple">
<li><p>Provisioner add NetKey by calling the API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv442esp_ble_mesh_provisioner_add_local_net_keyAL16E_K7uint8_t8uint16_t" title="esp_ble_mesh_provisioner_add_local_net_key"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_provisioner_add_local_net_key()</span></code></a>.</p></li>
<li><p>Provisioner add AppKey by calling the API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv442esp_ble_mesh_provisioner_add_local_app_keyAL16E_K7uint8_t8uint16_t8uint16_t" title="esp_ble_mesh_provisioner_add_local_app_key"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_provisioner_add_local_app_key()</span></code></a>.</p></li>
</ul>
<p>Provisioner shall configure its own client model.</p>
<ul class="simple">
<li><p>Provisioner bind AppKey to its own client model by calling the API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv452esp_ble_mesh_provisioner_bind_app_key_to_local_model8uint16_t8uint16_t8uint16_t8uint16_t" title="esp_ble_mesh_provisioner_bind_app_key_to_local_model"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_provisioner_bind_app_key_to_local_model()</span></code></a>.</p></li>
</ul>
</div></blockquote>
</section>
<section id="how-does-provisioner-control-the-server-model-of-nodes">
<h3>1.24 How Does Provisioner Control the Server Model of Nodes?<a class="headerlink" href="#how-does-provisioner-control-the-server-model-of-nodes" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>ESP-BLE-MESH supports all SIG-defined client models. Provisioner can use these client models to control the server models of nodes. And the client models are divided into 6 categories with each category has the corresponding functions.</p>
<ul>
<li><p>Configuration Client Model</p>
<blockquote>
<div><ul class="simple">
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv436esp_ble_mesh_config_client_get_stateP34esp_ble_mesh_client_common_param_tP35esp_ble_mesh_cfg_client_get_state_t" title="esp_ble_mesh_config_client_get_state"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_config_client_get_state()</span></code></a> can be used to get the <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv435esp_ble_mesh_cfg_client_get_state_t" title="esp_ble_mesh_cfg_client_get_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_cfg_client_get_state_t</span></code></a> values of Configuration Server Model.</p></li>
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv436esp_ble_mesh_config_client_set_stateP34esp_ble_mesh_client_common_param_tP35esp_ble_mesh_cfg_client_set_state_t" title="esp_ble_mesh_config_client_set_state"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_config_client_set_state()</span></code></a> can be used to set the <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv435esp_ble_mesh_cfg_client_set_state_t" title="esp_ble_mesh_cfg_client_set_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_cfg_client_set_state_t</span></code></a> values of Configuration Server Model.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Health Client Model</p>
<blockquote>
<div><ul class="simple">
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv436esp_ble_mesh_health_client_get_stateP34esp_ble_mesh_client_common_param_tP38esp_ble_mesh_health_client_get_state_t" title="esp_ble_mesh_health_client_get_state"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_health_client_get_state()</span></code></a> can be used to get the <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv438esp_ble_mesh_health_client_get_state_t" title="esp_ble_mesh_health_client_get_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_health_client_get_state_t</span></code></a> values of Health Server Model.</p></li>
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv436esp_ble_mesh_health_client_set_stateP34esp_ble_mesh_client_common_param_tP38esp_ble_mesh_health_client_set_state_t" title="esp_ble_mesh_health_client_set_state"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_health_client_set_state()</span></code></a> can be used to set the <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv438esp_ble_mesh_health_client_set_state_t" title="esp_ble_mesh_health_client_set_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_health_client_set_state_t</span></code></a> values of Health Server Model.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Generic Client Models</p>
<blockquote>
<div><ul class="simple">
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv437esp_ble_mesh_generic_client_get_stateP34esp_ble_mesh_client_common_param_tP39esp_ble_mesh_generic_client_get_state_t" title="esp_ble_mesh_generic_client_get_state"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_generic_client_get_state()</span></code></a> can be used to get the <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv439esp_ble_mesh_generic_client_get_state_t" title="esp_ble_mesh_generic_client_get_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_generic_client_get_state_t</span></code></a> values of Generic Server Models.</p></li>
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv437esp_ble_mesh_generic_client_set_stateP34esp_ble_mesh_client_common_param_tP39esp_ble_mesh_generic_client_set_state_t" title="esp_ble_mesh_generic_client_set_state"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_generic_client_set_state()</span></code></a> can be used to set the <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv439esp_ble_mesh_generic_client_set_state_t" title="esp_ble_mesh_generic_client_set_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_generic_client_set_state_t</span></code></a> values of Generic Server Models.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Lighting Client Models</p>
<blockquote>
<div><ul class="simple">
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv435esp_ble_mesh_light_client_get_stateP34esp_ble_mesh_client_common_param_tP37esp_ble_mesh_light_client_get_state_t" title="esp_ble_mesh_light_client_get_state"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_light_client_get_state()</span></code></a> can be used to get the <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv437esp_ble_mesh_light_client_get_state_t" title="esp_ble_mesh_light_client_get_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_light_client_get_state_t</span></code></a> values of Lighting Server Models.</p></li>
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv435esp_ble_mesh_light_client_set_stateP34esp_ble_mesh_client_common_param_tP37esp_ble_mesh_light_client_set_state_t" title="esp_ble_mesh_light_client_set_state"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_light_client_set_state()</span></code></a> can be used to set the <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv437esp_ble_mesh_light_client_set_state_t" title="esp_ble_mesh_light_client_set_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_light_client_set_state_t</span></code></a> values of Lighting Server Models.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Sensor Client Models</p>
<blockquote>
<div><ul class="simple">
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv436esp_ble_mesh_sensor_client_get_stateP34esp_ble_mesh_client_common_param_tP38esp_ble_mesh_sensor_client_get_state_t" title="esp_ble_mesh_sensor_client_get_state"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_sensor_client_get_state()</span></code></a> can be used to get the <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv438esp_ble_mesh_sensor_client_get_state_t" title="esp_ble_mesh_sensor_client_get_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_sensor_client_get_state_t</span></code></a> values of Sensor Server Model.</p></li>
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv436esp_ble_mesh_sensor_client_set_stateP34esp_ble_mesh_client_common_param_tP38esp_ble_mesh_sensor_client_set_state_t" title="esp_ble_mesh_sensor_client_set_state"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_sensor_client_set_state()</span></code></a> can be used to set the <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv438esp_ble_mesh_sensor_client_set_state_t" title="esp_ble_mesh_sensor_client_set_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_sensor_client_set_state_t</span></code></a> values of Sensor Server Model.</p></li>
</ul>
</div></blockquote>
</li>
<li><dl class="simple">
<dt>Time and Scenes Client Models</dt><dd><ul class="simple">
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv440esp_ble_mesh_time_scene_client_get_stateP34esp_ble_mesh_client_common_param_tP42esp_ble_mesh_time_scene_client_get_state_t" title="esp_ble_mesh_time_scene_client_get_state"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_time_scene_client_get_state()</span></code></a> can be used to get the <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv442esp_ble_mesh_time_scene_client_get_state_t" title="esp_ble_mesh_time_scene_client_get_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_time_scene_client_get_state_t</span></code></a> values of Time and Scenes Server Models.</p></li>
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv440esp_ble_mesh_time_scene_client_set_stateP34esp_ble_mesh_client_common_param_tP42esp_ble_mesh_time_scene_client_set_state_t" title="esp_ble_mesh_time_scene_client_set_state"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_time_scene_client_set_state()</span></code></a> can be used to set the <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv442esp_ble_mesh_time_scene_client_set_state_t" title="esp_ble_mesh_time_scene_client_set_state_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_ble_mesh_time_scene_client_set_state_t</span></code></a> values of Time and Scenes Server Models.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</section>
</section>
<section id="node-development">
<span id="ble-mesh-faq-node-development"></span><h2>2. Node Development<a class="headerlink" href="#node-development" title="Permalink to this heading"></a></h2>
<section id="what-kind-of-models-are-included-by-nodes">
<h3>2.1 What Kind of Models Are Included by Nodes?<a class="headerlink" href="#what-kind-of-models-are-included-by-nodes" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>In ESP-BLE-MESH, nodes are all composed of a series of models with each model implements some functions of the node.</p></li>
<li><p>Model has two types, client model and server model. Client model can get and set the states of server model.</p></li>
<li><p>Model can also be divided into SIG model and vendor model. All behaviors of SIG models are officially defined while behaviors of vendor models are defined by users.</p></li>
</ul>
</div></blockquote>
</section>
<section id="is-the-format-of-messages-corresponding-to-each-model-fixed">
<h3>2.2 Is the Format of Messages Corresponding to Each Model Fixed?<a class="headerlink" href="#is-the-format-of-messages-corresponding-to-each-model-fixed" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Messages, which consist of opcode and payload, are divided by opcode.</p></li>
<li><p>The type and the format of the messages corresponding to models are both fixed, which means the messages transmitted between models are fixed.</p></li>
</ul>
</div></blockquote>
</section>
<section id="which-functions-can-be-used-to-send-messages-with-the-models-of-nodes">
<h3>2.3 Which Functions Can Be Used to Send Messages with the Models of Nodes?<a class="headerlink" href="#which-functions-can-be-used-to-send-messages-with-the-models-of-nodes" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>For client models, users can use the API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv434esp_ble_mesh_client_model_send_msgP20esp_ble_mesh_model_tP22esp_ble_mesh_msg_ctx_t8uint32_t8uint16_tP7uint8_t7int32_tb23esp_ble_mesh_dev_role_t" title="esp_ble_mesh_client_model_send_msg"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_client_model_send_msg()</span></code></a> to send messages.</p></li>
<li><p>For server models, users can use the API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv434esp_ble_mesh_server_model_send_msgP20esp_ble_mesh_model_tP22esp_ble_mesh_msg_ctx_t8uint32_t8uint16_tP7uint8_t" title="esp_ble_mesh_server_model_send_msg"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_server_model_send_msg()</span></code></a> to send messages.</p></li>
<li><p>For publication, users call the API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv426esp_ble_mesh_model_publishP20esp_ble_mesh_model_t8uint32_t8uint16_tP7uint8_t23esp_ble_mesh_dev_role_t" title="esp_ble_mesh_model_publish"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_model_publish()</span></code></a> to publish messages.</p></li>
</ul>
</div></blockquote>
</section>
<section id="how-to-achieve-the-transmission-of-messages-without-packet-loss">
<h3>2.4 How to Achieve the Transmission of Messages Without Packet Loss?<a class="headerlink" href="#how-to-achieve-the-transmission-of-messages-without-packet-loss" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Acknowledged message is needed if users want to transmit messages without packet loss. The default time to wait for corresponding response is set in <a class="reference internal" href="../../api-reference/kconfig.html#config-ble-mesh-client-msg-timeout"><span class="std std-ref">CONFIG_BLE_MESH_CLIENT_MSG_TIMEOUT</span></a>. If the sender waits for the response until the timer expires, the corresponding timeout event would be triggered.</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Response timeout can be set in the API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv434esp_ble_mesh_client_model_send_msgP20esp_ble_mesh_model_tP22esp_ble_mesh_msg_ctx_t8uint32_t8uint16_tP7uint8_t7int32_tb23esp_ble_mesh_dev_role_t" title="esp_ble_mesh_client_model_send_msg"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_client_model_send_msg()</span></code></a>. The default value (4 seconds) would be applied if the parameter <code class="code docutils literal notranslate"><span class="pre">msg_timeout</span></code> is set to <strong>0</strong>.</p>
</div>
</section>
<section id="how-to-send-unacknowledged-messages">
<h3>2.5 How to Send Unacknowledged Messages?<a class="headerlink" href="#how-to-send-unacknowledged-messages" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>For client models, users can use the API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv434esp_ble_mesh_client_model_send_msgP20esp_ble_mesh_model_tP22esp_ble_mesh_msg_ctx_t8uint32_t8uint16_tP7uint8_t7int32_tb23esp_ble_mesh_dev_role_t" title="esp_ble_mesh_client_model_send_msg"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_client_model_send_msg()</span></code></a> with the parameter <code class="code docutils literal notranslate"><span class="pre">need_rsp</span></code> set to <code class="code docutils literal notranslate"><span class="pre">false</span></code> to send unacknowledged messages.</p>
<p>For server models, the messages sent by using the API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv434esp_ble_mesh_server_model_send_msgP20esp_ble_mesh_model_tP22esp_ble_mesh_msg_ctx_t8uint32_t8uint16_tP7uint8_t" title="esp_ble_mesh_server_model_send_msg"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_server_model_send_msg()</span></code></a> are always unacknowledged messages.</p>
</div></blockquote>
</section>
<section id="how-to-add-subscription-address-to-models">
<h3>2.6 How to Add Subscription Address to Models?<a class="headerlink" href="#how-to-add-subscription-address-to-models" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Subscription address can be added through Configuration Client Model.</p>
</div></blockquote>
</section>
<section id="what-is-the-difference-between-messages-sent-and-published-by-models">
<h3>2.7 What Is the Difference Between Messages Sent and Published by Models?<a class="headerlink" href="#what-is-the-difference-between-messages-sent-and-published-by-models" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Messages sent by calling the API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv434esp_ble_mesh_client_model_send_msgP20esp_ble_mesh_model_tP22esp_ble_mesh_msg_ctx_t8uint32_t8uint16_tP7uint8_t7int32_tb23esp_ble_mesh_dev_role_t" title="esp_ble_mesh_client_model_send_msg"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_client_model_send_msg()</span></code></a> or <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv434esp_ble_mesh_server_model_send_msgP20esp_ble_mesh_model_tP22esp_ble_mesh_msg_ctx_t8uint32_t8uint16_tP7uint8_t" title="esp_ble_mesh_server_model_send_msg"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_server_model_send_msg()</span></code></a> will be sent in the duration determined by the Network Transmit state.</p>
<p>Messages published by calling the API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv426esp_ble_mesh_model_publishP20esp_ble_mesh_model_t8uint32_t8uint16_tP7uint8_t23esp_ble_mesh_dev_role_t" title="esp_ble_mesh_model_publish"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_model_publish()</span></code></a> will be published determined by the Model Publication state. And the publication of messages is generally periodic or with a fixed number of counts. The publication period and publication count are controlled by the Model Publication state, and can be configured through Configuration Client Model.</p>
</div></blockquote>
</section>
<section id="how-many-bytes-can-be-carried-when-sending-unsegmented-messages">
<h3>2.8 How Many Bytes Can Be Carried When Sending Unsegmented Messages?<a class="headerlink" href="#how-many-bytes-can-be-carried-when-sending-unsegmented-messages" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>The total payload length (which can be set by users) of unsegmented message is 11 octets, so if the opcode of the message is 2 octets, then the message can carry 9-octets of valid information. For vendor messages, due to the 3-octets opcode, the remaining payload length is 8 octets.</p>
</div></blockquote>
</section>
<section id="when-should-the-relay-feature-of-nodes-be-enabled">
<h3>2.9 When Should the <a class="reference internal" href="ble-mesh-terminology.html#ble-mesh-terminology-features"><span class="std std-ref">Relay</span></a> Feature of Nodes Be Enabled?<a class="headerlink" href="#when-should-the-relay-feature-of-nodes-be-enabled" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Users can enable the Relay feature of all nodes when nodes detected in the mesh network are sparse.</p>
<p>For dense mesh network, users can choose to just enable the Relay feature of several nodes.</p>
<p>And users can enable the Relay feature by default if the mesh network size is unknown.</p>
</div></blockquote>
</section>
<section id="when-should-the-proxy-feature-of-node-be-enabled">
<h3>2.10 When Should the <a class="reference internal" href="ble-mesh-terminology.html#ble-mesh-terminology-features"><span class="std std-ref">Proxy</span></a> Feature of Node Be Enabled?<a class="headerlink" href="#when-should-the-proxy-feature-of-node-be-enabled" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>If the unprovisioned device is expected to be provisioned by a phone, then it should enable the Proxy feature since almost all the phones do not support sending ESP-BLE-MESH packets through advertising bearer currently. And after the unprovisioned device is provisioned successfully and becoming a Proxy node, it will communicate with the phone using GATT bearer and using advertising bearer to communicate with other nodes in the mesh network.</p>
</div></blockquote>
</section>
<section id="how-to-use-the-proxy-filter">
<h3>2.11 How to Use the Proxy Filter?<a class="headerlink" href="#how-to-use-the-proxy-filter" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>The Proxy filter is used to reduce the number of Network PDUs exchanged between a Proxy Client (e.g., the phone) and a Proxy Server (e.g., the node). And with the Proxy filter, Proxy Client can explicitly request to receive only mesh messages with certain destination addresses from Proxy Server.</p>
</div></blockquote>
</section>
<section id="when-a-message-can-be-relayed-by-a-relay-node">
<h3>2.12 When a Message Can Be Relayed by a Relay Node?<a class="headerlink" href="#when-a-message-can-be-relayed-by-a-relay-node" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>If a message need to be relayed, the following conditions should be met.</p>
<ul class="simple">
<li><p>The message is in the mesh network.</p></li>
<li><p>The message is not sent to the unicast address of the node.</p></li>
<li><p>The value of TTL in the message is greater than 1.</p></li>
</ul>
</div></blockquote>
</section>
<section id="if-a-message-is-segmented-into-several-segments-should-the-other-relay-nodes-just-relay-when-one-of-these-segments-is-received-or-wait-until-the-message-is-received-completely">
<h3>2.13 If a Message Is Segmented into Several Segments, Should the Other Relay Nodes Just Relay When One of These Segments Is Received or Wait Until the Message Is Received Completely?<a class="headerlink" href="#if-a-message-is-segmented-into-several-segments-should-the-other-relay-nodes-just-relay-when-one-of-these-segments-is-received-or-wait-until-the-message-is-received-completely" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Relay nodes will forward segments when one of them are received rather than keeping waiting until all the segments are received.</p>
</div></blockquote>
</section>
<section id="what-is-the-principle-of-reducing-power-consumption-using-low-power-feature">
<h3>2.14 What Is the Principle of Reducing Power Consumption Using <a class="reference internal" href="ble-mesh-terminology.html#ble-mesh-terminology-features"><span class="std std-ref">Low Power</span></a> Feature?<a class="headerlink" href="#what-is-the-principle-of-reducing-power-consumption-using-low-power-feature" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>When the radio is turned on for listening, the device is consuming energy. When low power feature of the node is enabled, it will turn off its radio in the most of the time.</p></li>
<li><p>And cooperation is needed between low power node and friend node, thus low power node can receive messages at an appropriate or lower frequency without the need to keep listening.</p></li>
<li><p>When there are some new messages for low power node, its friend node will store the messages for it. And low power node can poll friend nodes to see if there are new messages at a fixed interval.</p></li>
</ul>
</div></blockquote>
</section>
<section id="how-to-continue-the-communication-on-the-network-after-powering-down-and-powering-up-again">
<h3>2.15 How to Continue the Communication on the Network After Powering-down and Powering-up Again?<a class="headerlink" href="#how-to-continue-the-communication-on-the-network-after-powering-down-and-powering-up-again" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Enable the configuration <code class="code docutils literal notranslate"><span class="pre">Store</span> <span class="pre">ESP-BLE-MESH</span> <span class="pre">Node</span> <span class="pre">configuration</span> <span class="pre">persistently</span></code> in <cite>menuconfig</cite>.</p>
</div></blockquote>
</section>
<section id="how-to-send-out-the-self-test-results-of-nodes">
<h3>2.16 How to Send out the Self-test Results of Nodes?<a class="headerlink" href="#how-to-send-out-the-self-test-results-of-nodes" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>It is recommended that nodes can publish its self-test results periodically through Health Server Model.</p>
</div></blockquote>
</section>
<section id="how-to-transmit-information-between-nodes">
<h3>2.17 How to Transmit Information Between Nodes?<a class="headerlink" href="#how-to-transmit-information-between-nodes" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>One possible application scenario for transmitting information between nodes is that spray nodes would be triggered once smoke alarm detected high smoke concentration. There are two approaches in implementation.</p>
<ul class="simple">
<li><p>Approach 1 is that spray node subscribes to a group address. When smoke alarm detects high smoke concentration, it will publish a message whose destination address is the group address which has been subscribed by spray node.</p></li>
<li><p>Approach 2 is that Provisioner can configure the unicast address of spray node to the smoke alarm. When high smoke concentration is detected, smoke alarm can use send messages to the spray node with the spray node's unicast address as the destination address.</p></li>
</ul>
</div></blockquote>
</section>
<section id="is-gateway-a-must-for-nodes-communication">
<h3>2.18 Is Gateway a Must for Nodes Communication?<a class="headerlink" href="#is-gateway-a-must-for-nodes-communication" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Situation 1: nodes only communicate within the mesh network. In this situation, no gateway is need. ESP-BLE-MESH network is a flooded network, messages in the network have no fixed paths, and nodes can communicate with each other freely.</p></li>
<li><p>Situation 2: if users want to control the nodes remotely, for example turn on some nodes before getting home, then a gateway is needed.</p></li>
</ul>
</div></blockquote>
</section>
<section id="when-will-the-iv-update-procedure-be-performed">
<h3>2.19 When Will the IV Update Procedure Be Performed?<a class="headerlink" href="#when-will-the-iv-update-procedure-be-performed" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>IV Update procedure would be performed once sequence number of messages sent detected by the bottom layer of node reached a critical value.</p>
</div></blockquote>
</section>
<section id="how-to-perform-iv-update-procedure">
<h3>2.20 How to Perform IV Update Procedure?<a class="headerlink" href="#how-to-perform-iv-update-procedure" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Nodes can perform IV Update procedure with Secure Network Beacon.</p>
</div></blockquote>
</section>
</section>
<section id="esp-ble-mesh-and-wi-fi-coexistence">
<span id="ble-mesh-faq-ble-mesh-and-wi-fi-coexistence"></span><h2>3. ESP-BLE-MESH and Wi-Fi Coexistence<a class="headerlink" href="#esp-ble-mesh-and-wi-fi-coexistence" title="Permalink to this heading"></a></h2>
<section id="which-modes-does-wi-fi-support-when-it-coexists-with-esp-ble-mesh">
<h3>3.1 Which Modes Does Wi-Fi Support When it Coexists with ESP-BLE-MESH?<a class="headerlink" href="#which-modes-does-wi-fi-support-when-it-coexists-with-esp-ble-mesh" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Currently only Wi-Fi station mode supports the coexistence.</p>
</div></blockquote>
</section>
<section id="why-is-the-wi-fi-throughput-so-low-when-wi-fi-and-esp-ble-mesh-coexist">
<h3>3.2 Why Is the Wi-Fi Throughput So Low When Wi-Fi and ESP-BLE-MESH Coexist?<a class="headerlink" href="#why-is-the-wi-fi-throughput-so-low-when-wi-fi-and-esp-ble-mesh-coexist" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>The <a class="reference external" href="https://docs.espressif.com/projects/esp-dev-kits/en/latest/esp32/esp32-devkitc/index.html">ESP32-DevKitC</a> board without PSRAM can run properly but the throughput of it is low since it has no PSRAM. When Bluetooth and Wi-Fi coexist, the throughput of ESP32-DevKitC with PSRAM can be stabilized to more than 1 Mbps.</p>
<p>Some configurations in menuconfig shall be enabled to support PSRAM.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ESP32-specific</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">Support</span> <span class="pre">for</span> <span class="pre">external,SPI-connected</span> <span class="pre">RAM</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">Try</span> <span class="pre">to</span> <span class="pre">allocate</span> <span class="pre">memories</span> <span class="pre">of</span> <span class="pre">Wi-Fi</span> <span class="pre">and</span> <span class="pre">LWIP...</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Bluetooth</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">Bluedroid</span> <span class="pre">Enable</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">BT/BLE</span> <span class="pre">will</span> <span class="pre">first</span> <span class="pre">malloc</span> <span class="pre">the</span> <span class="pre">memory</span> <span class="pre">from</span> <span class="pre">the</span> <span class="pre">PSRAM</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Bluetooth</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">Bluedroid</span> <span class="pre">Enable</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">Use</span> <span class="pre">dynamic</span> <span class="pre">memory</span> <span class="pre">allocation</span> <span class="pre">in</span> <span class="pre">BT/BLE</span> <span class="pre">stack</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Bluetooth</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">Bluetooth</span> <span class="pre">controller</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">BLE</span> <span class="pre">full</span> <span class="pre">scan</span> <span class="pre">feature</span> <span class="pre">supported</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Wi-Fi</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">Software</span> <span class="pre">controls</span> <span class="pre">Wi-Fi/Bluetooth</span> <span class="pre">coexistence</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">Wi-Fi</span></code></p></li>
</ul>
</div></blockquote>
</div></blockquote>
</section>
</section>
<section id="fast-provisioning">
<span id="ble-mesh-faq-fast-provisioning"></span><h2>4. Fast Provisioning<a class="headerlink" href="#fast-provisioning" title="Permalink to this heading"></a></h2>
<section id="why-is-fast-provisioning-needed">
<h3>4.1 Why Is Fast Provisioning Needed?<a class="headerlink" href="#why-is-fast-provisioning-needed" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Normally when they are several unprovisioned devices, users can provision them one by one. But when it comes to a large number of unprovisioned devices (e.g., 100), provisioning them one by one will take huge amount of time. With fast provisioning, users can provision 100 unprovisioned devices in about 50 seconds.</p>
</div></blockquote>
</section>
<section id="why-espblemesh-app-would-wait-for-a-long-time-during-fast-provisioning">
<h3>4.2 Why EspBleMesh App Would Wait for a Long Time During Fast Provisioning?<a class="headerlink" href="#why-espblemesh-app-would-wait-for-a-long-time-during-fast-provisioning" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>After the App provisioned one Proxy node, it will disconnect from the App during fast provisioning, and reconnect with the App when all the nodes are provisioned.</p>
</div></blockquote>
</section>
<section id="why-is-the-number-of-node-addresses-displayed-in-the-app-is-more-than-that-of-existing-node-addresses">
<h3>4.3 Why Is the Number of Node Addresses Displayed in the App Is More than That of Existing Node Addresses?<a class="headerlink" href="#why-is-the-number-of-node-addresses-displayed-in-the-app-is-more-than-that-of-existing-node-addresses" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Each time after a fast provisioning process, and before starting a new one, the node addresses in the App should be cleared, otherwise the number of the node address will be incorrect.</p>
</div></blockquote>
</section>
<section id="what-is-the-usage-of-the-count-value-which-was-input-in-espblemesh-app">
<h3>4.4 What Is the Usage of the <strong>count</strong> Value Which Was Input in EspBleMesh App?<a class="headerlink" href="#what-is-the-usage-of-the-count-value-which-was-input-in-espblemesh-app" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>The <strong>count</strong> value is provided to the Proxy node which is provisioned by the App so as to determine when to start Proxy advertising in advance.</p>
</div></blockquote>
</section>
<section id="when-will-configuration-client-model-of-the-node-running-fast-prov-server-example-start-to-work">
<h3>4.5 When will Configuration Client Model of the node running <a class="reference external" href="https://github.com/espressif/esp-idf/tree/v5.4.2/examples/bluetooth/esp_ble_mesh/fast_provisioning/fast_prov_server">fast_prov_server </a> example start to work?<a class="headerlink" href="#when-will-configuration-client-model-of-the-node-running-fast-prov-server-example-start-to-work" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Configuration Client Model will start to work after the Temporary Provisioner functionality is enabled.</p>
</div></blockquote>
</section>
<section id="will-the-temporary-provisioner-functionality-be-enabled-all-the-time">
<h3>4.6 Will the Temporary Provisioner Functionality Be Enabled All the Time?<a class="headerlink" href="#will-the-temporary-provisioner-functionality-be-enabled-all-the-time" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>After the nodes receive messages used to turn on/off lights, all the nodes will disable its Temporary Provisioner functionality and become nodes.</p>
</div></blockquote>
</section>
</section>
<section id="log-help">
<span id="ble-mesh-faq-log-help"></span><h2>5. Log Help<a class="headerlink" href="#log-help" title="Permalink to this heading"></a></h2>
<p>You can find meaning of errors or warnings when they appear at the bottom of ESP-BLE-MESH stack.</p>
<section id="what-is-the-meaning-of-warning-ran-out-of-retransmit-attempts">
<h3>5.1 What Is the Meaning of Warning <code class="docutils literal notranslate"><span class="pre">ran</span> <span class="pre">out</span> <span class="pre">of</span> <span class="pre">retransmit</span> <span class="pre">attempts</span></code>?<a class="headerlink" href="#what-is-the-meaning-of-warning-ran-out-of-retransmit-attempts" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>When the node transmits a segmented message, and due to some reasons, the receiver does not receive the complete message. Then the node will retransmit the message. When the retransmission count reaches the maximum number, which is 4 currently, then this warning will appear.</p>
</div></blockquote>
</section>
<section id="what-is-the-meaning-of-warning-duplicate-found-in-network-message-cache">
<h3>5.2 What Is the Meaning of Warning  <code class="docutils literal notranslate"><span class="pre">Duplicate</span> <span class="pre">found</span> <span class="pre">in</span> <span class="pre">Network</span> <span class="pre">Message</span> <span class="pre">Cache</span></code>?<a class="headerlink" href="#what-is-the-meaning-of-warning-duplicate-found-in-network-message-cache" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>When the node receives a message, it will compare the message with the ones stored in the network cache. If the same has been found in the cache, which means it has been received before, then the message will be dropped.</p>
</div></blockquote>
</section>
<section id="what-is-the-meaning-of-warning-incomplete-timer-expired">
<h3>5.3 What Is the Meaning of Warning  <code class="docutils literal notranslate"><span class="pre">Incomplete</span> <span class="pre">timer</span> <span class="pre">expired</span></code>?<a class="headerlink" href="#what-is-the-meaning-of-warning-incomplete-timer-expired" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>When the node does not receive all the segments of a segmented message during a certain period (e.g., 10 seconds), then the Incomplete timer will expire and this warning will appear.</p>
</div></blockquote>
</section>
<section id="what-is-the-meaning-of-warning-no-matching-tx-context-for-ack">
<h3>5.4 What Is the Meaning of Warning  <code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">matching</span> <span class="pre">TX</span> <span class="pre">context</span> <span class="pre">for</span> <span class="pre">ack</span></code>?<a class="headerlink" href="#what-is-the-meaning-of-warning-no-matching-tx-context-for-ack" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>When the node receives a segment ack and it does not find any self-send segmented message related with this ack, then this warning will appear.</p>
</div></blockquote>
</section>
<section id="what-is-the-meaning-of-warning-no-free-slots-for-new-incoming-segmented-messages">
<h3>5.5 What Is the Meaning of Warning  <code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">free</span> <span class="pre">slots</span> <span class="pre">for</span> <span class="pre">new</span> <span class="pre">incoming</span> <span class="pre">segmented</span> <span class="pre">messages</span></code>?<a class="headerlink" href="#what-is-the-meaning-of-warning-no-free-slots-for-new-incoming-segmented-messages" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>When the node has no space for receiving new segmented message, this warning will appear. Users can make the space larger through the configuration <a class="reference internal" href="../../api-reference/kconfig.html#config-ble-mesh-rx-seg-msg-count"><span class="std std-ref">CONFIG_BLE_MESH_RX_SEG_MSG_COUNT</span></a>.</p>
</div></blockquote>
</section>
<section id="what-is-the-meaning-of-error-model-not-bound-to-appkey-0x0000">
<h3>5.6 What Is the Meaning of Error <code class="docutils literal notranslate"><span class="pre">Model</span> <span class="pre">not</span> <span class="pre">bound</span> <span class="pre">to</span> <span class="pre">Appkey</span> <span class="pre">0x0000</span></code>?<a class="headerlink" href="#what-is-the-meaning-of-error-model-not-bound-to-appkey-0x0000" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>When the node sends messages with a model and the model has not been bound to the AppKey with AppKey Index 0x000, then this error will appear.</p>
</div></blockquote>
</section>
<section id="what-is-the-meaning-of-error-busy-sending-message-to-dst-xxxx">
<h3>5.7 What Is the Meaning of Error <code class="docutils literal notranslate"><span class="pre">Busy</span> <span class="pre">sending</span> <span class="pre">message</span> <span class="pre">to</span> <span class="pre">DST</span> <span class="pre">xxxx</span></code>?<a class="headerlink" href="#what-is-the-meaning-of-error-busy-sending-message-to-dst-xxxx" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>This error means client model of the node has transmitted a message to the target node and now is waiting for a response, users can not send messages to the same node with the same unicast address. After the corresponding response is received or timer is expired, then another message can be sent.</p>
</div></blockquote>
</section>
</section>
<section id="example-help">
<span id="ble-mesh-faq-example-help"></span><h2>6. Example Help<a class="headerlink" href="#example-help" title="Permalink to this heading"></a></h2>
<section id="how-are-the-esp-ble-mesh-callback-functions-classified">
<h3>6.1 How Are the ESP-BLE-MESH Callback Functions Classified?<a class="headerlink" href="#how-are-the-esp-ble-mesh-callback-functions-classified" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv435esp_ble_mesh_register_prov_callback22esp_ble_mesh_prov_cb_t" title="esp_ble_mesh_register_prov_callback"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_register_prov_callback()</span></code></a> is used to register callback function used to handle provisioning and networking related events.</p></li>
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv444esp_ble_mesh_register_config_client_callback28esp_ble_mesh_cfg_client_cb_t" title="esp_ble_mesh_register_config_client_callback"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_register_config_client_callback()</span></code></a> is used to register callback function used to handle Configuration Client Model related events.</p></li>
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv444esp_ble_mesh_register_config_server_callback28esp_ble_mesh_cfg_server_cb_t" title="esp_ble_mesh_register_config_server_callback"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_register_config_server_callback()</span></code></a> is used to register callback function used to handle Configuration Server Model related events.</p></li>
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv444esp_ble_mesh_register_health_client_callback31esp_ble_mesh_health_client_cb_t" title="esp_ble_mesh_register_health_client_callback"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_register_health_client_callback()</span></code></a> is used to register callback function used to handle Health Client Model related events.</p></li>
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv444esp_ble_mesh_register_health_server_callback31esp_ble_mesh_health_server_cb_t" title="esp_ble_mesh_register_health_server_callback"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_register_health_server_callback()</span></code></a> is used to register callback function used to handle Health Server Model related events.</p></li>
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv445esp_ble_mesh_register_generic_client_callback32esp_ble_mesh_generic_client_cb_t" title="esp_ble_mesh_register_generic_client_callback"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_register_generic_client_callback()</span></code></a> is used to register callback function used to handle Generic Client Models related events.</p></li>
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv443esp_ble_mesh_register_light_client_callback30esp_ble_mesh_light_client_cb_t" title="esp_ble_mesh_register_light_client_callback"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_register_light_client_callback()</span></code></a> is used to register callback function used to handle Lighting Client Models related events.</p></li>
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv444esp_ble_mesh_register_sensor_client_callback31esp_ble_mesh_sensor_client_cb_t" title="esp_ble_mesh_register_sensor_client_callback"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_register_sensor_client_callback()</span></code></a> is used to register callback function used to handle Sensor Client Model related events.</p></li>
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv448esp_ble_mesh_register_time_scene_client_callback35esp_ble_mesh_time_scene_client_cb_t" title="esp_ble_mesh_register_time_scene_client_callback"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_register_time_scene_client_callback()</span></code></a> is used to register callback function used to handle Time and Scenes Client Models related events.</p></li>
<li><p>The API <a class="reference internal" href="../../api-reference/bluetooth/esp-ble-mesh.html#_CPPv443esp_ble_mesh_register_custom_model_callback23esp_ble_mesh_model_cb_t" title="esp_ble_mesh_register_custom_model_callback"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_ble_mesh_register_custom_model_callback()</span></code></a> is used to register callback function used to handle vendor model and unrealized server models related events.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="others">
<span id="ble-mesh-faq-others"></span><h2>7. Others<a class="headerlink" href="#others" title="Permalink to this heading"></a></h2>
<section id="how-to-print-the-message-context">
<h3>7.1 How to Print the Message Context?<a class="headerlink" href="#how-to-print-the-message-context" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>The examples use <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ESP_LOG_BUFFER_HEX()</span></code> to print the message context while the ESP-BLE-MESH protocol stack uses <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">bt_hex()</span></code>.</p>
</div></blockquote>
</section>
<section id="which-api-can-be-used-to-restart-esp32">
<h3>7.2 Which API Can Be Used to Restart ESP32?<a class="headerlink" href="#which-api-can-be-used-to-restart-esp32" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>The API <a class="reference internal" href="../../api-reference/system/misc_system_api.html#_CPPv411esp_restartv" title="esp_restart"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_restart()</span></code></a>.</p>
</div></blockquote>
</section>
<section id="how-to-monitor-the-remaining-space-of-the-stack-of-a-task">
<h3>7.3 How to Monitor the Remaining Space of the Stack of a Task?<a class="headerlink" href="#how-to-monitor-the-remaining-space-of-the-stack-of-a-task" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>The API <a class="reference internal" href="../../api-reference/system/freertos_idf.html#_CPPv49vTaskListPc" title="vTaskList"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vTaskList()</span></code></a> can be used to print the remaining space of the task stack periodically.</p>
</div></blockquote>
</section>
<section id="how-to-change-the-level-of-log-without-changing-the-menuconfig-output-level">
<h3>7.4 How to Change the Level of Log Without Changing the Menuconfig Output Level?<a class="headerlink" href="#how-to-change-the-level-of-log-without-changing-the-menuconfig-output-level" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>The API <a class="reference internal" href="../../api-reference/system/log.html#_CPPv417esp_log_level_setPKc15esp_log_level_t" title="esp_log_level_set"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_log_level_set()</span></code></a> can be used to change the log output level rather than using menuconfig to change it.</p>
</div></blockquote>
</section>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
             <div class="articleComments">

<style>
    .expand-feedback-content {
        display: none;
    }
    .click-like-or-dislike {
        background-color: #d3d3d3;
        pointer-events: none;
    }
</style>

<script>
    function submitFeedbackForm(user_likes_document) {
        // Send to GA4 the user reaction
        gtag('event', 'user_reaction', {
            'user_likes_document': user_likes_document
        });

        if (user_likes_document === 1) {
            document.querySelector('.like-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContentLike").style.display = 'block';
        } else {
            document.querySelector('.dislike-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContent").style.display = 'block';
        }

        document.querySelector('.like-btn').style.pointerEvents = 'none';
        document.querySelector('.dislike-btn').style.pointerEvents = 'none';
    }
</script>

<hr>

<p style="text-align:center"><strong>Was this page helpful?</strong></p>
<p style="text-align:center">
    <button class="like-btn" onclick="submitFeedbackForm(1)">
        <svg aria-hidden="true" focusable="false" class="color-fg-muted" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M8.834.066c.763.087 1.5.295 2.01.884.505.581.656 1.378.656 2.3 0 .467-.087 1.119-.157 1.637L11.328 5h1.422c.603 0 1.174.085 1.668.333.508.254.911.679 1.137 1.2.453.998.438 2.447.188 4.316l-.04.306c-.105.79-.195 1.473-.313 2.033-.131.63-.315 1.209-.668 1.672C13.97 15.847 12.706 16 11 16c-1.848 0-3.234-.333-4.388-.653-.165-.045-.323-.09-.475-.133-.658-.186-1.2-.34-1.725-.415A1.75 1.75 0 0 1 2.75 16h-1A1.75 1.75 0 0 1 0 14.25v-7.5C0 5.784.784 5 1.75 5h1a1.75 1.75 0 0 1 1.514.872c.258-.105.59-.268.918-.508C5.853 4.874 6.5 4.079 6.5 2.75v-.5c0-1.202.994-2.337 2.334-2.184ZM4.5 13.3c.705.088 1.39.284 2.072.478l.441.125c1.096.305 2.334.598 3.987.598 1.794 0 2.28-.223 2.528-.549.147-.193.276-.505.394-1.07.105-.502.188-1.124.295-1.93l.04-.3c.25-1.882.189-2.933-.068-3.497a.921.921 0 0 0-.442-.48c-.208-.104-.52-.174-.997-.174H11c-.686 0-1.295-.577-1.206-1.336.023-.192.05-.39.076-.586.065-.488.13-.97.13-1.328 0-.809-.144-1.15-.288-1.316-.137-.158-.402-.304-1.048-.378C8.357 1.521 8 1.793 8 2.25v.5c0 1.922-.978 3.128-1.933 3.825a5.831 5.831 0 0 1-1.567.81ZM2.75 6.5h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
    </button>
    <button class="dislike-btn" onclick="submitFeedbackForm(0)">
        <svg aria-hidden="true" focusable="false" class="" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M7.083 15.986c-.763-.087-1.499-.295-2.011-.884-.504-.581-.655-1.378-.655-2.299 0-.468.087-1.12.157-1.638l.015-.112H3.167c-.603 0-1.174-.086-1.669-.334a2.415 2.415 0 0 1-1.136-1.2c-.454-.998-.438-2.447-.188-4.316l.04-.306C.32 4.108.41 3.424.526 2.864c.132-.63.316-1.209.669-1.672C1.947.205 3.211.053 4.917.053c1.848 0 3.234.332 4.388.652l.474.133c.658.187 1.201.341 1.726.415a1.75 1.75 0 0 1 1.662-1.2h1c.966 0 1.75.784 1.75 1.75v7.5a1.75 1.75 0 0 1-1.75 1.75h-1a1.75 1.75 0 0 1-1.514-.872c-.259.105-.59.268-.919.508-.671.491-1.317 1.285-1.317 2.614v.5c0 1.201-.994 2.336-2.334 2.183Zm4.334-13.232c-.706-.089-1.39-.284-2.072-.479l-.441-.125c-1.096-.304-2.335-.597-3.987-.597-1.794 0-2.28.222-2.529.548-.147.193-.275.505-.393 1.07-.105.502-.188 1.124-.295 1.93l-.04.3c-.25 1.882-.19 2.933.067 3.497a.923.923 0 0 0 .443.48c.208.104.52.175.997.175h1.75c.685 0 1.295.577 1.205 1.335-.022.192-.049.39-.075.586-.066.488-.13.97-.13 1.329 0 .808.144 1.15.288 1.316.137.157.401.303 1.048.377.307.035.664-.237.664-.693v-.5c0-1.922.978-3.127 1.932-3.825a5.878 5.878 0 0 1 1.568-.809Zm1.75 6.798h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25Z"></path>
        </svg>
    </button>
</p>

<div class="expand-feedback-content" id="expandContentLike">
    <ul style="text-align:center">
        <li>Thank you! We received your feedback.</li>
        <li>If you have any comments, fill in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=FAQ (api-guides/esp-ble-mesh/ble-mesh-faq)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<div class="expand-feedback-content" id="expandContent">
    <ul style="text-align:center">
        <li>We value your feedback.</li>
        <li>Let us know how we can improve this page by filling in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=FAQ (api-guides/esp-ble-mesh/ble-mesh-faq)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<br>


             </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ble-mesh-architecture.html" class="btn btn-neutral float-left" title="Architecture" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ble-mesh-terminology.html" class="btn btn-neutral float-right" title="Terminology" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016 - 2025, Espressif Systems (Shanghai) Co., Ltd.</p>
  </div>

  <ul class="footer">
        <li>
	    
            
            Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/espressif/sphinx_idf_theme">theme</a>  based on <a href="https://github.com/readthedocs/sphinx_rtd_theme">Read the Docs Sphinx Theme</a>.
         </li>
    <li class="footer-aside">
        <a href="../../esp-idf-en-v5.4.2.zip"> Download HTML</a>
    </li>

  </ul> 

</footer>
        </div>
      </div>
    </section>
  </div>

  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>