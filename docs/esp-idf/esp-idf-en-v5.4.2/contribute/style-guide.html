<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-73KGWFC8DM"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-73KGWFC8DM');
        </script><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Espressif IoT Development Framework Style Guide - ESP32 -  &mdash; ESP-IDF Programming Guide v5.4.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=a60756f2" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=949a1ff5" />
      <link rel="stylesheet" type="text/css" href="../_static/theme_overrides.css?v=851bd809" />

  
    <link rel="canonical" href="https://docs.espressif.com/projects/esp-idf/en/stable/esp32/contribute/style-guide.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=c241bbaf"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=ff8fa330"></script>
        <script src="https://wavedrom.com/skins/default.js"></script>
        <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <script src="../_static/js/theme.js"></script>

    
        

    <script type="text/javascript">
        DOCUMENTATION_OPTIONS.PAGENAME = 'contribute/style-guide';
        DOCUMENTATION_OPTIONS.PROJECT_SLUG = 'esp-idf';
        DOCUMENTATION_OPTIONS.LATEST_BRANCH_NAME = 'master';
        DOCUMENTATION_OPTIONS.VERSIONS_URL = 'https://dl.espressif.com/dl/esp-idf/idf_versions.js';
        DOCUMENTATION_OPTIONS.LANGUAGES = ["en", "zh_CN"];
        DOCUMENTATION_OPTIONS.IDF_TARGET = 'esp32';
        DOCUMENTATION_OPTIONS.HAS_IDF_TARGETS = ["esp32", "esp32s2", "esp32s3", "esp32c3", "esp32c2", "esp32c5", "esp32c6", "esp32p4"]
        DOCUMENTATION_OPTIONS.RELEASE = 'v5.4.2';
        DOCUMENTATION_OPTIONS.LANGUAGE_URL = 'en';

    </script>

    <script type="text/javascript" src="https://dl.espressif.com/dl/esp-idf/idf_versions.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Install Pre-commit Hook for ESP-IDF Project" href="install-pre-commit-hook.html" />
    <link rel="prev" title="Contributions Guide" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ESP-IDF Programming Guide
              <img src="../_static/espressif-logo.svg" class="logo" alt="Logo"/>
          </a>

          
            <div class="selectors">
              <select id="target-select" style="width: 150px;" hidden>
                <option value="" disabled selected>Choose target...</option>
              </select>
            </div>
          

          <div class="selectors">
            <select id="version-select" style="width: 150px;" hidden>
              <option value="" disabled selected>Choose version...</option>
            </select>
          </div>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../get-started/index.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hw-reference/index.html">Hardware Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-guides/index.html">API Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration-guides/index.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libraries-and-frameworks/index.html">Libraries and Frameworks</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Contributions Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#how-to-contribute">How to Contribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#before-contributing">Before Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#pull-request-process">Pull Request Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#legal-part">Legal Part</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#related-documents">Related Documents</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Espressif IoT Development Framework Style Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#about-this-guide">About This Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="#c-code-formatting">C Code Formatting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#header-file-guards">Header File Guards</a></li>
<li class="toctree-l4"><a class="reference internal" href="#include-statements">Include Statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">C++ Code Formatting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cmake-code-style">CMake Code Style</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-the-code-style-for-a-project-using-editorconfig">Configuring the Code Style for a Project Using EditorConfig</a></li>
<li class="toctree-l4"><a class="reference internal" href="#third-party-component-code-styles">Third Party Component Code Styles</a></li>
<li class="toctree-l4"><a class="reference internal" href="#documenting-code">Documenting Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#structure">Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#language-features">Language Features</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="install-pre-commit-hook.html">Install Pre-commit Hook for ESP-IDF Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="documenting-code.html">Documenting Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating-examples.html">Creating Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api-reference/template.html">API Documentation Template</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributor-agreement.html">Contributor Agreement</a></li>
<li class="toctree-l3"><a class="reference internal" href="copyright-guide.html">Copyright Header Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp-idf-tests-with-pytest.html">ESP-IDF Tests with Pytest Guide</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">ESP-IDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../COPYRIGHT.html">Copyrights and Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../languages.html">Switch Between Languages</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ESP-IDF Programming Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Contributions Guide</a></li>
      <li class="breadcrumb-item active">Espressif IoT Development Framework Style Guide</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/espressif/esp-idf/blob/v5.4.2/docs/en/contribute/style-guide.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="espressif-iot-development-framework-style-guide">
<h1>Espressif IoT Development Framework Style Guide<a class="headerlink" href="#espressif-iot-development-framework-style-guide" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="../../../../zh_CN/v5.4.2/esp32/contribute/style-guide.html">[中文]</a></p>
<section id="about-this-guide">
<h2>About This Guide<a class="headerlink" href="#about-this-guide" title="Permalink to this heading"></a></h2>
<p>Purpose of this style guide is to encourage use of common coding practices within the ESP-IDF.</p>
<p>Style guide is a set of rules which are aimed to help create readable, maintainable, and robust code. By writing code which looks the same way across the code base, we help others read and comprehend the code. By using same conventions for spaces and newlines, we reduce chances that future changes will produce huge unreadable diffs. By following common patterns for module structure and by using language features consistently, we help others understand code behavior.</p>
<p>We try to keep rules simple enough, which means that they can not cover all potential cases. In some cases one has to bend these simple rules to achieve readability, maintainability, or robustness.</p>
<p>When doing modifications to third-party code used in ESP-IDF, follow the way that particular project is written. That will help propose useful changes for merging into upstream project.</p>
</section>
<section id="c-code-formatting">
<h2>C Code Formatting<a class="headerlink" href="#c-code-formatting" title="Permalink to this heading"></a></h2>
<section id="naming">
<span id="style-guide-naming"></span><h3>Naming<a class="headerlink" href="#naming" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Any variable or function which is only used in a single source file should be declared <code class="docutils literal notranslate"><span class="pre">static</span></code>.</p></li>
<li><p>Public names (non-static variables and functions) should be namespaced with a per-component or per-unit prefix, to avoid naming collisions, e.g., <code class="docutils literal notranslate"><span class="pre">esp_vfs_register()</span></code> or <code class="docutils literal notranslate"><span class="pre">esp_console_run()</span></code>. Starting the prefix with <code class="docutils literal notranslate"><span class="pre">esp_</span></code> for Espressif-specific names is optional, but should be consistent with any other names in the same component.</p></li>
<li><p>Static variables should be prefixed with <code class="docutils literal notranslate"><span class="pre">s_</span></code> for easy identification. For example, <code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">bool</span> <span class="pre">s_invert</span></code>.</p></li>
<li><p>Avoid unnecessary abbreviations (e.g., shortening <code class="docutils literal notranslate"><span class="pre">data</span></code> to <code class="docutils literal notranslate"><span class="pre">dat</span></code>), unless the resulting name would otherwise be very long.</p></li>
</ul>
</section>
<section id="indentation">
<h3>Indentation<a class="headerlink" href="#indentation" title="Permalink to this heading"></a></h3>
<p>Use four spaces for each indentation level. Do not use tabs for indentation. Configure the editor to emit four spaces each time you press tab key.</p>
</section>
<section id="vertical-space">
<h3>Vertical Space<a class="headerlink" href="#vertical-space" title="Permalink to this heading"></a></h3>
<p>Place one empty line between functions. Do not begin or end a function with an empty line:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">function1</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">do_one_thing</span><span class="p">();</span>
<span class="w">    </span><span class="n">do_another_thing</span><span class="p">();</span>
<span class="w">                                </span><span class="c1">// INCORRECT, do not place an empty line here</span>
<span class="p">}</span>
<span class="w">                                </span><span class="c1">// place an empty line here</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">function2</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">                                </span><span class="c1">// INCORRECT, do not use an empty line here</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">var</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">SOME_CONSTANT</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">do_stuff</span><span class="p">(</span><span class="o">&amp;</span><span class="n">var</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The maximum line length is 120 characters as long as it does not seriously affect the readability.</p>
</section>
<section id="horizontal-space">
<h3>Horizontal Space<a class="headerlink" href="#horizontal-space" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Always add single space after conditional and loop keywords:</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">condition</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">    </span><span class="c1">// correct</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>

<span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">        </span><span class="c1">// correct</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="p">}</span>

<span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">CONST</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">    </span><span class="c1">// INCORRECT</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Add single space around binary operators. No space is necessary for unary operators. It is okay to drop space around multiply and divide operators:</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x0</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">y1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">y0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">x1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x0</span><span class="p">);</span><span class="w">    </span><span class="c1">// correct</span>

<span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x0</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">y1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">y0</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x0</span><span class="p">);</span><span class="w">        </span><span class="c1">// also okay</span>

<span class="kt">int</span><span class="w"> </span><span class="n">y_cur</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">y</span><span class="p">;</span><span class="w">                                         </span><span class="c1">// correct</span>
<span class="o">++</span><span class="n">y_cur</span><span class="p">;</span>

<span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y0</span><span class="o">+</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">x0</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">y1</span><span class="o">-</span><span class="n">y0</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x1</span><span class="o">-</span><span class="n">x0</span><span class="p">);</span><span class="w">                </span><span class="c1">// INCORRECT</span>
</pre></div>
</div>
<p>No space is necessary around <code class="docutils literal notranslate"><span class="pre">.</span></code> and <code class="docutils literal notranslate"><span class="pre">-&gt;</span></code> operators.</p>
<ul class="simple">
<li><p>Sometimes adding horizontal space within a line can help make code more readable. For example, you can add space to align function arguments:</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">esp_rom_gpio_connect_in_signal</span><span class="p">(</span><span class="n">PIN_CAM_D6</span><span class="p">,</span><span class="w">   </span><span class="n">I2S0I_DATA_IN14_IDX</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<span class="n">esp_rom_gpio_connect_in_signal</span><span class="p">(</span><span class="n">PIN_CAM_D7</span><span class="p">,</span><span class="w">   </span><span class="n">I2S0I_DATA_IN15_IDX</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<span class="n">esp_rom_gpio_connect_in_signal</span><span class="p">(</span><span class="n">PIN_CAM_HREF</span><span class="p">,</span><span class="w"> </span><span class="n">I2S0I_H_ENABLE_IDX</span><span class="p">,</span><span class="w">  </span><span class="nb">false</span><span class="p">);</span>
<span class="n">esp_rom_gpio_connect_in_signal</span><span class="p">(</span><span class="n">PIN_CAM_PCLK</span><span class="p">,</span><span class="w"> </span><span class="n">I2S0I_DATA_IN15_IDX</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
</pre></div>
</div>
<p>Note however that if someone goes to add a new line with a longer identifier as first argument (e.g., <code class="docutils literal notranslate"><span class="pre">PIN_CAM_VSYNC</span></code>), it will not fit. So other lines would have to be realigned, adding meaningless changes to the commit.</p>
<p>Therefore, use horizontal alignment sparingly, especially if you expect new lines to be added to the list later.</p>
<p>Never use TAB characters for horizontal alignment.</p>
<p>Never add trailing whitespace at the end of the line.</p>
</section>
<section id="braces">
<h3>Braces<a class="headerlink" href="#braces" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Function definition should have a brace on a separate line:</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// This is correct:</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span>
<span class="p">{</span>

<span class="p">}</span>

<span class="c1">// NOT like this:</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Within a function, place opening brace on the same line with conditional and loop statements:</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">condition</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">do_one</span><span class="p">();</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">other_condition</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">do_two</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="comments">
<h3>Comments<a class="headerlink" href="#comments" title="Permalink to this heading"></a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">//</span></code> for single line comments. For multi-line comments it is okay to use either <code class="docutils literal notranslate"><span class="pre">//</span></code> on each line or a <code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">*/</span></code> block.</p>
<p>Although not directly related to formatting, here are a few notes about using comments effectively.</p>
<ul class="simple">
<li><p>Do not use single comment to disable some functionality:</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">init_something</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">setup_dma</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// load_resources();                // WHY is this thing commented, asks the reader?</span>
<span class="w">    </span><span class="n">start_timer</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>If some code is no longer required, remove it completely. If you need it, you can always look it up in git history of this file. If you disable some call because of temporary reasons, with an intention to restore it in the future, add explanation on the adjacent line:</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">init_something</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">setup_dma</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// TODO: we should load resources here, but loader is not fully integrated yet.</span>
<span class="w">    </span><span class="c1">// load_resources();</span>
<span class="w">    </span><span class="n">start_timer</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Same goes for <code class="docutils literal notranslate"><span class="pre">#if</span> <span class="pre">0</span> <span class="pre">...</span> <span class="pre">#endif</span></code> blocks. Remove code block completely if it is not used. Otherwise, add comment explaining why the block is disabled. Do not use <code class="docutils literal notranslate"><span class="pre">#if</span> <span class="pre">0</span> <span class="pre">...</span> <span class="pre">#endif</span></code> or comments to store code snippets which you may need in the future.</p></li>
<li><p>Do not add trivial comments about authorship and change date. You can always look up who modified any given line using git. For example, this comment adds clutter to the code without adding any useful information:</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">init_something</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">setup_dma</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// XXX add 2016-09-01</span>
<span class="w">    </span><span class="n">init_dma_list</span><span class="p">();</span>
<span class="w">    </span><span class="n">fill_dma_item</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// end XXX add</span>
<span class="w">    </span><span class="n">start_timer</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="line-endings">
<h3>Line Endings<a class="headerlink" href="#line-endings" title="Permalink to this heading"></a></h3>
<p>Commits should only contain files with LF (Unix style) endings.</p>
<p>Windows users can configure git to check out CRLF (Windows style) endings locally and commit LF endings by setting the <code class="docutils literal notranslate"><span class="pre">core.autocrlf</span></code>. Github has a <a class="reference external" href="https://docs.github.com/en/get-started/getting-started-with-git/configuring-git-to-handle-line-endings?platform=windows">document</a> about setting this option .</p>
<p>If you accidentally have some commits in your branch that add LF endings, you can convert them to Unix by running this command in an MSYS2 or Unix terminal (change directory to the IDF working directory and ensure that the correct branch is currently checked out, beforehand):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>rebase<span class="w"> </span>--exec<span class="w"> </span><span class="s1">&#39;git diff-tree --no-commit-id --name-only -r HEAD | xargs dos2unix &amp;&amp; git commit -a --amend --no-edit --allow-empty&#39;</span><span class="w"> </span>master
</pre></div>
</div>
<p>Note that this line rebases on master, change the branch name at the end to rebase on another branch.</p>
<p>For updating a single commit, it is possible to run <code class="docutils literal notranslate"><span class="pre">dos2unix</span> <span class="pre">FILENAME</span></code> and then run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">--amend</span></code>.</p>
</section>
<section id="formatting-your-code">
<h3>Formatting Your Code<a class="headerlink" href="#formatting-your-code" title="Permalink to this heading"></a></h3>
<p>ESP-IDF uses Astyle to format source code. The configuration is stored in <a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/tools/ci/astyle-rules.yml">tools/ci/astyle-rules.yml</a> file.</p>
<p>Initially, all components are excluded from formatting checks. You can enable formatting checks for the component by removing it from <code class="docutils literal notranslate"><span class="pre">components_not_formatted_temporary</span></code> list. Then run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pre-commit<span class="w"> </span>run<span class="w"> </span>--files<span class="w"> </span>&lt;path_to_files&gt;<span class="w"> </span>astyle_py
</pre></div>
</div>
<p>Alternatively, you can run <code class="docutils literal notranslate"><span class="pre">astyle_py</span></code> manually. You can install it with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">astyle_py==VERSION</span></code>. Make sure you have the same version installed as the one specified in <a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/.pre-commit-config.yaml">.pre-commit-config.yaml</a> file. With <code class="docutils literal notranslate"><span class="pre">astyle_py</span></code> installed, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>astyle_py<span class="w"> </span>--rules<span class="o">=</span><span class="nv">$IDF_PATH</span>/tools/ci/astyle-rules.yml<span class="w"> </span>&lt;path-to-file&gt;
</pre></div>
</div>
</section>
<section id="type-definitions">
<h3>Type Definitions<a class="headerlink" href="#type-definitions" title="Permalink to this heading"></a></h3>
<p>Should be <code class="docutils literal notranslate"><span class="pre">snake_case</span></code>, ending with <code class="docutils literal notranslate"><span class="pre">_t</span></code> suffix:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">signed_32_bit_t</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="enum">
<h3>Enum<a class="headerlink" href="#enum" title="Permalink to this heading"></a></h3>
<p>Enums should be defined through the <cite>typedef</cite> and be namespaced:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">MODULE_FOO_ONE</span><span class="p">,</span>
<span class="w">    </span><span class="n">MODULE_FOO_TWO</span><span class="p">,</span>
<span class="w">    </span><span class="n">MODULE_FOO_THREE</span>
<span class="p">}</span><span class="w"> </span><span class="n">module_foo_t</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="assertions">
<span id="id1"></span><h3>Assertions<a class="headerlink" href="#assertions" title="Permalink to this heading"></a></h3>
<p>The standard C <code class="docutils literal notranslate"><span class="pre">assert()</span></code> function, defined in <code class="docutils literal notranslate"><span class="pre">assert.h</span></code> should be used to check conditions that should be true in source code. In the default configuration, an assert condition that returns <code class="docutils literal notranslate"><span class="pre">false</span></code> or <code class="docutils literal notranslate"><span class="pre">0</span></code> will call <code class="docutils literal notranslate"><span class="pre">abort()</span></code> and trigger a <a class="reference internal" href="../api-guides/fatal-errors.html"><span class="doc">Fatal Error</span></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">assert()</span></code> should only be used to detect unrecoverable errors due to a serious internal logic bug or corruption, where it is not possible for the program to continue. For recoverable errors, including errors that are possible due to invalid external input, an <a class="reference internal" href="../api-guides/error-handling.html"><span class="doc">error value should be returned</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When asserting that a value of type <code class="docutils literal notranslate"><span class="pre">esp_err_t</span></code> is equal to <code class="docutils literal notranslate"><span class="pre">ESP_OK</span></code>, use the <a class="reference internal" href="../api-guides/error-handling.html#esp-error-check-macro"><span class="std std-ref">ESP_ERROR_CHECK Macro</span></a> instead of an <code class="docutils literal notranslate"><span class="pre">assert()</span></code>.</p>
</div>
<p>It is possible to configure ESP-IDF projects with assertions disabled (see <a class="reference internal" href="../api-reference/kconfig.html#config-compiler-optimization-assertion-level"><span class="std std-ref">CONFIG_COMPILER_OPTIMIZATION_ASSERTION_LEVEL</span></a>). Therefore, functions called in an <code class="docutils literal notranslate"><span class="pre">assert()</span></code> statement should not have side-effects.</p>
<p>It is also necessary to use particular techniques to avoid &quot;variable set but not used&quot; warnings when assertions are disabled, due to code patterns such as:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">do_something</span><span class="p">();</span>
<span class="n">assert</span><span class="p">(</span><span class="n">res</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
<p>Once the <code class="docutils literal notranslate"><span class="pre">assert</span></code> is optimized out, the <code class="docutils literal notranslate"><span class="pre">res</span></code> value is unused and the compiler will warn about this. However the function <code class="docutils literal notranslate"><span class="pre">do_something()</span></code> must still be called, even if assertions are disabled.</p>
<p>When the variable is declared and initialized in a single statement, a good strategy is to cast it to <code class="docutils literal notranslate"><span class="pre">void</span></code> on a new line. The compiler will not produce a warning, and the variable can still be optimized out of the final binary:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">do_something</span><span class="p">();</span>
<span class="n">assert</span><span class="p">(</span><span class="n">res</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">res</span><span class="p">;</span>
</pre></div>
</div>
<p>If the variable is declared separately, for example if it is used for multiple assertions, then it can be declared with the GCC attribute <code class="docutils literal notranslate"><span class="pre">__attribute__((unused))</span></code>. The compiler will not produce any unused variable warnings, but the variable can still be optimized out:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="nf">__attribute__</span><span class="p">((</span><span class="n">unused</span><span class="p">));</span>

<span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">do_something</span><span class="p">();</span>
<span class="n">assert</span><span class="p">(</span><span class="n">res</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">do_something_else</span><span class="p">();</span>
<span class="n">assert</span><span class="p">(</span><span class="n">res</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="header-file-guards">
<h2>Header File Guards<a class="headerlink" href="#header-file-guards" title="Permalink to this heading"></a></h2>
<p>All public facing header files should have preprocessor guards. A pragma is preferred:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#pragma once</span>
</pre></div>
</div>
<p>over the following pattern:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#ifndef FILE_NAME_H</span>
<span class="cp">#define FILE_NAME_H</span>
<span class="p">...</span>
<span class="cp">#endif </span><span class="c1">// FILE_NAME_H</span>
</pre></div>
</div>
<p>In addition to guard macros, all C header files should have <code class="docutils literal notranslate"><span class="pre">extern</span> <span class="pre">&quot;C&quot;</span></code> guards to allow the header to be used from C++ code. Note that the following order should be used: <code class="docutils literal notranslate"><span class="pre">pragma</span> <span class="pre">once</span></code>, then any <code class="docutils literal notranslate"><span class="pre">#include</span></code> statements, then <code class="docutils literal notranslate"><span class="pre">extern</span> <span class="pre">&quot;C&quot;</span></code> guards:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#pragma once</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdint.h&gt;</span>

<span class="cp">#ifdef __cplusplus</span>
<span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="cp">#endif</span>

<span class="cm">/* declarations go here */</span>

<span class="cp">#ifdef __cplusplus</span>
<span class="p">}</span>
<span class="cp">#endif</span>
</pre></div>
</div>
</section>
<section id="include-statements">
<h2>Include Statements<a class="headerlink" href="#include-statements" title="Permalink to this heading"></a></h2>
<p>When writing <code class="docutils literal notranslate"><span class="pre">#include</span></code> statements, try to maintain the following order:</p>
<ul class="simple">
<li><p>C standard library headers.</p></li>
<li><p>Other POSIX standard headers and common extensions to them (such as <code class="docutils literal notranslate"><span class="pre">sys/queue.h</span></code>).</p></li>
<li><p>Common IDF headers (<code class="docutils literal notranslate"><span class="pre">esp_log.h</span></code>, <code class="docutils literal notranslate"><span class="pre">esp_system.h</span></code>, <code class="docutils literal notranslate"><span class="pre">esp_timer.h</span></code>, <code class="docutils literal notranslate"><span class="pre">esp_sleep.h</span></code>, etc).</p></li>
<li><p>Headers of other components, such as FreeRTOS.</p></li>
<li><p>Public headers of the current component.</p></li>
<li><p>Private headers.</p></li>
</ul>
<p>Use angle brackets for C standard library headers and other POSIX headers (<code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;stdio.h&gt;</span></code>).</p>
<p>Use double quotes for all other headers (<code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&quot;esp_log.h&quot;</span></code>).</p>
</section>
<section id="id2">
<h2>C++ Code Formatting<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h2>
<p>The same rules as for C apply. Where they are not enough, apply the following rules.</p>
<section id="file-naming">
<h3>File Naming<a class="headerlink" href="#file-naming" title="Permalink to this heading"></a></h3>
<p>C++ header files have the extension <code class="docutils literal notranslate"><span class="pre">.hpp</span></code>. C++ source files have the extension <code class="docutils literal notranslate"><span class="pre">.cpp</span></code>. The latter is important for the compiler to distinguish them from normal C source files.</p>
</section>
<section id="id3">
<h3>Naming<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Class and struct</strong> names shall be written in <code class="docutils literal notranslate"><span class="pre">CamelCase</span></code> with a capital letter as beginning. Member variables and methods shall be in <code class="docutils literal notranslate"><span class="pre">snake_case</span></code>. An exception from <code class="docutils literal notranslate"><span class="pre">CamelCase</span></code> is if the readability is severely decreased, e.g., in <code class="docutils literal notranslate"><span class="pre">GPIOOutput</span></code>, then an underscore <code class="docutils literal notranslate"><span class="pre">_</span></code> is allowed to make it more readable: <code class="docutils literal notranslate"><span class="pre">GPIO_Output</span></code>.</p></li>
<li><p><strong>Namespaces</strong> shall be in lower <code class="docutils literal notranslate"><span class="pre">snake_case</span></code>.</p></li>
<li><p><strong>Templates</strong> are specified in the line above the function declaration.</p></li>
<li><p>Interfaces in terms of object-oriented programming (OOP) shall be named without the suffix <code class="docutils literal notranslate"><span class="pre">...Interface</span></code>. Later, this makes it easier to extract interfaces from normal classes and vice versa without making a breaking change.</p></li>
</ul>
</section>
<section id="member-order-in-classes">
<h3>Member Order in Classes<a class="headerlink" href="#member-order-in-classes" title="Permalink to this heading"></a></h3>
<p>In order of precedence:</p>
<ul class="simple">
<li><p>First put the public members, then the protected, then private ones. Omit public, protected or private sections without any members.</p></li>
<li><p>First put constructors/destructors, then member functions, then member variables.</p></li>
</ul>
<p>For example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ForExample</span><span class="w"> </span><span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// first constructors, then default constructor, then destructor</span>
<span class="w">    </span><span class="n">ForExample</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">example_factor_arg</span><span class="p">);</span>
<span class="w">    </span><span class="n">ForExample</span><span class="p">();</span>
<span class="w">    </span><span class="o">~</span><span class="n">ForExample</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// then remaining pubic methods</span>
<span class="w">    </span><span class="n">set_example_factor</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">example_factor_arg</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// then public member variables</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">public_data_member</span><span class="p">;</span>

<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// first private methods</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">internal_method</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// then private member variables</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">example_factor</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="spacing">
<h3>Spacing<a class="headerlink" href="#spacing" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Do not indent inside namespaces.</p></li>
<li><p>Put <code class="docutils literal notranslate"><span class="pre">public</span></code>, <code class="docutils literal notranslate"><span class="pre">protected</span></code> and <code class="docutils literal notranslate"><span class="pre">private</span></code> labels at the same indentation level as the corresponding <code class="docutils literal notranslate"><span class="pre">class</span></code> label.</p></li>
</ul>
</section>
<section id="simple-example">
<h3>Simple Example<a class="headerlink" href="#simple-example" title="Permalink to this heading"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// file spaceship.h</span>
<span class="cp">#ifndef SPACESHIP_H_</span>
<span class="cp">#define SPACESHIP_H_</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cstdlib&gt;</span>

<span class="k">namespace</span><span class="w"> </span><span class="nn">spaceships</span><span class="w"> </span><span class="p">{</span>

<span class="k">class</span><span class="w"> </span><span class="nc">SpaceShip</span><span class="w"> </span><span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">SpaceShip</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">crew</span><span class="p">);</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="nf">get_crew_size</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>

<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">crew</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span><span class="w"> </span><span class="nc">SpaceShuttle</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">SpaceShip</span><span class="w"> </span><span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">SpaceShuttle</span><span class="p">();</span>
<span class="p">};</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Sojuz</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">SpaceShip</span><span class="w"> </span><span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">Sojuz</span><span class="p">();</span>
<span class="p">};</span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<span class="k">class</span><span class="w"> </span><span class="nc">CargoShip</span><span class="w"> </span><span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">CargoShip</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cargo</span><span class="p">);</span>

<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">T</span><span class="w"> </span><span class="n">cargo</span><span class="p">;</span>
<span class="p">};</span>

<span class="p">}</span><span class="w"> </span><span class="c1">// namespace spaceships</span>

<span class="cp">#endif </span><span class="c1">// SPACESHIP_H_</span>

<span class="c1">// file spaceship.cpp</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;spaceship.h&quot;</span>

<span class="k">namespace</span><span class="w"> </span><span class="nn">spaceships</span><span class="w"> </span><span class="p">{</span>

<span class="c1">// Putting the curly braces in the same line for constructors is OK if it only initializes</span>
<span class="c1">// values in the initializer list</span>
<span class="n">SpaceShip</span><span class="o">::</span><span class="n">SpaceShip</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">crew</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">crew</span><span class="p">(</span><span class="n">crew</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>

<span class="kt">size_t</span><span class="w"> </span><span class="n">SpaceShip</span><span class="o">::</span><span class="n">get_crew_size</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">crew</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">SpaceShuttle</span><span class="o">::</span><span class="n">SpaceShuttle</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">SpaceShip</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// doing further initialization</span>
<span class="p">}</span>

<span class="n">Sojuz</span><span class="o">::</span><span class="n">Sojuz</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">SpaceShip</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// doing further initialization</span>
<span class="p">}</span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<span class="n">CargoShip</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">CargoShip</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cargo</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">cargo</span><span class="p">(</span><span class="n">cargo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>

<span class="p">}</span><span class="w"> </span><span class="c1">// namespace spaceships</span>
</pre></div>
</div>
</section>
</section>
<section id="cmake-code-style">
<h2>CMake Code Style<a class="headerlink" href="#cmake-code-style" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Indent with four spaces.</p></li>
<li><p>Maximum line length 120 characters. When splitting lines, try to focus on readability where possible (for example, by pairing up keyword/argument pairs on individual lines).</p></li>
<li><p>Do not put anything in the optional parentheses after <code class="docutils literal notranslate"><span class="pre">endforeach()</span></code>, <code class="docutils literal notranslate"><span class="pre">endif()</span></code>, etc.</p></li>
<li><p>Use lowercase (<code class="docutils literal notranslate"><span class="pre">with_underscores</span></code>) for command, function, and macro names.</p></li>
<li><p>For locally scoped variables, use lowercase (<code class="docutils literal notranslate"><span class="pre">with_underscores</span></code>).</p></li>
<li><p>For globally scoped variables, use uppercase (<code class="docutils literal notranslate"><span class="pre">WITH_UNDERSCORES</span></code>).</p></li>
<li><p>Otherwise follow the defaults of the <a class="reference external" href="https://github.com/richq/cmake-lint">cmake-lint</a> project.</p></li>
</ul>
</section>
<section id="configuring-the-code-style-for-a-project-using-editorconfig">
<h2>Configuring the Code Style for a Project Using EditorConfig<a class="headerlink" href="#configuring-the-code-style-for-a-project-using-editorconfig" title="Permalink to this heading"></a></h2>
<p>EditorConfig helps developers define and maintain consistent coding styles between different editors and IDEs. The EditorConfig project consists of a file format for defining coding styles and a collection of text editor plugins that enable editors to read the file format and adhere to defined styles. EditorConfig files are easy to read and they work nicely with version control systems.</p>
<p>For more information, see <a class="reference external" href="https://editorconfig.org">EditorConfig</a> Website.</p>
</section>
<section id="third-party-component-code-styles">
<h2>Third Party Component Code Styles<a class="headerlink" href="#third-party-component-code-styles" title="Permalink to this heading"></a></h2>
<p>ESP-IDF integrates a number of third party components, which may have different code styles.</p>
<section id="freertos">
<h3>FreeRTOS<a class="headerlink" href="#freertos" title="Permalink to this heading"></a></h3>
<p>The code style adopted by FreeRTOS is described in the <a class="reference external" href="https://www.freertos.org/FreeRTOS-Coding-Standard-and-Style-Guide.html#StyleGuide">FreeRTOS style guide</a>. Formatting of FreeRTOS source code is automated using <a class="reference external" href="https://github.com/uncrustify/uncrustify">Uncrustify</a>, thus a copy of the FreeRTOS code style's Uncrustify configuration (<code class="docutils literal notranslate"><span class="pre">uncrustify.cfg</span></code>) is stored within ESP-IDF FreeRTOS component.</p>
<p>If a FreeRTOS source file is modified, the updated file can be formatted again by following the steps below:</p>
<ol class="arabic simple">
<li><p>Ensure that Uncrustify (v0.69.0) is installed on your system.</p></li>
<li><p>Run the following command on the updated FreeRTOS source file (where <code class="docutils literal notranslate"><span class="pre">source.c</span></code> is the path to the source file that requires formatting).</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uncrustify<span class="w"> </span>-c<span class="w"> </span><span class="nv">$IDF_PATH</span>/components/freertos/FreeRTOS-Kernel/uncrustify.cfg<span class="w"> </span>--replace<span class="w"> </span>source.c<span class="w"> </span>--no-backup
</pre></div>
</div>
</section>
</section>
<section id="documenting-code">
<h2>Documenting Code<a class="headerlink" href="#documenting-code" title="Permalink to this heading"></a></h2>
<p>Please see the guide here: <a class="reference internal" href="documenting-code.html"><span class="doc">Documenting Code</span></a>.</p>
</section>
<section id="structure">
<h2>Structure<a class="headerlink" href="#structure" title="Permalink to this heading"></a></h2>
<p>To be written.</p>
</section>
<section id="language-features">
<h2>Language Features<a class="headerlink" href="#language-features" title="Permalink to this heading"></a></h2>
<p>To be written.</p>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
             <div class="articleComments">

<style>
    .expand-feedback-content {
        display: none;
    }
    .click-like-or-dislike {
        background-color: #d3d3d3;
        pointer-events: none;
    }
</style>

<script>
    function submitFeedbackForm(user_likes_document) {
        // Send to GA4 the user reaction
        gtag('event', 'user_reaction', {
            'user_likes_document': user_likes_document
        });

        if (user_likes_document === 1) {
            document.querySelector('.like-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContentLike").style.display = 'block';
        } else {
            document.querySelector('.dislike-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContent").style.display = 'block';
        }

        document.querySelector('.like-btn').style.pointerEvents = 'none';
        document.querySelector('.dislike-btn').style.pointerEvents = 'none';
    }
</script>

<hr>

<p style="text-align:center"><strong>Was this page helpful?</strong></p>
<p style="text-align:center">
    <button class="like-btn" onclick="submitFeedbackForm(1)">
        <svg aria-hidden="true" focusable="false" class="color-fg-muted" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M8.834.066c.763.087 1.5.295 2.01.884.505.581.656 1.378.656 2.3 0 .467-.087 1.119-.157 1.637L11.328 5h1.422c.603 0 1.174.085 1.668.333.508.254.911.679 1.137 1.2.453.998.438 2.447.188 4.316l-.04.306c-.105.79-.195 1.473-.313 2.033-.131.63-.315 1.209-.668 1.672C13.97 15.847 12.706 16 11 16c-1.848 0-3.234-.333-4.388-.653-.165-.045-.323-.09-.475-.133-.658-.186-1.2-.34-1.725-.415A1.75 1.75 0 0 1 2.75 16h-1A1.75 1.75 0 0 1 0 14.25v-7.5C0 5.784.784 5 1.75 5h1a1.75 1.75 0 0 1 1.514.872c.258-.105.59-.268.918-.508C5.853 4.874 6.5 4.079 6.5 2.75v-.5c0-1.202.994-2.337 2.334-2.184ZM4.5 13.3c.705.088 1.39.284 2.072.478l.441.125c1.096.305 2.334.598 3.987.598 1.794 0 2.28-.223 2.528-.549.147-.193.276-.505.394-1.07.105-.502.188-1.124.295-1.93l.04-.3c.25-1.882.189-2.933-.068-3.497a.921.921 0 0 0-.442-.48c-.208-.104-.52-.174-.997-.174H11c-.686 0-1.295-.577-1.206-1.336.023-.192.05-.39.076-.586.065-.488.13-.97.13-1.328 0-.809-.144-1.15-.288-1.316-.137-.158-.402-.304-1.048-.378C8.357 1.521 8 1.793 8 2.25v.5c0 1.922-.978 3.128-1.933 3.825a5.831 5.831 0 0 1-1.567.81ZM2.75 6.5h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
    </button>
    <button class="dislike-btn" onclick="submitFeedbackForm(0)">
        <svg aria-hidden="true" focusable="false" class="" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M7.083 15.986c-.763-.087-1.499-.295-2.011-.884-.504-.581-.655-1.378-.655-2.299 0-.468.087-1.12.157-1.638l.015-.112H3.167c-.603 0-1.174-.086-1.669-.334a2.415 2.415 0 0 1-1.136-1.2c-.454-.998-.438-2.447-.188-4.316l.04-.306C.32 4.108.41 3.424.526 2.864c.132-.63.316-1.209.669-1.672C1.947.205 3.211.053 4.917.053c1.848 0 3.234.332 4.388.652l.474.133c.658.187 1.201.341 1.726.415a1.75 1.75 0 0 1 1.662-1.2h1c.966 0 1.75.784 1.75 1.75v7.5a1.75 1.75 0 0 1-1.75 1.75h-1a1.75 1.75 0 0 1-1.514-.872c-.259.105-.59.268-.919.508-.671.491-1.317 1.285-1.317 2.614v.5c0 1.201-.994 2.336-2.334 2.183Zm4.334-13.232c-.706-.089-1.39-.284-2.072-.479l-.441-.125c-1.096-.304-2.335-.597-3.987-.597-1.794 0-2.28.222-2.529.548-.147.193-.275.505-.393 1.07-.105.502-.188 1.124-.295 1.93l-.04.3c-.25 1.882-.19 2.933.067 3.497a.923.923 0 0 0 .443.48c.208.104.52.175.997.175h1.75c.685 0 1.295.577 1.205 1.335-.022.192-.049.39-.075.586-.066.488-.13.97-.13 1.329 0 .808.144 1.15.288 1.316.137.157.401.303 1.048.377.307.035.664-.237.664-.693v-.5c0-1.922.978-3.127 1.932-3.825a5.878 5.878 0 0 1 1.568-.809Zm1.75 6.798h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25Z"></path>
        </svg>
    </button>
</p>

<div class="expand-feedback-content" id="expandContentLike">
    <ul style="text-align:center">
        <li>Thank you! We received your feedback.</li>
        <li>If you have any comments, fill in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=Espressif IoT Development Framework Style Guide (contribute/style-guide)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<div class="expand-feedback-content" id="expandContent">
    <ul style="text-align:center">
        <li>We value your feedback.</li>
        <li>Let us know how we can improve this page by filling in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=Espressif IoT Development Framework Style Guide (contribute/style-guide)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<br>


             </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Contributions Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="install-pre-commit-hook.html" class="btn btn-neutral float-right" title="Install Pre-commit Hook for ESP-IDF Project" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016 - 2025, Espressif Systems (Shanghai) Co., Ltd.</p>
  </div>

  <ul class="footer">
        <li>
	    
            
            Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/espressif/sphinx_idf_theme">theme</a>  based on <a href="https://github.com/readthedocs/sphinx_rtd_theme">Read the Docs Sphinx Theme</a>.
         </li>
    <li class="footer-aside">
        <a href="../esp-idf-en-v5.4.2.zip"> Download HTML</a>
    </li>

  </ul> 

</footer>
        </div>
      </div>
    </section>
  </div>

  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>