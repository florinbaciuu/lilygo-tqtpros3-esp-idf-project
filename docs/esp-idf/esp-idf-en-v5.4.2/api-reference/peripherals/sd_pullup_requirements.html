<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-73KGWFC8DM"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-73KGWFC8DM');
        </script><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SD Pull-up Requirements - ESP32 -  &mdash; ESP-IDF Programming Guide v5.4.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=a60756f2" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=949a1ff5" />
      <link rel="stylesheet" type="text/css" href="../../_static/theme_overrides.css?v=851bd809" />

  
    <link rel="canonical" href="https://docs.espressif.com/projects/esp-idf/en/stable/esp32/api-reference/peripherals/sd_pullup_requirements.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=c241bbaf"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=ff8fa330"></script>
        <script src="https://wavedrom.com/skins/default.js"></script>
        <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <script src="../../_static/js/theme.js"></script>

    
        

    <script type="text/javascript">
        DOCUMENTATION_OPTIONS.PAGENAME = 'api-reference/peripherals/sd_pullup_requirements';
        DOCUMENTATION_OPTIONS.PROJECT_SLUG = 'esp-idf';
        DOCUMENTATION_OPTIONS.LATEST_BRANCH_NAME = 'master';
        DOCUMENTATION_OPTIONS.VERSIONS_URL = 'https://dl.espressif.com/dl/esp-idf/idf_versions.js';
        DOCUMENTATION_OPTIONS.LANGUAGES = ["en", "zh_CN"];
        DOCUMENTATION_OPTIONS.IDF_TARGET = 'esp32';
        DOCUMENTATION_OPTIONS.HAS_IDF_TARGETS = ["esp32", "esp32s2", "esp32s3", "esp32c3", "esp32c2", "esp32c5", "esp32c6", "esp32p4"]
        DOCUMENTATION_OPTIONS.RELEASE = 'v5.4.2';
        DOCUMENTATION_OPTIONS.LANGUAGE_URL = 'en';

    </script>

    <script type="text/javascript" src="https://dl.espressif.com/dl/esp-idf/idf_versions.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="SDMMC Host Driver" href="sdmmc_host.html" />
    <link rel="prev" title="Remote Control Transceiver (RMT)" href="rmt.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ESP-IDF Programming Guide
              <img src="../../_static/espressif-logo.svg" class="logo" alt="Logo"/>
          </a>

          
            <div class="selectors">
              <select id="target-select" style="width: 150px;" hidden>
                <option value="" disabled selected>Choose target...</option>
              </select>
            </div>
          

          <div class="selectors">
            <select id="version-select" style="width: 150px;" hidden>
              <option value="" disabled selected>Choose version...</option>
            </select>
          </div>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Get Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-conventions.html">API Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/index.html">Application Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth® API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error-codes.html">Error Codes Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/index.html">Networking APIs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Peripherals API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="adc_oneshot.html">Analog to Digital Converter (ADC) Oneshot Mode Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="adc_continuous.html">Analog to Digital Converter (ADC) Continuous Mode Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="adc_calibration.html">Analog to Digital Converter (ADC) Calibration Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="clk_tree.html">Clock Tree</a></li>
<li class="toctree-l3"><a class="reference internal" href="dac.html">Digital To Analog Converter (DAC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="gpio.html">GPIO &amp; RTC GPIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="gptimer.html">General Purpose Timer (GPTimer)</a></li>
<li class="toctree-l3"><a class="reference internal" href="i2c.html">Inter-Integrated Circuit (I2C)</a></li>
<li class="toctree-l3"><a class="reference internal" href="i2s.html">Inter-IC Sound (I2S)</a></li>
<li class="toctree-l3"><a class="reference internal" href="lcd/index.html">LCD</a></li>
<li class="toctree-l3"><a class="reference internal" href="ledc.html">LED Control (LEDC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="mcpwm.html">Motor Control Pulse Width Modulator (MCPWM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="pcnt.html">Pulse Counter (PCNT)</a></li>
<li class="toctree-l3"><a class="reference internal" href="rmt.html">Remote Control Transceiver (RMT)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">SD Pull-up Requirements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview-of-compatibility">Overview of Compatibility</a></li>
<li class="toctree-l4"><a class="reference internal" href="#solutions">Solutions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#related-information">Related Information</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sdmmc_host.html">SDMMC Host Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdspi_host.html">SD SPI Host Driver</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="sdio_slave.html">SDIO Card Slave Driver</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="sdio_slave.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="sdio_slave.html#application-example">Application Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="sdio_slave.html#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sdm.html">Sigma-Delta Modulation (SDM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="spi_flash/index.html">SPI Flash API</a></li>
<li class="toctree-l3"><a class="reference internal" href="spi_master.html">SPI Master Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="spi_slave.html">SPI Slave Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="touch_pad.html">Touch Sensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="twai.html">Two-Wire Automotive Interface (TWAI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="uart.html">Universal Asynchronous Receiver/Transmitter (UART)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../kconfig.html">Project Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/index.html">Provisioning API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">Storage API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system/index.html">System API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hw-reference/index.html">Hardware Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-guides/index.html">API Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration-guides/index.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries-and-frameworks/index.html">Libraries and Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contributions Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">ESP-IDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COPYRIGHT.html">Copyrights and Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../languages.html">Switch Between Languages</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ESP-IDF Programming Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="index.html">Peripherals API</a></li>
      <li class="breadcrumb-item active">SD Pull-up Requirements</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/espressif/esp-idf/blob/v5.4.2/docs/en/api-reference/peripherals/sd_pullup_requirements.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sd-pull-up-requirements">
<h1>SD Pull-up Requirements<a class="headerlink" href="#sd-pull-up-requirements" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="../../../../../zh_CN/v5.4.2/esp32/api-reference/peripherals/sd_pullup_requirements.html">[中文]</a></p>
<p>Espressif hardware products are designed for multiple use cases which may require different pull states on pins. For this reason, the pull state of particular pins on certain products needs to be adjusted to provide the pull-ups required in the SD bus.</p>
<p>SD pull-up requirements apply to cases where ESP32 uses the SPI or SDMMC controller to communicate with SD cards. When an SD card is operating in SPI mode or 1-bit SD mode, the CMD and DATA (DAT0 - DAT3) lines of the SD bus must be pulled up by 10 kΩ resistors. SD cards and SDIO devices should also have pull-ups on all above-mentioned lines (regardless of whether these lines are connected to the host) in order to prevent them from entering a wrong state.</p>
<p>By default, the MTDI bootstrapping pin is incompatible with the DAT2 line pull-up if the flash voltage is 3.3 V. For more information, see <a class="reference internal" href="#mtdi-strapping-pin"><span class="std std-ref">MTDI Strapping Pin</span></a> below.</p>
<p>This document has the following structure:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#compatibility-overview-espressif-hw-sdio"><span class="std std-ref">Overview of Compatibility</span></a> between the default pull states on pins of Espressif's products and the states required by the SD bus</p></li>
<li><p><a class="reference internal" href="#sdio-solutions"><span class="std std-ref">Solutions</span></a> - ideas on how to resolve compatibility issues</p></li>
<li><p><a class="reference internal" href="#related-info-sdio"><span class="std std-ref">Related Information</span></a> - other relevant information</p></li>
</ul>
<section id="overview-of-compatibility">
<span id="compatibility-overview-espressif-hw-sdio"></span><h2>Overview of Compatibility<a class="headerlink" href="#overview-of-compatibility" title="Permalink to this heading"></a></h2>
<p>This section provides an overview of compatibility issues that might occur when using SDIO (secure digital input output). Since the SD bus needs to be connected to pull-ups, these issues should be resolved regardless of whether they are related to master (host) or slave (device). Each issue has links to its respective solution. A solution for a host and device may differ.</p>
<section id="systems-on-a-chip-socs">
<h3>Systems on a Chip (SoCs)<a class="headerlink" href="#systems-on-a-chip-socs" title="Permalink to this heading"></a></h3>
<ul>
<li><p>ESP32 (except for D2WD versions, see <a class="reference external" href="https://www.espressif.com/sites/default/files/documentation/esp32_datasheet_en.pdf">ESP32 datasheet</a>):</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#sd-pull-up-no-pull-ups"><span class="std std-ref">No Pull-ups</span></a></p></li>
<li><p><a class="reference internal" href="#strapping-conflicts-dat2"><span class="std std-ref">Conflicts Between Bootstrap and SDIO on DAT2</span></a> for models with 3.3 V flash chip</p></li>
</ul>
</div></blockquote>
</li>
<li><p>ESP32-D2WD:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#sd-pull-up-no-pull-ups"><span class="std std-ref">No Pull-ups</span></a></p></li>
<li><p><a class="reference internal" href="#no-pull-up-on-gpio12"><span class="std std-ref">No Pull-up on GPIO12</span></a></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="systems-in-packages-sip">
<h3>Systems in Packages (SIP)<a class="headerlink" href="#systems-in-packages-sip" title="Permalink to this heading"></a></h3>
<ul>
<li><p>ESP32-PICO-D4:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#sd-pull-up-no-pull-ups"><span class="std std-ref">No Pull-ups</span></a></p></li>
<li><p><a class="reference internal" href="#strapping-conflicts-dat2"><span class="std std-ref">Conflicts Between Bootstrap and SDIO on DAT2</span></a></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="modules">
<h3>Modules<a class="headerlink" href="#modules" title="Permalink to this heading"></a></h3>
<ul>
<li><p>ESP32-WROOM-32 Series, including ESP32-WROOM-32, ESP32-WROOM-32D, ESP32-WROOM-32U, and ESP32-SOLO-1</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#sd-pull-up-no-pull-ups"><span class="std std-ref">No Pull-ups</span></a></p></li>
<li><p><a class="reference internal" href="#strapping-conflicts-dat2"><span class="std std-ref">Conflicts Between Bootstrap and SDIO on DAT2</span></a></p></li>
</ul>
</div></blockquote>
</li>
<li><p>ESP32-WROVER Series, including ESP32-WROVER and ESP32-WROVER-I</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#sd-pull-up-no-pull-ups"><span class="std std-ref">No Pull-ups</span></a></p></li>
</ul>
</div></blockquote>
</li>
<li><p>ESP32-WROVER-B Series, including ESP32-WROVER-B and ESP32-WROVER-IB</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#sd-pull-up-no-pull-ups"><span class="std std-ref">No Pull-ups</span></a></p></li>
<li><p><a class="reference internal" href="#strapping-conflicts-dat2"><span class="std std-ref">Conflicts Between Bootstrap and SDIO on DAT2</span></a></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="development-boards">
<span id="sdio-dev-kits"></span><h3>Development Boards<a class="headerlink" href="#development-boards" title="Permalink to this heading"></a></h3>
<ul>
<li><p>ESP32-PICO-KIT, including PICO-KIT v4.1, v4.0, and v3</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#sd-pull-up-no-pull-ups"><span class="std std-ref">No Pull-ups</span></a></p></li>
<li><p><a class="reference internal" href="#strapping-conflicts-dat2"><span class="std std-ref">Conflicts Between Bootstrap and SDIO on DAT2</span></a></p></li>
<li><p><a class="reference internal" href="#gpio2-strapping-pin"><span class="std std-ref">Download Mode Not Working (minor issue)</span></a></p></li>
</ul>
</div></blockquote>
</li>
<li><p>ESP32-DevKitC, including ESP32-DevKitC v4 and v2</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#sd-pull-up-no-pull-ups"><span class="std std-ref">No Pull-ups</span></a></p></li>
<li><p><a class="reference internal" href="#strapping-conflicts-dat2"><span class="std std-ref">Conflicts Between Bootstrap and SDIO on DAT2</span></a></p></li>
<li><p><a class="reference internal" href="#gpio2-strapping-pin"><span class="std std-ref">Download Mode Not Working (minor issue)</span></a></p></li>
</ul>
</div></blockquote>
</li>
<li><p>ESP-WROVER-KIT</p>
<blockquote>
<div><ul class="simple">
<li><p>Required pull-ups are provided</p></li>
<li><p><a class="reference internal" href="#pull-up-conflicts-on-gpio13"><span class="std std-ref">Pull-up Conflicts on GPIO13</span></a> (v4.1, v3, v2, and v1)</p></li>
<li><p><a class="reference internal" href="#strapping-conflicts-dat2"><span class="std std-ref">Conflicts Between Bootstrap and SDIO on DAT2</span></a> (v4.1, v2, and v1)</p></li>
<li><p><a class="reference internal" href="#gpio2-strapping-pin"><span class="std std-ref">Download Mode Not Working (minor issue)</span></a> (v2, v1)</p></li>
</ul>
<p>You can determine the version of your ESP23-WROVER-KIT by checking which module is mounted on it:</p>
<ul class="simple">
<li><p>ESP32-WROVER-B on v4.1</p></li>
<li><p>ESP32-WROVER on v3</p></li>
<li><p>ESP32-WROOM-32 on v1 and v2</p></li>
</ul>
</div></blockquote>
</li>
<li><p>ESP32-LyraTD-MSC</p>
<blockquote>
<div><ul class="simple">
<li><p>Required pull-ups are provided</p></li>
<li><p><a class="reference internal" href="#strapping-conflicts-dat2"><span class="std std-ref">Conflicts Between Bootstrap and SDIO on DAT2</span></a></p></li>
</ul>
</div></blockquote>
</li>
<li><p>ESP32-LyraT</p>
<blockquote>
<div><ul class="simple">
<li><p>Required pull-ups are provided</p></li>
<li><p><a class="reference internal" href="#pull-up-conflicts-on-gpio13"><span class="std std-ref">Pull-up Conflicts on GPIO13</span></a></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="non-espressif-hosts">
<h3>Non-Espressif Hosts<a class="headerlink" href="#non-espressif-hosts" title="Permalink to this heading"></a></h3>
<p>Please make sure that your SDIO host provides necessary pull-ups for all SD bus signals.</p>
</section>
</section>
<section id="solutions">
<span id="sdio-solutions"></span><h2>Solutions<a class="headerlink" href="#solutions" title="Permalink to this heading"></a></h2>
<section id="no-pull-ups">
<span id="sd-pull-up-no-pull-ups"></span><h3>No Pull-ups<a class="headerlink" href="#no-pull-ups" title="Permalink to this heading"></a></h3>
<p>When using a development board without pull-ups:</p>
<ul class="simple">
<li><p>If your host and slave device are on separate boards, replace one of them with a board that has pull-ups. For the list of Espressif's development boards with pull-ups, go to <a class="reference internal" href="#sdio-dev-kits"><span class="std std-ref">Development Boards</span></a>.</p></li>
<li><p>Attach external pull-ups by connecting each pin which requires a pull-up to VDD via a 10 kΩ resistor.</p></li>
</ul>
</section>
<section id="pull-up-conflicts-on-gpio13">
<span id="id2"></span><h3>Pull-up Conflicts on GPIO13<a class="headerlink" href="#pull-up-conflicts-on-gpio13" title="Permalink to this heading"></a></h3>
<p>If DAT3 of your device is not properly pulled up, you have the following options:</p>
<ul class="simple">
<li><p>Use 1-bit SD mode and tie the device's DAT3 to VDD</p></li>
<li><p>Use SPI mode</p></li>
<li><dl class="simple">
<dt>Perform one of the following actions on the GPIO13 pin:</dt><dd><ul>
<li><p>Remove the pull-down resistors</p></li>
<li><p>Attach a pull-up resistor of less than 5 kΩ (2 kΩ suggested)</p></li>
<li><p>Pull it up or drive it high either by using the host or with 3.3 V on VDD in 1-bit SD mode</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="conflicts-between-bootstrap-and-sdio-on-dat2">
<span id="strapping-conflicts-dat2"></span><h3>Conflicts Between Bootstrap and SDIO on DAT2<a class="headerlink" href="#conflicts-between-bootstrap-and-sdio-on-dat2" title="Permalink to this heading"></a></h3>
<p>There is a conflict between the boot strapping requirements of the ESP32 and the SDIO protocol. For details, see <a class="reference internal" href="#mtdi-strapping-pin"><span class="std std-ref">MTDI Strapping Pin</span></a>.</p>
<p>To resolve the conflict, you have the following options:</p>
<ol class="arabic simple">
<li><p>(Recommended) Burn the flash voltage selection eFuses. This permanently configures the internal regulator's output voltage to 3.3 V, and GPIO12 will not be used as a bootstrapping pin. After that, connect a pull-up resistor to GPIO12.</p></li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Burning eFuses is irreversible! The issue list above might be out of date, so please make sure that the module you are burning has a 3.3 V flash chip by checking the information on <a class="reference external" href="https://www.espressif.com/">https://www.espressif.com/</a>. If you burn the 3.3 V eFuses on a module with a 1.8 V flash chip, the module will stop functioning.</p>
</div>
<p>If you are sure that you need to irreversibly burn eFuses, go to your ESP-IDF directory and run the following command using <code class="docutils literal notranslate"><span class="pre">espefuse.py</span></code> tool:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>components/esptool_py/esptool/espefuse.py<span class="w"> </span>set_flash_voltage<span class="w"> </span><span class="m">3</span>.3V
</pre></div>
</div>
<p>This command burns the <code class="docutils literal notranslate"><span class="pre">XPD_SDIO_TIEH</span></code>, <code class="docutils literal notranslate"><span class="pre">XPD_SDIO_FORCE</span></code>, and <code class="docutils literal notranslate"><span class="pre">XPD_SDIO_REG</span></code> eFuses. After all the three eFuses are burned to value 1, the internal VDD_SDIO flash voltage regulator is permanently set to 3.3 V. You will see the following log if the burning succeeds:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>espefuse.py<span class="w"> </span>v2.6
Connecting....

Enable<span class="w"> </span>internal<span class="w"> </span>flash<span class="w"> </span>voltage<span class="w"> </span>regulator<span class="w"> </span><span class="o">(</span>VDD_SDIO<span class="o">)</span><span class="w"> </span>to<span class="w"> </span><span class="m">3</span>.3<span class="w"> </span>V.
The<span class="w"> </span>following<span class="w"> </span>eFuses<span class="w"> </span>are<span class="w"> </span>burned:<span class="w"> </span>XPD_SDIO_FORCE,<span class="w"> </span>XPD_SDIO_REG,<span class="w"> </span>XPD_SDIO_TIEH.
This<span class="w"> </span>is<span class="w"> </span>an<span class="w"> </span>irreversible<span class="w"> </span>operation.
Type<span class="w"> </span><span class="s1">&#39;BURN&#39;</span><span class="w"> </span><span class="o">(</span>all<span class="w"> </span>capitals<span class="o">)</span><span class="w"> </span>to<span class="w"> </span><span class="k">continue</span>.
BURN
VDD_SDIO<span class="w"> </span>setting<span class="w"> </span>complete.
</pre></div>
</div>
<p>To check the status of the eFuses, run:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>idf.py efuse-summary
</pre></div>
</div>
<p>If running from an automated flashing script, it is better to use standalone eFuse tool <code class="docutils literal notranslate"><span class="pre">espefuse.py</span></code>. This tool also has an option <code class="docutils literal notranslate"><span class="pre">--do-not-confirm</span></code> to burn eFuses without confirmation.</p>
<p>For more details, see <strong>ESP32 Technical Reference Manual</strong> [<a class="reference external" href="https://www.espressif.com/sites/default/files/documentation/esp32_technical_reference_manual_en.pdf#efuse">PDF</a>].</p>
<ol class="arabic simple" start="2">
<li><p><strong>If using 1-bit SD mode or SPI mode</strong>, disconnect the DAT2 pin and make sure it is pulled high. For this, you have the following options:</p></li>
</ol>
<ul class="simple">
<li><p>Leave the host's DAT2 floating and directly connect the slave's DAT2 to VDD.</p></li>
<li><p>For a slave device, build a firmware with the option <code class="docutils literal notranslate"><span class="pre">SDIO_SLAVE_FLAG_DAT2_DISABLED</span></code> and re-flash your device. This option helps avoid slave detecting on the DAT2 line. Note that 4-bit SD mode is no longer supported by the standard Card Common Control Register (CCCR); however, the host is not aware of that. The use of 4-bit SD mode has to be disabled on the host's side.</p></li>
</ul>
</section>
<section id="no-pull-up-on-gpio12">
<span id="id3"></span><h3>No Pull-up on GPIO12<a class="headerlink" href="#no-pull-up-on-gpio12" title="Permalink to this heading"></a></h3>
<p>Your module is compatible with the SDIO protocol. Just connect GPIO12 to VDD via a 10 kΩ resistor.</p>
</section>
<section id="download-mode-not-working-minor-issue">
<span id="gpio2-strapping-pin"></span><h3>Download Mode Not Working (minor issue)<a class="headerlink" href="#download-mode-not-working-minor-issue" title="Permalink to this heading"></a></h3>
<p>When the GPIO2 pin is pulled high in accordance with the SD pull-up requirements, you can not enter download mode because GPIO2 is a bootstrapping pin which in this case must be pulled low.</p>
<p>There are following solutions:</p>
<ul>
<li><p>For boards that require shorting the GPIO0 and GPIO2 pins with a jumper, put the jumper in place, and the auto-reset circuit pulls GPIO2 low along with GPIO0 before entering download mode.</p></li>
<li><p>For boards with components attached to their GPIO2 pin (such as pull-down resistors and/or LEDs), check the schematic of your development board for anything connected to GPIO2.</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>LEDs</strong> would not affect operation in most cases.</p></li>
<li><p><strong>Pull-down resistors</strong> can interfere with DAT0 signals and must be removed.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>If above solutions do not work for you, please determine if it is the host or slave device that has pull-ups affecting their GPIO2, then locate these pull-ups and remove them.</p>
</section>
</section>
<section id="related-information">
<span id="related-info-sdio"></span><h2>Related Information<a class="headerlink" href="#related-information" title="Permalink to this heading"></a></h2>
<section id="mtdi-strapping-pin">
<span id="id4"></span><h3>MTDI Strapping Pin<a class="headerlink" href="#mtdi-strapping-pin" title="Permalink to this heading"></a></h3>
<p>MTDI (GPIO12) is used as a bootstrapping pin to select the output voltage of an internal regulator (VDD_SDIO) which powers the flash chip. This pin has an internal pull-down, so, if left unconnected, it will read low level at startup, which leads to selecting the default 3.3 V operation.</p>
<p>All ESP32-WROVER modules, excluding ESP32-WROVER-B, use 1.8 V flash and have internal pull-ups on GPIO12. Other modules that use 3.3 V flash have no pull-ups on the GPIO12 pin, and this pin is slightly pulled down internally.</p>
<p>When adding a pull-up to this pin for SD card operation, consider the following:</p>
<ul class="simple">
<li><p>For boards that do not use the internal regulator (VDD_SDIO) to power flash, GPIO12 can be pulled high.</p></li>
<li><p>For boards using 1.8 V flash chips, GPIO12 needs to be pulled high at reset. This is fully compatible with the SD card operation.</p></li>
<li><p>On boards using the internal regulator and a 3.3 V flash chip, GPIO12 must be pulled low at reset. This is incompatible with the SD card operation. For reference information on compatibility of Espressif's boards with the SD card operation, see <a class="reference internal" href="#compatibility-overview-espressif-hw-sdio"><span class="std std-ref">Overview of Compatibility</span></a>.</p></li>
</ul>
</section>
<section id="internal-pull-ups-and-strapping-requirements">
<h3>Internal Pull-ups and Strapping Requirements<a class="headerlink" href="#internal-pull-ups-and-strapping-requirements" title="Permalink to this heading"></a></h3>
<p>Using external resistors is always preferable. However, Espressif's products have internal weak pull-up and pull-down resistors which can be enabled and used instead of external ones. Please keep in mind that this solution can not guarantee reliable SDIO communication.</p>
<p>With that said, the information about these internal pull-ups and strapping requirements can still be useful. Espressif hardware products have different weak internal pull-ups and pull-downs connected to CMD and DATA pins. The table below shows the default pull-up and pull-down states of the CMD and DATA pins.</p>
<p>The following abbreviations are used in the table:</p>
<ul class="simple">
<li><p><strong>WPU</strong>: Weak pull-up inside the SoC</p></li>
<li><p><strong>WPD</strong>: Weak pull-down inside the SoC</p></li>
<li><p><strong>PU</strong>: Pull-up inside Espressif modules but outside the SoC</p></li>
</ul>
<table class="docutils align-default" id="id5">
<caption><span class="caption-text">Default pull-up and pull-down states of the CMD and DATA pins</span><a class="headerlink" href="#id5" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>GPIO number</p></th>
<th class="head"><p>Pin Name</p></th>
<th class="head"><p>Startup State</p></th>
<th class="head"><p>Strapping Requirement</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>15</strong></p></td>
<td><p>CMD</p></td>
<td><p>WPU</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>2</strong></p></td>
<td><p>DAT0</p></td>
<td><p>WPD</p></td>
<td><p>Low for Download mode</p></td>
</tr>
<tr class="row-even"><td><p><strong>4</strong></p></td>
<td><p>DAT1</p></td>
<td><p>WPD</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>12</strong></p></td>
<td><p>DAT2</p></td>
<td><p>PU for 1.8 V flash; WPD for 3.3 V flash</p></td>
<td><p>High for 1.8 V flash; Low for 3.3 V flash</p></td>
</tr>
<tr class="row-even"><td><p><strong>13</strong></p></td>
<td><p>DAT3</p></td>
<td><p>WPU</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
             <div class="articleComments">

<style>
    .expand-feedback-content {
        display: none;
    }
    .click-like-or-dislike {
        background-color: #d3d3d3;
        pointer-events: none;
    }
</style>

<script>
    function submitFeedbackForm(user_likes_document) {
        // Send to GA4 the user reaction
        gtag('event', 'user_reaction', {
            'user_likes_document': user_likes_document
        });

        if (user_likes_document === 1) {
            document.querySelector('.like-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContentLike").style.display = 'block';
        } else {
            document.querySelector('.dislike-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContent").style.display = 'block';
        }

        document.querySelector('.like-btn').style.pointerEvents = 'none';
        document.querySelector('.dislike-btn').style.pointerEvents = 'none';
    }
</script>

<hr>

<p style="text-align:center"><strong>Was this page helpful?</strong></p>
<p style="text-align:center">
    <button class="like-btn" onclick="submitFeedbackForm(1)">
        <svg aria-hidden="true" focusable="false" class="color-fg-muted" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M8.834.066c.763.087 1.5.295 2.01.884.505.581.656 1.378.656 2.3 0 .467-.087 1.119-.157 1.637L11.328 5h1.422c.603 0 1.174.085 1.668.333.508.254.911.679 1.137 1.2.453.998.438 2.447.188 4.316l-.04.306c-.105.79-.195 1.473-.313 2.033-.131.63-.315 1.209-.668 1.672C13.97 15.847 12.706 16 11 16c-1.848 0-3.234-.333-4.388-.653-.165-.045-.323-.09-.475-.133-.658-.186-1.2-.34-1.725-.415A1.75 1.75 0 0 1 2.75 16h-1A1.75 1.75 0 0 1 0 14.25v-7.5C0 5.784.784 5 1.75 5h1a1.75 1.75 0 0 1 1.514.872c.258-.105.59-.268.918-.508C5.853 4.874 6.5 4.079 6.5 2.75v-.5c0-1.202.994-2.337 2.334-2.184ZM4.5 13.3c.705.088 1.39.284 2.072.478l.441.125c1.096.305 2.334.598 3.987.598 1.794 0 2.28-.223 2.528-.549.147-.193.276-.505.394-1.07.105-.502.188-1.124.295-1.93l.04-.3c.25-1.882.189-2.933-.068-3.497a.921.921 0 0 0-.442-.48c-.208-.104-.52-.174-.997-.174H11c-.686 0-1.295-.577-1.206-1.336.023-.192.05-.39.076-.586.065-.488.13-.97.13-1.328 0-.809-.144-1.15-.288-1.316-.137-.158-.402-.304-1.048-.378C8.357 1.521 8 1.793 8 2.25v.5c0 1.922-.978 3.128-1.933 3.825a5.831 5.831 0 0 1-1.567.81ZM2.75 6.5h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
    </button>
    <button class="dislike-btn" onclick="submitFeedbackForm(0)">
        <svg aria-hidden="true" focusable="false" class="" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M7.083 15.986c-.763-.087-1.499-.295-2.011-.884-.504-.581-.655-1.378-.655-2.299 0-.468.087-1.12.157-1.638l.015-.112H3.167c-.603 0-1.174-.086-1.669-.334a2.415 2.415 0 0 1-1.136-1.2c-.454-.998-.438-2.447-.188-4.316l.04-.306C.32 4.108.41 3.424.526 2.864c.132-.63.316-1.209.669-1.672C1.947.205 3.211.053 4.917.053c1.848 0 3.234.332 4.388.652l.474.133c.658.187 1.201.341 1.726.415a1.75 1.75 0 0 1 1.662-1.2h1c.966 0 1.75.784 1.75 1.75v7.5a1.75 1.75 0 0 1-1.75 1.75h-1a1.75 1.75 0 0 1-1.514-.872c-.259.105-.59.268-.919.508-.671.491-1.317 1.285-1.317 2.614v.5c0 1.201-.994 2.336-2.334 2.183Zm4.334-13.232c-.706-.089-1.39-.284-2.072-.479l-.441-.125c-1.096-.304-2.335-.597-3.987-.597-1.794 0-2.28.222-2.529.548-.147.193-.275.505-.393 1.07-.105.502-.188 1.124-.295 1.93l-.04.3c-.25 1.882-.19 2.933.067 3.497a.923.923 0 0 0 .443.48c.208.104.52.175.997.175h1.75c.685 0 1.295.577 1.205 1.335-.022.192-.049.39-.075.586-.066.488-.13.97-.13 1.329 0 .808.144 1.15.288 1.316.137.157.401.303 1.048.377.307.035.664-.237.664-.693v-.5c0-1.922.978-3.127 1.932-3.825a5.878 5.878 0 0 1 1.568-.809Zm1.75 6.798h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25Z"></path>
        </svg>
    </button>
</p>

<div class="expand-feedback-content" id="expandContentLike">
    <ul style="text-align:center">
        <li>Thank you! We received your feedback.</li>
        <li>If you have any comments, fill in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=SD Pull-up Requirements (api-reference/peripherals/sd_pullup_requirements)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<div class="expand-feedback-content" id="expandContent">
    <ul style="text-align:center">
        <li>We value your feedback.</li>
        <li>Let us know how we can improve this page by filling in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=SD Pull-up Requirements (api-reference/peripherals/sd_pullup_requirements)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<br>


             </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="rmt.html" class="btn btn-neutral float-left" title="Remote Control Transceiver (RMT)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="sdmmc_host.html" class="btn btn-neutral float-right" title="SDMMC Host Driver" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016 - 2025, Espressif Systems (Shanghai) Co., Ltd.</p>
  </div>

  <ul class="footer">
        <li>
	    
            
            Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/espressif/sphinx_idf_theme">theme</a>  based on <a href="https://github.com/readthedocs/sphinx_rtd_theme">Read the Docs Sphinx Theme</a>.
         </li>
    <li class="footer-aside">
        <a href="../../esp-idf-en-v5.4.2.zip"> Download HTML</a>
    </li>

  </ul> 

</footer>
        </div>
      </div>
    </section>
  </div>

  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>