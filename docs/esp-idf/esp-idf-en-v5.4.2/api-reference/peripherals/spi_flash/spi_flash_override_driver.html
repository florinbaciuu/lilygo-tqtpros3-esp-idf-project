<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-73KGWFC8DM"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-73KGWFC8DM');
        </script><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Overriding Default Chip Drivers - ESP32 -  &mdash; ESP-IDF Programming Guide v5.4.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=a60756f2" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=949a1ff5" />
      <link rel="stylesheet" type="text/css" href="../../../_static/theme_overrides.css?v=851bd809" />

  
    <link rel="canonical" href="https://docs.espressif.com/projects/esp-idf/en/stable/esp32/api-reference/peripherals/spi_flash/spi_flash_override_driver.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js?v=c241bbaf"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=ff8fa330"></script>
        <script src="https://wavedrom.com/skins/default.js"></script>
        <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <script src="../../../_static/js/theme.js"></script>

    
        

    <script type="text/javascript">
        DOCUMENTATION_OPTIONS.PAGENAME = 'api-reference/peripherals/spi_flash/spi_flash_override_driver';
        DOCUMENTATION_OPTIONS.PROJECT_SLUG = 'esp-idf';
        DOCUMENTATION_OPTIONS.LATEST_BRANCH_NAME = 'master';
        DOCUMENTATION_OPTIONS.VERSIONS_URL = 'https://dl.espressif.com/dl/esp-idf/idf_versions.js';
        DOCUMENTATION_OPTIONS.LANGUAGES = ["en", "zh_CN"];
        DOCUMENTATION_OPTIONS.IDF_TARGET = 'esp32';
        DOCUMENTATION_OPTIONS.HAS_IDF_TARGETS = ["esp32", "esp32s2", "esp32s3", "esp32c3", "esp32c2", "esp32c5", "esp32c6", "esp32p4"]
        DOCUMENTATION_OPTIONS.RELEASE = 'v5.4.2';
        DOCUMENTATION_OPTIONS.LANGUAGE_URL = 'en';

    </script>

    <script type="text/javascript" src="https://dl.espressif.com/dl/esp-idf/idf_versions.js"></script>
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Concurrency Constraints for Flash on SPI1" href="spi_flash_concurrency.html" />
    <link rel="prev" title="Optional Features for Flash" href="spi_flash_optional_feature.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            ESP-IDF Programming Guide
              <img src="../../../_static/espressif-logo.svg" class="logo" alt="Logo"/>
          </a>

          
            <div class="selectors">
              <select id="target-select" style="width: 150px;" hidden>
                <option value="" disabled selected>Choose target...</option>
              </select>
            </div>
          

          <div class="selectors">
            <select id="version-select" style="width: 150px;" hidden>
              <option value="" disabled selected>Choose version...</option>
            </select>
          </div>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../get-started/index.html">Get Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../api-conventions.html">API Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../protocols/index.html">Application Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bluetooth/index.html">Bluetooth® API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../error-codes.html">Error Codes Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../network/index.html">Networking APIs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Peripherals API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../adc_oneshot.html">Analog to Digital Converter (ADC) Oneshot Mode Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../adc_continuous.html">Analog to Digital Converter (ADC) Continuous Mode Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../adc_calibration.html">Analog to Digital Converter (ADC) Calibration Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../clk_tree.html">Clock Tree</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dac.html">Digital To Analog Converter (DAC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gpio.html">GPIO &amp; RTC GPIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gptimer.html">General Purpose Timer (GPTimer)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../i2c.html">Inter-Integrated Circuit (I2C)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../i2s.html">Inter-IC Sound (I2S)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lcd/index.html">LCD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ledc.html">LED Control (LEDC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mcpwm.html">Motor Control Pulse Width Modulator (MCPWM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pcnt.html">Pulse Counter (PCNT)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rmt.html">Remote Control Transceiver (RMT)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sd_pullup_requirements.html">SD Pull-up Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sdmmc_host.html">SDMMC Host Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sdspi_host.html">SD SPI Host Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sdio_slave.html">SDIO Card Slave Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sdm.html">Sigma-Delta Modulation (SDM)</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">SPI Flash API</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="index.html#overview">Overview</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html#support-for-features-of-flash-chips">Support for Features of Flash Chips</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#initializing-a-flash-device">Initializing a Flash Device</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#spi-flash-access-api">SPI Flash Access API</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#spi-flash-size">SPI Flash Size</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#concurrency-constraints-for-flash-on-spi1">Concurrency Constraints for Flash on SPI1</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#spi-flash-encryption">SPI Flash Encryption</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#memory-mapping-api">Memory Mapping API</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#spi-flash-implementation">SPI Flash Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#implementation-details">Implementation Details</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#related-documents">Related Documents</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#api-reference-spi-flash">API Reference - SPI Flash</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#api-reference-flash-encrypt">API Reference - Flash Encrypt</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../spi_master.html">SPI Master Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../spi_slave.html">SPI Slave Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../touch_pad.html">Touch Sensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../twai.html">Two-Wire Automotive Interface (TWAI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uart.html">Universal Asynchronous Receiver/Transmitter (UART)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../kconfig.html">Project Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../provisioning/index.html">Provisioning API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../storage/index.html">Storage API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../system/index.html">System API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../hw-reference/index.html">Hardware Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api-guides/index.html">API Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../migration-guides/index.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libraries-and-frameworks/index.html">Libraries and Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contributions Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../versions.html">ESP-IDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../COPYRIGHT.html">Copyrights and Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../languages.html">Switch Between Languages</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">ESP-IDF Programming Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Peripherals API</a></li>
          <li class="breadcrumb-item"><a href="index.html">SPI Flash API</a></li>
      <li class="breadcrumb-item active">Overriding Default Chip Drivers</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/espressif/esp-idf/blob/v5.4.2/docs/en/api-reference/peripherals/spi_flash/spi_flash_override_driver.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="overriding-default-chip-drivers">
<h1>Overriding Default Chip Drivers<a class="headerlink" href="#overriding-default-chip-drivers" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="../../../../../../zh_CN/v5.4.2/esp32/api-reference/peripherals/spi_flash/spi_flash_override_driver.html">[中文]</a></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Customizing SPI Flash Chip Drivers is considered an &quot;expert&quot; feature. Users should only do so at their own risk. (See the notes below)</p>
</div>
<p>During the SPI Flash driver's initialization (i.e., <a class="reference internal" href="index.html#_CPPv414esp_flash_initP11esp_flash_t" title="esp_flash_init"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_flash_init()</span></code></a>), there is a chip detection step during which the driver iterates through a Default Chip Driver List and determine which chip driver can properly support the currently connected flash chip. The Default Chip Drivers are provided by the ESP-IDF, thus are updated in together with each ESP-IDF version. However ESP-IDF also allows users to customize their own chip drivers.</p>
<p>Users should note the following when customizing chip drivers:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>You may need to rely on some non-public ESP-IDF functions, which have slight possibility to change between ESP-IDF versions. On the one hand, these changes may be useful bug fixes for your driver, on the other hand, they may also be breaking changes (i.e., breaks your code).</p></li>
<li><p>Some ESP-IDF bug fixes to other chip drivers are not automatically applied to your own custom chip drivers.</p></li>
<li><p>If the protection of flash is not handled properly, there may be some random reliability issues.</p></li>
<li><p>If you update to a newer ESP-IDF version that has support for more chips, you will have to manually add those new chip drivers into your custom chip driver list. Otherwise the driver will only search for the drivers in custom list you provided.</p></li>
</ol>
</div></blockquote>
<section id="steps-for-creating-custom-chip-drivers-and-overriding-the-esp-idf-default-driver-list">
<h2>Steps For Creating Custom Chip Drivers and Overriding the ESP-IDF Default Driver List<a class="headerlink" href="#steps-for-creating-custom-chip-drivers-and-overriding-the-esp-idf-default-driver-list" title="Permalink to this heading"></a></h2>
<ol class="arabic">
<li><p>Enable the <a class="reference internal" href="../../kconfig.html#config-spi-flash-override-chip-driver-list"><span class="std std-ref">CONFIG_SPI_FLASH_OVERRIDE_CHIP_DRIVER_LIST</span></a> config option. This prevents compilation and linking of the Default Chip Driver List (<code class="docutils literal notranslate"><span class="pre">default_registered_chips</span></code>) provided by ESP-IDF. Instead, the linker searches for the structure of the same name (<code class="docutils literal notranslate"><span class="pre">default_registered_chips</span></code>) that must be provided by the user.</p></li>
<li><p>Add a new component in your project, e.g., <code class="docutils literal notranslate"><span class="pre">custom_chip_driver</span></code>.</p></li>
<li><p>Copy the necessary chip driver files from the <code class="docutils literal notranslate"><span class="pre">spi_flash</span></code> component in ESP-IDF. This may include:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">spi_flash_chip_drivers.c</span></code> (to provide the <code class="docutils literal notranslate"><span class="pre">default_registered_chips</span></code> structure)</p></li>
<li><p>Any of the <code class="docutils literal notranslate"><span class="pre">spi_flash_chip_*.c</span></code> files that matches your own flash model best</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">linker.lf</span></code> files</p></li>
</ul>
</div></blockquote>
<p>Modify the files above properly. Including:</p>
<ul class="simple">
<li><p>Change the <code class="docutils literal notranslate"><span class="pre">default_registered_chips</span></code> variable to non-static and remove the #ifdef logic around it.</p></li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">linker.lf</span></code> file to rename the fragment header and the library name to match the new component.</p></li>
<li><p>If reusing other drivers, some header names need prefixing with <code class="docutils literal notranslate"><span class="pre">spi_flash/</span></code> when included from outside spi_flash component.</p></li>
</ul>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>When writing your own flash chip driver, you can set your flash chip capabilities through <code class="docutils literal notranslate"><span class="pre">spi_flash_chip_***(vendor)_get_caps</span></code> and points the function pointer <code class="docutils literal notranslate"><span class="pre">get_chip_caps</span></code> for protection to the <code class="docutils literal notranslate"><span class="pre">spi_flash_chip_***_get_caps</span></code> function. The steps are as follows.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Please check whether your flash chip have the capabilities listed in <code class="docutils literal notranslate"><span class="pre">spi_flash_caps_t</span></code> by checking the flash datasheet.</p></li>
<li><p>Write a function named <code class="docutils literal notranslate"><span class="pre">spi_flash_chip_***(vendor)_get_caps</span></code>. Take the example below as a reference (if the flash support <code class="docutils literal notranslate"><span class="pre">suspend</span></code> and <code class="docutils literal notranslate"><span class="pre">read</span> <span class="pre">unique</span> <span class="pre">id</span></code>).</p></li>
<li><p>Points the pointer <code class="docutils literal notranslate"><span class="pre">get_chip_caps</span></code> (in <code class="docutils literal notranslate"><span class="pre">spi_flash_chip_t</span></code>) to the function mentioned above.</p></li>
</ol>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">spi_flash_caps_t</span><span class="w"> </span><span class="n">spi_flash_chip_</span><span class="o">***</span><span class="p">(</span><span class="n">vendor</span><span class="p">)</span><span class="n">_get_caps</span><span class="p">(</span><span class="n">esp_flash_t</span><span class="w"> </span><span class="o">*</span><span class="n">chip</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="n">spi_flash_caps_t</span><span class="w"> </span><span class="n">caps_flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">   </span><span class="c1">// 32-bit-address flash is not supported</span>
<span class="w">   </span><span class="n">flash</span><span class="o">-</span><span class="n">suspend</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">supported</span>
<span class="w">   </span><span class="n">caps_flags</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="n">SPI_FLAHS_CHIP_CAP_SUSPEND</span><span class="p">;</span>
<span class="w">   </span><span class="c1">// flash read unique id.</span>
<span class="w">   </span><span class="n">caps_flags</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="n">SPI_FLASH_CHIP_CAP_UNIQUE_ID</span><span class="p">;</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="n">caps_flags</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="n">spi_flash_chip_t</span><span class="w"> </span><span class="n">esp_flash_chip_eon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="c1">// Other function pointers</span>
<span class="w">   </span><span class="p">.</span><span class="n">get_chip_caps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spi_flash_chip_eon_get_caps</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>You also can see how to implement this in the example <a class="reference external" href="https://github.com/espressif/esp-idf/tree/v5.4.2/examples/storage/custom_flash_driver">storage/custom_flash_driver</a>. This example demonstrates how to override the default chip driver list.</p></li>
</ul>
</div>
<ol class="arabic" start="4">
<li><p>Write a new <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file for the <code class="docutils literal notranslate"><span class="pre">custom_chip_driver</span></code> component, including an additional line to add a linker dependency from <code class="docutils literal notranslate"><span class="pre">spi_flash</span></code> to <code class="docutils literal notranslate"><span class="pre">custom_chip_driver</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">idf_component_register</span><span class="p">(</span><span class="n">SRCS</span> <span class="s2">&quot;spi_flash_chip_drivers.c&quot;</span>
                       <span class="s2">&quot;spi_flash_chip_mychip.c&quot;</span>  <span class="c1"># modify as needed</span>
                       <span class="n">REQUIRES</span> <span class="n">hal</span>
                       <span class="n">PRIV_REQUIRES</span> <span class="n">spi_flash</span>
                       <span class="n">LDFRAGMENTS</span> <span class="n">linker</span><span class="o">.</span><span class="n">lf</span><span class="p">)</span>
<span class="n">idf_component_add_link_dependency</span><span class="p">(</span><span class="n">FROM</span> <span class="n">spi_flash</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>An example of this component CMakeLists.txt can be found in <a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/examples/storage/custom_flash_driver/components/custom_chip_driver/CMakeLists.txt">storage/custom_flash_driver/components/custom_chip_driver/CMakeLists.txt</a></p></li>
</ul>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">linker.lf</span></code> is used to put every chip driver that you are going to use whilst cache is disabled into internal RAM. See <a class="reference internal" href="../../../api-guides/linker-script-generation.html"><span class="doc">Linker Script Generation</span></a> for more details. Make sure this file covers all the source files that you add.</p></li>
<li><p>Build your project, and you will see the new flash driver is used.</p></li>
</ol>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
             <div class="articleComments">

<style>
    .expand-feedback-content {
        display: none;
    }
    .click-like-or-dislike {
        background-color: #d3d3d3;
        pointer-events: none;
    }
</style>

<script>
    function submitFeedbackForm(user_likes_document) {
        // Send to GA4 the user reaction
        gtag('event', 'user_reaction', {
            'user_likes_document': user_likes_document
        });

        if (user_likes_document === 1) {
            document.querySelector('.like-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContentLike").style.display = 'block';
        } else {
            document.querySelector('.dislike-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContent").style.display = 'block';
        }

        document.querySelector('.like-btn').style.pointerEvents = 'none';
        document.querySelector('.dislike-btn').style.pointerEvents = 'none';
    }
</script>

<hr>

<p style="text-align:center"><strong>Was this page helpful?</strong></p>
<p style="text-align:center">
    <button class="like-btn" onclick="submitFeedbackForm(1)">
        <svg aria-hidden="true" focusable="false" class="color-fg-muted" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M8.834.066c.763.087 1.5.295 2.01.884.505.581.656 1.378.656 2.3 0 .467-.087 1.119-.157 1.637L11.328 5h1.422c.603 0 1.174.085 1.668.333.508.254.911.679 1.137 1.2.453.998.438 2.447.188 4.316l-.04.306c-.105.79-.195 1.473-.313 2.033-.131.63-.315 1.209-.668 1.672C13.97 15.847 12.706 16 11 16c-1.848 0-3.234-.333-4.388-.653-.165-.045-.323-.09-.475-.133-.658-.186-1.2-.34-1.725-.415A1.75 1.75 0 0 1 2.75 16h-1A1.75 1.75 0 0 1 0 14.25v-7.5C0 5.784.784 5 1.75 5h1a1.75 1.75 0 0 1 1.514.872c.258-.105.59-.268.918-.508C5.853 4.874 6.5 4.079 6.5 2.75v-.5c0-1.202.994-2.337 2.334-2.184ZM4.5 13.3c.705.088 1.39.284 2.072.478l.441.125c1.096.305 2.334.598 3.987.598 1.794 0 2.28-.223 2.528-.549.147-.193.276-.505.394-1.07.105-.502.188-1.124.295-1.93l.04-.3c.25-1.882.189-2.933-.068-3.497a.921.921 0 0 0-.442-.48c-.208-.104-.52-.174-.997-.174H11c-.686 0-1.295-.577-1.206-1.336.023-.192.05-.39.076-.586.065-.488.13-.97.13-1.328 0-.809-.144-1.15-.288-1.316-.137-.158-.402-.304-1.048-.378C8.357 1.521 8 1.793 8 2.25v.5c0 1.922-.978 3.128-1.933 3.825a5.831 5.831 0 0 1-1.567.81ZM2.75 6.5h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
    </button>
    <button class="dislike-btn" onclick="submitFeedbackForm(0)">
        <svg aria-hidden="true" focusable="false" class="" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M7.083 15.986c-.763-.087-1.499-.295-2.011-.884-.504-.581-.655-1.378-.655-2.299 0-.468.087-1.12.157-1.638l.015-.112H3.167c-.603 0-1.174-.086-1.669-.334a2.415 2.415 0 0 1-1.136-1.2c-.454-.998-.438-2.447-.188-4.316l.04-.306C.32 4.108.41 3.424.526 2.864c.132-.63.316-1.209.669-1.672C1.947.205 3.211.053 4.917.053c1.848 0 3.234.332 4.388.652l.474.133c.658.187 1.201.341 1.726.415a1.75 1.75 0 0 1 1.662-1.2h1c.966 0 1.75.784 1.75 1.75v7.5a1.75 1.75 0 0 1-1.75 1.75h-1a1.75 1.75 0 0 1-1.514-.872c-.259.105-.59.268-.919.508-.671.491-1.317 1.285-1.317 2.614v.5c0 1.201-.994 2.336-2.334 2.183Zm4.334-13.232c-.706-.089-1.39-.284-2.072-.479l-.441-.125c-1.096-.304-2.335-.597-3.987-.597-1.794 0-2.28.222-2.529.548-.147.193-.275.505-.393 1.07-.105.502-.188 1.124-.295 1.93l-.04.3c-.25 1.882-.19 2.933.067 3.497a.923.923 0 0 0 .443.48c.208.104.52.175.997.175h1.75c.685 0 1.295.577 1.205 1.335-.022.192-.049.39-.075.586-.066.488-.13.97-.13 1.329 0 .808.144 1.15.288 1.316.137.157.401.303 1.048.377.307.035.664-.237.664-.693v-.5c0-1.922.978-3.127 1.932-3.825a5.878 5.878 0 0 1 1.568-.809Zm1.75 6.798h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25Z"></path>
        </svg>
    </button>
</p>

<div class="expand-feedback-content" id="expandContentLike">
    <ul style="text-align:center">
        <li>Thank you! We received your feedback.</li>
        <li>If you have any comments, fill in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=Overriding Default Chip Drivers (api-reference/peripherals/spi_flash/spi_flash_override_driver)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<div class="expand-feedback-content" id="expandContent">
    <ul style="text-align:center">
        <li>We value your feedback.</li>
        <li>Let us know how we can improve this page by filling in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=Overriding Default Chip Drivers (api-reference/peripherals/spi_flash/spi_flash_override_driver)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<br>


             </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="spi_flash_optional_feature.html" class="btn btn-neutral float-left" title="Optional Features for Flash" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="spi_flash_concurrency.html" class="btn btn-neutral float-right" title="Concurrency Constraints for Flash on SPI1" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016 - 2025, Espressif Systems (Shanghai) Co., Ltd.</p>
  </div>

  <ul class="footer">
        <li>
	    
            
            Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/espressif/sphinx_idf_theme">theme</a>  based on <a href="https://github.com/readthedocs/sphinx_rtd_theme">Read the Docs Sphinx Theme</a>.
         </li>
    <li class="footer-aside">
        <a href="../../../esp-idf-en-v5.4.2.zip"> Download HTML</a>
    </li>

  </ul> 

</footer>
        </div>
      </div>
    </section>
  </div>

  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>