<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-73KGWFC8DM"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-73KGWFC8DM');
        </script><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ESP Local Control - ESP32 -  &mdash; ESP-IDF Programming Guide v5.4.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=a60756f2" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=949a1ff5" />
      <link rel="stylesheet" type="text/css" href="../../_static/theme_overrides.css?v=851bd809" />

  
    <link rel="canonical" href="https://docs.espressif.com/projects/esp-idf/en/stable/esp32/api-reference/protocols/esp_local_ctrl.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=c241bbaf"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=ff8fa330"></script>
        <script src="https://wavedrom.com/skins/default.js"></script>
        <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <script src="../../_static/js/theme.js"></script>

    
        

    <script type="text/javascript">
        DOCUMENTATION_OPTIONS.PAGENAME = 'api-reference/protocols/esp_local_ctrl';
        DOCUMENTATION_OPTIONS.PROJECT_SLUG = 'esp-idf';
        DOCUMENTATION_OPTIONS.LATEST_BRANCH_NAME = 'master';
        DOCUMENTATION_OPTIONS.VERSIONS_URL = 'https://dl.espressif.com/dl/esp-idf/idf_versions.js';
        DOCUMENTATION_OPTIONS.LANGUAGES = ["en", "zh_CN"];
        DOCUMENTATION_OPTIONS.IDF_TARGET = 'esp32';
        DOCUMENTATION_OPTIONS.HAS_IDF_TARGETS = ["esp32", "esp32s2", "esp32s3", "esp32c3", "esp32c2", "esp32c5", "esp32c6", "esp32p4"]
        DOCUMENTATION_OPTIONS.RELEASE = 'v5.4.2';
        DOCUMENTATION_OPTIONS.LANGUAGE_URL = 'en';

    </script>

    <script type="text/javascript" src="https://dl.espressif.com/dl/esp-idf/idf_versions.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ESP Serial Slave Link" href="esp_serial_slave_link.html" />
    <link rel="prev" title="ESP HTTP Client" href="esp_http_client.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ESP-IDF Programming Guide
              <img src="../../_static/espressif-logo.svg" class="logo" alt="Logo"/>
          </a>

          
            <div class="selectors">
              <select id="target-select" style="width: 150px;" hidden>
                <option value="" disabled selected>Choose target...</option>
              </select>
            </div>
          

          <div class="selectors">
            <select id="version-select" style="width: 150px;" hidden>
              <option value="" disabled selected>Choose version...</option>
            </select>
          </div>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Get Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-conventions.html">API Conventions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Application Protocols</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="asio.html">ASIO Port</a></li>
<li class="toctree-l3"><a class="reference internal" href="modbus.html">ESP-Modbus</a></li>
<li class="toctree-l3"><a class="reference internal" href="mqtt.html">ESP-MQTT</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_tls.html">ESP-TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_http_client.html">ESP HTTP Client</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">ESP Local Control</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-a-property">Creating a Property</a></li>
<li class="toctree-l4"><a class="reference internal" href="#client-side-implementation">Client Side Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="esp_serial_slave_link.html">ESP Serial Slave Link</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_crt_bundle.html">ESP x509 Certificate Bundle</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_http_server.html">HTTP Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_https_server.html">HTTPS Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="icmp_echo.html">ICMP Echo</a></li>
<li class="toctree-l3"><a class="reference internal" href="mdns.html">mDNS Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="mbedtls.html">Mbed TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#ip-network-layer">IP Network Layer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth® API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error-codes.html">Error Codes Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/index.html">Networking APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peripherals/index.html">Peripherals API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kconfig.html">Project Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/index.html">Provisioning API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">Storage API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system/index.html">System API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hw-reference/index.html">Hardware Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-guides/index.html">API Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration-guides/index.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries-and-frameworks/index.html">Libraries and Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contributions Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">ESP-IDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COPYRIGHT.html">Copyrights and Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../languages.html">Switch Between Languages</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ESP-IDF Programming Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="index.html">Application Protocols</a></li>
      <li class="breadcrumb-item active">ESP Local Control</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/espressif/esp-idf/blob/v5.4.2/docs/en/api-reference/protocols/esp_local_ctrl.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="esp-local-control">
<h1>ESP Local Control<a class="headerlink" href="#esp-local-control" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="../../../../../zh_CN/v5.4.2/esp32/api-reference/protocols/esp_local_ctrl.html">[中文]</a></p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>ESP Local Control (<strong>esp_local_ctrl</strong>) component in ESP-IDF provides capability to control an ESP device over HTTPS or Bluetooth® Low Energy. It provides access to application defined <strong>properties</strong> that are available for reading/writing via a set of configurable handlers.</p>
<p>Initialization of the <strong>esp_local_ctrl</strong> service over Bluetooth Low Energy transport is performed as follows:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">esp_local_ctrl_config_t</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">transport</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ESP_LOCAL_CTRL_TRANSPORT_BLE</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">transport_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">ble</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">protocomm_ble_config_t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="p">.</span><span class="n">device_name</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">SERVICE_NAME</span><span class="p">,</span>
<span class="w">            </span><span class="p">.</span><span class="n">service_uuid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="cm">/* LSB &lt;---------------------------------------</span>
<span class="cm">                * ---------------------------------------&gt; MSB */</span>
<span class="w">                </span><span class="mh">0x21</span><span class="p">,</span><span class="w"> </span><span class="mh">0xd5</span><span class="p">,</span><span class="w"> </span><span class="mh">0x3b</span><span class="p">,</span><span class="w"> </span><span class="mh">0x8d</span><span class="p">,</span><span class="w"> </span><span class="mh">0xbd</span><span class="p">,</span><span class="w"> </span><span class="mh">0x75</span><span class="p">,</span><span class="w"> </span><span class="mh">0x68</span><span class="p">,</span><span class="w"> </span><span class="mh">0x8a</span><span class="p">,</span>
<span class="w">                </span><span class="mh">0xb4</span><span class="p">,</span><span class="w"> </span><span class="mh">0x42</span><span class="p">,</span><span class="w"> </span><span class="mh">0xeb</span><span class="p">,</span><span class="w"> </span><span class="mh">0x31</span><span class="p">,</span><span class="w"> </span><span class="mh">0x4a</span><span class="p">,</span><span class="w"> </span><span class="mh">0x1e</span><span class="p">,</span><span class="w"> </span><span class="mh">0x98</span><span class="p">,</span><span class="w"> </span><span class="mh">0x3d</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">.</span><span class="n">proto_sec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PROTOCOM_SEC0</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">custom_handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">sec_params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">.</span><span class="n">handlers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="cm">/* User defined handler functions */</span>
<span class="w">        </span><span class="p">.</span><span class="n">get_prop_values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_property_values</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">set_prop_values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">set_property_values</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">usr_ctx</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">usr_ctx_free_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="cm">/* Maximum number of properties that may be set */</span>
<span class="w">    </span><span class="p">.</span><span class="n">max_properties</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>
<span class="p">};</span>

<span class="cm">/* Start esp_local_ctrl service */</span>
<span class="n">ESP_ERROR_CHECK</span><span class="p">(</span><span class="n">esp_local_ctrl_start</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config</span><span class="p">));</span>
</pre></div>
</div>
</div></blockquote>
<p>Initialization of the <strong>esp_local_ctrl</strong> service over HTTPS transport is performed as follows:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Set the configuration */</span>
<span class="n">httpd_ssl_config_t</span><span class="w"> </span><span class="n">https_conf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HTTPD_SSL_CONFIG_DEFAULT</span><span class="p">();</span>

<span class="cm">/* Load server certificate */</span>
<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">servercert_start</span><span class="p">[]</span><span class="w"> </span><span class="k">asm</span><span class="p">(</span><span class="s">&quot;_binary_servercert_pem_start&quot;</span><span class="p">);</span>
<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">servercert_end</span><span class="p">[]</span><span class="w">   </span><span class="k">asm</span><span class="p">(</span><span class="s">&quot;_binary_servercert_pem_end&quot;</span><span class="p">);</span>
<span class="n">https_conf</span><span class="p">.</span><span class="n">servercert</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">servercert_start</span><span class="p">;</span>
<span class="n">https_conf</span><span class="p">.</span><span class="n">servercert_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">servercert_end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">servercert_start</span><span class="p">;</span>

<span class="cm">/* Load server private key */</span>
<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">prvtkey_pem_start</span><span class="p">[]</span><span class="w"> </span><span class="k">asm</span><span class="p">(</span><span class="s">&quot;_binary_prvtkey_pem_start&quot;</span><span class="p">);</span>
<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">prvtkey_pem_end</span><span class="p">[]</span><span class="w">   </span><span class="k">asm</span><span class="p">(</span><span class="s">&quot;_binary_prvtkey_pem_end&quot;</span><span class="p">);</span>
<span class="n">https_conf</span><span class="p">.</span><span class="n">prvtkey_pem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">prvtkey_pem_start</span><span class="p">;</span>
<span class="n">https_conf</span><span class="p">.</span><span class="n">prvtkey_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">prvtkey_pem_end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">prvtkey_pem_start</span><span class="p">;</span>

<span class="n">esp_local_ctrl_config_t</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">transport</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ESP_LOCAL_CTRL_TRANSPORT_HTTPD</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">transport_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">httpd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">https_conf</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">.</span><span class="n">proto_sec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PROTOCOM_SEC0</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">custom_handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">sec_params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">.</span><span class="n">handlers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="cm">/* User defined handler functions */</span>
<span class="w">        </span><span class="p">.</span><span class="n">get_prop_values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_property_values</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">set_prop_values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">set_property_values</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">usr_ctx</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">usr_ctx_free_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="cm">/* Maximum number of properties that may be set */</span>
<span class="w">    </span><span class="p">.</span><span class="n">max_properties</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>
<span class="p">};</span>

<span class="cm">/* Start esp_local_ctrl service */</span>
<span class="n">ESP_ERROR_CHECK</span><span class="p">(</span><span class="n">esp_local_ctrl_start</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config</span><span class="p">));</span>
</pre></div>
</div>
</div></blockquote>
<p>You may set security for transport in ESP local control using following options:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PROTOCOM_SEC2</span></code>: specifies that SRP6a-based key exchange and end-to-end encryption based on AES-GCM are used. This is the most preferred option as it adds a robust security with Augmented PAKE protocol, i.e., SRP6a.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PROTOCOM_SEC1</span></code>: specifies that Curve25519-based key exchange and end-to-end encryption based on AES-CTR are used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PROTOCOM_SEC0</span></code>: specifies that data will be exchanged as a plain text (no security).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PROTOCOM_SEC_CUSTOM</span></code>: you can define your own security requirement. Please note that you will also have to provide <code class="docutils literal notranslate"><span class="pre">custom_handle</span></code> of type <code class="docutils literal notranslate"><span class="pre">protocomm_security_t</span> <span class="pre">*</span></code> in this context.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The respective security schemes need to be enabled through the project configuration menu. Please refer to the Enabling protocom security version section in <a class="reference internal" href="../provisioning/protocomm.html"><span class="doc">Protocol Communication</span></a> for more details.</p>
</div>
</section>
<section id="creating-a-property">
<h2>Creating a Property<a class="headerlink" href="#creating-a-property" title="Permalink to this heading"></a></h2>
<p>Now that we know how to start the <strong>esp_local_ctrl</strong> service, let's add a property to it. Each property must have a unique <code class="docutils literal notranslate"><span class="pre">name</span></code> (string), a <code class="docutils literal notranslate"><span class="pre">type</span></code> (e.g., enum), <code class="docutils literal notranslate"><span class="pre">flags</span></code> (bit fields) and <code class="docutils literal notranslate"><span class="pre">size</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">size</span></code> is to be kept 0, if we want our property value to be of variable length (e.g., if it is a string or bytestream). For data types with fixed-length property value, like int, float, etc., setting the <code class="docutils literal notranslate"><span class="pre">size</span></code> field to the right value helps <strong>esp_local_ctrl</strong> to perform internal checks on arguments received with write requests.</p>
<p>The interpretation of <code class="docutils literal notranslate"><span class="pre">type</span></code> and <code class="docutils literal notranslate"><span class="pre">flags</span></code> fields is totally upto the application, hence they may be used as enumerations, bitfields, or even simple integers. One way is to use <code class="docutils literal notranslate"><span class="pre">type</span></code> values to classify properties, while <code class="docutils literal notranslate"><span class="pre">flags</span></code> to specify characteristics of a property.</p>
<p>Here is an example property which is to function as a timestamp. It is assumed that the application defines <code class="docutils literal notranslate"><span class="pre">TYPE_TIMESTAMP</span></code> and <code class="docutils literal notranslate"><span class="pre">READONLY</span></code>, which are used for setting the <code class="docutils literal notranslate"><span class="pre">type</span></code> and <code class="docutils literal notranslate"><span class="pre">flags</span></code> fields here.</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Create a timestamp property */</span>
<span class="n">esp_local_ctrl_prop_t</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;timestamp&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="n">TYPE_TIMESTAMP</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">size</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int32_t</span><span class="p">),</span>
<span class="w">    </span><span class="p">.</span><span class="n">flags</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="n">READONLY</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">ctx</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="n">func_get_time</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">ctx_free_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span>
<span class="p">};</span>

<span class="cm">/* Now register the property */</span>
<span class="n">esp_local_ctrl_add_property</span><span class="p">(</span><span class="o">&amp;</span><span class="n">timestamp</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>Also notice that there is a ctx field, which is set to point to some custom <cite>func_get_time()</cite>. This can be used inside the property get/set handlers to retrieve timestamp.</p>
<p>Here is an example of <code class="docutils literal notranslate"><span class="pre">get_prop_values()</span></code> handler, which is used for retrieving the timestamp.</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="n">esp_err_t</span><span class="w"> </span><span class="nf">get_property_values</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">props_count</span><span class="p">,</span>
<span class="w">                                     </span><span class="k">const</span><span class="w"> </span><span class="n">esp_local_ctrl_prop_t</span><span class="w"> </span><span class="o">*</span><span class="n">props</span><span class="p">,</span>
<span class="w">                                     </span><span class="n">esp_local_ctrl_prop_val_t</span><span class="w"> </span><span class="o">*</span><span class="n">prop_values</span><span class="p">,</span>
<span class="w">                                     </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">usr_ctx</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">props_count</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ESP_LOGI</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Reading %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">props</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">name</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">props</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">TYPE_TIMESTAMP</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="cm">/* Obtain the timer function from ctx */</span>
<span class="w">            </span><span class="kt">int32_t</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">func_get_time</span><span class="p">)(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">props</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ctx</span><span class="p">;</span>

<span class="w">            </span><span class="cm">/* Use static variable for saving the value. This is essential because the value has to be valid even after this function returns. Alternative is to use dynamic allocation and set the free_fn field */</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">ts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func_get_time</span><span class="p">();</span>
<span class="w">            </span><span class="n">prop_values</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ts</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ESP_OK</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Here is an example of <code class="docutils literal notranslate"><span class="pre">set_prop_values()</span></code> handler. Notice how we restrict from writing to read-only properties.</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="n">esp_err_t</span><span class="w"> </span><span class="nf">set_property_values</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">props_count</span><span class="p">,</span>
<span class="w">                                     </span><span class="k">const</span><span class="w"> </span><span class="n">esp_local_ctrl_prop_t</span><span class="w"> </span><span class="o">*</span><span class="n">props</span><span class="p">,</span>
<span class="w">                                     </span><span class="k">const</span><span class="w"> </span><span class="n">esp_local_ctrl_prop_val_t</span><span class="w"> </span><span class="o">*</span><span class="n">prop_values</span><span class="p">,</span>
<span class="w">                                     </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">usr_ctx</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">props_count</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">props</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">flags</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">READONLY</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">ESP_LOGE</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Cannot write to read-only property %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">props</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">name</span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">ESP_ERR_INVALID_ARG</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">ESP_LOGI</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Setting %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">props</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">name</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/* For keeping it simple, lets only log the incoming data */</span>
<span class="w">            </span><span class="n">ESP_LOG_BUFFER_HEX_LEVEL</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="n">prop_values</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">data</span><span class="p">,</span>
<span class="w">                                     </span><span class="n">prop_values</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">ESP_LOG_INFO</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ESP_OK</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>For complete example see <a class="reference external" href="https://github.com/espressif/esp-idf/tree/v5.4.2/examples/protocols/esp_local_ctrl">protocols/esp_local_ctrl</a>. The example demonstrates how to set up a secure <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl</span></code> service over HTTPS transport for controlling devices on a local network.</p>
</section>
<section id="client-side-implementation">
<h2>Client Side Implementation<a class="headerlink" href="#client-side-implementation" title="Permalink to this heading"></a></h2>
<p>The client side implementation establishes a protocomm session with the device first, over the supported mode of transport, and then send and receive protobuf messages understood by the <strong>esp_local_ctrl</strong> service. The service translates these messages into requests and then call the appropriate handlers (set/get). Then, the generated response for each handler is again packed into a protobuf message and transmitted back to the client.</p>
<p>See below the various protobuf messages understood by the <strong>esp_local_ctrl</strong> service:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get_prop_count</span></code> : This should simply return the total number of properties supported by the service.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_prop_values</span></code> : This accepts an array of indices and should return the information (name, type, flags) and values of the properties corresponding to those indices.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_prop_values</span></code> : This accepts an array of indices and an array of new values, which are used for setting the values of the properties corresponding to the indices.</p></li>
</ol>
<p>Note that indices may or may not be the same for a property, across multiple sessions. Therefore, the client must only use the names of the properties to uniquely identify them. So, every time a new session is established, the client should first call <code class="docutils literal notranslate"><span class="pre">get_prop_count</span></code> and then <code class="docutils literal notranslate"><span class="pre">get_prop_values</span></code>, hence form an index-to-name mapping for all properties. Now when calling <code class="docutils literal notranslate"><span class="pre">set_prop_values</span></code> for a set of properties, it must first convert the names to indexes, using the created mapping. As emphasized earlier, the client must refresh the index-to-name mapping every time a new session is established with the same device.</p>
<p>The various protocomm endpoints provided by <strong>esp_local_ctrl</strong> are listed below:</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Endpoints provided by ESP Local Control</span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 11.8%" />
<col style="width: 29.4%" />
<col style="width: 58.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Endpoint Name (Bluetooth Low Energy + GATT Server)</p></th>
<th class="head"><p>URI (HTTPS Server + mDNS)</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>esp_local_ctrl/version</p></td>
<td><p><a class="reference external" href="https:/">https:/</a>/&lt;mdns-hostname&gt;.local/esp_local_ctrl/version</p></td>
<td><p>Endpoint used for retrieving version string</p></td>
</tr>
<tr class="row-odd"><td><p>esp_local_ctrl/control</p></td>
<td><p><a class="reference external" href="https:/">https:/</a>/&lt;mdns-hostname&gt;.local/esp_local_ctrl/control</p></td>
<td><p>Endpoint used for sending or receiving control messages</p></td>
</tr>
</tbody>
</table>
</section>
<section id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this heading"></a></h2>
<section id="header-file">
<h3>Header File<a class="headerlink" href="#header-file" title="Permalink to this heading"></a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/esp_local_ctrl/include/esp_local_ctrl.h">components/esp_local_ctrl/include/esp_local_ctrl.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;esp_local_ctrl.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES esp_local_ctrl
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES esp_local_ctrl
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this heading"></a></h3>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv432esp_local_ctrl_get_transport_blev">
<span id="_CPPv332esp_local_ctrl_get_transport_blev"></span><span id="_CPPv232esp_local_ctrl_get_transport_blev"></span><span id="esp_local_ctrl_get_transport_ble__void"></span><span class="target" id="esp__local__ctrl_8h_1aa9d2c238f8093f1947bf4fc669de874b"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv426esp_local_ctrl_transport_t" title="esp_local_ctrl_transport_t"><span class="n"><span class="pre">esp_local_ctrl_transport_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_get_transport_ble</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv432esp_local_ctrl_get_transport_blev" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function for obtaining BLE transport mode. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv434esp_local_ctrl_get_transport_httpdv">
<span id="_CPPv334esp_local_ctrl_get_transport_httpdv"></span><span id="_CPPv234esp_local_ctrl_get_transport_httpdv"></span><span id="esp_local_ctrl_get_transport_httpd__void"></span><span class="target" id="esp__local__ctrl_8h_1a39bd64d5f7ead3418b30baefc3c07d85"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv426esp_local_ctrl_transport_t" title="esp_local_ctrl_transport_t"><span class="n"><span class="pre">esp_local_ctrl_transport_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_get_transport_httpd</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv434esp_local_ctrl_get_transport_httpdv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function for obtaining HTTPD transport mode. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv420esp_local_ctrl_startPK23esp_local_ctrl_config_t">
<span id="_CPPv320esp_local_ctrl_startPK23esp_local_ctrl_config_t"></span><span id="_CPPv220esp_local_ctrl_startPK23esp_local_ctrl_config_t"></span><span id="esp_local_ctrl_start__esp_local_ctrl_config_tCP"></span><span class="target" id="esp__local__ctrl_8h_1a5da45432dd35dc2b4b89d2c55303195c"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_start</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv423esp_local_ctrl_config_t" title="esp_local_ctrl_config_t"><span class="n"><span class="pre">esp_local_ctrl_config_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">config</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv420esp_local_ctrl_startPK23esp_local_ctrl_config_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Start local control service. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> -- <strong>[in]</strong> Pointer to configuration structure</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_FAIL : Failure </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv419esp_local_ctrl_stopv">
<span id="_CPPv319esp_local_ctrl_stopv"></span><span id="_CPPv219esp_local_ctrl_stopv"></span><span id="esp_local_ctrl_stop__void"></span><span class="target" id="esp__local__ctrl_8h_1a93066a9712cf1d21ba002e171fdd4bb0"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_stop</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419esp_local_ctrl_stopv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Stop local control service. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv427esp_local_ctrl_add_propertyPK21esp_local_ctrl_prop_t">
<span id="_CPPv327esp_local_ctrl_add_propertyPK21esp_local_ctrl_prop_t"></span><span id="_CPPv227esp_local_ctrl_add_propertyPK21esp_local_ctrl_prop_t"></span><span id="esp_local_ctrl_add_property__esp_local_ctrl_prop_tCP"></span><span class="target" id="esp__local__ctrl_8h_1a461e859ee281e95f7ea0e7a7561e7460"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_add_property</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv421esp_local_ctrl_prop_t" title="esp_local_ctrl_prop_t"><span class="n"><span class="pre">esp_local_ctrl_prop_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">prop</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv427esp_local_ctrl_add_propertyPK21esp_local_ctrl_prop_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Add a new property. </p>
<p>This adds a new property and allocates internal resources for it. The total number of properties that could be added is limited by configuration option <code class="docutils literal notranslate"><span class="pre">max_properties</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prop</strong> -- <strong>[in]</strong> Property description structure</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_FAIL : Failure </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv430esp_local_ctrl_remove_propertyPKc">
<span id="_CPPv330esp_local_ctrl_remove_propertyPKc"></span><span id="_CPPv230esp_local_ctrl_remove_propertyPKc"></span><span id="esp_local_ctrl_remove_property__cCP"></span><span class="target" id="esp__local__ctrl_8h_1a3cb044f5af0717190b95c9e66cf52ab4"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_remove_property</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv430esp_local_ctrl_remove_propertyPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>Remove a property. </p>
<p>This finds a property by name, and releases the internal resources which are associated with it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> -- <strong>[in]</strong> Name of the property to remove</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_ERR_NOT_FOUND : Failure </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv427esp_local_ctrl_get_propertyPKc">
<span id="_CPPv327esp_local_ctrl_get_propertyPKc"></span><span id="_CPPv227esp_local_ctrl_get_propertyPKc"></span><span id="esp_local_ctrl_get_property__cCP"></span><span class="target" id="esp__local__ctrl_8h_1a171aac122bf4da88e02e454bea79a5af"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv421esp_local_ctrl_prop_t" title="esp_local_ctrl_prop_t"><span class="n"><span class="pre">esp_local_ctrl_prop_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_get_property</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv427esp_local_ctrl_get_propertyPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get property description structure by name. </p>
<p>This API may be used to get a property's context structure <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl_prop_t</span></code> when its name is known</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> -- <strong>[in]</strong> Name of the property to find</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Pointer to property</p></li>
<li><p>NULL if not found </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv426esp_local_ctrl_set_handlerPKc23protocomm_req_handler_tPv">
<span id="_CPPv326esp_local_ctrl_set_handlerPKc23protocomm_req_handler_tPv"></span><span id="_CPPv226esp_local_ctrl_set_handlerPKc23protocomm_req_handler_tPv"></span><span id="esp_local_ctrl_set_handler__cCP.protocomm_req_handler_t.voidP"></span><span class="target" id="esp__local__ctrl_8h_1aabdbaff4a1b9d413c023d062f3af9006"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_set_handler</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">ep_name</span></span>, <a class="reference internal" href="../provisioning/protocomm.html#_CPPv423protocomm_req_handler_t" title="protocomm_req_handler_t"><span class="n"><span class="pre">protocomm_req_handler_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handler</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">user_ctx</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv426esp_local_ctrl_set_handlerPKc23protocomm_req_handler_tPv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Register protocomm handler for a custom endpoint. </p>
<p>This API can be called by the application to register a protocomm handler for an endpoint after the local control service has started.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In case of BLE transport the names and uuids of all custom endpoints must be provided beforehand as a part of the <code class="docutils literal notranslate"><span class="pre">protocomm_ble_config_t</span></code> structure set in <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl_config_t</span></code>, and passed to <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl_start()</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ep_name</strong> -- <strong>[in]</strong> Name of the endpoint </p></li>
<li><p><strong>handler</strong> -- <strong>[in]</strong> Endpoint handler function </p></li>
<li><p><strong>user_ctx</strong> -- <strong>[in]</strong> User data</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_FAIL : Failure </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="unions">
<h3>Unions<a class="headerlink" href="#unions" title="Permalink to this heading"></a></h3>
<dl class="cpp union">
<dt class="sig sig-object cpp" id="_CPPv433esp_local_ctrl_transport_config_t">
<span id="_CPPv333esp_local_ctrl_transport_config_t"></span><span id="_CPPv233esp_local_ctrl_transport_config_t"></span><span class="target" id="unionesp__local__ctrl__transport__config__t"></span><span class="k"><span class="pre">union</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_transport_config_t</span></span></span><a class="headerlink" href="#_CPPv433esp_local_ctrl_transport_config_t" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;esp_local_ctrl.h&gt;</em></div>
<p>Transport mode (BLE / HTTPD) configuration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N33esp_local_ctrl_transport_config_t3bleE">
<span id="_CPPv3N33esp_local_ctrl_transport_config_t3bleE"></span><span id="_CPPv2N33esp_local_ctrl_transport_config_t3bleE"></span><span id="esp_local_ctrl_transport_config_t::ble__esp_local_ctrl_transport_config_ble_tP"></span><span class="target" id="unionesp__local__ctrl__transport__config__t_1aa508d02943cd941d7636ebe922d14a29"></span><a class="reference internal" href="#_CPPv437esp_local_ctrl_transport_config_ble_t" title="esp_local_ctrl_transport_config_ble_t"><span class="n"><span class="pre">esp_local_ctrl_transport_config_ble_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">ble</span></span></span><a class="headerlink" href="#_CPPv4N33esp_local_ctrl_transport_config_t3bleE" title="Permalink to this definition"></a><br /></dt>
<dd><p>This is same as <code class="docutils literal notranslate"><span class="pre">protocomm_ble_config_t</span></code>. See <code class="docutils literal notranslate"><span class="pre">protocomm_ble.h</span></code> for available configuration parameters. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N33esp_local_ctrl_transport_config_t5httpdE">
<span id="_CPPv3N33esp_local_ctrl_transport_config_t5httpdE"></span><span id="_CPPv2N33esp_local_ctrl_transport_config_t5httpdE"></span><span id="esp_local_ctrl_transport_config_t::httpd__esp_local_ctrl_transport_config_httpd_tP"></span><span class="target" id="unionesp__local__ctrl__transport__config__t_1a05be86115e24344d5863765d1b3846bb"></span><a class="reference internal" href="#_CPPv439esp_local_ctrl_transport_config_httpd_t" title="esp_local_ctrl_transport_config_httpd_t"><span class="n"><span class="pre">esp_local_ctrl_transport_config_httpd_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">httpd</span></span></span><a class="headerlink" href="#_CPPv4N33esp_local_ctrl_transport_config_t5httpdE" title="Permalink to this definition"></a><br /></dt>
<dd><p>This is same as <code class="docutils literal notranslate"><span class="pre">httpd_ssl_config_t</span></code>. See <code class="docutils literal notranslate"><span class="pre">esp_https_server.h</span></code> for available configuration parameters. </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="structures">
<h3>Structures<a class="headerlink" href="#structures" title="Permalink to this heading"></a></h3>
<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv419esp_local_ctrl_prop">
<span id="_CPPv319esp_local_ctrl_prop"></span><span id="_CPPv219esp_local_ctrl_prop"></span><span id="esp_local_ctrl_prop"></span><span class="target" id="structesp__local__ctrl__prop"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_prop</span></span></span><a class="headerlink" href="#_CPPv419esp_local_ctrl_prop" title="Permalink to this definition"></a><br /></dt>
<dd><p>Property description data structure, which is to be populated and passed to the <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl_add_property()</span></code> function. </p>
<p>Once a property is added, its structure is available for read-only access inside <code class="docutils literal notranslate"><span class="pre">get_prop_values()</span></code> and <code class="docutils literal notranslate"><span class="pre">set_prop_values()</span></code> handlers. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N19esp_local_ctrl_prop4nameE">
<span id="_CPPv3N19esp_local_ctrl_prop4nameE"></span><span id="_CPPv2N19esp_local_ctrl_prop4nameE"></span><span id="esp_local_ctrl_prop::name__cP"></span><span class="target" id="structesp__local__ctrl__prop_1a593afc83ba4dd13f140af5665fd51a71"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">name</span></span></span><a class="headerlink" href="#_CPPv4N19esp_local_ctrl_prop4nameE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Unique name of property </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N19esp_local_ctrl_prop4typeE">
<span id="_CPPv3N19esp_local_ctrl_prop4typeE"></span><span id="_CPPv2N19esp_local_ctrl_prop4typeE"></span><span id="esp_local_ctrl_prop::type__uint32_t"></span><span class="target" id="structesp__local__ctrl__prop_1af45189667e728b8df77f849dc775b9c7"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">type</span></span></span><a class="headerlink" href="#_CPPv4N19esp_local_ctrl_prop4typeE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Type of property. This may be set to application defined enums </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N19esp_local_ctrl_prop4sizeE">
<span id="_CPPv3N19esp_local_ctrl_prop4sizeE"></span><span id="_CPPv2N19esp_local_ctrl_prop4sizeE"></span><span id="esp_local_ctrl_prop::size__s"></span><span class="target" id="structesp__local__ctrl__prop_1a3b0123caa857f8ec723d76e7944e9387"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">size</span></span></span><a class="headerlink" href="#_CPPv4N19esp_local_ctrl_prop4sizeE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Size of the property value, which:<ul class="simple">
<li><p>if zero, the property can have values of variable size</p></li>
<li><p>if non-zero, the property can have values of fixed size only, therefore, checks are performed internally by esp_local_ctrl when setting the value of such a property </p></li>
</ul>
</p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N19esp_local_ctrl_prop5flagsE">
<span id="_CPPv3N19esp_local_ctrl_prop5flagsE"></span><span id="_CPPv2N19esp_local_ctrl_prop5flagsE"></span><span id="esp_local_ctrl_prop::flags__uint32_t"></span><span class="target" id="structesp__local__ctrl__prop_1af6c3aea6879d49219bd1cf7c25342ff7"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">flags</span></span></span><a class="headerlink" href="#_CPPv4N19esp_local_ctrl_prop5flagsE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Flags set for this property. This could be a bit field. A flag may indicate property behavior, e.g. read-only / constant </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N19esp_local_ctrl_prop3ctxE">
<span id="_CPPv3N19esp_local_ctrl_prop3ctxE"></span><span id="_CPPv2N19esp_local_ctrl_prop3ctxE"></span><span id="esp_local_ctrl_prop::ctx__voidP"></span><span class="target" id="structesp__local__ctrl__prop_1a10871b43e8135e1f7ca2a4f8b18f938e"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">ctx</span></span></span><a class="headerlink" href="#_CPPv4N19esp_local_ctrl_prop3ctxE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to some context data relevant for this property. This will be available for use inside the <code class="docutils literal notranslate"><span class="pre">get_prop_values</span></code> and <code class="docutils literal notranslate"><span class="pre">set_prop_values</span></code> handlers as a part of this property structure. When set, this is valid throughout the lifetime of a property, till either the property is removed or the esp_local_ctrl service is stopped. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N19esp_local_ctrl_prop11ctx_free_fnE">
<span id="_CPPv3N19esp_local_ctrl_prop11ctx_free_fnE"></span><span id="_CPPv2N19esp_local_ctrl_prop11ctx_free_fnE"></span><span class="target" id="structesp__local__ctrl__prop_1abed1f47eb8b3e5cfd600dc1ec903364f"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">ctx_free_fn</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N19esp_local_ctrl_prop11ctx_free_fnE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function used by esp_local_ctrl to internally free the property context when <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl_remove_property()</span></code> or <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl_stop()</span></code> is called. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv423esp_local_ctrl_prop_val">
<span id="_CPPv323esp_local_ctrl_prop_val"></span><span id="_CPPv223esp_local_ctrl_prop_val"></span><span id="esp_local_ctrl_prop_val"></span><span class="target" id="structesp__local__ctrl__prop__val"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_prop_val</span></span></span><a class="headerlink" href="#_CPPv423esp_local_ctrl_prop_val" title="Permalink to this definition"></a><br /></dt>
<dd><p>Property value data structure. This gets passed to the <code class="docutils literal notranslate"><span class="pre">get_prop_values()</span></code> and <code class="docutils literal notranslate"><span class="pre">set_prop_values()</span></code> handlers for the purpose of retrieving or setting the present value of a property. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N23esp_local_ctrl_prop_val4dataE">
<span id="_CPPv3N23esp_local_ctrl_prop_val4dataE"></span><span id="_CPPv2N23esp_local_ctrl_prop_val4dataE"></span><span id="esp_local_ctrl_prop_val::data__voidP"></span><span class="target" id="structesp__local__ctrl__prop__val_1a9973594582305bdaff3f6f4821eaf2e2"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">data</span></span></span><a class="headerlink" href="#_CPPv4N23esp_local_ctrl_prop_val4dataE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to memory holding property value </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N23esp_local_ctrl_prop_val4sizeE">
<span id="_CPPv3N23esp_local_ctrl_prop_val4sizeE"></span><span id="_CPPv2N23esp_local_ctrl_prop_val4sizeE"></span><span id="esp_local_ctrl_prop_val::size__s"></span><span class="target" id="structesp__local__ctrl__prop__val_1a33fcac26a78881ae41d29cef5af10660"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">size</span></span></span><a class="headerlink" href="#_CPPv4N23esp_local_ctrl_prop_val4sizeE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Size of property value </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N23esp_local_ctrl_prop_val7free_fnE">
<span id="_CPPv3N23esp_local_ctrl_prop_val7free_fnE"></span><span id="_CPPv2N23esp_local_ctrl_prop_val7free_fnE"></span><span class="target" id="structesp__local__ctrl__prop__val_1a7012e59a9ff5763f7f64c64efccf94df"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">free_fn</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N23esp_local_ctrl_prop_val7free_fnE" title="Permalink to this definition"></a><br /></dt>
<dd><p>This may be set by the application in <code class="docutils literal notranslate"><span class="pre">get_prop_values()</span></code> handler to tell <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl</span></code> to call this function on the data pointer above, for freeing its resources after sending the <code class="docutils literal notranslate"><span class="pre">get_prop_values</span></code> response. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv423esp_local_ctrl_handlers">
<span id="_CPPv323esp_local_ctrl_handlers"></span><span id="_CPPv223esp_local_ctrl_handlers"></span><span id="esp_local_ctrl_handlers"></span><span class="target" id="structesp__local__ctrl__handlers"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_handlers</span></span></span><a class="headerlink" href="#_CPPv423esp_local_ctrl_handlers" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handlers for receiving and responding to local control commands for getting and setting properties. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N23esp_local_ctrl_handlers15get_prop_valuesE">
<span id="_CPPv3N23esp_local_ctrl_handlers15get_prop_valuesE"></span><span id="_CPPv2N23esp_local_ctrl_handlers15get_prop_valuesE"></span><span class="target" id="structesp__local__ctrl__handlers_1a29b439f71a094968b63aa1edaa96ba67"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">get_prop_values</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">props_count</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv421esp_local_ctrl_prop_t" title="esp_local_ctrl_prop_t"><span class="n"><span class="pre">esp_local_ctrl_prop_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">props</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv425esp_local_ctrl_prop_val_t" title="esp_local_ctrl_prop_val_t"><span class="n"><span class="pre">esp_local_ctrl_prop_val_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">prop_values</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">usr_ctx</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N23esp_local_ctrl_handlers15get_prop_valuesE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handler function to be implemented for retrieving current values of properties. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If any of the properties have fixed sizes, the size field of corresponding element in <code class="docutils literal notranslate"><span class="pre">prop_values</span></code> need to be set</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Param props_count<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> Total elements in the props array </p>
</dd>
<dt class="field-even">Param props<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>[in]</strong> Array of properties, the current values for which have been requested by the client </p>
</dd>
<dt class="field-odd">Param prop_values<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[out]</strong> Array of empty property values, the elements of which need to be populated with the current values of those properties specified by props argument </p>
</dd>
<dt class="field-even">Param usr_ctx<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>[in]</strong> This provides value of the <code class="docutils literal notranslate"><span class="pre">usr_ctx</span></code> field of <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl_handlers_t</span></code> structure</p>
</dd>
<dt class="field-odd">Return<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returning different error codes will convey the corresponding protocol level errors to the client :<ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_ERR_INVALID_ARG : InvalidArgument</p></li>
<li><p>ESP_ERR_INVALID_STATE : InvalidProto</p></li>
<li><p>All other error codes : InternalError </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N23esp_local_ctrl_handlers15set_prop_valuesE">
<span id="_CPPv3N23esp_local_ctrl_handlers15set_prop_valuesE"></span><span id="_CPPv2N23esp_local_ctrl_handlers15set_prop_valuesE"></span><span class="target" id="structesp__local__ctrl__handlers_1ad9335213ca09b50fcbaf442f937b2604"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">set_prop_values</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">props_count</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv421esp_local_ctrl_prop_t" title="esp_local_ctrl_prop_t"><span class="n"><span class="pre">esp_local_ctrl_prop_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">props</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv425esp_local_ctrl_prop_val_t" title="esp_local_ctrl_prop_val_t"><span class="n"><span class="pre">esp_local_ctrl_prop_val_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">prop_values</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">usr_ctx</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N23esp_local_ctrl_handlers15set_prop_valuesE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handler function to be implemented for changing values of properties. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If any of the properties have variable sizes, the size field of the corresponding element in <code class="docutils literal notranslate"><span class="pre">prop_values</span></code> must be checked explicitly before making any assumptions on the size.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Param props_count<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> Total elements in the props array </p>
</dd>
<dt class="field-even">Param props<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>[in]</strong> Array of properties, the values for which the client requests to change </p>
</dd>
<dt class="field-odd">Param prop_values<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> Array of property values, the elements of which need to be used for updating those properties specified by props argument </p>
</dd>
<dt class="field-even">Param usr_ctx<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>[in]</strong> This provides value of the <code class="docutils literal notranslate"><span class="pre">usr_ctx</span></code> field of <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl_handlers_t</span></code> structure</p>
</dd>
<dt class="field-odd">Return<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returning different error codes will convey the corresponding protocol level errors to the client :<ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_ERR_INVALID_ARG : InvalidArgument</p></li>
<li><p>ESP_ERR_INVALID_STATE : InvalidProto</p></li>
<li><p>All other error codes : InternalError </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N23esp_local_ctrl_handlers7usr_ctxE">
<span id="_CPPv3N23esp_local_ctrl_handlers7usr_ctxE"></span><span id="_CPPv2N23esp_local_ctrl_handlers7usr_ctxE"></span><span id="esp_local_ctrl_handlers::usr_ctx__voidP"></span><span class="target" id="structesp__local__ctrl__handlers_1a24f9e599a02f0428f39ddb90c69df805"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">usr_ctx</span></span></span><a class="headerlink" href="#_CPPv4N23esp_local_ctrl_handlers7usr_ctxE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Context pointer to be passed to above handler functions upon invocation. This is different from the property level context, as this is valid throughout the lifetime of the <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl</span></code> service, and freed only when the service is stopped. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N23esp_local_ctrl_handlers15usr_ctx_free_fnE">
<span id="_CPPv3N23esp_local_ctrl_handlers15usr_ctx_free_fnE"></span><span id="_CPPv2N23esp_local_ctrl_handlers15usr_ctx_free_fnE"></span><span class="target" id="structesp__local__ctrl__handlers_1aa4fed470f66cd5e17e6c3f3654c5ddb3"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">usr_ctx_free_fn</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">usr_ctx</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N23esp_local_ctrl_handlers15usr_ctx_free_fnE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to function which will be internally invoked on <code class="docutils literal notranslate"><span class="pre">usr_ctx</span></code> for freeing the context resources when <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl_stop()</span></code> is called. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv428esp_local_ctrl_proto_sec_cfg">
<span id="_CPPv328esp_local_ctrl_proto_sec_cfg"></span><span id="_CPPv228esp_local_ctrl_proto_sec_cfg"></span><span id="esp_local_ctrl_proto_sec_cfg"></span><span class="target" id="structesp__local__ctrl__proto__sec__cfg"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_proto_sec_cfg</span></span></span><a class="headerlink" href="#_CPPv428esp_local_ctrl_proto_sec_cfg" title="Permalink to this definition"></a><br /></dt>
<dd><p>Protocom security configs </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N28esp_local_ctrl_proto_sec_cfg7versionE">
<span id="_CPPv3N28esp_local_ctrl_proto_sec_cfg7versionE"></span><span id="_CPPv2N28esp_local_ctrl_proto_sec_cfg7versionE"></span><span id="esp_local_ctrl_proto_sec_cfg::version__esp_local_ctrl_proto_sec_t"></span><span class="target" id="structesp__local__ctrl__proto__sec__cfg_1a4fb609b9053bce5cf30fd38a5d616d22"></span><a class="reference internal" href="#_CPPv426esp_local_ctrl_proto_sec_t" title="esp_local_ctrl_proto_sec_t"><span class="n"><span class="pre">esp_local_ctrl_proto_sec_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">version</span></span></span><a class="headerlink" href="#_CPPv4N28esp_local_ctrl_proto_sec_cfg7versionE" title="Permalink to this definition"></a><br /></dt>
<dd><p>This sets protocom security version, sec0/sec1 or custom If custom, user must provide handle via <code class="docutils literal notranslate"><span class="pre">proto_sec_custom_handle</span></code> below </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N28esp_local_ctrl_proto_sec_cfg13custom_handleE">
<span id="_CPPv3N28esp_local_ctrl_proto_sec_cfg13custom_handleE"></span><span id="_CPPv2N28esp_local_ctrl_proto_sec_cfg13custom_handleE"></span><span id="esp_local_ctrl_proto_sec_cfg::custom_handle__voidP"></span><span class="target" id="structesp__local__ctrl__proto__sec__cfg_1a455b96a1f3c3ccacc92fb3401b7c0dcb"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">custom_handle</span></span></span><a class="headerlink" href="#_CPPv4N28esp_local_ctrl_proto_sec_cfg13custom_handleE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Custom security handle if security is set custom via <code class="docutils literal notranslate"><span class="pre">proto_sec</span></code> above This handle must follow <code class="docutils literal notranslate"><span class="pre">protocomm_security_t</span></code> signature </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N28esp_local_ctrl_proto_sec_cfg3popE">
<span id="_CPPv3N28esp_local_ctrl_proto_sec_cfg3popE"></span><span id="_CPPv2N28esp_local_ctrl_proto_sec_cfg3popE"></span><span id="esp_local_ctrl_proto_sec_cfg::pop__voidCP"></span><span class="target" id="structesp__local__ctrl__proto__sec__cfg_1a2f0e7a50e559451177586b9020d9f8a9"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">pop</span></span></span><a class="headerlink" href="#_CPPv4N28esp_local_ctrl_proto_sec_cfg3popE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Proof of possession to be used for local control. Could be NULL. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N28esp_local_ctrl_proto_sec_cfg10sec_paramsE">
<span id="_CPPv3N28esp_local_ctrl_proto_sec_cfg10sec_paramsE"></span><span id="_CPPv2N28esp_local_ctrl_proto_sec_cfg10sec_paramsE"></span><span id="esp_local_ctrl_proto_sec_cfg::sec_params__voidCP"></span><span class="target" id="structesp__local__ctrl__proto__sec__cfg_1a03d512b3d32bdc49a5018190a7fb29fe"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">sec_params</span></span></span><a class="headerlink" href="#_CPPv4N28esp_local_ctrl_proto_sec_cfg10sec_paramsE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to security params (NULL if not needed). This is not needed for protocomm security 0 This pointer should hold the struct of type esp_local_ctrl_security1_params_t for protocomm security 1 and esp_local_ctrl_security2_params_t for protocomm security 2 respectively. Could be NULL. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv421esp_local_ctrl_config">
<span id="_CPPv321esp_local_ctrl_config"></span><span id="_CPPv221esp_local_ctrl_config"></span><span id="esp_local_ctrl_config"></span><span class="target" id="structesp__local__ctrl__config"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_config</span></span></span><a class="headerlink" href="#_CPPv421esp_local_ctrl_config" title="Permalink to this definition"></a><br /></dt>
<dd><p>Configuration structure to pass to <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl_start()</span></code></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N21esp_local_ctrl_config9transportE">
<span id="_CPPv3N21esp_local_ctrl_config9transportE"></span><span id="_CPPv2N21esp_local_ctrl_config9transportE"></span><span id="esp_local_ctrl_config::transport__esp_local_ctrl_transport_tCP"></span><span class="target" id="structesp__local__ctrl__config_1ac867e91fd18e1dc13e30ef10fabeadb0"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv426esp_local_ctrl_transport_t" title="esp_local_ctrl_transport_t"><span class="n"><span class="pre">esp_local_ctrl_transport_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">transport</span></span></span><a class="headerlink" href="#_CPPv4N21esp_local_ctrl_config9transportE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Transport layer over which service will be provided </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N21esp_local_ctrl_config16transport_configE">
<span id="_CPPv3N21esp_local_ctrl_config16transport_configE"></span><span id="_CPPv2N21esp_local_ctrl_config16transport_configE"></span><span id="esp_local_ctrl_config::transport_config__esp_local_ctrl_transport_config_t"></span><span class="target" id="structesp__local__ctrl__config_1ae470cbf58995a5ffdf0c8fb84a7d0b97"></span><a class="reference internal" href="#_CPPv433esp_local_ctrl_transport_config_t" title="esp_local_ctrl_transport_config_t"><span class="n"><span class="pre">esp_local_ctrl_transport_config_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">transport_config</span></span></span><a class="headerlink" href="#_CPPv4N21esp_local_ctrl_config16transport_configE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Transport layer over which service will be provided </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N21esp_local_ctrl_config9proto_secE">
<span id="_CPPv3N21esp_local_ctrl_config9proto_secE"></span><span id="_CPPv2N21esp_local_ctrl_config9proto_secE"></span><span id="esp_local_ctrl_config::proto_sec__esp_local_ctrl_proto_sec_cfg_t"></span><span class="target" id="structesp__local__ctrl__config_1a858fe2de031451a155b42ae0e759b11c"></span><a class="reference internal" href="#_CPPv430esp_local_ctrl_proto_sec_cfg_t" title="esp_local_ctrl_proto_sec_cfg_t"><span class="n"><span class="pre">esp_local_ctrl_proto_sec_cfg_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">proto_sec</span></span></span><a class="headerlink" href="#_CPPv4N21esp_local_ctrl_config9proto_secE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Security version and POP </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N21esp_local_ctrl_config8handlersE">
<span id="_CPPv3N21esp_local_ctrl_config8handlersE"></span><span id="_CPPv2N21esp_local_ctrl_config8handlersE"></span><span id="esp_local_ctrl_config::handlers__esp_local_ctrl_handlers_t"></span><span class="target" id="structesp__local__ctrl__config_1ae027e1a9e99bc953ad4d42c230f8310a"></span><a class="reference internal" href="#_CPPv425esp_local_ctrl_handlers_t" title="esp_local_ctrl_handlers_t"><span class="n"><span class="pre">esp_local_ctrl_handlers_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">handlers</span></span></span><a class="headerlink" href="#_CPPv4N21esp_local_ctrl_config8handlersE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Register handlers for responding to get/set requests on properties </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N21esp_local_ctrl_config14max_propertiesE">
<span id="_CPPv3N21esp_local_ctrl_config14max_propertiesE"></span><span id="_CPPv2N21esp_local_ctrl_config14max_propertiesE"></span><span id="esp_local_ctrl_config::max_properties__s"></span><span class="target" id="structesp__local__ctrl__config_1acd2bbbf4a6094d79133b48ad3a8dee06"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">max_properties</span></span></span><a class="headerlink" href="#_CPPv4N21esp_local_ctrl_config14max_propertiesE" title="Permalink to this definition"></a><br /></dt>
<dd><p>This limits the number of properties that are available at a time </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="macros">
<h3>Macros<a class="headerlink" href="#macros" title="Permalink to this heading"></a></h3>
<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.ESP_LOCAL_CTRL_TRANSPORT_BLE">
<span class="target" id="esp__local__ctrl_8h_1ae616a8fee40d0ddbf1999d71de4183e1"></span><span class="sig-name descname"><span class="n"><span class="pre">ESP_LOCAL_CTRL_TRANSPORT_BLE</span></span></span><a class="headerlink" href="#c.ESP_LOCAL_CTRL_TRANSPORT_BLE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.ESP_LOCAL_CTRL_TRANSPORT_HTTPD">
<span class="target" id="esp__local__ctrl_8h_1aae943479a3a093cd2072742dce703a02"></span><span class="sig-name descname"><span class="n"><span class="pre">ESP_LOCAL_CTRL_TRANSPORT_HTTPD</span></span></span><a class="headerlink" href="#c.ESP_LOCAL_CTRL_TRANSPORT_HTTPD" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</section>
<section id="type-definitions">
<h3>Type Definitions<a class="headerlink" href="#type-definitions" title="Permalink to this heading"></a></h3>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv421esp_local_ctrl_prop_t">
<span id="_CPPv321esp_local_ctrl_prop_t"></span><span id="_CPPv221esp_local_ctrl_prop_t"></span><span id="esp_local_ctrl_prop_t"></span><span class="target" id="esp__local__ctrl_8h_1aa1c72e465e7b4489bb4b82e838d7ac43"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv419esp_local_ctrl_prop" title="esp_local_ctrl_prop"><span class="n"><span class="pre">esp_local_ctrl_prop</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_prop_t</span></span></span><a class="headerlink" href="#_CPPv421esp_local_ctrl_prop_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Property description data structure, which is to be populated and passed to the <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl_add_property()</span></code> function. </p>
<p>Once a property is added, its structure is available for read-only access inside <code class="docutils literal notranslate"><span class="pre">get_prop_values()</span></code> and <code class="docutils literal notranslate"><span class="pre">set_prop_values()</span></code> handlers. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv425esp_local_ctrl_prop_val_t">
<span id="_CPPv325esp_local_ctrl_prop_val_t"></span><span id="_CPPv225esp_local_ctrl_prop_val_t"></span><span id="esp_local_ctrl_prop_val_t"></span><span class="target" id="esp__local__ctrl_8h_1a3a92b30652fd94eb901f89700b99893b"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv423esp_local_ctrl_prop_val" title="esp_local_ctrl_prop_val"><span class="n"><span class="pre">esp_local_ctrl_prop_val</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_prop_val_t</span></span></span><a class="headerlink" href="#_CPPv425esp_local_ctrl_prop_val_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Property value data structure. This gets passed to the <code class="docutils literal notranslate"><span class="pre">get_prop_values()</span></code> and <code class="docutils literal notranslate"><span class="pre">set_prop_values()</span></code> handlers for the purpose of retrieving or setting the present value of a property. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv425esp_local_ctrl_handlers_t">
<span id="_CPPv325esp_local_ctrl_handlers_t"></span><span id="_CPPv225esp_local_ctrl_handlers_t"></span><span id="esp_local_ctrl_handlers_t"></span><span class="target" id="esp__local__ctrl_8h_1a2cb006d0188d896b573c9ffe49159787"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv423esp_local_ctrl_handlers" title="esp_local_ctrl_handlers"><span class="n"><span class="pre">esp_local_ctrl_handlers</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_handlers_t</span></span></span><a class="headerlink" href="#_CPPv425esp_local_ctrl_handlers_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handlers for receiving and responding to local control commands for getting and setting properties. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv426esp_local_ctrl_transport_t">
<span id="_CPPv326esp_local_ctrl_transport_t"></span><span id="_CPPv226esp_local_ctrl_transport_t"></span><span id="esp_local_ctrl_transport_t"></span><span class="target" id="esp__local__ctrl_8h_1a4d8f60a6abee20e32ec59db390563329"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">esp_local_ctrl_transport</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_transport_t</span></span></span><a class="headerlink" href="#_CPPv426esp_local_ctrl_transport_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Transport mode (BLE / HTTPD) over which the service will be provided. </p>
<p>This is forward declaration of a private structure, implemented internally by <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl</span></code>. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv437esp_local_ctrl_transport_config_ble_t">
<span id="_CPPv337esp_local_ctrl_transport_config_ble_t"></span><span id="_CPPv237esp_local_ctrl_transport_config_ble_t"></span><span id="esp_local_ctrl_transport_config_ble_t"></span><span class="target" id="esp__local__ctrl_8h_1a9f5467d013afbc9ac84b2d3bf524b727"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../provisioning/protocomm.html#_CPPv420protocomm_ble_config" title="protocomm_ble_config"><span class="n"><span class="pre">protocomm_ble_config</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_transport_config_ble_t</span></span></span><a class="headerlink" href="#_CPPv437esp_local_ctrl_transport_config_ble_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Configuration for transport mode BLE. </p>
<p>This is a forward declaration for <code class="docutils literal notranslate"><span class="pre">protocomm_ble_config_t</span></code>. To use this, application must set CONFIG_BT_ENABLED and include <code class="docutils literal notranslate"><span class="pre">protocomm_ble.h</span></code>. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv439esp_local_ctrl_transport_config_httpd_t">
<span id="_CPPv339esp_local_ctrl_transport_config_httpd_t"></span><span id="_CPPv239esp_local_ctrl_transport_config_httpd_t"></span><span id="esp_local_ctrl_transport_config_httpd_t"></span><span class="target" id="esp__local__ctrl_8h_1a2d00542fe66461fa983b76d2e050b7c8"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="esp_http_server.html#_CPPv412httpd_config" title="httpd_config"><span class="n"><span class="pre">httpd_config</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_transport_config_httpd_t</span></span></span><a class="headerlink" href="#_CPPv439esp_local_ctrl_transport_config_httpd_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Configuration for transport mode HTTPD. </p>
<p>This is a forward declaration for <code class="docutils literal notranslate"><span class="pre">httpd_ssl_config_t</span></code> (for HTTPS) or <code class="docutils literal notranslate"><span class="pre">httpd_config_t</span></code> (for HTTP) </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv426esp_local_ctrl_proto_sec_t">
<span id="_CPPv326esp_local_ctrl_proto_sec_t"></span><span id="_CPPv226esp_local_ctrl_proto_sec_t"></span><span id="esp_local_ctrl_proto_sec_t"></span><span class="target" id="esp__local__ctrl_8h_1aca980efe44cd98a5b7fc1c57f4f0fb52"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv424esp_local_ctrl_proto_sec" title="esp_local_ctrl_proto_sec"><span class="n"><span class="pre">esp_local_ctrl_proto_sec</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_proto_sec_t</span></span></span><a class="headerlink" href="#_CPPv426esp_local_ctrl_proto_sec_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Security types for esp_local_control. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv433esp_local_ctrl_security1_params_t">
<span id="_CPPv333esp_local_ctrl_security1_params_t"></span><span id="_CPPv233esp_local_ctrl_security1_params_t"></span><span id="esp_local_ctrl_security1_params_t"></span><span class="target" id="esp__local__ctrl_8h_1a3f33cc94132f2d8cfc5ac609405fa0de"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="../provisioning/protocomm.html#_CPPv428protocomm_security1_params_t" title="protocomm_security1_params_t"><span class="n"><span class="pre">protocomm_security1_params_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_security1_params_t</span></span></span><a class="headerlink" href="#_CPPv433esp_local_ctrl_security1_params_t" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv433esp_local_ctrl_security2_params_t">
<span id="_CPPv333esp_local_ctrl_security2_params_t"></span><span id="_CPPv233esp_local_ctrl_security2_params_t"></span><span id="esp_local_ctrl_security2_params_t"></span><span class="target" id="esp__local__ctrl_8h_1aafbe0abe3d94ced6939916cee0029d4a"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="../provisioning/protocomm.html#_CPPv428protocomm_security2_params_t" title="protocomm_security2_params_t"><span class="n"><span class="pre">protocomm_security2_params_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_security2_params_t</span></span></span><a class="headerlink" href="#_CPPv433esp_local_ctrl_security2_params_t" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv430esp_local_ctrl_proto_sec_cfg_t">
<span id="_CPPv330esp_local_ctrl_proto_sec_cfg_t"></span><span id="_CPPv230esp_local_ctrl_proto_sec_cfg_t"></span><span id="esp_local_ctrl_proto_sec_cfg_t"></span><span class="target" id="esp__local__ctrl_8h_1a92877f89aecb58b4b079b83acb45be10"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv428esp_local_ctrl_proto_sec_cfg" title="esp_local_ctrl_proto_sec_cfg"><span class="n"><span class="pre">esp_local_ctrl_proto_sec_cfg</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_proto_sec_cfg_t</span></span></span><a class="headerlink" href="#_CPPv430esp_local_ctrl_proto_sec_cfg_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Protocom security configs </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv423esp_local_ctrl_config_t">
<span id="_CPPv323esp_local_ctrl_config_t"></span><span id="_CPPv223esp_local_ctrl_config_t"></span><span id="esp_local_ctrl_config_t"></span><span class="target" id="esp__local__ctrl_8h_1a876f4cb268de2f553c674c37c8f1c9bd"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv421esp_local_ctrl_config" title="esp_local_ctrl_config"><span class="n"><span class="pre">esp_local_ctrl_config</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_config_t</span></span></span><a class="headerlink" href="#_CPPv423esp_local_ctrl_config_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Configuration structure to pass to <code class="docutils literal notranslate"><span class="pre">esp_local_ctrl_start()</span></code></p>
</dd></dl>

</section>
<section id="enumerations">
<h3>Enumerations<a class="headerlink" href="#enumerations" title="Permalink to this heading"></a></h3>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv424esp_local_ctrl_proto_sec">
<span id="_CPPv324esp_local_ctrl_proto_sec"></span><span id="_CPPv224esp_local_ctrl_proto_sec"></span><span class="target" id="esp__local__ctrl_8h_1a3dc56d465d4116428f8282869f2a10ae"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_local_ctrl_proto_sec</span></span></span><a class="headerlink" href="#_CPPv424esp_local_ctrl_proto_sec" title="Permalink to this definition"></a><br /></dt>
<dd><p>Security types for esp_local_control. </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N24esp_local_ctrl_proto_sec13PROTOCOM_SEC0E">
<span id="_CPPv3N24esp_local_ctrl_proto_sec13PROTOCOM_SEC0E"></span><span id="_CPPv2N24esp_local_ctrl_proto_sec13PROTOCOM_SEC0E"></span><span class="target" id="esp__local__ctrl_8h_1a3dc56d465d4116428f8282869f2a10aea103635656457a2053eff8ee65022f5ad"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PROTOCOM_SEC0</span></span></span><a class="headerlink" href="#_CPPv4N24esp_local_ctrl_proto_sec13PROTOCOM_SEC0E" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N24esp_local_ctrl_proto_sec13PROTOCOM_SEC1E">
<span id="_CPPv3N24esp_local_ctrl_proto_sec13PROTOCOM_SEC1E"></span><span id="_CPPv2N24esp_local_ctrl_proto_sec13PROTOCOM_SEC1E"></span><span class="target" id="esp__local__ctrl_8h_1a3dc56d465d4116428f8282869f2a10aeacdb26f941f866d048a994815991f5770"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PROTOCOM_SEC1</span></span></span><a class="headerlink" href="#_CPPv4N24esp_local_ctrl_proto_sec13PROTOCOM_SEC1E" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N24esp_local_ctrl_proto_sec13PROTOCOM_SEC2E">
<span id="_CPPv3N24esp_local_ctrl_proto_sec13PROTOCOM_SEC2E"></span><span id="_CPPv2N24esp_local_ctrl_proto_sec13PROTOCOM_SEC2E"></span><span class="target" id="esp__local__ctrl_8h_1a3dc56d465d4116428f8282869f2a10aead7094e29b1c1b722eb3c19df8674b452"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PROTOCOM_SEC2</span></span></span><a class="headerlink" href="#_CPPv4N24esp_local_ctrl_proto_sec13PROTOCOM_SEC2E" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N24esp_local_ctrl_proto_sec19PROTOCOM_SEC_CUSTOME">
<span id="_CPPv3N24esp_local_ctrl_proto_sec19PROTOCOM_SEC_CUSTOME"></span><span id="_CPPv2N24esp_local_ctrl_proto_sec19PROTOCOM_SEC_CUSTOME"></span><span class="target" id="esp__local__ctrl_8h_1a3dc56d465d4116428f8282869f2a10aea4d55bce4c6e41ddf77db390a090700d7"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PROTOCOM_SEC_CUSTOM</span></span></span><a class="headerlink" href="#_CPPv4N24esp_local_ctrl_proto_sec19PROTOCOM_SEC_CUSTOME" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

</section>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
             <div class="articleComments">

<style>
    .expand-feedback-content {
        display: none;
    }
    .click-like-or-dislike {
        background-color: #d3d3d3;
        pointer-events: none;
    }
</style>

<script>
    function submitFeedbackForm(user_likes_document) {
        // Send to GA4 the user reaction
        gtag('event', 'user_reaction', {
            'user_likes_document': user_likes_document
        });

        if (user_likes_document === 1) {
            document.querySelector('.like-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContentLike").style.display = 'block';
        } else {
            document.querySelector('.dislike-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContent").style.display = 'block';
        }

        document.querySelector('.like-btn').style.pointerEvents = 'none';
        document.querySelector('.dislike-btn').style.pointerEvents = 'none';
    }
</script>

<hr>

<p style="text-align:center"><strong>Was this page helpful?</strong></p>
<p style="text-align:center">
    <button class="like-btn" onclick="submitFeedbackForm(1)">
        <svg aria-hidden="true" focusable="false" class="color-fg-muted" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M8.834.066c.763.087 1.5.295 2.01.884.505.581.656 1.378.656 2.3 0 .467-.087 1.119-.157 1.637L11.328 5h1.422c.603 0 1.174.085 1.668.333.508.254.911.679 1.137 1.2.453.998.438 2.447.188 4.316l-.04.306c-.105.79-.195 1.473-.313 2.033-.131.63-.315 1.209-.668 1.672C13.97 15.847 12.706 16 11 16c-1.848 0-3.234-.333-4.388-.653-.165-.045-.323-.09-.475-.133-.658-.186-1.2-.34-1.725-.415A1.75 1.75 0 0 1 2.75 16h-1A1.75 1.75 0 0 1 0 14.25v-7.5C0 5.784.784 5 1.75 5h1a1.75 1.75 0 0 1 1.514.872c.258-.105.59-.268.918-.508C5.853 4.874 6.5 4.079 6.5 2.75v-.5c0-1.202.994-2.337 2.334-2.184ZM4.5 13.3c.705.088 1.39.284 2.072.478l.441.125c1.096.305 2.334.598 3.987.598 1.794 0 2.28-.223 2.528-.549.147-.193.276-.505.394-1.07.105-.502.188-1.124.295-1.93l.04-.3c.25-1.882.189-2.933-.068-3.497a.921.921 0 0 0-.442-.48c-.208-.104-.52-.174-.997-.174H11c-.686 0-1.295-.577-1.206-1.336.023-.192.05-.39.076-.586.065-.488.13-.97.13-1.328 0-.809-.144-1.15-.288-1.316-.137-.158-.402-.304-1.048-.378C8.357 1.521 8 1.793 8 2.25v.5c0 1.922-.978 3.128-1.933 3.825a5.831 5.831 0 0 1-1.567.81ZM2.75 6.5h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
    </button>
    <button class="dislike-btn" onclick="submitFeedbackForm(0)">
        <svg aria-hidden="true" focusable="false" class="" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M7.083 15.986c-.763-.087-1.499-.295-2.011-.884-.504-.581-.655-1.378-.655-2.299 0-.468.087-1.12.157-1.638l.015-.112H3.167c-.603 0-1.174-.086-1.669-.334a2.415 2.415 0 0 1-1.136-1.2c-.454-.998-.438-2.447-.188-4.316l.04-.306C.32 4.108.41 3.424.526 2.864c.132-.63.316-1.209.669-1.672C1.947.205 3.211.053 4.917.053c1.848 0 3.234.332 4.388.652l.474.133c.658.187 1.201.341 1.726.415a1.75 1.75 0 0 1 1.662-1.2h1c.966 0 1.75.784 1.75 1.75v7.5a1.75 1.75 0 0 1-1.75 1.75h-1a1.75 1.75 0 0 1-1.514-.872c-.259.105-.59.268-.919.508-.671.491-1.317 1.285-1.317 2.614v.5c0 1.201-.994 2.336-2.334 2.183Zm4.334-13.232c-.706-.089-1.39-.284-2.072-.479l-.441-.125c-1.096-.304-2.335-.597-3.987-.597-1.794 0-2.28.222-2.529.548-.147.193-.275.505-.393 1.07-.105.502-.188 1.124-.295 1.93l-.04.3c-.25 1.882-.19 2.933.067 3.497a.923.923 0 0 0 .443.48c.208.104.52.175.997.175h1.75c.685 0 1.295.577 1.205 1.335-.022.192-.049.39-.075.586-.066.488-.13.97-.13 1.329 0 .808.144 1.15.288 1.316.137.157.401.303 1.048.377.307.035.664-.237.664-.693v-.5c0-1.922.978-3.127 1.932-3.825a5.878 5.878 0 0 1 1.568-.809Zm1.75 6.798h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25Z"></path>
        </svg>
    </button>
</p>

<div class="expand-feedback-content" id="expandContentLike">
    <ul style="text-align:center">
        <li>Thank you! We received your feedback.</li>
        <li>If you have any comments, fill in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=ESP Local Control (api-reference/protocols/esp_local_ctrl)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<div class="expand-feedback-content" id="expandContent">
    <ul style="text-align:center">
        <li>We value your feedback.</li>
        <li>Let us know how we can improve this page by filling in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=ESP Local Control (api-reference/protocols/esp_local_ctrl)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<br>


             </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="esp_http_client.html" class="btn btn-neutral float-left" title="ESP HTTP Client" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="esp_serial_slave_link.html" class="btn btn-neutral float-right" title="ESP Serial Slave Link" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016 - 2025, Espressif Systems (Shanghai) Co., Ltd.</p>
  </div>

  <ul class="footer">
        <li>
	    
            
            Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/espressif/sphinx_idf_theme">theme</a>  based on <a href="https://github.com/readthedocs/sphinx_rtd_theme">Read the Docs Sphinx Theme</a>.
         </li>
    <li class="footer-aside">
        <a href="../../esp-idf-en-v5.4.2.zip"> Download HTML</a>
    </li>

  </ul> 

</footer>
        </div>
      </div>
    </section>
  </div>

  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>