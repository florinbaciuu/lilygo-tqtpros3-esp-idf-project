<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-73KGWFC8DM"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-73KGWFC8DM');
        </script><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HTTP Server - ESP32 -  &mdash; ESP-IDF Programming Guide v5.4.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=a60756f2" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=949a1ff5" />
      <link rel="stylesheet" type="text/css" href="../../_static/theme_overrides.css?v=851bd809" />

  
    <link rel="canonical" href="https://docs.espressif.com/projects/esp-idf/en/stable/esp32/api-reference/protocols/esp_http_server.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=c241bbaf"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=ff8fa330"></script>
        <script src="https://wavedrom.com/skins/default.js"></script>
        <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <script src="../../_static/js/theme.js"></script>

    
        

    <script type="text/javascript">
        DOCUMENTATION_OPTIONS.PAGENAME = 'api-reference/protocols/esp_http_server';
        DOCUMENTATION_OPTIONS.PROJECT_SLUG = 'esp-idf';
        DOCUMENTATION_OPTIONS.LATEST_BRANCH_NAME = 'master';
        DOCUMENTATION_OPTIONS.VERSIONS_URL = 'https://dl.espressif.com/dl/esp-idf/idf_versions.js';
        DOCUMENTATION_OPTIONS.LANGUAGES = ["en", "zh_CN"];
        DOCUMENTATION_OPTIONS.IDF_TARGET = 'esp32';
        DOCUMENTATION_OPTIONS.HAS_IDF_TARGETS = ["esp32", "esp32s2", "esp32s3", "esp32c3", "esp32c2", "esp32c5", "esp32c6", "esp32p4"]
        DOCUMENTATION_OPTIONS.RELEASE = 'v5.4.2';
        DOCUMENTATION_OPTIONS.LANGUAGE_URL = 'en';

    </script>

    <script type="text/javascript" src="https://dl.espressif.com/dl/esp-idf/idf_versions.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="HTTPS Server" href="esp_https_server.html" />
    <link rel="prev" title="ESP x509 Certificate Bundle" href="esp_crt_bundle.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ESP-IDF Programming Guide
              <img src="../../_static/espressif-logo.svg" class="logo" alt="Logo"/>
          </a>

          
            <div class="selectors">
              <select id="target-select" style="width: 150px;" hidden>
                <option value="" disabled selected>Choose target...</option>
              </select>
            </div>
          

          <div class="selectors">
            <select id="version-select" style="width: 150px;" hidden>
              <option value="" disabled selected>Choose version...</option>
            </select>
          </div>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Get Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-conventions.html">API Conventions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Application Protocols</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="asio.html">ASIO Port</a></li>
<li class="toctree-l3"><a class="reference internal" href="modbus.html">ESP-Modbus</a></li>
<li class="toctree-l3"><a class="reference internal" href="mqtt.html">ESP-MQTT</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_tls.html">ESP-TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_http_client.html">ESP HTTP Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_local_ctrl.html">ESP Local Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_serial_slave_link.html">ESP Serial Slave Link</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_crt_bundle.html">ESP x509 Certificate Bundle</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">HTTP Server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#application-examples">Application Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#persistent-connections">Persistent Connections</a></li>
<li class="toctree-l4"><a class="reference internal" href="#websocket-server">WebSocket Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#event-handling">Event Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#file-serving">File Serving</a></li>
<li class="toctree-l4"><a class="reference internal" href="#captive-portal">Captive Portal</a></li>
<li class="toctree-l4"><a class="reference internal" href="#asynchronous-handlers">Asynchronous Handlers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#restful-api">RESTful API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="esp_https_server.html">HTTPS Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="icmp_echo.html">ICMP Echo</a></li>
<li class="toctree-l3"><a class="reference internal" href="mdns.html">mDNS Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="mbedtls.html">Mbed TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#ip-network-layer">IP Network Layer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth® API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error-codes.html">Error Codes Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/index.html">Networking APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peripherals/index.html">Peripherals API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kconfig.html">Project Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/index.html">Provisioning API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">Storage API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system/index.html">System API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hw-reference/index.html">Hardware Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-guides/index.html">API Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration-guides/index.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries-and-frameworks/index.html">Libraries and Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contributions Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">ESP-IDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COPYRIGHT.html">Copyrights and Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../languages.html">Switch Between Languages</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ESP-IDF Programming Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="index.html">Application Protocols</a></li>
      <li class="breadcrumb-item active">HTTP Server</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/espressif/esp-idf/blob/v5.4.2/docs/en/api-reference/protocols/esp_http_server.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="http-server">
<h1>HTTP Server<a class="headerlink" href="#http-server" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="../../../../../zh_CN/v5.4.2/esp32/api-reference/protocols/esp_http_server.html">[中文]</a></p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The HTTP Server component provides an ability for running a lightweight web server on ESP32. Following are detailed steps to use the API exposed by HTTP Server:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#_CPPv411httpd_startP14httpd_handle_tPK14httpd_config_t" title="httpd_start"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">httpd_start()</span></code></a>: Creates an instance of HTTP server, allocate memory/resources for it depending upon the specified configuration and outputs a handle to the server instance. The server has both, a listening socket (TCP) for HTTP traffic, and a control socket (UDP) for control signals, which are selected in a round robin fashion in the server task loop. The task priority and stack size are configurable during server instance creation by passing <code class="docutils literal notranslate"><span class="pre">httpd_config_t</span></code> structure to <code class="docutils literal notranslate"><span class="pre">httpd_start()</span></code>. TCP traffic is parsed as HTTP requests and, depending on the requested URI, user registered handlers are invoked which are supposed to send back HTTP response packets.</p></li>
<li><p><a class="reference internal" href="#_CPPv410httpd_stop14httpd_handle_t" title="httpd_stop"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">httpd_stop()</span></code></a>: This stops the server with the provided handle and frees up any associated memory/resources. This is a blocking function that first signals a halt to the server task and then waits for the task to terminate. While stopping, the task closes all open connections, removes registered URI handlers and resets all session context data to empty.</p></li>
<li><p><a class="reference internal" href="#_CPPv426httpd_register_uri_handler14httpd_handle_tPK11httpd_uri_t" title="httpd_register_uri_handler"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">httpd_register_uri_handler()</span></code></a>: A URI handler is registered by passing object of type <code class="docutils literal notranslate"><span class="pre">httpd_uri_t</span></code> structure which has members including <code class="docutils literal notranslate"><span class="pre">uri</span></code> name, <code class="docutils literal notranslate"><span class="pre">method</span></code> type (eg. <code class="docutils literal notranslate"><span class="pre">HTTPD_GET/HTTPD_POST/HTTPD_PUT</span></code> etc.), function pointer of type <code class="docutils literal notranslate"><span class="pre">esp_err_t</span> <span class="pre">*handler</span> <span class="pre">(httpd_req_t</span> <span class="pre">*req)</span></code> and <code class="docutils literal notranslate"><span class="pre">user_ctx</span></code> pointer to user context data.</p></li>
</ul>
</div></blockquote>
</section>
<section id="application-examples">
<h2>Application Examples<a class="headerlink" href="#application-examples" title="Permalink to this heading"></a></h2>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Our URI handler function to be called during GET /uri request */</span>
<span class="n">esp_err_t</span><span class="w"> </span><span class="nf">get_handler</span><span class="p">(</span><span class="n">httpd_req_t</span><span class="w"> </span><span class="o">*</span><span class="n">req</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/* Send a simple response */</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">resp</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;URI GET Response&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">httpd_resp_send</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">resp</span><span class="p">,</span><span class="w"> </span><span class="n">HTTPD_RESP_USE_STRLEN</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ESP_OK</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* Our URI handler function to be called during POST /uri request */</span>
<span class="n">esp_err_t</span><span class="w"> </span><span class="nf">post_handler</span><span class="p">(</span><span class="n">httpd_req_t</span><span class="w"> </span><span class="o">*</span><span class="n">req</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/* Destination buffer for content of HTTP POST request.</span>
<span class="cm">     * httpd_req_recv() accepts char* only, but content could</span>
<span class="cm">     * as well be any binary data (needs type casting).</span>
<span class="cm">     * In case of string data, null termination will be absent, and</span>
<span class="cm">     * content length would give length of string */</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">content</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>

<span class="w">    </span><span class="cm">/* Truncate if content length larger than the buffer */</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">recv_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MIN</span><span class="p">(</span><span class="n">req</span><span class="o">-&gt;</span><span class="n">content_len</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">content</span><span class="p">));</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">httpd_req_recv</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">content</span><span class="p">,</span><span class="w"> </span><span class="n">recv_size</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="cm">/* 0 return value indicates connection closed */</span>
<span class="w">        </span><span class="cm">/* Check if timeout occurred */</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">HTTPD_SOCK_ERR_TIMEOUT</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="cm">/* In case of timeout one can choose to retry calling</span>
<span class="cm">             * httpd_req_recv(), but to keep it simple, here we</span>
<span class="cm">             * respond with an HTTP 408 (Request Timeout) error */</span>
<span class="w">            </span><span class="n">httpd_resp_send_408</span><span class="p">(</span><span class="n">req</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="cm">/* In case of error, returning ESP_FAIL will</span>
<span class="cm">         * ensure that the underlying socket is closed */</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ESP_FAIL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/* Send a simple response */</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">resp</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;URI POST Response&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">httpd_resp_send</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">resp</span><span class="p">,</span><span class="w"> </span><span class="n">HTTPD_RESP_USE_STRLEN</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ESP_OK</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* URI handler structure for GET /uri */</span>
<span class="n">httpd_uri_t</span><span class="w"> </span><span class="n">uri_get</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">uri</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/uri&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">method</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">handler</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">get_handler</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">user_ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span>
<span class="p">};</span>

<span class="cm">/* URI handler structure for POST /uri */</span>
<span class="n">httpd_uri_t</span><span class="w"> </span><span class="n">uri_post</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">uri</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/uri&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">method</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">HTTP_POST</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">handler</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">post_handler</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">user_ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span>
<span class="p">};</span>

<span class="cm">/* Function for starting the webserver */</span>
<span class="n">httpd_handle_t</span><span class="w"> </span><span class="nf">start_webserver</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/* Generate default configuration */</span>
<span class="w">    </span><span class="n">httpd_config_t</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HTTPD_DEFAULT_CONFIG</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/* Empty handle to esp_http_server */</span>
<span class="w">    </span><span class="n">httpd_handle_t</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/* Start the httpd server */</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">httpd_start</span><span class="p">(</span><span class="o">&amp;</span><span class="n">server</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">config</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ESP_OK</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="cm">/* Register URI handlers */</span>
<span class="w">        </span><span class="n">httpd_register_uri_handler</span><span class="p">(</span><span class="n">server</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">uri_get</span><span class="p">);</span>
<span class="w">        </span><span class="n">httpd_register_uri_handler</span><span class="p">(</span><span class="n">server</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">uri_post</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="cm">/* If server failed to start, handle will be NULL */</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">server</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* Function for stopping the webserver */</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">stop_webserver</span><span class="p">(</span><span class="n">httpd_handle_t</span><span class="w"> </span><span class="n">server</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">server</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="cm">/* Stop the httpd server */</span>
<span class="w">        </span><span class="n">httpd_stop</span><span class="p">(</span><span class="n">server</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<section id="simple-http-server-example">
<h3>Simple HTTP Server Example<a class="headerlink" href="#simple-http-server-example" title="Permalink to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/espressif/esp-idf/tree/v5.4.2/examples/protocols/http_server/simple">protocols/http_server/simple</a> demonstrates how to handle arbitrary content lengths, read request headers and URL query parameters, and set response headers.</p>
</section>
<section id="advanced-testing-example">
<h3>Advanced Testing Example<a class="headerlink" href="#advanced-testing-example" title="Permalink to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/espressif/esp-idf/tree/v5.4.2/examples/protocols/http_server/advanced_tests">protocols/http_server/advanced_tests</a> demonstrates how to use the HTTP server for advanced testing.</p>
</section>
</section>
<section id="persistent-connections">
<h2>Persistent Connections<a class="headerlink" href="#persistent-connections" title="Permalink to this heading"></a></h2>
<p>HTTP server features persistent connections, allowing for the reuse of the same connection (session) for several transfers, all the while maintaining context specific data for the session. Context data may be allocated dynamically by the handler in which case a custom function may need to be specified for freeing this data when the connection/session is closed.</p>
<section id="persistent-connections-example">
<h3>Persistent Connections Example<a class="headerlink" href="#persistent-connections-example" title="Permalink to this heading"></a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Custom function to free context */</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">free_ctx_func</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/* Could be something other than free */</span>
<span class="w">    </span><span class="n">free</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">esp_err_t</span><span class="w"> </span><span class="nf">adder_post_handler</span><span class="p">(</span><span class="n">httpd_req_t</span><span class="w"> </span><span class="o">*</span><span class="n">req</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/* Create session&#39;s context if not already available */</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="w"> </span><span class="n">req</span><span class="o">-&gt;</span><span class="n">sess_ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">req</span><span class="o">-&gt;</span><span class="n">sess_ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">ANY_DATA_TYPE</span><span class="p">));</span><span class="w">  </span><span class="cm">/*!&lt; Pointer to context data */</span>
<span class="w">        </span><span class="n">req</span><span class="o">-&gt;</span><span class="n">free_ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">free_ctx_func</span><span class="p">;</span><span class="w">                  </span><span class="cm">/*!&lt; Function to free context data */</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/* Access context data */</span>
<span class="w">    </span><span class="n">ANY_DATA_TYPE</span><span class="w"> </span><span class="o">*</span><span class="n">ctx_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">ANY_DATA_TYPE</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">req</span><span class="o">-&gt;</span><span class="n">sess_ctx</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/* Respond */</span>
<span class="w">    </span><span class="p">...............</span>
<span class="w">    </span><span class="p">...............</span>
<span class="w">    </span><span class="p">...............</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ESP_OK</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Check the example under <a class="reference external" href="https://github.com/espressif/esp-idf/tree/v5.4.2/examples/protocols/http_server/persistent_sockets">protocols/http_server/persistent_sockets</a>. This example demonstrates how to set up and use an HTTP server with persistent sockets, allowing for independent sessions or contexts per client.</p>
</section>
</section>
<section id="websocket-server">
<h2>WebSocket Server<a class="headerlink" href="#websocket-server" title="Permalink to this heading"></a></h2>
<p>The HTTP server component provides WebSocket support. The WebSocket feature can be enabled in menuconfig using the <a class="reference internal" href="../kconfig.html#config-httpd-ws-support"><span class="std std-ref">CONFIG_HTTPD_WS_SUPPORT</span></a> option.</p>
<p><a class="reference external" href="https://github.com/espressif/esp-idf/tree/v5.4.2/examples/protocols/http_server/ws_echo_server">protocols/http_server/ws_echo_server</a> demonstrates how to create a WebSocket echo server using the HTTP server, which starts on a local network and requires a WebSocket client for interaction, echoing back received WebSocket frames.</p>
</section>
<section id="event-handling">
<h2>Event Handling<a class="headerlink" href="#event-handling" title="Permalink to this heading"></a></h2>
<p>ESP HTTP server has various events for which a handler can be triggered by <a class="reference internal" href="../system/esp_event.html"><span class="doc">the Event Loop library</span></a> when the particular event occurs. The handler has to be registered using <a class="reference internal" href="../system/esp_event.html#_CPPv426esp_event_handler_register16esp_event_base_t7int32_t19esp_event_handler_tPv" title="esp_event_handler_register"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_event_handler_register()</span></code></a>. This helps in event handling for ESP HTTP server.</p>
<p><a class="reference internal" href="#_CPPv426esp_http_server_event_id_t" title="esp_http_server_event_id_t"><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">esp_http_server_event_id_t</span></code></a> has all the events which can happen for ESP HTTP server.</p>
<p>Expected data type for different ESP HTTP server events in event loop:</p>
<blockquote>
<div><ul class="simple">
<li><p>HTTP_SERVER_EVENT_ERROR           :   <code class="docutils literal notranslate"><span class="pre">httpd_err_code_t</span></code></p></li>
<li><p>HTTP_SERVER_EVENT_START           :   <code class="docutils literal notranslate"><span class="pre">NULL</span></code></p></li>
<li><p>HTTP_SERVER_EVENT_ON_CONNECTED    :   <code class="docutils literal notranslate"><span class="pre">int</span></code></p></li>
<li><p>HTTP_SERVER_EVENT_ON_HEADER       :   <code class="docutils literal notranslate"><span class="pre">int</span></code></p></li>
<li><p>HTTP_SERVER_EVENT_HEADERS_SENT    :   <code class="docutils literal notranslate"><span class="pre">int</span></code></p></li>
<li><p>HTTP_SERVER_EVENT_ON_DATA         :   <code class="docutils literal notranslate"><span class="pre">esp_http_server_event_data</span></code></p></li>
<li><p>HTTP_SERVER_EVENT_SENT_DATA       :   <code class="docutils literal notranslate"><span class="pre">esp_http_server_event_data</span></code></p></li>
<li><p>HTTP_SERVER_EVENT_DISCONNECTED    :   <code class="docutils literal notranslate"><span class="pre">int</span></code></p></li>
<li><p>HTTP_SERVER_EVENT_STOP            :   <code class="docutils literal notranslate"><span class="pre">NULL</span></code></p></li>
</ul>
</div></blockquote>
</section>
<section id="file-serving">
<h2>File Serving<a class="headerlink" href="#file-serving" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/espressif/esp-idf/tree/v5.4.2/examples/protocols/http_server/file_serving">protocols/http_server/file_serving</a> demonstrates how to create a simple HTTP file server, with both upload and download capabilities.</p>
</section>
<section id="captive-portal">
<h2>Captive Portal<a class="headerlink" href="#captive-portal" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/espressif/esp-idf/tree/v5.4.2/examples/protocols/http_server/captive_portal">protocols/http_server/captive_portal</a> demonstrates two methods of creating a captive portal, which directs users to an authentication page before browsing, using either DNS queries and HTTP requests redirection or a modern method involving a field in the DHCP offer.</p>
</section>
<section id="asynchronous-handlers">
<h2>Asynchronous Handlers<a class="headerlink" href="#asynchronous-handlers" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/espressif/esp-idf/tree/v5.4.2/examples/protocols/http_server/async_handlers">protocols/http_server/async_handlers</a> demonstrates how to handle multiple long-running simultaneous requests within the HTTP server, using different URIs for asynchronous requests, quick requests, and the index page.</p>
</section>
<section id="restful-api">
<h2>RESTful API<a class="headerlink" href="#restful-api" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/espressif/esp-idf/tree/v5.4.2/examples/protocols/http_server/restful_server">protocols/http_server/restful_server</a> demonstrates how to implement a RESTful API server and HTTP server, with a frontend browser UI, and designs several APIs to fetch resources, using mDNS to parse the domain name, and deploying the webpage to host PC via semihost technology or to SPI flash or SD Card.</p>
</section>
<section id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this heading"></a></h2>
<section id="header-file">
<h3>Header File<a class="headerlink" href="#header-file" title="Permalink to this heading"></a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/esp_http_server/include/esp_http_server.h">components/esp_http_server/include/esp_http_server.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;esp_http_server.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">esp_http_server</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">esp_http_server</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES esp_http_server
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES esp_http_server
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this heading"></a></h3>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv411httpd_startP14httpd_handle_tPK14httpd_config_t">
<span id="_CPPv311httpd_startP14httpd_handle_tPK14httpd_config_t"></span><span id="_CPPv211httpd_startP14httpd_handle_tPK14httpd_config_t"></span><span id="httpd_start__httpd_handle_tP.httpd_config_tCP"></span><span class="target" id="esp__http__server_8h_1a67fc09a6f8b438d55f8277f0112fe2d2"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_start</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">handle</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv414httpd_config_t" title="httpd_config_t"><span class="n"><span class="pre">httpd_config_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">config</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv411httpd_startP14httpd_handle_tPK14httpd_config_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Starts the web server. </p>
<p>Create an instance of HTTP server and allocate memory/resources for it depending upon the specified configuration.</p>
<p>Example usage: <div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">//Function for starting the webserver</span>
<span class="n">httpd_handle_t</span><span class="w"> </span><span class="nf">start_webserver</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">     </span><span class="c1">// Generate default configuration</span>
<span class="w">     </span><span class="n">httpd_config_t</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HTTPD_DEFAULT_CONFIG</span><span class="p">();</span>

<span class="w">     </span><span class="c1">// Empty handle to http_server</span>
<span class="w">     </span><span class="n">httpd_handle_t</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>

<span class="w">     </span><span class="c1">// Start the httpd server</span>
<span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">httpd_start</span><span class="p">(</span><span class="o">&amp;</span><span class="n">server</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">config</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ESP_OK</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="c1">// Register URI handlers</span>
<span class="w">         </span><span class="n">httpd_register_uri_handler</span><span class="p">(</span><span class="n">server</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">uri_get</span><span class="p">);</span>
<span class="w">         </span><span class="n">httpd_register_uri_handler</span><span class="p">(</span><span class="n">server</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">uri_post</span><span class="p">);</span>
<span class="w">     </span><span class="p">}</span>
<span class="w">     </span><span class="c1">// If server failed to start, handle will be NULL</span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="n">server</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> -- <strong>[in]</strong> Configuration for new instance of the server </p></li>
<li><p><strong>handle</strong> -- <strong>[out]</strong> Handle to newly created instance of the server. NULL on error </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Instance created successfully</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null argument(s)</p></li>
<li><p>ESP_ERR_HTTPD_ALLOC_MEM : Failed to allocate memory for instance</p></li>
<li><p>ESP_ERR_HTTPD_TASK : Failed to launch server task </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv410httpd_stop14httpd_handle_t">
<span id="_CPPv310httpd_stop14httpd_handle_t"></span><span id="_CPPv210httpd_stop14httpd_handle_t"></span><span id="httpd_stop__httpd_handle_t"></span><span class="target" id="esp__http__server_8h_1acbb0acc68fa2da437c041d06f35fb861"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_stop</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv410httpd_stop14httpd_handle_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Stops the web server. </p>
<p>Deallocates memory/resources used by an HTTP server instance and deletes it. Once deleted the handle can no longer be used for accessing the instance.</p>
<p>Example usage: <div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Function for stopping the webserver</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">stop_webserver</span><span class="p">(</span><span class="n">httpd_handle_t</span><span class="w"> </span><span class="n">server</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">     </span><span class="c1">// Ensure handle is non NULL</span>
<span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">server</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="c1">// Stop the httpd server</span>
<span class="w">         </span><span class="n">httpd_stop</span><span class="p">(</span><span class="n">server</span><span class="p">);</span>
<span class="w">     </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>handle</strong> -- <strong>[in]</strong> Handle to server returned by httpd_start </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Server stopped successfully</p></li>
<li><p>ESP_ERR_INVALID_ARG : Handle argument is Null </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv426httpd_register_uri_handler14httpd_handle_tPK11httpd_uri_t">
<span id="_CPPv326httpd_register_uri_handler14httpd_handle_tPK11httpd_uri_t"></span><span id="_CPPv226httpd_register_uri_handler14httpd_handle_tPK11httpd_uri_t"></span><span id="httpd_register_uri_handler__httpd_handle_t.httpd_uri_tCP"></span><span class="target" id="esp__http__server_8h_1a76040cbeebdd3fea67c15842c9713cc8"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_register_uri_handler</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handle</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv411httpd_uri_t" title="httpd_uri_t"><span class="n"><span class="pre">httpd_uri_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">uri_handler</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv426httpd_register_uri_handler14httpd_handle_tPK11httpd_uri_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Registers a URI handler. </p>
<p>
Example usage: <div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">esp_err_t</span><span class="w"> </span><span class="nf">my_uri_handler</span><span class="p">(</span><span class="n">httpd_req_t</span><span class="o">*</span><span class="w"> </span><span class="n">req</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// Recv , Process and Send</span>
<span class="w">    </span><span class="p">....</span>
<span class="w">    </span><span class="p">....</span>
<span class="w">    </span><span class="p">....</span>

<span class="w">    </span><span class="c1">// Fail condition</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(....)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Return fail to close session //</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ESP_FAIL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// On success</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ESP_OK</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// URI handler structure</span>
<span class="n">httpd_uri_t</span><span class="w"> </span><span class="n">my_uri</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">uri</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/my_uri/path/xyz&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">method</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">HTTPD_GET</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">handler</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">my_uri_handler</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">user_ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span>
<span class="p">};</span>

<span class="c1">// Register handler</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">httpd_register_uri_handler</span><span class="p">(</span><span class="n">server_handle</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">my_uri</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">ESP_OK</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="c1">// If failed to register handler</span>
<span class="w">   </span><span class="p">....</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>URI handlers can be registered in real time as long as the server handle is valid.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> -- <strong>[in]</strong> handle to HTTPD server instance </p></li>
<li><p><strong>uri_handler</strong> -- <strong>[in]</strong> pointer to handler that needs to be registered</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully registering the handler</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments</p></li>
<li><p>ESP_ERR_HTTPD_HANDLERS_FULL : If no slots left for new handler</p></li>
<li><p>ESP_ERR_HTTPD_HANDLER_EXISTS : If handler with same URI and method is already registered </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv428httpd_unregister_uri_handler14httpd_handle_tPKc14httpd_method_t">
<span id="_CPPv328httpd_unregister_uri_handler14httpd_handle_tPKc14httpd_method_t"></span><span id="_CPPv228httpd_unregister_uri_handler14httpd_handle_tPKc14httpd_method_t"></span><span id="httpd_unregister_uri_handler__httpd_handle_t.cCP.httpd_method_t"></span><span class="target" id="esp__http__server_8h_1a823ded023502a5583078a858716e827c"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_unregister_uri_handler</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handle</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">uri</span></span>, <a class="reference internal" href="#_CPPv414httpd_method_t" title="httpd_method_t"><span class="n"><span class="pre">httpd_method_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">method</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428httpd_unregister_uri_handler14httpd_handle_tPKc14httpd_method_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Unregister a URI handler. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> -- <strong>[in]</strong> handle to HTTPD server instance </p></li>
<li><p><strong>uri</strong> -- <strong>[in]</strong> URI string </p></li>
<li><p><strong>method</strong> -- <strong>[in]</strong> HTTP method</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully deregistering the handler</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments</p></li>
<li><p>ESP_ERR_NOT_FOUND : Handler with specified URI and method not found </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv420httpd_unregister_uri14httpd_handle_tPKc">
<span id="_CPPv320httpd_unregister_uri14httpd_handle_tPKc"></span><span id="_CPPv220httpd_unregister_uri14httpd_handle_tPKc"></span><span id="httpd_unregister_uri__httpd_handle_t.cCP"></span><span class="target" id="esp__http__server_8h_1aed1d3370c4ec6b7360d075620b40edd7"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_unregister_uri</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handle</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">uri</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv420httpd_unregister_uri14httpd_handle_tPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>Unregister all URI handlers with the specified uri string. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> -- <strong>[in]</strong> handle to HTTPD server instance </p></li>
<li><p><strong>uri</strong> -- <strong>[in]</strong> uri string specifying all handlers that need to be deregisterd</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully deregistering all such handlers</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments</p></li>
<li><p>ESP_ERR_NOT_FOUND : No handler registered with specified uri string </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv428httpd_sess_set_recv_override14httpd_handle_ti17httpd_recv_func_t">
<span id="_CPPv328httpd_sess_set_recv_override14httpd_handle_ti17httpd_recv_func_t"></span><span id="_CPPv228httpd_sess_set_recv_override14httpd_handle_ti17httpd_recv_func_t"></span><span id="httpd_sess_set_recv_override__httpd_handle_t.i.httpd_recv_func_t"></span><span class="target" id="esp__http__server_8h_1a4d51098ce8661dfd93816ec5d8310f0d"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_sess_set_recv_override</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">hd</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">sockfd</span></span>, <a class="reference internal" href="#_CPPv417httpd_recv_func_t" title="httpd_recv_func_t"><span class="n"><span class="pre">httpd_recv_func_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">recv_func</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428httpd_sess_set_recv_override14httpd_handle_ti17httpd_recv_func_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Override web server's receive function (by session FD) </p>
<p>This function overrides the web server's receive function. This same function is used to read HTTP request packets.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API is supposed to be called either from the context of<ul class="simple">
<li><p>an http session APIs where sockfd is a valid parameter</p></li>
<li><p>a URI handler where sockfd is obtained using httpd_req_to_sockfd()</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hd</strong> -- <strong>[in]</strong> HTTPD instance handle </p></li>
<li><p><strong>sockfd</strong> -- <strong>[in]</strong> Session socket FD </p></li>
<li><p><strong>recv_func</strong> -- <strong>[in]</strong> The receive function to be set for this session</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully registering override</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv428httpd_sess_set_send_override14httpd_handle_ti17httpd_send_func_t">
<span id="_CPPv328httpd_sess_set_send_override14httpd_handle_ti17httpd_send_func_t"></span><span id="_CPPv228httpd_sess_set_send_override14httpd_handle_ti17httpd_send_func_t"></span><span id="httpd_sess_set_send_override__httpd_handle_t.i.httpd_send_func_t"></span><span class="target" id="esp__http__server_8h_1afe2d648fb39d8cf575a8fbd2ca2629ce"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_sess_set_send_override</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">hd</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">sockfd</span></span>, <a class="reference internal" href="#_CPPv417httpd_send_func_t" title="httpd_send_func_t"><span class="n"><span class="pre">httpd_send_func_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">send_func</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428httpd_sess_set_send_override14httpd_handle_ti17httpd_send_func_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Override web server's send function (by session FD) </p>
<p>This function overrides the web server's send function. This same function is used to send out any response to any HTTP request.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API is supposed to be called either from the context of<ul class="simple">
<li><p>an http session APIs where sockfd is a valid parameter</p></li>
<li><p>a URI handler where sockfd is obtained using httpd_req_to_sockfd()</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hd</strong> -- <strong>[in]</strong> HTTPD instance handle </p></li>
<li><p><strong>sockfd</strong> -- <strong>[in]</strong> Session socket FD </p></li>
<li><p><strong>send_func</strong> -- <strong>[in]</strong> The send function to be set for this session</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully registering override</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv431httpd_sess_set_pending_override14httpd_handle_ti20httpd_pending_func_t">
<span id="_CPPv331httpd_sess_set_pending_override14httpd_handle_ti20httpd_pending_func_t"></span><span id="_CPPv231httpd_sess_set_pending_override14httpd_handle_ti20httpd_pending_func_t"></span><span id="httpd_sess_set_pending_override__httpd_handle_t.i.httpd_pending_func_t"></span><span class="target" id="esp__http__server_8h_1ae2fb7dfdecf5c94bbc9a54d23b3dce32"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_sess_set_pending_override</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">hd</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">sockfd</span></span>, <a class="reference internal" href="#_CPPv420httpd_pending_func_t" title="httpd_pending_func_t"><span class="n"><span class="pre">httpd_pending_func_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">pending_func</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv431httpd_sess_set_pending_override14httpd_handle_ti20httpd_pending_func_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Override web server's pending function (by session FD) </p>
<p>This function overrides the web server's pending function. This function is used to test for pending bytes in a socket.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API is supposed to be called either from the context of<ul class="simple">
<li><p>an http session APIs where sockfd is a valid parameter</p></li>
<li><p>a URI handler where sockfd is obtained using httpd_req_to_sockfd()</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hd</strong> -- <strong>[in]</strong> HTTPD instance handle </p></li>
<li><p><strong>sockfd</strong> -- <strong>[in]</strong> Session socket FD </p></li>
<li><p><strong>pending_func</strong> -- <strong>[in]</strong> The receive function to be set for this session</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully registering override</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv429httpd_req_async_handler_beginP11httpd_req_tPP11httpd_req_t">
<span id="_CPPv329httpd_req_async_handler_beginP11httpd_req_tPP11httpd_req_t"></span><span id="_CPPv229httpd_req_async_handler_beginP11httpd_req_tPP11httpd_req_t"></span><span id="httpd_req_async_handler_begin__httpd_req_tP.httpd_req_tPP"></span><span class="target" id="esp__http__server_8h_1a2c4d1e2a926d1459aee04827187d5245"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_req_async_handler_begin</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span>, <a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">out</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv429httpd_req_async_handler_beginP11httpd_req_tPP11httpd_req_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Start an asynchronous request. This function can be called in a request handler to get a request copy that can be used on a async thread. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This function is necessary in order to handle multiple requests simultaneously. See examples/async_requests for example usage.</p></li>
<li><p>You must call httpd_req_async_handler_complete() when you are done with the request.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> -- <strong>[in]</strong> The request to create an async copy of </p></li>
<li><p><strong>out</strong> -- <strong>[out]</strong> A newly allocated request which can be used on an async thread</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : async request object created </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv432httpd_req_async_handler_completeP11httpd_req_t">
<span id="_CPPv332httpd_req_async_handler_completeP11httpd_req_t"></span><span id="_CPPv232httpd_req_async_handler_completeP11httpd_req_t"></span><span id="httpd_req_async_handler_complete__httpd_req_tP"></span><span class="target" id="esp__http__server_8h_1abb9a24a922ee052f311cd2e2357de445"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_req_async_handler_complete</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv432httpd_req_async_handler_completeP11httpd_req_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Mark an asynchronous request as completed. This will. </p>
<p><ul class="simple">
<li><p>free the request memory</p></li>
<li><p>relinquish ownership of the underlying socket, so it can be reused.</p></li>
<li><p>allow the http server to close our socket if needed (lru_purge_enable)</p></li>
</ul>
</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If async requests are not marked completed, eventually the server will no longer accept incoming connections. The server will log a &quot;httpd_accept_conn: error in accept (23)&quot; message if this happens.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>r</strong> -- <strong>[in]</strong> The request to mark async work as completed</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : async request was marked completed </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv419httpd_req_to_sockfdP11httpd_req_t">
<span id="_CPPv319httpd_req_to_sockfdP11httpd_req_t"></span><span id="_CPPv219httpd_req_to_sockfdP11httpd_req_t"></span><span id="httpd_req_to_sockfd__httpd_req_tP"></span><span class="target" id="esp__http__server_8h_1a7850d45e4ad7b33d21b6425f66559104"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_req_to_sockfd</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419httpd_req_to_sockfdP11httpd_req_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the Socket Descriptor from the HTTP request. </p>
<p>This API will return the socket descriptor of the session for which URI handler was executed on reception of HTTP request. This is useful when user wants to call functions that require session socket fd, from within a URI handler, ie. : httpd_sess_get_ctx(), httpd_sess_trigger_close(), httpd_sess_update_lru_counter().</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>r</strong> -- <strong>[in]</strong> The request whose socket descriptor should be found</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Socket descriptor : The socket descriptor for this request</p></li>
<li><p>-1 : Invalid/NULL request pointer </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv414httpd_req_recvP11httpd_req_tPc6size_t">
<span id="_CPPv314httpd_req_recvP11httpd_req_tPc6size_t"></span><span id="_CPPv214httpd_req_recvP11httpd_req_tPc6size_t"></span><span id="httpd_req_recv__httpd_req_tP.cP.s"></span><span class="target" id="esp__http__server_8h_1a1affc56473cfe5caa1791101f138c620"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_req_recv</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buf</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">buf_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv414httpd_req_recvP11httpd_req_tPc6size_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>API to read content data from the HTTP request. </p>
<p>This API will read HTTP content data from the HTTP request into provided buffer. Use content_len provided in httpd_req_t structure to know the length of data to be fetched. If content_len is too large for the buffer then user may have to make multiple calls to this function, each time fetching 'buf_len' number of bytes, while the pointer to content data is incremented internally by the same number.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid.</p></li>
<li><p>If an error is returned, the URI handler must further return an error. This will ensure that the erroneous socket is closed and cleaned up by the web server.</p></li>
<li><p>Presently Chunked Encoding is not supported</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> -- <strong>[in]</strong> The request being responded to </p></li>
<li><p><strong>buf</strong> -- <strong>[in]</strong> Pointer to a buffer that the data will be read into </p></li>
<li><p><strong>buf_len</strong> -- <strong>[in]</strong> Length of the buffer</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Bytes : Number of bytes read into the buffer successfully</p></li>
<li><p>0 : Buffer length parameter is zero / connection closed by peer</p></li>
<li><p>HTTPD_SOCK_ERR_INVALID : Invalid arguments</p></li>
<li><p>HTTPD_SOCK_ERR_TIMEOUT : Timeout/interrupted while calling socket recv()</p></li>
<li><p>HTTPD_SOCK_ERR_FAIL : Unrecoverable error while calling socket recv() </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv427httpd_req_get_hdr_value_lenP11httpd_req_tPKc">
<span id="_CPPv327httpd_req_get_hdr_value_lenP11httpd_req_tPKc"></span><span id="_CPPv227httpd_req_get_hdr_value_lenP11httpd_req_tPKc"></span><span id="httpd_req_get_hdr_value_len__httpd_req_tP.cCP"></span><span class="target" id="esp__http__server_8h_1a6e2c3ada748e3f3cc1f6ecdfb33a461b"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_req_get_hdr_value_len</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">field</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv427httpd_req_get_hdr_value_lenP11httpd_req_tPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>Search for a field in request headers and return the string length of it's value. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid.</p></li>
<li><p>Once httpd_resp_send() API is called all request headers are purged, so request headers need be copied into separate buffers if they are required later.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> -- <strong>[in]</strong> The request being responded to </p></li>
<li><p><strong>field</strong> -- <strong>[in]</strong> The header field to be searched in the request</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Length : If field is found in the request URL</p></li>
<li><p>Zero : Field not found / Invalid request / Null arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv427httpd_req_get_hdr_value_strP11httpd_req_tPKcPc6size_t">
<span id="_CPPv327httpd_req_get_hdr_value_strP11httpd_req_tPKcPc6size_t"></span><span id="_CPPv227httpd_req_get_hdr_value_strP11httpd_req_tPKcPc6size_t"></span><span id="httpd_req_get_hdr_value_str__httpd_req_tP.cCP.cP.s"></span><span class="target" id="esp__http__server_8h_1ae87429602dfbdeb641edbe115853caa6"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_req_get_hdr_value_str</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">field</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">val</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">val_size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv427httpd_req_get_hdr_value_strP11httpd_req_tPKcPc6size_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the value string of a field from the request headers. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid.</p></li>
<li><p>Once httpd_resp_send() API is called all request headers are purged, so request headers need be copied into separate buffers if they are required later.</p></li>
<li><p>If output size is greater than input, then the value is truncated, accompanied by truncation error as return value.</p></li>
<li><p>Use httpd_req_get_hdr_value_len() to know the right buffer length</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> -- <strong>[in]</strong> The request being responded to </p></li>
<li><p><strong>field</strong> -- <strong>[in]</strong> The field to be searched in the header </p></li>
<li><p><strong>val</strong> -- <strong>[out]</strong> Pointer to the buffer into which the value will be copied if the field is found </p></li>
<li><p><strong>val_size</strong> -- <strong>[in]</strong> Size of the user buffer &quot;val&quot;</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Field found in the request header and value string copied</p></li>
<li><p>ESP_ERR_NOT_FOUND : Key not found</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments</p></li>
<li><p>ESP_ERR_HTTPD_INVALID_REQ : Invalid HTTP request pointer</p></li>
<li><p>ESP_ERR_HTTPD_RESULT_TRUNC : Value string truncated </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv427httpd_req_get_url_query_lenP11httpd_req_t">
<span id="_CPPv327httpd_req_get_url_query_lenP11httpd_req_t"></span><span id="_CPPv227httpd_req_get_url_query_lenP11httpd_req_t"></span><span id="httpd_req_get_url_query_len__httpd_req_tP"></span><span class="target" id="esp__http__server_8h_1aefda761de0e657b96247964ce738d5c0"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_req_get_url_query_len</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv427httpd_req_get_url_query_lenP11httpd_req_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get Query string length from the request URL. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>r</strong> -- <strong>[in]</strong> The request being responded to</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Length : Query is found in the request URL</p></li>
<li><p>Zero : Query not found / Null arguments / Invalid request / uri is empty </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv427httpd_req_get_url_query_strP11httpd_req_tPc6size_t">
<span id="_CPPv327httpd_req_get_url_query_strP11httpd_req_tPc6size_t"></span><span id="_CPPv227httpd_req_get_url_query_strP11httpd_req_tPc6size_t"></span><span id="httpd_req_get_url_query_str__httpd_req_tP.cP.s"></span><span class="target" id="esp__http__server_8h_1a9bc4e30aee549df5519de6a13829c264"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_req_get_url_query_str</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buf</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">buf_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv427httpd_req_get_url_query_strP11httpd_req_tPc6size_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get Query string from the request URL. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>Presently, the user can fetch the full URL query string, but decoding will have to be performed by the user. Request headers can be read using httpd_req_get_hdr_value_str() to know the 'Content-Type' (eg. Content-Type: application/x-www-form-urlencoded) and then the appropriate decoding algorithm needs to be applied.</p></li>
<li><p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid</p></li>
<li><p>If output size is greater than input, then the value is truncated, accompanied by truncation error as return value</p></li>
<li><p>Prior to calling this function, one can use httpd_req_get_url_query_len() to know the query string length beforehand and hence allocate the buffer of right size (usually query string length + 1 for null termination) for storing the query string</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> -- <strong>[in]</strong> The request being responded to </p></li>
<li><p><strong>buf</strong> -- <strong>[out]</strong> Pointer to the buffer into which the query string will be copied (if found) </p></li>
<li><p><strong>buf_len</strong> -- <strong>[in]</strong> Length of output buffer</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Query is found in the request URL and copied to buffer</p></li>
<li><p>ESP_FAIL : uri is empty</p></li>
<li><p>ESP_ERR_NOT_FOUND : Query not found</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments</p></li>
<li><p>ESP_ERR_HTTPD_INVALID_REQ : Invalid HTTP request pointer</p></li>
<li><p>ESP_ERR_HTTPD_RESULT_TRUNC : Query string truncated </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv421httpd_query_key_valuePKcPKcPc6size_t">
<span id="_CPPv321httpd_query_key_valuePKcPKcPc6size_t"></span><span id="_CPPv221httpd_query_key_valuePKcPKcPc6size_t"></span><span id="httpd_query_key_value__cCP.cCP.cP.s"></span><span class="target" id="esp__http__server_8h_1a843cd2cb098fdfd374c20e784a994670"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_query_key_value</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">qry</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">key</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">val</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">val_size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv421httpd_query_key_valuePKcPKcPc6size_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Helper function to get a URL query tag from a query string of the type param1=val1&amp;param2=val2. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>The components of URL query string (keys and values) are not URLdecoded. The user must check for 'Content-Type' field in the request headers and then depending upon the specified encoding (URLencoded or otherwise) apply the appropriate decoding algorithm.</p></li>
<li><p>If actual value size is greater than val_size, then the value is truncated, accompanied by truncation error as return value.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>qry</strong> -- <strong>[in]</strong> Pointer to query string </p></li>
<li><p><strong>key</strong> -- <strong>[in]</strong> The key to be searched in the query string </p></li>
<li><p><strong>val</strong> -- <strong>[out]</strong> Pointer to the buffer into which the value will be copied if the key is found </p></li>
<li><p><strong>val_size</strong> -- <strong>[in]</strong> Size of the user buffer &quot;val&quot;</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Key is found in the URL query string and copied to buffer</p></li>
<li><p>ESP_ERR_NOT_FOUND : Key not found</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments</p></li>
<li><p>ESP_ERR_HTTPD_RESULT_TRUNC : Value string truncated </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv424httpd_req_get_cookie_valP11httpd_req_tPKcPcP6size_t">
<span id="_CPPv324httpd_req_get_cookie_valP11httpd_req_tPKcPcP6size_t"></span><span id="_CPPv224httpd_req_get_cookie_valP11httpd_req_tPKcPcP6size_t"></span><span id="httpd_req_get_cookie_val__httpd_req_tP.cCP.cP.sP"></span><span class="target" id="esp__http__server_8h_1abb9d64366b4a178e7c83105d9fd5545c"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_req_get_cookie_val</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">req</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">cookie_name</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">val</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">val_size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv424httpd_req_get_cookie_valP11httpd_req_tPKcPcP6size_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the value string of a cookie value from the &quot;Cookie&quot; request headers by cookie name. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> -- <strong>[in]</strong> Pointer to the HTTP request </p></li>
<li><p><strong>cookie_name</strong> -- <strong>[in]</strong> The cookie name to be searched in the request </p></li>
<li><p><strong>val</strong> -- <strong>[out]</strong> Pointer to the buffer into which the value of cookie will be copied if the cookie is found </p></li>
<li><p><strong>val_size</strong> -- <strong>[inout]</strong> Pointer to size of the user buffer &quot;val&quot;. This variable will contain cookie length if ESP_OK is returned and required buffer length in case ESP_ERR_HTTPD_RESULT_TRUNC is returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Key is found in the cookie string and copied to buffer</p></li>
<li><p>ESP_ERR_NOT_FOUND : Key not found</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments</p></li>
<li><p>ESP_ERR_HTTPD_RESULT_TRUNC : Value string truncated</p></li>
<li><p>ESP_ERR_NO_MEM : Memory allocation failure </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv424httpd_uri_match_wildcardPKcPKc6size_t">
<span id="_CPPv324httpd_uri_match_wildcardPKcPKc6size_t"></span><span id="_CPPv224httpd_uri_match_wildcardPKcPKc6size_t"></span><span id="httpd_uri_match_wildcard__cCP.cCP.s"></span><span class="target" id="esp__http__server_8h_1a3e19d9337e2b96428246e2e73d0f900c"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_uri_match_wildcard</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">uri_template</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">uri_to_match</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">match_upto</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv424httpd_uri_match_wildcardPKcPKc6size_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Test if a URI matches the given wildcard template. </p>
<p>Template may end with '?' to make the previous character optional (typically a slash), '*' for a wildcard match, and '?*' to make the previous character optional, and if present, allow anything to follow.</p>
<p>Example:<ul class="simple">
<li><p>* matches everything</p></li>
<li><p>/api/? matches /api and /api/</p></li>
<li><p>/api/* (sans the backslash) matches /api/ and /api/status, but not /api or /ap</p></li>
<li><p>/api/?* or /api/*? (sans the backslash) matches /api/, /api/status, and also /api, but not /apix or /ap</p></li>
</ul>
</p>
<p>The special characters '?' and '*' anywhere else in the template will be taken literally.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uri_template</strong> -- <strong>[in]</strong> URI template (pattern) </p></li>
<li><p><strong>uri_to_match</strong> -- <strong>[in]</strong> URI to be matched </p></li>
<li><p><strong>match_upto</strong> -- <strong>[in]</strong> how many characters of the URI buffer to test (there may be trailing query string etc.)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>true if a match was found </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv415httpd_resp_sendP11httpd_req_tPKc7ssize_t">
<span id="_CPPv315httpd_resp_sendP11httpd_req_tPKc7ssize_t"></span><span id="_CPPv215httpd_resp_sendP11httpd_req_tPKc7ssize_t"></span><span id="httpd_resp_send__httpd_req_tP.cCP.ssize_t"></span><span class="target" id="esp__http__server_8h_1a67aa037d44f178a47f3fadca5ac34c1a"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_resp_send</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buf</span></span>, <span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">buf_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv415httpd_resp_sendP11httpd_req_tPKc7ssize_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>API to send a complete HTTP response. </p>
<p>This API will send the data as an HTTP response to the request. This assumes that you have the entire response ready in a single buffer. If you wish to send response in incremental chunks use httpd_resp_send_chunk() instead.</p>
<p>If no status code and content-type were set, by default this will send 200 OK status code and content type as text/html. You may call the following functions before this API to configure the response headers : httpd_resp_set_status() - for setting the HTTP status string, httpd_resp_set_type() - for setting the Content Type, httpd_resp_set_hdr() - for appending any additional field value entries in the response header</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid.</p></li>
<li><p>Once this API is called, the request has been responded to.</p></li>
<li><p>No additional data can then be sent for the request.</p></li>
<li><p>Once this API is called, all request headers are purged, so request headers need be copied into separate buffers if they are required later.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> -- <strong>[in]</strong> The request being responded to </p></li>
<li><p><strong>buf</strong> -- <strong>[in]</strong> Buffer from where the content is to be fetched </p></li>
<li><p><strong>buf_len</strong> -- <strong>[in]</strong> Length of the buffer, HTTPD_RESP_USE_STRLEN to use strlen()</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully sending the response packet</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null request pointer</p></li>
<li><p>ESP_ERR_HTTPD_RESP_HDR : Essential headers are too large for internal buffer</p></li>
<li><p>ESP_ERR_HTTPD_RESP_SEND : Error in raw send</p></li>
<li><p>ESP_ERR_HTTPD_INVALID_REQ : Invalid request </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv421httpd_resp_send_chunkP11httpd_req_tPKc7ssize_t">
<span id="_CPPv321httpd_resp_send_chunkP11httpd_req_tPKc7ssize_t"></span><span id="_CPPv221httpd_resp_send_chunkP11httpd_req_tPKc7ssize_t"></span><span id="httpd_resp_send_chunk__httpd_req_tP.cCP.ssize_t"></span><span class="target" id="esp__http__server_8h_1a4c6e0465b3c09f5a997043b46ec99186"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_resp_send_chunk</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buf</span></span>, <span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">buf_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv421httpd_resp_send_chunkP11httpd_req_tPKc7ssize_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>API to send one HTTP chunk. </p>
<p>This API will send the data as an HTTP response to the request. This API will use chunked-encoding and send the response in the form of chunks. If you have the entire response contained in a single buffer, please use httpd_resp_send() instead.</p>
<p>If no status code and content-type were set, by default this will send 200 OK status code and content type as text/html. You may call the following functions before this API to configure the response headers httpd_resp_set_status() - for setting the HTTP status string, httpd_resp_set_type() - for setting the Content Type, httpd_resp_set_hdr() - for appending any additional field value entries in the response header</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid.</p></li>
<li><p>When you are finished sending all your chunks, you must call this function with buf_len as 0.</p></li>
<li><p>Once this API is called, all request headers are purged, so request headers need be copied into separate buffers if they are required later.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> -- <strong>[in]</strong> The request being responded to </p></li>
<li><p><strong>buf</strong> -- <strong>[in]</strong> Pointer to a buffer that stores the data </p></li>
<li><p><strong>buf_len</strong> -- <strong>[in]</strong> Length of the buffer, HTTPD_RESP_USE_STRLEN to use strlen()</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully sending the response packet chunk</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null request pointer</p></li>
<li><p>ESP_ERR_HTTPD_RESP_HDR : Essential headers are too large for internal buffer</p></li>
<li><p>ESP_ERR_HTTPD_RESP_SEND : Error in raw send</p></li>
<li><p>ESP_ERR_HTTPD_INVALID_REQ : Invalid request pointer </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv418httpd_resp_sendstrP11httpd_req_tPKc">
<span id="_CPPv318httpd_resp_sendstrP11httpd_req_tPKc"></span><span id="_CPPv218httpd_resp_sendstrP11httpd_req_tPKc"></span><span id="httpd_resp_sendstr__httpd_req_tP.cCP"></span><span class="target" id="esp__http__server_8h_1ac0f1d5954afe37cac630155250b3d676"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_resp_sendstr</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">str</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418httpd_resp_sendstrP11httpd_req_tPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>API to send a complete string as HTTP response. </p>
<p>This API simply calls http_resp_send with buffer length set to string length assuming the buffer contains a null terminated string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> -- <strong>[in]</strong> The request being responded to </p></li>
<li><p><strong>str</strong> -- <strong>[in]</strong> String to be sent as response body</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully sending the response packet</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null request pointer</p></li>
<li><p>ESP_ERR_HTTPD_RESP_HDR : Essential headers are too large for internal buffer</p></li>
<li><p>ESP_ERR_HTTPD_RESP_SEND : Error in raw send</p></li>
<li><p>ESP_ERR_HTTPD_INVALID_REQ : Invalid request </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv424httpd_resp_sendstr_chunkP11httpd_req_tPKc">
<span id="_CPPv324httpd_resp_sendstr_chunkP11httpd_req_tPKc"></span><span id="_CPPv224httpd_resp_sendstr_chunkP11httpd_req_tPKc"></span><span id="httpd_resp_sendstr_chunk__httpd_req_tP.cCP"></span><span class="target" id="esp__http__server_8h_1a6a8d3c2c7136fbeda19d6cabeec36e78"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_resp_sendstr_chunk</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">str</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv424httpd_resp_sendstr_chunkP11httpd_req_tPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>API to send a string as an HTTP response chunk. </p>
<p>This API simply calls http_resp_send_chunk with buffer length set to string length assuming the buffer contains a null terminated string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> -- <strong>[in]</strong> The request being responded to </p></li>
<li><p><strong>str</strong> -- <strong>[in]</strong> String to be sent as response body (NULL to finish response packet)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully sending the response packet</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null request pointer</p></li>
<li><p>ESP_ERR_HTTPD_RESP_HDR : Essential headers are too large for internal buffer</p></li>
<li><p>ESP_ERR_HTTPD_RESP_SEND : Error in raw send</p></li>
<li><p>ESP_ERR_HTTPD_INVALID_REQ : Invalid request </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv421httpd_resp_set_statusP11httpd_req_tPKc">
<span id="_CPPv321httpd_resp_set_statusP11httpd_req_tPKc"></span><span id="_CPPv221httpd_resp_set_statusP11httpd_req_tPKc"></span><span id="httpd_resp_set_status__httpd_req_tP.cCP"></span><span class="target" id="esp__http__server_8h_1a88021fd722954631f1dbf63da43cad28"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_resp_set_status</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">status</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv421httpd_resp_set_statusP11httpd_req_tPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>API to set the HTTP status code. </p>
<p>This API sets the status of the HTTP response to the value specified. By default, the '200 OK' response is sent as the response.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid.</p></li>
<li><p>This API only sets the status to this value. The status isn't sent out until any of the send APIs is executed.</p></li>
<li><p>Make sure that the lifetime of the status string is valid till send function is called.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> -- <strong>[in]</strong> The request being responded to </p></li>
<li><p><strong>status</strong> -- <strong>[in]</strong> The HTTP status code of this response</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On success</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments</p></li>
<li><p>ESP_ERR_HTTPD_INVALID_REQ : Invalid request pointer </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv419httpd_resp_set_typeP11httpd_req_tPKc">
<span id="_CPPv319httpd_resp_set_typeP11httpd_req_tPKc"></span><span id="_CPPv219httpd_resp_set_typeP11httpd_req_tPKc"></span><span id="httpd_resp_set_type__httpd_req_tP.cCP"></span><span class="target" id="esp__http__server_8h_1afe6f7650c67454ccbe85bb470f166de2"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_resp_set_type</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">type</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419httpd_resp_set_typeP11httpd_req_tPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>API to set the HTTP content type. </p>
<p>This API sets the 'Content Type' field of the response. The default content type is 'text/html'.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid.</p></li>
<li><p>This API only sets the content type to this value. The type isn't sent out until any of the send APIs is executed.</p></li>
<li><p>Make sure that the lifetime of the type string is valid till send function is called.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> -- <strong>[in]</strong> The request being responded to </p></li>
<li><p><strong>type</strong> -- <strong>[in]</strong> The Content Type of the response</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On success</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments</p></li>
<li><p>ESP_ERR_HTTPD_INVALID_REQ : Invalid request pointer </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv418httpd_resp_set_hdrP11httpd_req_tPKcPKc">
<span id="_CPPv318httpd_resp_set_hdrP11httpd_req_tPKcPKc"></span><span id="_CPPv218httpd_resp_set_hdrP11httpd_req_tPKcPKc"></span><span id="httpd_resp_set_hdr__httpd_req_tP.cCP.cCP"></span><span class="target" id="esp__http__server_8h_1af9fe08829da872bed237cb17b577b1bb"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_resp_set_hdr</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">field</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">value</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418httpd_resp_set_hdrP11httpd_req_tPKcPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>API to append any additional headers. </p>
<p>This API sets any additional header fields that need to be sent in the response.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid.</p></li>
<li><p>The header isn't sent out until any of the send APIs is executed.</p></li>
<li><p>The maximum allowed number of additional headers is limited to value of max_resp_headers in config structure.</p></li>
<li><p>Make sure that the lifetime of the field value strings are valid till send function is called.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> -- <strong>[in]</strong> The request being responded to </p></li>
<li><p><strong>field</strong> -- <strong>[in]</strong> The field name of the HTTP header </p></li>
<li><p><strong>value</strong> -- <strong>[in]</strong> The value of this HTTP header</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully appending new header</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments</p></li>
<li><p>ESP_ERR_HTTPD_RESP_HDR : Total additional headers exceed max allowed</p></li>
<li><p>ESP_ERR_HTTPD_INVALID_REQ : Invalid request pointer </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv419httpd_resp_send_errP11httpd_req_t16httpd_err_code_tPKc">
<span id="_CPPv319httpd_resp_send_errP11httpd_req_t16httpd_err_code_tPKc"></span><span id="_CPPv219httpd_resp_send_errP11httpd_req_t16httpd_err_code_tPKc"></span><span id="httpd_resp_send_err__httpd_req_tP.httpd_err_code_t.cCP"></span><span class="target" id="esp__http__server_8h_1aaa98f32909f0c925d2f4b097c6b11213"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_resp_send_err</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">req</span></span>, <a class="reference internal" href="#_CPPv416httpd_err_code_t" title="httpd_err_code_t"><span class="n"><span class="pre">httpd_err_code_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">error</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">msg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419httpd_resp_send_errP11httpd_req_t16httpd_err_code_tPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>For sending out error code in response to HTTP request. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid.</p></li>
<li><p>Once this API is called, all request headers are purged, so request headers need be copied into separate buffers if they are required later.</p></li>
<li><p>If you wish to send additional data in the body of the response, please use the lower-level functions directly.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> -- <strong>[in]</strong> Pointer to the HTTP request for which the response needs to be sent </p></li>
<li><p><strong>error</strong> -- <strong>[in]</strong> Error type to send </p></li>
<li><p><strong>msg</strong> -- <strong>[in]</strong> Error message string (pass NULL for default message)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully sending the response packet</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments</p></li>
<li><p>ESP_ERR_HTTPD_RESP_SEND : Error in raw send</p></li>
<li><p>ESP_ERR_HTTPD_INVALID_REQ : Invalid request pointer </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv426httpd_resp_send_custom_errP11httpd_req_tPKcPKc">
<span id="_CPPv326httpd_resp_send_custom_errP11httpd_req_tPKcPKc"></span><span id="_CPPv226httpd_resp_send_custom_errP11httpd_req_tPKcPKc"></span><span id="httpd_resp_send_custom_err__httpd_req_tP.cCP.cCP"></span><span class="target" id="esp__http__server_8h_1a64a5fb8361814676d4d15e1f71883795"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_resp_send_custom_err</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">req</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">status</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">msg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv426httpd_resp_send_custom_errP11httpd_req_tPKcPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>For sending out custom error code in response to HTTP request. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid.</p></li>
<li><p>Once this API is called, all request headers are purged, so request headers need be copied into separate buffers if they are required later.</p></li>
<li><p>If you wish to send additional data in the body of the response, please use the lower-level functions directly.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> -- <strong>[in]</strong> Pointer to the HTTP request for which the response needs to be sent </p></li>
<li><p><strong>status</strong> -- <strong>[in]</strong> Error status to send </p></li>
<li><p><strong>msg</strong> -- <strong>[in]</strong> Error message string</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully sending the response packet</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments</p></li>
<li><p>ESP_ERR_HTTPD_RESP_SEND : Error in raw send</p></li>
<li><p>ESP_ERR_HTTPD_INVALID_REQ : Invalid request pointer </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv419httpd_resp_send_404P11httpd_req_t">
<span id="_CPPv319httpd_resp_send_404P11httpd_req_t"></span><span id="_CPPv219httpd_resp_send_404P11httpd_req_t"></span><span id="httpd_resp_send_404__httpd_req_tP"></span><span class="target" id="esp__http__server_8h_1a6d94e8ca3981df3427b7c4ae680f07e2"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_resp_send_404</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419httpd_resp_send_404P11httpd_req_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Helper function for HTTP 404. </p>
<p>Send HTTP 404 message. If you wish to send additional data in the body of the response, please use the lower-level functions directly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid.</p></li>
<li><p>Once this API is called, all request headers are purged, so request headers need be copied into separate buffers if they are required later.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>r</strong> -- <strong>[in]</strong> The request being responded to</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully sending the response packet</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments</p></li>
<li><p>ESP_ERR_HTTPD_RESP_SEND : Error in raw send</p></li>
<li><p>ESP_ERR_HTTPD_INVALID_REQ : Invalid request pointer </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv419httpd_resp_send_408P11httpd_req_t">
<span id="_CPPv319httpd_resp_send_408P11httpd_req_t"></span><span id="_CPPv219httpd_resp_send_408P11httpd_req_t"></span><span id="httpd_resp_send_408__httpd_req_tP"></span><span class="target" id="esp__http__server_8h_1ae22aff0dd981380d05812d3a0f8b2095"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_resp_send_408</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419httpd_resp_send_408P11httpd_req_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Helper function for HTTP 408. </p>
<p>Send HTTP 408 message. If you wish to send additional data in the body of the response, please use the lower-level functions directly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid.</p></li>
<li><p>Once this API is called, all request headers are purged, so request headers need be copied into separate buffers if they are required later.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>r</strong> -- <strong>[in]</strong> The request being responded to</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully sending the response packet</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments</p></li>
<li><p>ESP_ERR_HTTPD_RESP_SEND : Error in raw send</p></li>
<li><p>ESP_ERR_HTTPD_INVALID_REQ : Invalid request pointer </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv419httpd_resp_send_500P11httpd_req_t">
<span id="_CPPv319httpd_resp_send_500P11httpd_req_t"></span><span id="_CPPv219httpd_resp_send_500P11httpd_req_t"></span><span id="httpd_resp_send_500__httpd_req_tP"></span><span class="target" id="esp__http__server_8h_1adc611ab182c3fb310cd32876e7a50079"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_resp_send_500</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419httpd_resp_send_500P11httpd_req_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Helper function for HTTP 500. </p>
<p>Send HTTP 500 message. If you wish to send additional data in the body of the response, please use the lower-level functions directly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid.</p></li>
<li><p>Once this API is called, all request headers are purged, so request headers need be copied into separate buffers if they are required later.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>r</strong> -- <strong>[in]</strong> The request being responded to</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully sending the response packet</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments</p></li>
<li><p>ESP_ERR_HTTPD_RESP_SEND : Error in raw send</p></li>
<li><p>ESP_ERR_HTTPD_INVALID_REQ : Invalid request pointer </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv410httpd_sendP11httpd_req_tPKc6size_t">
<span id="_CPPv310httpd_sendP11httpd_req_tPKc6size_t"></span><span id="_CPPv210httpd_sendP11httpd_req_tPKc6size_t"></span><span id="httpd_send__httpd_req_tP.cCP.s"></span><span class="target" id="esp__http__server_8h_1ab5136d22ec4def6e24eb31bdb67e2240"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_send</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">r</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buf</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">buf_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv410httpd_sendP11httpd_req_tPKc6size_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Raw HTTP send. </p>
<p>Call this API if you wish to construct your custom response packet. When using this, all essential header, eg. HTTP version, Status Code, Content Type and Length, Encoding, etc. will have to be constructed manually, and HTTP delimiters (CRLF) will need to be placed correctly for separating sub-sections of the HTTP response packet.</p>
<p>If the send override function is set, this API will end up calling that function eventually to send data out.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This API is supposed to be called only from the context of a URI handler where httpd_req_t* request pointer is valid.</p></li>
<li><p>Unless the response has the correct HTTP structure (which the user must now ensure) it is not guaranteed that it will be recognized by the client. For most cases, you wouldn't have to call this API, but you would rather use either of : httpd_resp_send(), httpd_resp_send_chunk()</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> -- <strong>[in]</strong> The request being responded to </p></li>
<li><p><strong>buf</strong> -- <strong>[in]</strong> Buffer from where the fully constructed packet is to be read </p></li>
<li><p><strong>buf_len</strong> -- <strong>[in]</strong> Length of the buffer</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Bytes : Number of bytes that were sent successfully</p></li>
<li><p>HTTPD_SOCK_ERR_INVALID : Invalid arguments</p></li>
<li><p>HTTPD_SOCK_ERR_TIMEOUT : Timeout/interrupted while calling socket send()</p></li>
<li><p>HTTPD_SOCK_ERR_FAIL : Unrecoverable error while calling socket send() </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv417httpd_socket_send14httpd_handle_tiPKc6size_ti">
<span id="_CPPv317httpd_socket_send14httpd_handle_tiPKc6size_ti"></span><span id="_CPPv217httpd_socket_send14httpd_handle_tiPKc6size_ti"></span><span id="httpd_socket_send__httpd_handle_t.i.cCP.s.i"></span><span class="target" id="esp__http__server_8h_1a15953e8f6b1028a79a9b925a767f5449"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_socket_send</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">hd</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">sockfd</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buf</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">buf_len</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">flags</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv417httpd_socket_send14httpd_handle_tiPKc6size_ti" title="Permalink to this definition"></a><br /></dt>
<dd><p>A low level API to send data on a given socket</p>
<p>
This internally calls the default send function, or the function registered by httpd_sess_set_send_override().</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API is not recommended to be used in any request handler. Use this only for advanced use cases, wherein some asynchronous data is to be sent over a socket.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hd</strong> -- <strong>[in]</strong> server instance </p></li>
<li><p><strong>sockfd</strong> -- <strong>[in]</strong> session socket file descriptor </p></li>
<li><p><strong>buf</strong> -- <strong>[in]</strong> buffer with bytes to send </p></li>
<li><p><strong>buf_len</strong> -- <strong>[in]</strong> data size </p></li>
<li><p><strong>flags</strong> -- <strong>[in]</strong> flags for the send() function </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Bytes : The number of bytes sent successfully</p></li>
<li><p>HTTPD_SOCK_ERR_INVALID : Invalid arguments</p></li>
<li><p>HTTPD_SOCK_ERR_TIMEOUT : Timeout/interrupted while calling socket send()</p></li>
<li><p>HTTPD_SOCK_ERR_FAIL : Unrecoverable error while calling socket send() </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv417httpd_socket_recv14httpd_handle_tiPc6size_ti">
<span id="_CPPv317httpd_socket_recv14httpd_handle_tiPc6size_ti"></span><span id="_CPPv217httpd_socket_recv14httpd_handle_tiPc6size_ti"></span><span id="httpd_socket_recv__httpd_handle_t.i.cP.s.i"></span><span class="target" id="esp__http__server_8h_1a6f241c009afe21186b999eaf0062b3b5"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_socket_recv</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">hd</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">sockfd</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buf</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">buf_len</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">flags</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv417httpd_socket_recv14httpd_handle_tiPc6size_ti" title="Permalink to this definition"></a><br /></dt>
<dd><p>A low level API to receive data from a given socket</p>
<p>
This internally calls the default recv function, or the function registered by httpd_sess_set_recv_override().</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API is not recommended to be used in any request handler. Use this only for advanced use cases, wherein some asynchronous communication is required.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hd</strong> -- <strong>[in]</strong> server instance </p></li>
<li><p><strong>sockfd</strong> -- <strong>[in]</strong> session socket file descriptor </p></li>
<li><p><strong>buf</strong> -- <strong>[in]</strong> buffer with bytes to send </p></li>
<li><p><strong>buf_len</strong> -- <strong>[in]</strong> data size </p></li>
<li><p><strong>flags</strong> -- <strong>[in]</strong> flags for the send() function </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Bytes : The number of bytes received successfully</p></li>
<li><p>0 : Buffer length parameter is zero / connection closed by peer</p></li>
<li><p>HTTPD_SOCK_ERR_INVALID : Invalid arguments</p></li>
<li><p>HTTPD_SOCK_ERR_TIMEOUT : Timeout/interrupted while calling socket recv()</p></li>
<li><p>HTTPD_SOCK_ERR_FAIL : Unrecoverable error while calling socket recv() </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv426httpd_register_err_handler14httpd_handle_t16httpd_err_code_t24httpd_err_handler_func_t">
<span id="_CPPv326httpd_register_err_handler14httpd_handle_t16httpd_err_code_t24httpd_err_handler_func_t"></span><span id="_CPPv226httpd_register_err_handler14httpd_handle_t16httpd_err_code_t24httpd_err_handler_func_t"></span><span id="httpd_register_err_handler__httpd_handle_t.httpd_err_code_t.httpd_err_handler_func_t"></span><span class="target" id="esp__http__server_8h_1a77882a50b8f07e4f667887bac6294bd2"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_register_err_handler</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handle</span></span>, <a class="reference internal" href="#_CPPv416httpd_err_code_t" title="httpd_err_code_t"><span class="n"><span class="pre">httpd_err_code_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">error</span></span>, <a class="reference internal" href="#_CPPv424httpd_err_handler_func_t" title="httpd_err_handler_func_t"><span class="n"><span class="pre">httpd_err_handler_func_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handler_fn</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv426httpd_register_err_handler14httpd_handle_t16httpd_err_code_t24httpd_err_handler_func_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function for registering HTTP error handlers. </p>
<p>This function maps a handler function to any supported error code given by <code class="docutils literal notranslate"><span class="pre">httpd_err_code_t</span></code>. See prototype <code class="docutils literal notranslate"><span class="pre">httpd_err_handler_func_t</span></code> above for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> -- <strong>[in]</strong> HTTP server handle </p></li>
<li><p><strong>error</strong> -- <strong>[in]</strong> Error type </p></li>
<li><p><strong>handler_fn</strong> -- <strong>[in]</strong> User implemented handler function (Pass NULL to unset any previously set handler)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : handler registered successfully</p></li>
<li><p>ESP_ERR_INVALID_ARG : invalid error code or server handle </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv416httpd_queue_work14httpd_handle_t15httpd_work_fn_tPv">
<span id="_CPPv316httpd_queue_work14httpd_handle_t15httpd_work_fn_tPv"></span><span id="_CPPv216httpd_queue_work14httpd_handle_t15httpd_work_fn_tPv"></span><span id="httpd_queue_work__httpd_handle_t.httpd_work_fn_t.voidP"></span><span class="target" id="esp__http__server_8h_1a1f87a6588d7b73e22e3be710015ce5ef"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_queue_work</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handle</span></span>, <a class="reference internal" href="#_CPPv415httpd_work_fn_t" title="httpd_work_fn_t"><span class="n"><span class="pre">httpd_work_fn_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">work</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">arg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv416httpd_queue_work14httpd_handle_t15httpd_work_fn_tPv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Queue execution of a function in HTTPD's context. </p>
<p>This API queues a work function for asynchronous execution</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some protocols require that the web server generate some asynchronous data and send it to the persistently opened connection. This facility is for use by such protocols.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> -- <strong>[in]</strong> Handle to server returned by httpd_start </p></li>
<li><p><strong>work</strong> -- <strong>[in]</strong> Pointer to the function to be executed in the HTTPD's context </p></li>
<li><p><strong>arg</strong> -- <strong>[in]</strong> Pointer to the arguments that should be passed to this function</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully queueing the work</p></li>
<li><p>ESP_FAIL : Failure in ctrl socket</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv418httpd_sess_get_ctx14httpd_handle_ti">
<span id="_CPPv318httpd_sess_get_ctx14httpd_handle_ti"></span><span id="_CPPv218httpd_sess_get_ctx14httpd_handle_ti"></span><span id="httpd_sess_get_ctx__httpd_handle_t.i"></span><span class="target" id="esp__http__server_8h_1a10cdd54531b2972ce5a28fafe4ca16ca"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">httpd_sess_get_ctx</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handle</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">sockfd</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418httpd_sess_get_ctx14httpd_handle_ti" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get session context from socket descriptor. </p>
<p>Typically if a session context is created, it is available to URI handlers through the httpd_req_t structure. But, there are cases where the web server's send/receive functions may require the context (for example, for accessing keying information etc). Since the send/receive function only have the socket descriptor at their disposal, this API provides them with a way to retrieve the session context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> -- <strong>[in]</strong> Handle to server returned by httpd_start </p></li>
<li><p><strong>sockfd</strong> -- <strong>[in]</strong> The socket descriptor for which the context should be extracted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>void* : Pointer to the context associated with this session</p></li>
<li><p>NULL : Empty context / Invalid handle / Invalid socket fd </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv418httpd_sess_set_ctx14httpd_handle_tiPv19httpd_free_ctx_fn_t">
<span id="_CPPv318httpd_sess_set_ctx14httpd_handle_tiPv19httpd_free_ctx_fn_t"></span><span id="_CPPv218httpd_sess_set_ctx14httpd_handle_tiPv19httpd_free_ctx_fn_t"></span><span id="httpd_sess_set_ctx__httpd_handle_t.i.voidP.httpd_free_ctx_fn_t"></span><span class="target" id="esp__http__server_8h_1a757e67695bcea509774cf8627a58c73b"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_sess_set_ctx</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handle</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">sockfd</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">ctx</span></span>, <a class="reference internal" href="#_CPPv419httpd_free_ctx_fn_t" title="httpd_free_ctx_fn_t"><span class="n"><span class="pre">httpd_free_ctx_fn_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">free_fn</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418httpd_sess_set_ctx14httpd_handle_tiPv19httpd_free_ctx_fn_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set session context by socket descriptor. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> -- <strong>[in]</strong> Handle to server returned by httpd_start </p></li>
<li><p><strong>sockfd</strong> -- <strong>[in]</strong> The socket descriptor for which the context should be extracted. </p></li>
<li><p><strong>ctx</strong> -- <strong>[in]</strong> Context object to assign to the session </p></li>
<li><p><strong>free_fn</strong> -- <strong>[in]</strong> Function that should be called to free the context </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv428httpd_sess_get_transport_ctx14httpd_handle_ti">
<span id="_CPPv328httpd_sess_get_transport_ctx14httpd_handle_ti"></span><span id="_CPPv228httpd_sess_get_transport_ctx14httpd_handle_ti"></span><span id="httpd_sess_get_transport_ctx__httpd_handle_t.i"></span><span class="target" id="esp__http__server_8h_1aea8183b62a46e883d0322765b97fc4bc"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">httpd_sess_get_transport_ctx</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handle</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">sockfd</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428httpd_sess_get_transport_ctx14httpd_handle_ti" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get session 'transport' context by socket descriptor. </p>
<p>
This context is used by the send/receive functions, for example to manage SSL context.<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>httpd_sess_get_ctx()</p>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> -- <strong>[in]</strong> Handle to server returned by httpd_start </p></li>
<li><p><strong>sockfd</strong> -- <strong>[in]</strong> The socket descriptor for which the context should be extracted. </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>void* : Pointer to the transport context associated with this session</p></li>
<li><p>NULL : Empty context / Invalid handle / Invalid socket fd </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv428httpd_sess_set_transport_ctx14httpd_handle_tiPv19httpd_free_ctx_fn_t">
<span id="_CPPv328httpd_sess_set_transport_ctx14httpd_handle_tiPv19httpd_free_ctx_fn_t"></span><span id="_CPPv228httpd_sess_set_transport_ctx14httpd_handle_tiPv19httpd_free_ctx_fn_t"></span><span id="httpd_sess_set_transport_ctx__httpd_handle_t.i.voidP.httpd_free_ctx_fn_t"></span><span class="target" id="esp__http__server_8h_1a04274a7e095da7be8d6c16ab51822907"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_sess_set_transport_ctx</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handle</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">sockfd</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">ctx</span></span>, <a class="reference internal" href="#_CPPv419httpd_free_ctx_fn_t" title="httpd_free_ctx_fn_t"><span class="n"><span class="pre">httpd_free_ctx_fn_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">free_fn</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428httpd_sess_set_transport_ctx14httpd_handle_tiPv19httpd_free_ctx_fn_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set session 'transport' context by socket descriptor. </p>
<p><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>httpd_sess_set_ctx()</p>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> -- <strong>[in]</strong> Handle to server returned by httpd_start </p></li>
<li><p><strong>sockfd</strong> -- <strong>[in]</strong> The socket descriptor for which the context should be extracted. </p></li>
<li><p><strong>ctx</strong> -- <strong>[in]</strong> Transport context object to assign to the session </p></li>
<li><p><strong>free_fn</strong> -- <strong>[in]</strong> Function that should be called to free the transport context </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv425httpd_get_global_user_ctx14httpd_handle_t">
<span id="_CPPv325httpd_get_global_user_ctx14httpd_handle_t"></span><span id="_CPPv225httpd_get_global_user_ctx14httpd_handle_t"></span><span id="httpd_get_global_user_ctx__httpd_handle_t"></span><span class="target" id="esp__http__server_8h_1a25ac7cc73ec405334fe1a2b7564c046b"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">httpd_get_global_user_ctx</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv425httpd_get_global_user_ctx14httpd_handle_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get HTTPD global user context (it was set in the server config struct) </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>handle</strong> -- <strong>[in]</strong> Handle to server returned by httpd_start </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>global user context </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv430httpd_get_global_transport_ctx14httpd_handle_t">
<span id="_CPPv330httpd_get_global_transport_ctx14httpd_handle_t"></span><span id="_CPPv230httpd_get_global_transport_ctx14httpd_handle_t"></span><span id="httpd_get_global_transport_ctx__httpd_handle_t"></span><span class="target" id="esp__http__server_8h_1a2e40cf7a9697de01f562b2385156cae6"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">httpd_get_global_transport_ctx</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv430httpd_get_global_transport_ctx14httpd_handle_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get HTTPD global transport context (it was set in the server config struct) </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>handle</strong> -- <strong>[in]</strong> Handle to server returned by httpd_start </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>global transport context </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv424httpd_sess_trigger_close14httpd_handle_ti">
<span id="_CPPv324httpd_sess_trigger_close14httpd_handle_ti"></span><span id="_CPPv224httpd_sess_trigger_close14httpd_handle_ti"></span><span id="httpd_sess_trigger_close__httpd_handle_t.i"></span><span class="target" id="esp__http__server_8h_1a575055bada874d254b42ccf913351793"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_sess_trigger_close</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handle</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">sockfd</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv424httpd_sess_trigger_close14httpd_handle_ti" title="Permalink to this definition"></a><br /></dt>
<dd><p>Trigger an httpd session close externally. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calling this API is only required in special circumstances wherein some application requires to close an httpd client session asynchronously.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> -- <strong>[in]</strong> Handle to server returned by httpd_start </p></li>
<li><p><strong>sockfd</strong> -- <strong>[in]</strong> The socket descriptor of the session to be closed</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : On successfully initiating closure</p></li>
<li><p>ESP_FAIL : Failure to queue work</p></li>
<li><p>ESP_ERR_NOT_FOUND : Socket fd not found</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv429httpd_sess_update_lru_counter14httpd_handle_ti">
<span id="_CPPv329httpd_sess_update_lru_counter14httpd_handle_ti"></span><span id="_CPPv229httpd_sess_update_lru_counter14httpd_handle_ti"></span><span id="httpd_sess_update_lru_counter__httpd_handle_t.i"></span><span class="target" id="esp__http__server_8h_1ab47bc683db586f4e8deb53a4dbf6b531"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_sess_update_lru_counter</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handle</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">sockfd</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv429httpd_sess_update_lru_counter14httpd_handle_ti" title="Permalink to this definition"></a><br /></dt>
<dd><p>Update LRU counter for a given socket. </p>
<p>LRU Counters are internally associated with each session to monitor how recently a session exchanged traffic. When LRU purge is enabled, if a client is requesting for connection but maximum number of sockets/sessions is reached, then the session having the earliest LRU counter is closed automatically.</p>
<p>Updating the LRU counter manually prevents the socket from being purged due to the Least Recently Used (LRU) logic, even though it might not have received traffic for some time. This is useful when all open sockets/session are frequently exchanging traffic but the user specifically wants one of the sessions to be kept open, irrespective of when it last exchanged a packet.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calling this API is only necessary if the LRU Purge Enable option is enabled.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> -- <strong>[in]</strong> Handle to server returned by httpd_start </p></li>
<li><p><strong>sockfd</strong> -- <strong>[in]</strong> The socket descriptor of the session for which LRU counter is to be updated</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Socket found and LRU counter updated</p></li>
<li><p>ESP_ERR_NOT_FOUND : Socket not found</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv421httpd_get_client_list14httpd_handle_tP6size_tPi">
<span id="_CPPv321httpd_get_client_list14httpd_handle_tP6size_tPi"></span><span id="_CPPv221httpd_get_client_list14httpd_handle_tP6size_tPi"></span><span id="httpd_get_client_list__httpd_handle_t.sP.iP"></span><span class="target" id="esp__http__server_8h_1a88d2e54f92f07d41ed89048c5646b3d0"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_get_client_list</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handle</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">fds</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">client_fds</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv421httpd_get_client_list14httpd_handle_tP6size_tPi" title="Permalink to this definition"></a><br /></dt>
<dd><p>Returns list of current socket descriptors of active sessions. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Size of provided array has to be equal or greater then maximum number of opened sockets, configured upon initialization with max_open_sockets field in httpd_config_t structure.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> -- <strong>[in]</strong> Handle to server returned by httpd_start </p></li>
<li><p><strong>fds</strong> -- <strong>[inout]</strong> In: Size of provided client_fds array Out: Number of valid client fds returned in client_fds, </p></li>
<li><p><strong>client_fds</strong> -- <strong>[out]</strong> Array of client fds</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Successfully retrieved session list</p></li>
<li><p>ESP_ERR_INVALID_ARG : Wrong arguments or list is longer than provided array </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="structures">
<h3>Structures<a class="headerlink" href="#structures" title="Permalink to this heading"></a></h3>
<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv426esp_http_server_event_data">
<span id="_CPPv326esp_http_server_event_data"></span><span id="_CPPv226esp_http_server_event_data"></span><span id="esp_http_server_event_data"></span><span class="target" id="structesp__http__server__event__data"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_http_server_event_data</span></span></span><a class="headerlink" href="#_CPPv426esp_http_server_event_data" title="Permalink to this definition"></a><br /></dt>
<dd><p>Argument structure for HTTP_SERVER_EVENT_ON_DATA and HTTP_SERVER_EVENT_SENT_DATA event </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N26esp_http_server_event_data2fdE">
<span id="_CPPv3N26esp_http_server_event_data2fdE"></span><span id="_CPPv2N26esp_http_server_event_data2fdE"></span><span id="esp_http_server_event_data::fd__i"></span><span class="target" id="structesp__http__server__event__data_1ac4c11ad9300d9eb0d4b3711591998cea"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fd</span></span></span><a class="headerlink" href="#_CPPv4N26esp_http_server_event_data2fdE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Session socket file descriptor </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N26esp_http_server_event_data8data_lenE">
<span id="_CPPv3N26esp_http_server_event_data8data_lenE"></span><span id="_CPPv2N26esp_http_server_event_data8data_lenE"></span><span id="esp_http_server_event_data::data_len__i"></span><span class="target" id="structesp__http__server__event__data_1aa4b97d8cc3dab96275323eabaaa2af44"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">data_len</span></span></span><a class="headerlink" href="#_CPPv4N26esp_http_server_event_data8data_lenE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Data length </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv412httpd_config">
<span id="_CPPv312httpd_config"></span><span id="_CPPv212httpd_config"></span><span id="httpd_config"></span><span class="target" id="structhttpd__config"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_config</span></span></span><a class="headerlink" href="#_CPPv412httpd_config" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Server Configuration Structure. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use HTTPD_DEFAULT_CONFIG() to initialize the configuration to a default value and then modify only those fields that are specifically determined by the use case. </p>
</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config13task_priorityE">
<span id="_CPPv3N12httpd_config13task_priorityE"></span><span id="_CPPv2N12httpd_config13task_priorityE"></span><span id="httpd_config::task_priority__unsigned"></span><span class="target" id="structhttpd__config_1ac7328969561f39489efb0e4560abb2c7"></span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">task_priority</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config13task_priorityE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Priority of FreeRTOS task which runs the server </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config10stack_sizeE">
<span id="_CPPv3N12httpd_config10stack_sizeE"></span><span id="_CPPv2N12httpd_config10stack_sizeE"></span><span id="httpd_config::stack_size__s"></span><span class="target" id="structhttpd__config_1a1e977af1b803de9fe819e2c82929211e"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stack_size</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config10stack_sizeE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The maximum stack size allowed for the server task </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config7core_idE">
<span id="_CPPv3N12httpd_config7core_idE"></span><span id="_CPPv2N12httpd_config7core_idE"></span><span id="httpd_config::core_id__BaseType_t"></span><span class="target" id="structhttpd__config_1af53f7d5fb25119c65fac16f4a09dc062"></span><span class="n"><span class="pre">BaseType_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">core_id</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config7core_idE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The core the HTTP server task will run on </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config9task_capsE">
<span id="_CPPv3N12httpd_config9task_capsE"></span><span id="_CPPv2N12httpd_config9task_capsE"></span><span id="httpd_config::task_caps__uint32_t"></span><span class="target" id="structhttpd__config_1a723d4ddc27f8b3e97893f3ed07171ac3"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">task_caps</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config9task_capsE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The memory capabilities to use when allocating the HTTP server task's stack </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config11server_portE">
<span id="_CPPv3N12httpd_config11server_portE"></span><span id="_CPPv2N12httpd_config11server_portE"></span><span id="httpd_config::server_port__uint16_t"></span><span class="target" id="structhttpd__config_1a6c40d3061485bc6c7d34d73a63e42e15"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">server_port</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config11server_portE" title="Permalink to this definition"></a><br /></dt>
<dd><p>TCP Port number for receiving and transmitting HTTP traffic </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config9ctrl_portE">
<span id="_CPPv3N12httpd_config9ctrl_portE"></span><span id="_CPPv2N12httpd_config9ctrl_portE"></span><span id="httpd_config::ctrl_port__uint16_t"></span><span class="target" id="structhttpd__config_1aaa92748cfcf99d5d6f0d2c94d7d1d237"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ctrl_port</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config9ctrl_portE" title="Permalink to this definition"></a><br /></dt>
<dd><p>UDP Port number for asynchronously exchanging control signals between various components of the server </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config16max_open_socketsE">
<span id="_CPPv3N12httpd_config16max_open_socketsE"></span><span id="_CPPv2N12httpd_config16max_open_socketsE"></span><span id="httpd_config::max_open_sockets__uint16_t"></span><span class="target" id="structhttpd__config_1a8c4371992c7e8371a0b768da135fc15b"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">max_open_sockets</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config16max_open_socketsE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Max number of sockets/clients connected at any time (3 sockets are reserved for internal working of the HTTP server) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config16max_uri_handlersE">
<span id="_CPPv3N12httpd_config16max_uri_handlersE"></span><span id="_CPPv2N12httpd_config16max_uri_handlersE"></span><span id="httpd_config::max_uri_handlers__uint16_t"></span><span class="target" id="structhttpd__config_1a0d98832efc16246a49b2225c01cce218"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">max_uri_handlers</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config16max_uri_handlersE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Maximum allowed uri handlers </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config16max_resp_headersE">
<span id="_CPPv3N12httpd_config16max_resp_headersE"></span><span id="_CPPv2N12httpd_config16max_resp_headersE"></span><span id="httpd_config::max_resp_headers__uint16_t"></span><span class="target" id="structhttpd__config_1ae18633b07f2416b8d32f286262b0265b"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">max_resp_headers</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config16max_resp_headersE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Maximum allowed additional headers in HTTP response </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config12backlog_connE">
<span id="_CPPv3N12httpd_config12backlog_connE"></span><span id="_CPPv2N12httpd_config12backlog_connE"></span><span id="httpd_config::backlog_conn__uint16_t"></span><span class="target" id="structhttpd__config_1a7ef094fb09dc0b05871e07f84e95431e"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">backlog_conn</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config12backlog_connE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Number of backlog connections </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config16lru_purge_enableE">
<span id="_CPPv3N12httpd_config16lru_purge_enableE"></span><span id="_CPPv2N12httpd_config16lru_purge_enableE"></span><span id="httpd_config::lru_purge_enable__b"></span><span class="target" id="structhttpd__config_1a2b023b5100ece33cabe1aa3d559a6ecb"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">lru_purge_enable</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config16lru_purge_enableE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Purge &quot;Least Recently Used&quot; connection </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config17recv_wait_timeoutE">
<span id="_CPPv3N12httpd_config17recv_wait_timeoutE"></span><span id="_CPPv2N12httpd_config17recv_wait_timeoutE"></span><span id="httpd_config::recv_wait_timeout__uint16_t"></span><span class="target" id="structhttpd__config_1aadd39fd10004e75265beba4d74475f5b"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">recv_wait_timeout</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config17recv_wait_timeoutE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Timeout for recv function (in seconds) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config17send_wait_timeoutE">
<span id="_CPPv3N12httpd_config17send_wait_timeoutE"></span><span id="_CPPv2N12httpd_config17send_wait_timeoutE"></span><span id="httpd_config::send_wait_timeout__uint16_t"></span><span class="target" id="structhttpd__config_1a58c934b33248b2c72225642198f1f0c3"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">send_wait_timeout</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config17send_wait_timeoutE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Timeout for send function (in seconds) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config15global_user_ctxE">
<span id="_CPPv3N12httpd_config15global_user_ctxE"></span><span id="_CPPv2N12httpd_config15global_user_ctxE"></span><span id="httpd_config::global_user_ctx__voidP"></span><span class="target" id="structhttpd__config_1aea07d602712387ee9177842d46bd2a5b"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">global_user_ctx</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config15global_user_ctxE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Global user context.</p>
<p>This field can be used to store arbitrary user data within the server context. The value can be retrieved using the server handle, available e.g. in the httpd_req_t struct.</p>
<p>When shutting down, the server frees up the user context by calling free() on the global_user_ctx field. If you wish to use a custom function for freeing the global user context, please specify that here. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config23global_user_ctx_free_fnE">
<span id="_CPPv3N12httpd_config23global_user_ctx_free_fnE"></span><span id="_CPPv2N12httpd_config23global_user_ctx_free_fnE"></span><span id="httpd_config::global_user_ctx_free_fn__httpd_free_ctx_fn_t"></span><span class="target" id="structhttpd__config_1aa339887ac82ffdd3a077ce094da3375b"></span><a class="reference internal" href="#_CPPv419httpd_free_ctx_fn_t" title="httpd_free_ctx_fn_t"><span class="n"><span class="pre">httpd_free_ctx_fn_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">global_user_ctx_free_fn</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config23global_user_ctx_free_fnE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Free function for global user context </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config20global_transport_ctxE">
<span id="_CPPv3N12httpd_config20global_transport_ctxE"></span><span id="_CPPv2N12httpd_config20global_transport_ctxE"></span><span id="httpd_config::global_transport_ctx__voidP"></span><span class="target" id="structhttpd__config_1a9c4d467429af5680ec99368e37ab8db8"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">global_transport_ctx</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config20global_transport_ctxE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Global transport context.</p>
<p>Similar to global_user_ctx, but used for session encoding or encryption (e.g. to hold the SSL context). It will be freed using free(), unless global_transport_ctx_free_fn is specified. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config28global_transport_ctx_free_fnE">
<span id="_CPPv3N12httpd_config28global_transport_ctx_free_fnE"></span><span id="_CPPv2N12httpd_config28global_transport_ctx_free_fnE"></span><span id="httpd_config::global_transport_ctx_free_fn__httpd_free_ctx_fn_t"></span><span class="target" id="structhttpd__config_1ada620729da1376fc7dd383b8e8c532b6"></span><a class="reference internal" href="#_CPPv419httpd_free_ctx_fn_t" title="httpd_free_ctx_fn_t"><span class="n"><span class="pre">httpd_free_ctx_fn_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">global_transport_ctx_free_fn</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config28global_transport_ctx_free_fnE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Free function for global transport context </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config16enable_so_lingerE">
<span id="_CPPv3N12httpd_config16enable_so_lingerE"></span><span id="_CPPv2N12httpd_config16enable_so_lingerE"></span><span id="httpd_config::enable_so_linger__b"></span><span class="target" id="structhttpd__config_1ae709635150c1cdec609c40dee0f6f7cc"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">enable_so_linger</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config16enable_so_lingerE" title="Permalink to this definition"></a><br /></dt>
<dd><p>bool to enable/disable linger </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config14linger_timeoutE">
<span id="_CPPv3N12httpd_config14linger_timeoutE"></span><span id="_CPPv2N12httpd_config14linger_timeoutE"></span><span id="httpd_config::linger_timeout__i"></span><span class="target" id="structhttpd__config_1a3830ff0cd9685bae250405458b1d4f0a"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">linger_timeout</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config14linger_timeoutE" title="Permalink to this definition"></a><br /></dt>
<dd><p>linger timeout (in seconds) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config17keep_alive_enableE">
<span id="_CPPv3N12httpd_config17keep_alive_enableE"></span><span id="_CPPv2N12httpd_config17keep_alive_enableE"></span><span id="httpd_config::keep_alive_enable__b"></span><span class="target" id="structhttpd__config_1a694e433a29ce0a2742b6712d8ef23247"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">keep_alive_enable</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config17keep_alive_enableE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Enable keep-alive timeout </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config15keep_alive_idleE">
<span id="_CPPv3N12httpd_config15keep_alive_idleE"></span><span id="_CPPv2N12httpd_config15keep_alive_idleE"></span><span id="httpd_config::keep_alive_idle__i"></span><span class="target" id="structhttpd__config_1acea08379bd0bd14c57c2adaee9e9b616"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">keep_alive_idle</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config15keep_alive_idleE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Keep-alive idle time. Default is 5 (second) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config19keep_alive_intervalE">
<span id="_CPPv3N12httpd_config19keep_alive_intervalE"></span><span id="_CPPv2N12httpd_config19keep_alive_intervalE"></span><span id="httpd_config::keep_alive_interval__i"></span><span class="target" id="structhttpd__config_1a0f58709d92e53bb8b5c85d786e82ec03"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">keep_alive_interval</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config19keep_alive_intervalE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Keep-alive interval time. Default is 5 (second) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config16keep_alive_countE">
<span id="_CPPv3N12httpd_config16keep_alive_countE"></span><span id="_CPPv2N12httpd_config16keep_alive_countE"></span><span id="httpd_config::keep_alive_count__i"></span><span class="target" id="structhttpd__config_1a91fa1ebbd54891acdadb90b1a144e533"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">keep_alive_count</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config16keep_alive_countE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Keep-alive packet retry send count. Default is 3 counts </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config7open_fnE">
<span id="_CPPv3N12httpd_config7open_fnE"></span><span id="_CPPv2N12httpd_config7open_fnE"></span><span id="httpd_config::open_fn__httpd_open_func_t"></span><span class="target" id="structhttpd__config_1a6b5675925c6d4c7b99bebb744b4dd047"></span><a class="reference internal" href="#_CPPv417httpd_open_func_t" title="httpd_open_func_t"><span class="n"><span class="pre">httpd_open_func_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">open_fn</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config7open_fnE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Custom session opening callback.</p>
<p>Called on a new session socket just after accept(), but before reading any data.</p>
<p>This is an opportunity to set up e.g. SSL encryption using global_transport_ctx and the send/recv/pending session overrides.</p>
<p>If a context needs to be maintained between these functions, store it in the session using httpd_sess_set_transport_ctx() and retrieve it later with httpd_sess_get_transport_ctx()</p>
<p>Returning a value other than ESP_OK will immediately close the new socket. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config8close_fnE">
<span id="_CPPv3N12httpd_config8close_fnE"></span><span id="_CPPv2N12httpd_config8close_fnE"></span><span id="httpd_config::close_fn__httpd_close_func_t"></span><span class="target" id="structhttpd__config_1af511dedbbbd18af2ae8d256ead200e42"></span><a class="reference internal" href="#_CPPv418httpd_close_func_t" title="httpd_close_func_t"><span class="n"><span class="pre">httpd_close_func_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">close_fn</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config8close_fnE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Custom session closing callback.</p>
<p>Called when a session is deleted, before freeing user and transport contexts and before closing the socket. This is a place for custom de-init code common to all sockets.</p>
<p>The server will only close the socket if no custom session closing callback is set. If a custom callback is used, <code class="docutils literal notranslate"><span class="pre">close(sockfd)</span></code> should be called in here for most cases.</p>
<p>Set the user or transport context to NULL if it was freed here, so the server does not try to free it again.</p>
<p>This function is run for all terminated sessions, including sessions where the socket was closed by the network stack - that is, the file descriptor may not be valid anymore. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12httpd_config12uri_match_fnE">
<span id="_CPPv3N12httpd_config12uri_match_fnE"></span><span id="_CPPv2N12httpd_config12uri_match_fnE"></span><span id="httpd_config::uri_match_fn__httpd_uri_match_func_t"></span><span class="target" id="structhttpd__config_1a4e65d59846d22f07daefa6898c351e1b"></span><a class="reference internal" href="#_CPPv422httpd_uri_match_func_t" title="httpd_uri_match_func_t"><span class="n"><span class="pre">httpd_uri_match_func_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uri_match_fn</span></span></span><a class="headerlink" href="#_CPPv4N12httpd_config12uri_match_fnE" title="Permalink to this definition"></a><br /></dt>
<dd><p>URI matcher function.</p>
<p>Called when searching for a matching URI: 1) whose request handler is to be executed right after an HTTP request is successfully parsed 2) in order to prevent duplication while registering a new URI handler using <code class="docutils literal notranslate"><span class="pre">httpd_register_uri_handler()</span></code></p>
<p>Available options are: 1) NULL : Internally do basic matching using <code class="docutils literal notranslate"><span class="pre">strncmp()</span></code> 2) <code class="docutils literal notranslate"><span class="pre">httpd_uri_match_wildcard()</span></code> : URI wildcard matcher</p>
<p>Users can implement their own matching functions (See description of the <code class="docutils literal notranslate"><span class="pre">httpd_uri_match_func_t</span></code> function prototype) </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv49httpd_req">
<span id="_CPPv39httpd_req"></span><span id="_CPPv29httpd_req"></span><span id="httpd_req"></span><span class="target" id="structhttpd__req"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_req</span></span></span><a class="headerlink" href="#_CPPv49httpd_req" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Request Data Structure. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N9httpd_req6handleE">
<span id="_CPPv3N9httpd_req6handleE"></span><span id="_CPPv2N9httpd_req6handleE"></span><span id="httpd_req::handle__httpd_handle_t"></span><span class="target" id="structhttpd__req_1a5670d530fb005f7f78dbf18ba0a941bc"></span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">handle</span></span></span><a class="headerlink" href="#_CPPv4N9httpd_req6handleE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handle to server instance </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N9httpd_req6methodE">
<span id="_CPPv3N9httpd_req6methodE"></span><span id="_CPPv2N9httpd_req6methodE"></span><span id="httpd_req::method__i"></span><span class="target" id="structhttpd__req_1a77cbca0e01e71a96a729f2fc117db48a"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">method</span></span></span><a class="headerlink" href="#_CPPv4N9httpd_req6methodE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The type of HTTP request, -1 if unsupported method, HTTP_ANY for wildcard method to support every method </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N9httpd_req3uriE">
<span id="_CPPv3N9httpd_req3uriE"></span><span id="_CPPv2N9httpd_req3uriE"></span><span id="httpd_req::uri__cCA"></span><span class="target" id="structhttpd__req_1a5ae765ff59f36e0c32b5ec286e3aba29"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uri</span></span></span><span class="p"><span class="pre">[</span></span><span class="n"><span class="pre">HTTPD_MAX_URI_LEN</span></span><span class="w"> </span><span class="o"><span class="pre">+</span></span><span class="w"> </span><span class="m"><span class="pre">1</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#_CPPv4N9httpd_req3uriE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The URI of this request (1 byte extra for null termination) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N9httpd_req11content_lenE">
<span id="_CPPv3N9httpd_req11content_lenE"></span><span id="_CPPv2N9httpd_req11content_lenE"></span><span id="httpd_req::content_len__s"></span><span class="target" id="structhttpd__req_1a4cd9652d0d9b375b7a0feea20e03750b"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">content_len</span></span></span><a class="headerlink" href="#_CPPv4N9httpd_req11content_lenE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Length of the request body </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N9httpd_req3auxE">
<span id="_CPPv3N9httpd_req3auxE"></span><span id="_CPPv2N9httpd_req3auxE"></span><span id="httpd_req::aux__voidP"></span><span class="target" id="structhttpd__req_1a15bca00d10d1a5f37dd7023188461506"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">aux</span></span></span><a class="headerlink" href="#_CPPv4N9httpd_req3auxE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Internally used members </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N9httpd_req8user_ctxE">
<span id="_CPPv3N9httpd_req8user_ctxE"></span><span id="_CPPv2N9httpd_req8user_ctxE"></span><span id="httpd_req::user_ctx__voidP"></span><span class="target" id="structhttpd__req_1afded762b2e37bc6f1c2ffadb98a82e36"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">user_ctx</span></span></span><a class="headerlink" href="#_CPPv4N9httpd_req8user_ctxE" title="Permalink to this definition"></a><br /></dt>
<dd><p>User context pointer passed during URI registration. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N9httpd_req8sess_ctxE">
<span id="_CPPv3N9httpd_req8sess_ctxE"></span><span id="_CPPv2N9httpd_req8sess_ctxE"></span><span id="httpd_req::sess_ctx__voidP"></span><span class="target" id="structhttpd__req_1a3cef09c79f06250ba7968d29b833c583"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">sess_ctx</span></span></span><a class="headerlink" href="#_CPPv4N9httpd_req8sess_ctxE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Session Context Pointer</p>
<p>A session context. Contexts are maintained across 'sessions' for a given open TCP connection. One session could have multiple request responses. The web server will ensure that the context persists across all these request and responses.</p>
<p>By default, this is NULL. URI Handlers can set this to any meaningful value.</p>
<p>If the underlying socket gets closed, and this pointer is non-NULL, the web server will free up the context by calling free(), unless free_ctx function is set. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N9httpd_req8free_ctxE">
<span id="_CPPv3N9httpd_req8free_ctxE"></span><span id="_CPPv2N9httpd_req8free_ctxE"></span><span id="httpd_req::free_ctx__httpd_free_ctx_fn_t"></span><span class="target" id="structhttpd__req_1a5b66775ebd3defc861c0dcb21c56bcb3"></span><a class="reference internal" href="#_CPPv419httpd_free_ctx_fn_t" title="httpd_free_ctx_fn_t"><span class="n"><span class="pre">httpd_free_ctx_fn_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">free_ctx</span></span></span><a class="headerlink" href="#_CPPv4N9httpd_req8free_ctxE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to free context hook</p>
<p>Function to free session context</p>
<p>If the web server's socket closes, it frees up the session context by calling free() on the sess_ctx member. If you wish to use a custom function for freeing the session context, please specify that here. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N9httpd_req23ignore_sess_ctx_changesE">
<span id="_CPPv3N9httpd_req23ignore_sess_ctx_changesE"></span><span id="_CPPv2N9httpd_req23ignore_sess_ctx_changesE"></span><span id="httpd_req::ignore_sess_ctx_changes__b"></span><span class="target" id="structhttpd__req_1a61a20805f21529592c6d2d28aab43bbf"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ignore_sess_ctx_changes</span></span></span><a class="headerlink" href="#_CPPv4N9httpd_req23ignore_sess_ctx_changesE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Flag indicating if Session Context changes should be ignored</p>
<p>By default, if you change the sess_ctx in some URI handler, the http server will internally free the earlier context (if non NULL), after the URI handler returns. If you want to manage the allocation/reallocation/freeing of sess_ctx yourself, set this flag to true, so that the server will not perform any checks on it. The context will be cleared by the server (by calling free_ctx or free()) only if the socket gets closed. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv49httpd_uri">
<span id="_CPPv39httpd_uri"></span><span id="_CPPv29httpd_uri"></span><span id="httpd_uri"></span><span class="target" id="structhttpd__uri"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_uri</span></span></span><a class="headerlink" href="#_CPPv49httpd_uri" title="Permalink to this definition"></a><br /></dt>
<dd><p>Structure for URI handler. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N9httpd_uri3uriE">
<span id="_CPPv3N9httpd_uri3uriE"></span><span id="_CPPv2N9httpd_uri3uriE"></span><span id="httpd_uri::uri__cCP"></span><span class="target" id="structhttpd__uri_1a6d96b7c861b635d1e75cb5ea784fa904"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">uri</span></span></span><a class="headerlink" href="#_CPPv4N9httpd_uri3uriE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The URI to handle </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N9httpd_uri6methodE">
<span id="_CPPv3N9httpd_uri6methodE"></span><span id="_CPPv2N9httpd_uri6methodE"></span><span id="httpd_uri::method__httpd_method_t"></span><span class="target" id="structhttpd__uri_1adcedc9988c787dc88a94854986c63a7a"></span><a class="reference internal" href="#_CPPv414httpd_method_t" title="httpd_method_t"><span class="n"><span class="pre">httpd_method_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">method</span></span></span><a class="headerlink" href="#_CPPv4N9httpd_uri6methodE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Method supported by the URI, HTTP_ANY for wildcard method to support all methods </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N9httpd_uri7handlerE">
<span id="_CPPv3N9httpd_uri7handlerE"></span><span id="_CPPv2N9httpd_uri7handlerE"></span><span class="target" id="structhttpd__uri_1a63129cc7f59cd1bef6b3753733d560a4"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">handler</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N9httpd_uri7handlerE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handler to call for supported request method. This must return ESP_OK, or else the underlying socket will be closed. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N9httpd_uri8user_ctxE">
<span id="_CPPv3N9httpd_uri8user_ctxE"></span><span id="_CPPv2N9httpd_uri8user_ctxE"></span><span id="httpd_uri::user_ctx__voidP"></span><span class="target" id="structhttpd__uri_1ac1e1599092f7338cc1121a0225de8fb0"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">user_ctx</span></span></span><a class="headerlink" href="#_CPPv4N9httpd_uri8user_ctxE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to user context data which will be available to handler </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="macros">
<h3>Macros<a class="headerlink" href="#macros" title="Permalink to this heading"></a></h3>
<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTP_ANY">
<span class="target" id="esp__http__server_8h_1a8488d09ac113a41f2e9db579be05e975"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTP_ANY</span></span></span><a class="headerlink" href="#c.HTTP_ANY" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_MAX_REQ_HDR_LEN">
<span class="target" id="esp__http__server_8h_1a980514fd5ea0e5df13b61a610a533568"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_MAX_REQ_HDR_LEN</span></span></span><a class="headerlink" href="#c.HTTPD_MAX_REQ_HDR_LEN" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_MAX_URI_LEN">
<span class="target" id="esp__http__server_8h_1a53353c97ec079bbb67d11063c61485a0"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_MAX_URI_LEN</span></span></span><a class="headerlink" href="#c.HTTPD_MAX_URI_LEN" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_SOCK_ERR_FAIL">
<span class="target" id="esp__http__server_8h_1a414de2603c84063bf192beb538302ba2"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_SOCK_ERR_FAIL</span></span></span><a class="headerlink" href="#c.HTTPD_SOCK_ERR_FAIL" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_SOCK_ERR_INVALID">
<span class="target" id="esp__http__server_8h_1ac5b0fdf08a0e847fa27a72b5c0441ef7"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_SOCK_ERR_INVALID</span></span></span><a class="headerlink" href="#c.HTTPD_SOCK_ERR_INVALID" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_SOCK_ERR_TIMEOUT">
<span class="target" id="esp__http__server_8h_1abcf644caeaa90f795a8752d2751ca446"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_SOCK_ERR_TIMEOUT</span></span></span><a class="headerlink" href="#c.HTTPD_SOCK_ERR_TIMEOUT" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_200">
<span class="target" id="esp__http__server_8h_1af4b127c140f541d4de6656df5a3ab752"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_200</span></span></span><a class="headerlink" href="#c.HTTPD_200" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Response 200 </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_204">
<span class="target" id="esp__http__server_8h_1a598f51d2105e087602fc64ee90ebb1db"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_204</span></span></span><a class="headerlink" href="#c.HTTPD_204" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Response 204 </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_207">
<span class="target" id="esp__http__server_8h_1a1556a6addae5a1471f7ab4601e9be72b"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_207</span></span></span><a class="headerlink" href="#c.HTTPD_207" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Response 207 </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_400">
<span class="target" id="esp__http__server_8h_1a82175e01e1ac389a7cbc3be38a6b1672"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_400</span></span></span><a class="headerlink" href="#c.HTTPD_400" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Response 400 </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_404">
<span class="target" id="esp__http__server_8h_1a64bf9043ddaedbc26c68e73f0b2a1383"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_404</span></span></span><a class="headerlink" href="#c.HTTPD_404" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Response 404 </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_408">
<span class="target" id="esp__http__server_8h_1a70636571ca355db1bbd768455b8b74e0"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_408</span></span></span><a class="headerlink" href="#c.HTTPD_408" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Response 408 </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_500">
<span class="target" id="esp__http__server_8h_1a5b7c2b05b58226436e813169ab50b4ab"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_500</span></span></span><a class="headerlink" href="#c.HTTPD_500" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Response 500 </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_TYPE_JSON">
<span class="target" id="esp__http__server_8h_1a75c55e059a80ffcb3ce67e3481ee2cba"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_TYPE_JSON</span></span></span><a class="headerlink" href="#c.HTTPD_TYPE_JSON" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Content type JSON </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_TYPE_TEXT">
<span class="target" id="esp__http__server_8h_1af2f51b0354458b875ea529841cee89e4"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_TYPE_TEXT</span></span></span><a class="headerlink" href="#c.HTTPD_TYPE_TEXT" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Content type text/HTML </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_TYPE_OCTET">
<span class="target" id="esp__http__server_8h_1a910be1054243530a5060e475f1bb29e1"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_TYPE_OCTET</span></span></span><a class="headerlink" href="#c.HTTPD_TYPE_OCTET" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Content type octext-stream </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.ESP_HTTPD_DEF_CTRL_PORT">
<span class="target" id="esp__http__server_8h_1abf3b130c25ebc3cc4282bf15951e0fd0"></span><span class="sig-name descname"><span class="n"><span class="pre">ESP_HTTPD_DEF_CTRL_PORT</span></span></span><a class="headerlink" href="#c.ESP_HTTPD_DEF_CTRL_PORT" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Server control socket port </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_DEFAULT_CONFIG">
<span class="target" id="esp__http__server_8h_1a16f21d93351c7b2a7d0fff7e52cb84ce"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_DEFAULT_CONFIG</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#c.HTTPD_DEFAULT_CONFIG" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.ESP_ERR_HTTPD_BASE">
<span class="target" id="esp__http__server_8h_1ab4eee198c51a07a2bd1faecf1ba8d30f"></span><span class="sig-name descname"><span class="n"><span class="pre">ESP_ERR_HTTPD_BASE</span></span></span><a class="headerlink" href="#c.ESP_ERR_HTTPD_BASE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Starting number of HTTPD error codes </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.ESP_ERR_HTTPD_HANDLERS_FULL">
<span class="target" id="esp__http__server_8h_1a57b81d1e32ef1d0ea49399f76764d8d4"></span><span class="sig-name descname"><span class="n"><span class="pre">ESP_ERR_HTTPD_HANDLERS_FULL</span></span></span><a class="headerlink" href="#c.ESP_ERR_HTTPD_HANDLERS_FULL" title="Permalink to this definition"></a><br /></dt>
<dd><p>All slots for registering URI handlers have been consumed </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.ESP_ERR_HTTPD_HANDLER_EXISTS">
<span class="target" id="esp__http__server_8h_1a58812cc89d323555abbb502f6500d216"></span><span class="sig-name descname"><span class="n"><span class="pre">ESP_ERR_HTTPD_HANDLER_EXISTS</span></span></span><a class="headerlink" href="#c.ESP_ERR_HTTPD_HANDLER_EXISTS" title="Permalink to this definition"></a><br /></dt>
<dd><p>URI handler with same method and target URI already registered </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.ESP_ERR_HTTPD_INVALID_REQ">
<span class="target" id="esp__http__server_8h_1a392df95876df9639d29fa1b46e50d33e"></span><span class="sig-name descname"><span class="n"><span class="pre">ESP_ERR_HTTPD_INVALID_REQ</span></span></span><a class="headerlink" href="#c.ESP_ERR_HTTPD_INVALID_REQ" title="Permalink to this definition"></a><br /></dt>
<dd><p>Invalid request pointer </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.ESP_ERR_HTTPD_RESULT_TRUNC">
<span class="target" id="esp__http__server_8h_1a7764c1b5ad6bac4b70394d447ea6ed64"></span><span class="sig-name descname"><span class="n"><span class="pre">ESP_ERR_HTTPD_RESULT_TRUNC</span></span></span><a class="headerlink" href="#c.ESP_ERR_HTTPD_RESULT_TRUNC" title="Permalink to this definition"></a><br /></dt>
<dd><p>Result string truncated </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.ESP_ERR_HTTPD_RESP_HDR">
<span class="target" id="esp__http__server_8h_1a2cf09e6ed46b1594e2562f693917b2ef"></span><span class="sig-name descname"><span class="n"><span class="pre">ESP_ERR_HTTPD_RESP_HDR</span></span></span><a class="headerlink" href="#c.ESP_ERR_HTTPD_RESP_HDR" title="Permalink to this definition"></a><br /></dt>
<dd><p>Response header field larger than supported </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.ESP_ERR_HTTPD_RESP_SEND">
<span class="target" id="esp__http__server_8h_1a940dfdeafef71bbf1b446ee0d95f7155"></span><span class="sig-name descname"><span class="n"><span class="pre">ESP_ERR_HTTPD_RESP_SEND</span></span></span><a class="headerlink" href="#c.ESP_ERR_HTTPD_RESP_SEND" title="Permalink to this definition"></a><br /></dt>
<dd><p>Error occurred while sending response packet </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.ESP_ERR_HTTPD_ALLOC_MEM">
<span class="target" id="esp__http__server_8h_1ad4a0e90d6743bc2879683e0594157abd"></span><span class="sig-name descname"><span class="n"><span class="pre">ESP_ERR_HTTPD_ALLOC_MEM</span></span></span><a class="headerlink" href="#c.ESP_ERR_HTTPD_ALLOC_MEM" title="Permalink to this definition"></a><br /></dt>
<dd><p>Failed to dynamically allocate memory for resource </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.ESP_ERR_HTTPD_TASK">
<span class="target" id="esp__http__server_8h_1ae5a79bfd921716071ca381f0ac776326"></span><span class="sig-name descname"><span class="n"><span class="pre">ESP_ERR_HTTPD_TASK</span></span></span><a class="headerlink" href="#c.ESP_ERR_HTTPD_TASK" title="Permalink to this definition"></a><br /></dt>
<dd><p>Failed to launch server task/thread </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.HTTPD_RESP_USE_STRLEN">
<span class="target" id="esp__http__server_8h_1a8d5f8ff1f607c5dd9c4c9b1df89d6a13"></span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_RESP_USE_STRLEN</span></span></span><a class="headerlink" href="#c.HTTPD_RESP_USE_STRLEN" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</section>
<section id="type-definitions">
<h3>Type Definitions<a class="headerlink" href="#type-definitions" title="Permalink to this heading"></a></h3>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv414httpd_handle_t">
<span id="_CPPv314httpd_handle_t"></span><span id="_CPPv214httpd_handle_t"></span><span id="httpd_handle_t"></span><span class="target" id="esp__http__server_8h_1a660bc64ded0fb1c7ad498180fc22a7a7"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">httpd_handle_t</span></span></span><a class="headerlink" href="#_CPPv414httpd_handle_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Server Instance Handle. </p>
<p>Every instance of the server will have a unique handle. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv414httpd_method_t">
<span id="_CPPv314httpd_method_t"></span><span id="_CPPv214httpd_method_t"></span><span id="httpd_method_t"></span><span class="target" id="esp__http__server_8h_1a48f01108b44767258a00ec2c40f42d12"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="n"><span class="pre">http_method</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_method_t</span></span></span><a class="headerlink" href="#_CPPv414httpd_method_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Method Type wrapper over &quot;enum http_method&quot; available in &quot;http_parser&quot; library. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv419httpd_free_ctx_fn_t">
<span id="_CPPv319httpd_free_ctx_fn_t"></span><span id="_CPPv219httpd_free_ctx_fn_t"></span><span id="httpd_free_ctx_fn_t"></span><span class="target" id="esp__http__server_8h_1abc71bfd1ba65ffa759e2dba202871586"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">httpd_free_ctx_fn_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv419httpd_free_ctx_fn_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Prototype for freeing context data (if any) </p>
<dl class="field-list simple">
<dt class="field-odd">Param ctx<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> object to free </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv417httpd_open_func_t">
<span id="_CPPv317httpd_open_func_t"></span><span id="_CPPv217httpd_open_func_t"></span><span id="httpd_open_func_t"></span><span class="target" id="esp__http__server_8h_1abe958987e22db532298d01f263cf7d1c"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">httpd_open_func_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">hd</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">sockfd</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv417httpd_open_func_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function prototype for opening a session. </p>
<p>Called immediately after the socket was opened to set up the send/recv functions and other parameters of the socket.</p>
<dl class="field-list simple">
<dt class="field-odd">Param hd<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> server instance </p>
</dd>
<dt class="field-even">Param sockfd<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>[in]</strong> session socket file descriptor </p>
</dd>
<dt class="field-odd">Return<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>ESP_OK : On success</p></li>
<li><p>Any value other than ESP_OK will signal the server to close the socket immediately </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv418httpd_close_func_t">
<span id="_CPPv318httpd_close_func_t"></span><span id="_CPPv218httpd_close_func_t"></span><span id="httpd_close_func_t"></span><span class="target" id="esp__http__server_8h_1a2295b14a01e3819e39c715ad673b0211"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">httpd_close_func_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">hd</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">sockfd</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv418httpd_close_func_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function prototype for closing a session. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It's possible that the socket descriptor is invalid at this point, the function is called for all terminated sessions. Ensure proper handling of return codes.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Param hd<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> server instance </p>
</dd>
<dt class="field-even">Param sockfd<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>[in]</strong> session socket file descriptor </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv422httpd_uri_match_func_t">
<span id="_CPPv322httpd_uri_match_func_t"></span><span id="_CPPv222httpd_uri_match_func_t"></span><span id="httpd_uri_match_func_t"></span><span class="target" id="esp__http__server_8h_1a7d5f3758d08181893f3f015070696df5"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">httpd_uri_match_func_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">reference_uri</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">uri_to_match</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">match_upto</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv422httpd_uri_match_func_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function prototype for URI matching. </p>
<dl class="field-list simple">
<dt class="field-odd">Param reference_uri<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> URI/template with respect to which the other URI is matched </p>
</dd>
<dt class="field-even">Param uri_to_match<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>[in]</strong> URI/template being matched to the reference URI/template </p>
</dd>
<dt class="field-odd">Param match_upto<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> For specifying the actual length of <code class="docutils literal notranslate"><span class="pre">uri_to_match</span></code> up to which the matching algorithm is to be applied (The maximum value is <code class="docutils literal notranslate"><span class="pre">strlen(uri_to_match)</span></code>, independent of the length of <code class="docutils literal notranslate"><span class="pre">reference_uri</span></code>) </p>
</dd>
<dt class="field-even">Return<span class="colon">:</span></dt>
<dd class="field-even"><p>true on match </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv414httpd_config_t">
<span id="_CPPv314httpd_config_t"></span><span id="_CPPv214httpd_config_t"></span><span id="httpd_config_t"></span><span class="target" id="esp__http__server_8h_1a45dfe6eba5dcbb64e6deaaf062ff5421"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv412httpd_config" title="httpd_config"><span class="n"><span class="pre">httpd_config</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_config_t</span></span></span><a class="headerlink" href="#_CPPv414httpd_config_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Server Configuration Structure. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use HTTPD_DEFAULT_CONFIG() to initialize the configuration to a default value and then modify only those fields that are specifically determined by the use case. </p>
</div>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv411httpd_req_t">
<span id="_CPPv311httpd_req_t"></span><span id="_CPPv211httpd_req_t"></span><span id="httpd_req_t"></span><span class="target" id="esp__http__server_8h_1a5a5cb8ceebead649183cc36be7f26f4d"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv49httpd_req" title="httpd_req"><span class="n"><span class="pre">httpd_req</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_req_t</span></span></span><a class="headerlink" href="#_CPPv411httpd_req_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Request Data Structure. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv411httpd_uri_t">
<span id="_CPPv311httpd_uri_t"></span><span id="_CPPv211httpd_uri_t"></span><span id="httpd_uri_t"></span><span class="target" id="esp__http__server_8h_1aca2f4f7f137cf72ac39d08280065ac70"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv49httpd_uri" title="httpd_uri"><span class="n"><span class="pre">httpd_uri</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_uri_t</span></span></span><a class="headerlink" href="#_CPPv411httpd_uri_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Structure for URI handler. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv417httpd_send_func_t">
<span id="_CPPv317httpd_send_func_t"></span><span id="_CPPv217httpd_send_func_t"></span><span id="httpd_send_func_t"></span><span class="target" id="esp__http__server_8h_1ab38425810ec83d8b318d61be15c12dae"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">httpd_send_func_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">hd</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">sockfd</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buf</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">buf_len</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">flags</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv417httpd_send_func_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Prototype for HTTPDs low-level send function. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>User specified send function must handle errors internally, depending upon the set value of errno, and return specific HTTPD_SOCK_ERR_ codes, which will eventually be conveyed as return value of httpd_send() function</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Param hd<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> server instance </p>
</dd>
<dt class="field-even">Param sockfd<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>[in]</strong> session socket file descriptor </p>
</dd>
<dt class="field-odd">Param buf<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> buffer with bytes to send </p>
</dd>
<dt class="field-even">Param buf_len<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>[in]</strong> data size </p>
</dd>
<dt class="field-odd">Param flags<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> flags for the send() function </p>
</dd>
<dt class="field-even">Return<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Bytes : The number of bytes sent successfully</p></li>
<li><p>HTTPD_SOCK_ERR_INVALID : Invalid arguments</p></li>
<li><p>HTTPD_SOCK_ERR_TIMEOUT : Timeout/interrupted while calling socket send()</p></li>
<li><p>HTTPD_SOCK_ERR_FAIL : Unrecoverable error while calling socket send() </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv417httpd_recv_func_t">
<span id="_CPPv317httpd_recv_func_t"></span><span id="_CPPv217httpd_recv_func_t"></span><span id="httpd_recv_func_t"></span><span class="target" id="esp__http__server_8h_1ad58908b819a0d55fbbb42439f3e0c7fe"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">httpd_recv_func_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">hd</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">sockfd</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buf</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">buf_len</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">flags</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv417httpd_recv_func_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Prototype for HTTPDs low-level recv function. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>User specified recv function must handle errors internally, depending upon the set value of errno, and return specific HTTPD_SOCK_ERR_ codes, which will eventually be conveyed as return value of httpd_req_recv() function</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Param hd<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> server instance </p>
</dd>
<dt class="field-even">Param sockfd<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>[in]</strong> session socket file descriptor </p>
</dd>
<dt class="field-odd">Param buf<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> buffer with bytes to send </p>
</dd>
<dt class="field-even">Param buf_len<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>[in]</strong> data size </p>
</dd>
<dt class="field-odd">Param flags<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> flags for the send() function </p>
</dd>
<dt class="field-even">Return<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Bytes : The number of bytes received successfully</p></li>
<li><p>0 : Buffer length parameter is zero / connection closed by peer</p></li>
<li><p>HTTPD_SOCK_ERR_INVALID : Invalid arguments</p></li>
<li><p>HTTPD_SOCK_ERR_TIMEOUT : Timeout/interrupted while calling socket recv()</p></li>
<li><p>HTTPD_SOCK_ERR_FAIL : Unrecoverable error while calling socket recv() </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv420httpd_pending_func_t">
<span id="_CPPv320httpd_pending_func_t"></span><span id="_CPPv220httpd_pending_func_t"></span><span id="httpd_pending_func_t"></span><span class="target" id="esp__http__server_8h_1adc228570871c545d9678d8bca486b3f4"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">httpd_pending_func_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv414httpd_handle_t" title="httpd_handle_t"><span class="n"><span class="pre">httpd_handle_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">hd</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">sockfd</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv420httpd_pending_func_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Prototype for HTTPDs low-level &quot;get pending bytes&quot; function. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>User specified pending function must handle errors internally, depending upon the set value of errno, and return specific HTTPD_SOCK_ERR_ codes, which will be handled accordingly in the server task.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Param hd<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> server instance </p>
</dd>
<dt class="field-even">Param sockfd<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>[in]</strong> session socket file descriptor </p>
</dd>
<dt class="field-odd">Return<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>Bytes : The number of bytes waiting to be received</p></li>
<li><p>HTTPD_SOCK_ERR_INVALID : Invalid arguments</p></li>
<li><p>HTTPD_SOCK_ERR_TIMEOUT : Timeout/interrupted while calling socket pending()</p></li>
<li><p>HTTPD_SOCK_ERR_FAIL : Unrecoverable error while calling socket pending() </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv424httpd_err_handler_func_t">
<span id="_CPPv324httpd_err_handler_func_t"></span><span id="_CPPv224httpd_err_handler_func_t"></span><span id="httpd_err_handler_func_t"></span><span class="target" id="esp__http__server_8h_1ac979a05a4c3198df1720350468824680"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">httpd_err_handler_func_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv411httpd_req_t" title="httpd_req_t"><span class="n"><span class="pre">httpd_req_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">req</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv416httpd_err_code_t" title="httpd_err_code_t"><span class="n"><span class="pre">httpd_err_code_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">error</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv424httpd_err_handler_func_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function prototype for HTTP error handling. </p>
<p>This function is executed upon HTTP errors generated during internal processing of an HTTP request. This is used to override the default behavior on error, which is to send HTTP error response and close the underlying socket.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>If implemented, the server will not automatically send out HTTP error response codes, therefore, httpd_resp_send_err() must be invoked inside this function if user wishes to generate HTTP error responses.</p></li>
<li><p>When invoked, the validity of <code class="docutils literal notranslate"><span class="pre">uri</span></code>, <code class="docutils literal notranslate"><span class="pre">method</span></code>, <code class="docutils literal notranslate"><span class="pre">content_len</span></code> and <code class="docutils literal notranslate"><span class="pre">user_ctx</span></code> fields of the httpd_req_t parameter is not guaranteed as the HTTP request may be partially received/parsed.</p></li>
<li><p>The function must return ESP_OK if underlying socket needs to be kept open. Any other value will ensure that the socket is closed. The return value is ignored when error is of type <code class="docutils literal notranslate"><span class="pre">HTTPD_500_INTERNAL_SERVER_ERROR</span></code> and the socket closed anyway.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Param req<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> HTTP request for which the error needs to be handled </p>
</dd>
<dt class="field-even">Param error<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>[in]</strong> Error type</p>
</dd>
<dt class="field-odd">Return<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>ESP_OK : error handled successful</p></li>
<li><p>ESP_FAIL : failure indicates that the underlying socket needs to be closed </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv415httpd_work_fn_t">
<span id="_CPPv315httpd_work_fn_t"></span><span id="_CPPv215httpd_work_fn_t"></span><span id="httpd_work_fn_t"></span><span class="target" id="esp__http__server_8h_1aa53afee68778845f971b93e0bf3d2012"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">httpd_work_fn_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv415httpd_work_fn_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Prototype of the HTTPD work function Please refer to httpd_queue_work() for more details. </p>
<dl class="field-list simple">
<dt class="field-odd">Param arg<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> The arguments for this work function </p>
</dd>
</dl>
</dd></dl>

</section>
<section id="enumerations">
<h3>Enumerations<a class="headerlink" href="#enumerations" title="Permalink to this heading"></a></h3>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv416httpd_err_code_t">
<span id="_CPPv316httpd_err_code_t"></span><span id="_CPPv216httpd_err_code_t"></span><span class="target" id="esp__http__server_8h_1a89a81467f18d6004ce5d7699274f07bb"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">httpd_err_code_t</span></span></span><a class="headerlink" href="#_CPPv416httpd_err_code_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Error codes sent as HTTP response in case of errors encountered during processing of an HTTP request. </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N16httpd_err_code_t31HTTPD_500_INTERNAL_SERVER_ERRORE">
<span id="_CPPv3N16httpd_err_code_t31HTTPD_500_INTERNAL_SERVER_ERRORE"></span><span id="_CPPv2N16httpd_err_code_t31HTTPD_500_INTERNAL_SERVER_ERRORE"></span><span class="target" id="esp__http__server_8h_1a89a81467f18d6004ce5d7699274f07bbac2fce676e79452122e0ac5befa12330d"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_500_INTERNAL_SERVER_ERROR</span></span></span><a class="headerlink" href="#_CPPv4N16httpd_err_code_t31HTTPD_500_INTERNAL_SERVER_ERRORE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N16httpd_err_code_t32HTTPD_501_METHOD_NOT_IMPLEMENTEDE">
<span id="_CPPv3N16httpd_err_code_t32HTTPD_501_METHOD_NOT_IMPLEMENTEDE"></span><span id="_CPPv2N16httpd_err_code_t32HTTPD_501_METHOD_NOT_IMPLEMENTEDE"></span><span class="target" id="esp__http__server_8h_1a89a81467f18d6004ce5d7699274f07bba5eaade3086caf0f15bf85cada1fe54a9"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_501_METHOD_NOT_IMPLEMENTED</span></span></span><a class="headerlink" href="#_CPPv4N16httpd_err_code_t32HTTPD_501_METHOD_NOT_IMPLEMENTEDE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N16httpd_err_code_t31HTTPD_505_VERSION_NOT_SUPPORTEDE">
<span id="_CPPv3N16httpd_err_code_t31HTTPD_505_VERSION_NOT_SUPPORTEDE"></span><span id="_CPPv2N16httpd_err_code_t31HTTPD_505_VERSION_NOT_SUPPORTEDE"></span><span class="target" id="esp__http__server_8h_1a89a81467f18d6004ce5d7699274f07bba46a51d6064db6a13282a145cc3200bda"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_505_VERSION_NOT_SUPPORTED</span></span></span><a class="headerlink" href="#_CPPv4N16httpd_err_code_t31HTTPD_505_VERSION_NOT_SUPPORTEDE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N16httpd_err_code_t21HTTPD_400_BAD_REQUESTE">
<span id="_CPPv3N16httpd_err_code_t21HTTPD_400_BAD_REQUESTE"></span><span id="_CPPv2N16httpd_err_code_t21HTTPD_400_BAD_REQUESTE"></span><span class="target" id="esp__http__server_8h_1a89a81467f18d6004ce5d7699274f07bba21e30e1cbc863556208f550e393aa5db"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_400_BAD_REQUEST</span></span></span><a class="headerlink" href="#_CPPv4N16httpd_err_code_t21HTTPD_400_BAD_REQUESTE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N16httpd_err_code_t22HTTPD_401_UNAUTHORIZEDE">
<span id="_CPPv3N16httpd_err_code_t22HTTPD_401_UNAUTHORIZEDE"></span><span id="_CPPv2N16httpd_err_code_t22HTTPD_401_UNAUTHORIZEDE"></span><span class="target" id="esp__http__server_8h_1a89a81467f18d6004ce5d7699274f07bbafc206d57c179896bdee2fcc332d9e776"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_401_UNAUTHORIZED</span></span></span><a class="headerlink" href="#_CPPv4N16httpd_err_code_t22HTTPD_401_UNAUTHORIZEDE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N16httpd_err_code_t19HTTPD_403_FORBIDDENE">
<span id="_CPPv3N16httpd_err_code_t19HTTPD_403_FORBIDDENE"></span><span id="_CPPv2N16httpd_err_code_t19HTTPD_403_FORBIDDENE"></span><span class="target" id="esp__http__server_8h_1a89a81467f18d6004ce5d7699274f07bbac0a9441c077923b45f3d7a815fb3956c"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_403_FORBIDDEN</span></span></span><a class="headerlink" href="#_CPPv4N16httpd_err_code_t19HTTPD_403_FORBIDDENE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N16httpd_err_code_t19HTTPD_404_NOT_FOUNDE">
<span id="_CPPv3N16httpd_err_code_t19HTTPD_404_NOT_FOUNDE"></span><span id="_CPPv2N16httpd_err_code_t19HTTPD_404_NOT_FOUNDE"></span><span class="target" id="esp__http__server_8h_1a89a81467f18d6004ce5d7699274f07bbaea8d168586950bcd6984ff60b9ffc779"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_404_NOT_FOUND</span></span></span><a class="headerlink" href="#_CPPv4N16httpd_err_code_t19HTTPD_404_NOT_FOUNDE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N16httpd_err_code_t28HTTPD_405_METHOD_NOT_ALLOWEDE">
<span id="_CPPv3N16httpd_err_code_t28HTTPD_405_METHOD_NOT_ALLOWEDE"></span><span id="_CPPv2N16httpd_err_code_t28HTTPD_405_METHOD_NOT_ALLOWEDE"></span><span class="target" id="esp__http__server_8h_1a89a81467f18d6004ce5d7699274f07bbac29057d13636a77f26ff3b9d2702d2f3"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_405_METHOD_NOT_ALLOWED</span></span></span><a class="headerlink" href="#_CPPv4N16httpd_err_code_t28HTTPD_405_METHOD_NOT_ALLOWEDE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N16httpd_err_code_t21HTTPD_408_REQ_TIMEOUTE">
<span id="_CPPv3N16httpd_err_code_t21HTTPD_408_REQ_TIMEOUTE"></span><span id="_CPPv2N16httpd_err_code_t21HTTPD_408_REQ_TIMEOUTE"></span><span class="target" id="esp__http__server_8h_1a89a81467f18d6004ce5d7699274f07bba577186482d20ac7b5771d33ac99bd963"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_408_REQ_TIMEOUT</span></span></span><a class="headerlink" href="#_CPPv4N16httpd_err_code_t21HTTPD_408_REQ_TIMEOUTE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N16httpd_err_code_t25HTTPD_411_LENGTH_REQUIREDE">
<span id="_CPPv3N16httpd_err_code_t25HTTPD_411_LENGTH_REQUIREDE"></span><span id="_CPPv2N16httpd_err_code_t25HTTPD_411_LENGTH_REQUIREDE"></span><span class="target" id="esp__http__server_8h_1a89a81467f18d6004ce5d7699274f07bbadc801175fffe20233552300f15878c3f"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_411_LENGTH_REQUIRED</span></span></span><a class="headerlink" href="#_CPPv4N16httpd_err_code_t25HTTPD_411_LENGTH_REQUIREDE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N16httpd_err_code_t27HTTPD_413_CONTENT_TOO_LARGEE">
<span id="_CPPv3N16httpd_err_code_t27HTTPD_413_CONTENT_TOO_LARGEE"></span><span id="_CPPv2N16httpd_err_code_t27HTTPD_413_CONTENT_TOO_LARGEE"></span><span class="target" id="esp__http__server_8h_1a89a81467f18d6004ce5d7699274f07bbaddfa4280be5d48987d71c8b2847dad5e"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_413_CONTENT_TOO_LARGE</span></span></span><a class="headerlink" href="#_CPPv4N16httpd_err_code_t27HTTPD_413_CONTENT_TOO_LARGEE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N16httpd_err_code_t22HTTPD_414_URI_TOO_LONGE">
<span id="_CPPv3N16httpd_err_code_t22HTTPD_414_URI_TOO_LONGE"></span><span id="_CPPv2N16httpd_err_code_t22HTTPD_414_URI_TOO_LONGE"></span><span class="target" id="esp__http__server_8h_1a89a81467f18d6004ce5d7699274f07bba6915ffbd7332b53b59e0be4831352ab1"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_414_URI_TOO_LONG</span></span></span><a class="headerlink" href="#_CPPv4N16httpd_err_code_t22HTTPD_414_URI_TOO_LONGE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N16httpd_err_code_t34HTTPD_431_REQ_HDR_FIELDS_TOO_LARGEE">
<span id="_CPPv3N16httpd_err_code_t34HTTPD_431_REQ_HDR_FIELDS_TOO_LARGEE"></span><span id="_CPPv2N16httpd_err_code_t34HTTPD_431_REQ_HDR_FIELDS_TOO_LARGEE"></span><span class="target" id="esp__http__server_8h_1a89a81467f18d6004ce5d7699274f07bbaa84bd581b872c635f16f7cd479933582"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_431_REQ_HDR_FIELDS_TOO_LARGE</span></span></span><a class="headerlink" href="#_CPPv4N16httpd_err_code_t34HTTPD_431_REQ_HDR_FIELDS_TOO_LARGEE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N16httpd_err_code_t18HTTPD_ERR_CODE_MAXE">
<span id="_CPPv3N16httpd_err_code_t18HTTPD_ERR_CODE_MAXE"></span><span id="_CPPv2N16httpd_err_code_t18HTTPD_ERR_CODE_MAXE"></span><span class="target" id="esp__http__server_8h_1a89a81467f18d6004ce5d7699274f07bbace83878b6c0f76bf734bd2ffca75cc9e"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTPD_ERR_CODE_MAX</span></span></span><a class="headerlink" href="#_CPPv4N16httpd_err_code_t18HTTPD_ERR_CODE_MAXE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv426esp_http_server_event_id_t">
<span id="_CPPv326esp_http_server_event_id_t"></span><span id="_CPPv226esp_http_server_event_id_t"></span><span class="target" id="esp__http__server_8h_1a5d162e8619074d6f460c402dbf325155"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_http_server_event_id_t</span></span></span><a class="headerlink" href="#_CPPv426esp_http_server_event_id_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Server events id. </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N26esp_http_server_event_id_t23HTTP_SERVER_EVENT_ERRORE">
<span id="_CPPv3N26esp_http_server_event_id_t23HTTP_SERVER_EVENT_ERRORE"></span><span id="_CPPv2N26esp_http_server_event_id_t23HTTP_SERVER_EVENT_ERRORE"></span><span class="target" id="esp__http__server_8h_1a5d162e8619074d6f460c402dbf325155a40aedcf5bac229f969781a96051182b5"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTP_SERVER_EVENT_ERROR</span></span></span><a class="headerlink" href="#_CPPv4N26esp_http_server_event_id_t23HTTP_SERVER_EVENT_ERRORE" title="Permalink to this definition"></a><br /></dt>
<dd><p>This event occurs when there are any errors during execution </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N26esp_http_server_event_id_t23HTTP_SERVER_EVENT_STARTE">
<span id="_CPPv3N26esp_http_server_event_id_t23HTTP_SERVER_EVENT_STARTE"></span><span id="_CPPv2N26esp_http_server_event_id_t23HTTP_SERVER_EVENT_STARTE"></span><span class="target" id="esp__http__server_8h_1a5d162e8619074d6f460c402dbf325155aa29e2e9d1ab8cfcbca6ad0ba9e26e145"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTP_SERVER_EVENT_START</span></span></span><a class="headerlink" href="#_CPPv4N26esp_http_server_event_id_t23HTTP_SERVER_EVENT_STARTE" title="Permalink to this definition"></a><br /></dt>
<dd><p>This event occurs when HTTP Server is started </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N26esp_http_server_event_id_t30HTTP_SERVER_EVENT_ON_CONNECTEDE">
<span id="_CPPv3N26esp_http_server_event_id_t30HTTP_SERVER_EVENT_ON_CONNECTEDE"></span><span id="_CPPv2N26esp_http_server_event_id_t30HTTP_SERVER_EVENT_ON_CONNECTEDE"></span><span class="target" id="esp__http__server_8h_1a5d162e8619074d6f460c402dbf325155a7e7884f2f58ec69730deec7c0bb59829"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTP_SERVER_EVENT_ON_CONNECTED</span></span></span><a class="headerlink" href="#_CPPv4N26esp_http_server_event_id_t30HTTP_SERVER_EVENT_ON_CONNECTEDE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Once the HTTP Server has been connected to the client, no data exchange has been performed </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N26esp_http_server_event_id_t27HTTP_SERVER_EVENT_ON_HEADERE">
<span id="_CPPv3N26esp_http_server_event_id_t27HTTP_SERVER_EVENT_ON_HEADERE"></span><span id="_CPPv2N26esp_http_server_event_id_t27HTTP_SERVER_EVENT_ON_HEADERE"></span><span class="target" id="esp__http__server_8h_1a5d162e8619074d6f460c402dbf325155a89a634323a1dc772870e2c6c9bcd5679"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTP_SERVER_EVENT_ON_HEADER</span></span></span><a class="headerlink" href="#_CPPv4N26esp_http_server_event_id_t27HTTP_SERVER_EVENT_ON_HEADERE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Occurs when receiving each header sent from the client </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N26esp_http_server_event_id_t30HTTP_SERVER_EVENT_HEADERS_SENTE">
<span id="_CPPv3N26esp_http_server_event_id_t30HTTP_SERVER_EVENT_HEADERS_SENTE"></span><span id="_CPPv2N26esp_http_server_event_id_t30HTTP_SERVER_EVENT_HEADERS_SENTE"></span><span class="target" id="esp__http__server_8h_1a5d162e8619074d6f460c402dbf325155aa8bbe9d292e1f058b28600d563db4dee"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTP_SERVER_EVENT_HEADERS_SENT</span></span></span><a class="headerlink" href="#_CPPv4N26esp_http_server_event_id_t30HTTP_SERVER_EVENT_HEADERS_SENTE" title="Permalink to this definition"></a><br /></dt>
<dd><p>After sending all the headers to the client </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N26esp_http_server_event_id_t25HTTP_SERVER_EVENT_ON_DATAE">
<span id="_CPPv3N26esp_http_server_event_id_t25HTTP_SERVER_EVENT_ON_DATAE"></span><span id="_CPPv2N26esp_http_server_event_id_t25HTTP_SERVER_EVENT_ON_DATAE"></span><span class="target" id="esp__http__server_8h_1a5d162e8619074d6f460c402dbf325155a1b62391170c5046d744ae0b9d001e902"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTP_SERVER_EVENT_ON_DATA</span></span></span><a class="headerlink" href="#_CPPv4N26esp_http_server_event_id_t25HTTP_SERVER_EVENT_ON_DATAE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Occurs when receiving data from the client </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N26esp_http_server_event_id_t27HTTP_SERVER_EVENT_SENT_DATAE">
<span id="_CPPv3N26esp_http_server_event_id_t27HTTP_SERVER_EVENT_SENT_DATAE"></span><span id="_CPPv2N26esp_http_server_event_id_t27HTTP_SERVER_EVENT_SENT_DATAE"></span><span class="target" id="esp__http__server_8h_1a5d162e8619074d6f460c402dbf325155a29c343a958de54e8d5b84ba93d4283fa"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTP_SERVER_EVENT_SENT_DATA</span></span></span><a class="headerlink" href="#_CPPv4N26esp_http_server_event_id_t27HTTP_SERVER_EVENT_SENT_DATAE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Occurs when an ESP HTTP server session is finished </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N26esp_http_server_event_id_t30HTTP_SERVER_EVENT_DISCONNECTEDE">
<span id="_CPPv3N26esp_http_server_event_id_t30HTTP_SERVER_EVENT_DISCONNECTEDE"></span><span id="_CPPv2N26esp_http_server_event_id_t30HTTP_SERVER_EVENT_DISCONNECTEDE"></span><span class="target" id="esp__http__server_8h_1a5d162e8619074d6f460c402dbf325155abe003a5cb05dd21ea05eb492d8030eaf"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTP_SERVER_EVENT_DISCONNECTED</span></span></span><a class="headerlink" href="#_CPPv4N26esp_http_server_event_id_t30HTTP_SERVER_EVENT_DISCONNECTEDE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The connection has been disconnected </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N26esp_http_server_event_id_t22HTTP_SERVER_EVENT_STOPE">
<span id="_CPPv3N26esp_http_server_event_id_t22HTTP_SERVER_EVENT_STOPE"></span><span id="_CPPv2N26esp_http_server_event_id_t22HTTP_SERVER_EVENT_STOPE"></span><span class="target" id="esp__http__server_8h_1a5d162e8619074d6f460c402dbf325155a63fb788b0faefe07080bda069d7d5dbe"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HTTP_SERVER_EVENT_STOP</span></span></span><a class="headerlink" href="#_CPPv4N26esp_http_server_event_id_t22HTTP_SERVER_EVENT_STOPE" title="Permalink to this definition"></a><br /></dt>
<dd><p>This event occurs when HTTP Server is stopped </p>
</dd></dl>

</dd></dl>

</section>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
             <div class="articleComments">

<style>
    .expand-feedback-content {
        display: none;
    }
    .click-like-or-dislike {
        background-color: #d3d3d3;
        pointer-events: none;
    }
</style>

<script>
    function submitFeedbackForm(user_likes_document) {
        // Send to GA4 the user reaction
        gtag('event', 'user_reaction', {
            'user_likes_document': user_likes_document
        });

        if (user_likes_document === 1) {
            document.querySelector('.like-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContentLike").style.display = 'block';
        } else {
            document.querySelector('.dislike-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContent").style.display = 'block';
        }

        document.querySelector('.like-btn').style.pointerEvents = 'none';
        document.querySelector('.dislike-btn').style.pointerEvents = 'none';
    }
</script>

<hr>

<p style="text-align:center"><strong>Was this page helpful?</strong></p>
<p style="text-align:center">
    <button class="like-btn" onclick="submitFeedbackForm(1)">
        <svg aria-hidden="true" focusable="false" class="color-fg-muted" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M8.834.066c.763.087 1.5.295 2.01.884.505.581.656 1.378.656 2.3 0 .467-.087 1.119-.157 1.637L11.328 5h1.422c.603 0 1.174.085 1.668.333.508.254.911.679 1.137 1.2.453.998.438 2.447.188 4.316l-.04.306c-.105.79-.195 1.473-.313 2.033-.131.63-.315 1.209-.668 1.672C13.97 15.847 12.706 16 11 16c-1.848 0-3.234-.333-4.388-.653-.165-.045-.323-.09-.475-.133-.658-.186-1.2-.34-1.725-.415A1.75 1.75 0 0 1 2.75 16h-1A1.75 1.75 0 0 1 0 14.25v-7.5C0 5.784.784 5 1.75 5h1a1.75 1.75 0 0 1 1.514.872c.258-.105.59-.268.918-.508C5.853 4.874 6.5 4.079 6.5 2.75v-.5c0-1.202.994-2.337 2.334-2.184ZM4.5 13.3c.705.088 1.39.284 2.072.478l.441.125c1.096.305 2.334.598 3.987.598 1.794 0 2.28-.223 2.528-.549.147-.193.276-.505.394-1.07.105-.502.188-1.124.295-1.93l.04-.3c.25-1.882.189-2.933-.068-3.497a.921.921 0 0 0-.442-.48c-.208-.104-.52-.174-.997-.174H11c-.686 0-1.295-.577-1.206-1.336.023-.192.05-.39.076-.586.065-.488.13-.97.13-1.328 0-.809-.144-1.15-.288-1.316-.137-.158-.402-.304-1.048-.378C8.357 1.521 8 1.793 8 2.25v.5c0 1.922-.978 3.128-1.933 3.825a5.831 5.831 0 0 1-1.567.81ZM2.75 6.5h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
    </button>
    <button class="dislike-btn" onclick="submitFeedbackForm(0)">
        <svg aria-hidden="true" focusable="false" class="" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M7.083 15.986c-.763-.087-1.499-.295-2.011-.884-.504-.581-.655-1.378-.655-2.299 0-.468.087-1.12.157-1.638l.015-.112H3.167c-.603 0-1.174-.086-1.669-.334a2.415 2.415 0 0 1-1.136-1.2c-.454-.998-.438-2.447-.188-4.316l.04-.306C.32 4.108.41 3.424.526 2.864c.132-.63.316-1.209.669-1.672C1.947.205 3.211.053 4.917.053c1.848 0 3.234.332 4.388.652l.474.133c.658.187 1.201.341 1.726.415a1.75 1.75 0 0 1 1.662-1.2h1c.966 0 1.75.784 1.75 1.75v7.5a1.75 1.75 0 0 1-1.75 1.75h-1a1.75 1.75 0 0 1-1.514-.872c-.259.105-.59.268-.919.508-.671.491-1.317 1.285-1.317 2.614v.5c0 1.201-.994 2.336-2.334 2.183Zm4.334-13.232c-.706-.089-1.39-.284-2.072-.479l-.441-.125c-1.096-.304-2.335-.597-3.987-.597-1.794 0-2.28.222-2.529.548-.147.193-.275.505-.393 1.07-.105.502-.188 1.124-.295 1.93l-.04.3c-.25 1.882-.19 2.933.067 3.497a.923.923 0 0 0 .443.48c.208.104.52.175.997.175h1.75c.685 0 1.295.577 1.205 1.335-.022.192-.049.39-.075.586-.066.488-.13.97-.13 1.329 0 .808.144 1.15.288 1.316.137.157.401.303 1.048.377.307.035.664-.237.664-.693v-.5c0-1.922.978-3.127 1.932-3.825a5.878 5.878 0 0 1 1.568-.809Zm1.75 6.798h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25Z"></path>
        </svg>
    </button>
</p>

<div class="expand-feedback-content" id="expandContentLike">
    <ul style="text-align:center">
        <li>Thank you! We received your feedback.</li>
        <li>If you have any comments, fill in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=HTTP Server (api-reference/protocols/esp_http_server)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<div class="expand-feedback-content" id="expandContent">
    <ul style="text-align:center">
        <li>We value your feedback.</li>
        <li>Let us know how we can improve this page by filling in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=HTTP Server (api-reference/protocols/esp_http_server)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<br>


             </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="esp_crt_bundle.html" class="btn btn-neutral float-left" title="ESP x509 Certificate Bundle" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="esp_https_server.html" class="btn btn-neutral float-right" title="HTTPS Server" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016 - 2025, Espressif Systems (Shanghai) Co., Ltd.</p>
  </div>

  <ul class="footer">
        <li>
	    
            
            Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/espressif/sphinx_idf_theme">theme</a>  based on <a href="https://github.com/readthedocs/sphinx_rtd_theme">Read the Docs Sphinx Theme</a>.
         </li>
    <li class="footer-aside">
        <a href="../../esp-idf-en-v5.4.2.zip"> Download HTML</a>
    </li>

  </ul> 

</footer>
        </div>
      </div>
    </section>
  </div>

  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>