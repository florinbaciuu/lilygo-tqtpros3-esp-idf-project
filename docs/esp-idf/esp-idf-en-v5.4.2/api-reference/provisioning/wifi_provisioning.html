<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-73KGWFC8DM"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-73KGWFC8DM');
        </script><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wi-Fi Provisioning - ESP32 -  &mdash; ESP-IDF Programming Guide v5.4.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=a60756f2" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=949a1ff5" />
      <link rel="stylesheet" type="text/css" href="../../_static/theme_overrides.css?v=851bd809" />

  
    <link rel="canonical" href="https://docs.espressif.com/projects/esp-idf/en/stable/esp32/api-reference/provisioning/wifi_provisioning.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=c241bbaf"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=ff8fa330"></script>
        <script src="https://wavedrom.com/skins/default.js"></script>
        <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <script src="../../_static/js/theme.js"></script>

    
        

    <script type="text/javascript">
        DOCUMENTATION_OPTIONS.PAGENAME = 'api-reference/provisioning/wifi_provisioning';
        DOCUMENTATION_OPTIONS.PROJECT_SLUG = 'esp-idf';
        DOCUMENTATION_OPTIONS.LATEST_BRANCH_NAME = 'master';
        DOCUMENTATION_OPTIONS.VERSIONS_URL = 'https://dl.espressif.com/dl/esp-idf/idf_versions.js';
        DOCUMENTATION_OPTIONS.LANGUAGES = ["en", "zh_CN"];
        DOCUMENTATION_OPTIONS.IDF_TARGET = 'esp32';
        DOCUMENTATION_OPTIONS.HAS_IDF_TARGETS = ["esp32", "esp32s2", "esp32s3", "esp32c3", "esp32c2", "esp32c5", "esp32c6", "esp32p4"]
        DOCUMENTATION_OPTIONS.RELEASE = 'v5.4.2';
        DOCUMENTATION_OPTIONS.LANGUAGE_URL = 'en';

    </script>

    <script type="text/javascript" src="https://dl.espressif.com/dl/esp-idf/idf_versions.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Storage API" href="../storage/index.html" />
    <link rel="prev" title="Unified Provisioning" href="provisioning.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ESP-IDF Programming Guide
              <img src="../../_static/espressif-logo.svg" class="logo" alt="Logo"/>
          </a>

          
            <div class="selectors">
              <select id="target-select" style="width: 150px;" hidden>
                <option value="" disabled selected>Choose target...</option>
              </select>
            </div>
          

          <div class="selectors">
            <select id="version-select" style="width: 150px;" hidden>
              <option value="" disabled selected>Choose version...</option>
            </select>
          </div>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Get Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-conventions.html">API Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/index.html">Application Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth® API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error-codes.html">Error Codes Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/index.html">Networking APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peripherals/index.html">Peripherals API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kconfig.html">Project Configuration</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Provisioning API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="protocomm.html">Protocol Communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="provisioning.html">Unified Provisioning</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Wi-Fi Provisioning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#application-examples">Application Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#provisioning-tools">Provisioning Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../network/esp_smartconfig.html">SmartConfig</a></li>
<li class="toctree-l3"><a class="reference internal" href="../network/esp_dpp.html">Wi-Fi Easy Connect<sup>TM</sup> (DPP)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">Storage API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system/index.html">System API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hw-reference/index.html">Hardware Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-guides/index.html">API Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration-guides/index.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries-and-frameworks/index.html">Libraries and Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contributions Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">ESP-IDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COPYRIGHT.html">Copyrights and Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../languages.html">Switch Between Languages</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ESP-IDF Programming Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="index.html">Provisioning API</a></li>
      <li class="breadcrumb-item active">Wi-Fi Provisioning</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/espressif/esp-idf/blob/v5.4.2/docs/en/api-reference/provisioning/wifi_provisioning.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="wi-fi-provisioning">
<h1>Wi-Fi Provisioning<a class="headerlink" href="#wi-fi-provisioning" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="../../../../../zh_CN/v5.4.2/esp32/api-reference/provisioning/wifi_provisioning.html">[中文]</a></p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>This component provides APIs that control the Wi-Fi provisioning service for receiving and configuring Wi-Fi credentials over SoftAP or Bluetooth LE transport via secure <a class="reference internal" href="protocomm.html"><span class="doc">Protocol Communication</span></a> sessions. The set of <code class="docutils literal notranslate"><span class="pre">wifi_prov_mgr_</span></code> APIs help quickly implement a provisioning service that has necessary features with minimal amount of code and sufficient flexibility.</p>
<section id="initialization">
<span id="wifi-prov-mgr-init"></span><h3>Initialization<a class="headerlink" href="#initialization" title="Permalink to this heading"></a></h3>
<p><a class="reference internal" href="#_CPPv418wifi_prov_mgr_init22wifi_prov_mgr_config_t" title="wifi_prov_mgr_init"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">wifi_prov_mgr_init()</span></code></a> is called to configure and initialize the provisioning manager, and thus must be called prior to invoking any other <code class="docutils literal notranslate"><span class="pre">wifi_prov_mgr_</span></code> APIs. Note that the manager relies on other components of ESP-IDF, namely NVS, TCP/IP, Event Loop and Wi-Fi, and optionally mDNS, hence these components must be initialized beforehand. The manager can be de-initialized at any moment by making a call to <a class="reference internal" href="#_CPPv420wifi_prov_mgr_deinitv" title="wifi_prov_mgr_deinit"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">wifi_prov_mgr_deinit()</span></code></a>.</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">wifi_prov_mgr_config_t</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">scheme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wifi_prov_scheme_ble</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">scheme_event_handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WIFI_PROV_SCHEME_BLE_EVENT_HANDLER_FREE_BTDM</span>
<span class="p">};</span>

<span class="n">ESP_ERROR_CHECK</span><span class="p">(</span><span class="w"> </span><span class="n">wifi_prov_mgr_init</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>The configuration structure <a class="reference internal" href="#_CPPv422wifi_prov_mgr_config_t" title="wifi_prov_mgr_config_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">wifi_prov_mgr_config_t</span></code></a> has a few fields to specify the desired behavior of the manager:</p>
<blockquote>
<div><ul>
<li><p><a class="reference internal" href="#_CPPv4N22wifi_prov_mgr_config_t6schemeE" title="wifi_prov_mgr_config_t::scheme"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">wifi_prov_mgr_config_t::scheme</span></code></a> - This is used to specify the provisioning scheme. Each scheme corresponds to one of the modes of transport supported by protocomm. Hence, support the following options:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wifi_prov_scheme_ble</span></code> - Bluetooth LE transport and GATT Server for handling the provisioning commands.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wifi_prov_scheme_softap</span></code> - Wi-Fi SoftAP transport and HTTP Server for handling the provisioning commands.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wifi_prov_scheme_console</span></code> - Serial transport and console for handling the provisioning commands.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><a class="reference internal" href="#_CPPv4N22wifi_prov_mgr_config_t20scheme_event_handlerE" title="wifi_prov_mgr_config_t::scheme_event_handler"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">wifi_prov_mgr_config_t::scheme_event_handler</span></code></a>: An event handler defined along with the scheme. Choosing the appropriate scheme-specific event handler allows the manager to take care of certain matters automatically. Presently, this option is not used for either the SoftAP or Console-based provisioning, but is very convenient for Bluetooth LE. To understand how, we must recall that Bluetooth requires a substantial amount of memory to function, and once the provisioning is finished, the main application may want to reclaim back this memory (or part of it) if it needs to use either Bluetooth LE or classic Bluetooth. Also, upon every future reboot of a provisioned device, this reclamation of memory needs to be performed again. To reduce this complication in using <code class="docutils literal notranslate"><span class="pre">wifi_prov_scheme_ble</span></code>, the scheme-specific handlers have been defined, and depending upon the chosen handler, the Bluetooth LE/classic Bluetooth/BTDM memory is freed automatically when the provisioning manager is de-initialized. The available options are:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">WIFI_PROV_SCHEME_BLE_EVENT_HANDLER_FREE_BTDM</span></code> - Free both classic Bluetooth and Bluetooth LE/BTDM memory. Used when the main application does not require Bluetooth at all.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WIFI_PROV_SCHEME_BLE_EVENT_HANDLER_FREE_BLE</span></code> - Free only Bluetooth LE memory. Used when main application requires classic Bluetooth.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WIFI_PROV_SCHEME_BLE_EVENT_HANDLER_FREE_BT</span></code> - Free only classic Bluetooth. Used when main application requires Bluetooth LE. In this case freeing happens right when the manager is initialized.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WIFI_PROV_EVENT_HANDLER_NONE</span></code> - Do not use any scheme specific handler. Used when the provisioning scheme is not Bluetooth LE, i.e., using SoftAP or Console, or when main application wants to handle the memory reclaiming on its own, or needs both Bluetooth LE and classic Bluetooth to function.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><a class="reference internal" href="#_CPPv4N22wifi_prov_mgr_config_t17app_event_handlerE" title="wifi_prov_mgr_config_t::app_event_handler"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">wifi_prov_mgr_config_t::app_event_handler</span></code></a> (Deprecated) - It is now recommended to catch <code class="docutils literal notranslate"><span class="pre">WIFI_PROV_EVENT</span></code> that is emitted to the default event loop handler. See definition of <code class="docutils literal notranslate"><span class="pre">wifi_prov_cb_event_t</span></code> for the list of events that are generated by the provisioning service. Here is an excerpt showing some of the provisioning events:</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">event_handler</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">,</span><span class="w"> </span><span class="n">esp_event_base_t</span><span class="w"> </span><span class="n">event_base</span><span class="p">,</span>
<span class="w">                          </span><span class="kt">int</span><span class="w"> </span><span class="n">event_id</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">event_data</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">event_base</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">WIFI_PROV_EVENT</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">event_id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="no">WIFI_PROV_START</span><span class="p">:</span>
<span class="w">                </span><span class="n">ESP_LOGI</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Provisioning started&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="no">WIFI_PROV_CRED_RECV</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">wifi_sta_config_t</span><span class="w"> </span><span class="o">*</span><span class="n">wifi_sta_cfg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">wifi_sta_config_t</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">event_data</span><span class="p">;</span>
<span class="w">                </span><span class="n">ESP_LOGI</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Received Wi-Fi credentials&quot;</span>
<span class="w">                         </span><span class="s">&quot;</span><span class="se">\n\t</span><span class="s">SSID     : %s</span><span class="se">\n\t</span><span class="s">Password : %s&quot;</span><span class="p">,</span>
<span class="w">                         </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">wifi_sta_cfg</span><span class="o">-&gt;</span><span class="n">ssid</span><span class="p">,</span>
<span class="w">                         </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">wifi_sta_cfg</span><span class="o">-&gt;</span><span class="n">password</span><span class="p">);</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="no">WIFI_PROV_CRED_FAIL</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">wifi_prov_sta_fail_reason_t</span><span class="w"> </span><span class="o">*</span><span class="n">reason</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">wifi_prov_sta_fail_reason_t</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">event_data</span><span class="p">;</span>
<span class="w">                </span><span class="n">ESP_LOGE</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Provisioning failed!</span><span class="se">\n\t</span><span class="s">Reason : %s&quot;</span>
<span class="w">                         </span><span class="s">&quot;</span><span class="se">\n\t</span><span class="s">Please reset to factory and retry provisioning&quot;</span><span class="p">,</span>
<span class="w">                         </span><span class="p">(</span><span class="o">*</span><span class="n">reason</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">WIFI_PROV_STA_AUTH_ERROR</span><span class="p">)</span><span class="w"> </span><span class="o">?</span>
<span class="w">                         </span><span class="s">&quot;Wi-Fi station authentication failed&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;Wi-Fi access-point not found&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="no">WIFI_PROV_CRED_SUCCESS</span><span class="p">:</span>
<span class="w">                </span><span class="n">ESP_LOGI</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Provisioning successful&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="no">WIFI_PROV_END</span><span class="p">:</span>
<span class="w">                </span><span class="cm">/* De-initialize manager once provisioning is finished */</span>
<span class="w">                </span><span class="n">wifi_prov_mgr_deinit</span><span class="p">();</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="k">default</span><span class="o">:</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>The manager can be de-initialized at any moment by making a call to <a class="reference internal" href="#_CPPv420wifi_prov_mgr_deinitv" title="wifi_prov_mgr_deinit"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">wifi_prov_mgr_deinit()</span></code></a>.</p>
</section>
<section id="check-the-provisioning-state">
<span id="wifi-prov-check-state"></span><h3>Check the Provisioning State<a class="headerlink" href="#check-the-provisioning-state" title="Permalink to this heading"></a></h3>
<p>Whether the device is provisioned or not can be checked at runtime by calling <a class="reference internal" href="#_CPPv428wifi_prov_mgr_is_provisionedPb" title="wifi_prov_mgr_is_provisioned"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">wifi_prov_mgr_is_provisioned()</span></code></a>. This internally checks if the Wi-Fi credentials are stored in NVS.</p>
<p>Note that presently the manager does not have its own NVS namespace for storage of Wi-Fi credentials, instead it relies on the <code class="docutils literal notranslate"><span class="pre">esp_wifi_</span></code> APIs to set and get the credentials stored in NVS from the default location.</p>
<p>If the provisioning state needs to be reset, any of the following approaches may be taken:</p>
<blockquote>
<div><ul class="simple">
<li><p>The associated part of NVS partition has to be erased manually</p></li>
<li><p>The main application must implement some logic to call <code class="docutils literal notranslate"><span class="pre">esp_wifi_</span></code> APIs for erasing the credentials at runtime</p></li>
<li><p>The main application must implement some logic to force start the provisioning irrespective of the provisioning state</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="n">provisioned</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="n">ESP_ERROR_CHECK</span><span class="p">(</span><span class="w"> </span><span class="n">wifi_prov_mgr_is_provisioned</span><span class="p">(</span><span class="o">&amp;</span><span class="n">provisioned</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="start-the-provisioning-service">
<h3>Start the Provisioning Service<a class="headerlink" href="#start-the-provisioning-service" title="Permalink to this heading"></a></h3>
<p>At the time of starting provisioning we need to specify a service name and the corresponding key, that is to say:</p>
<blockquote>
<div><ul class="simple">
<li><p>A Wi-Fi SoftAP SSID and a passphrase, respectively, when the scheme is <code class="docutils literal notranslate"><span class="pre">wifi_prov_scheme_softap</span></code>.</p></li>
<li><p>Bluetooth LE device name with the service key ignored when the scheme is <code class="docutils literal notranslate"><span class="pre">wifi_prov_scheme_ble</span></code>.</p></li>
</ul>
</div></blockquote>
<p>Also, since internally the manager uses <code class="docutils literal notranslate"><span class="pre">protocomm</span></code>, we have the option of choosing one of the security features provided by it:</p>
<blockquote>
<div><ul class="simple">
<li><p>Security 1 is secure communication which consists of a prior handshake involving X25519 key exchange along with authentication using a proof of possession <code class="docutils literal notranslate"><span class="pre">pop</span></code>, followed by AES-CTR for encryption or decryption of subsequent messages.</p></li>
<li><p>Security 0 is simply plain text communication. In this case the <code class="docutils literal notranslate"><span class="pre">pop</span></code> is simply ignored.</p></li>
</ul>
</div></blockquote>
<p>See <a class="reference internal" href="provisioning.html"><span class="doc">Unified Provisioning</span></a> for details about the security features.</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">service_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;my_device&quot;</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">service_key</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;password&quot;</span><span class="p">;</span>

<span class="n">wifi_prov_security_t</span><span class="w"> </span><span class="n">security</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WIFI_PROV_SECURITY_1</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;abcd1234&quot;</span><span class="p">;</span>

<span class="n">ESP_ERROR_CHECK</span><span class="p">(</span><span class="w"> </span><span class="n">wifi_prov_mgr_start_provisioning</span><span class="p">(</span><span class="n">security</span><span class="p">,</span><span class="w"> </span><span class="n">pop</span><span class="p">,</span><span class="w"> </span><span class="n">service_name</span><span class="p">,</span><span class="w"> </span><span class="n">service_key</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>The provisioning service automatically finishes only if it receives valid Wi-Fi AP credentials followed by successful connection of device to the AP with IP obtained. Regardless of that, the provisioning service can be stopped at any moment by making a call to <a class="reference internal" href="#_CPPv431wifi_prov_mgr_stop_provisioningv" title="wifi_prov_mgr_stop_provisioning"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">wifi_prov_mgr_stop_provisioning()</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the device fails to connect with the provided credentials, it does not accept new credentials anymore, but the provisioning service keeps on running, only to convey failure to the client, until the device is restarted. Upon restart, the provisioning state turns out to be true this time, as credentials are found in NVS, but the device does fail again to connect with those same credentials, unless an AP with the matching credentials somehow does become available. This situation can be fixed by resetting the credentials in NVS or force starting the provisioning service. This has been explained above in <a class="reference internal" href="#wifi-prov-check-state"><span class="std std-ref">Check the Provisioning State</span></a>.</p>
</div>
</section>
<section id="waiting-for-completion">
<h3>Waiting for Completion<a class="headerlink" href="#waiting-for-completion" title="Permalink to this heading"></a></h3>
<p>Typically, the main application waits for the provisioning to finish, then de-initializes the manager to free up resources, and finally starts executing its own logic.</p>
<p>There are two ways for making this possible. The simpler way is to use a blocking call to <a class="reference internal" href="#_CPPv418wifi_prov_mgr_waitv" title="wifi_prov_mgr_wait"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">wifi_prov_mgr_wait()</span></code></a>.</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Start provisioning service</span>
<span class="n">ESP_ERROR_CHECK</span><span class="p">(</span><span class="w"> </span><span class="n">wifi_prov_mgr_start_provisioning</span><span class="p">(</span><span class="n">security</span><span class="p">,</span><span class="w"> </span><span class="n">pop</span><span class="p">,</span><span class="w"> </span><span class="n">service_name</span><span class="p">,</span><span class="w"> </span><span class="n">service_key</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>

<span class="c1">// Wait for service to complete</span>
<span class="n">wifi_prov_mgr_wait</span><span class="p">();</span>

<span class="c1">// Finally de-initialize the manager</span>
<span class="n">wifi_prov_mgr_deinit</span><span class="p">();</span>
</pre></div>
</div>
</div></blockquote>
<p>The other way is to use the default event loop handler to catch <code class="docutils literal notranslate"><span class="pre">WIFI_PROV_EVENT</span></code> and call <a class="reference internal" href="#_CPPv420wifi_prov_mgr_deinitv" title="wifi_prov_mgr_deinit"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">wifi_prov_mgr_deinit()</span></code></a> when event ID is <code class="docutils literal notranslate"><span class="pre">WIFI_PROV_END</span></code>:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">event_handler</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">,</span><span class="w"> </span><span class="n">esp_event_base_t</span><span class="w"> </span><span class="n">event_base</span><span class="p">,</span>
<span class="w">                          </span><span class="kt">int</span><span class="w"> </span><span class="n">event_id</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">event_data</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">event_base</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">WIFI_PROV_EVENT</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">event_id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">WIFI_PROV_END</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="cm">/* De-initialize the manager once the provisioning is finished */</span>
<span class="w">        </span><span class="n">wifi_prov_mgr_deinit</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="user-side-implementation">
<h3>User Side Implementation<a class="headerlink" href="#user-side-implementation" title="Permalink to this heading"></a></h3>
<p>When the service is started, the device to be provisioned is identified by the advertised service name, which, depending upon the selected transport, is either the Bluetooth LE device name or the SoftAP SSID.</p>
<p>When using SoftAP transport, for allowing service discovery, mDNS must be initialized before starting provisioning. In this case, the host name set by the main application is used, and the service type is internally set to <code class="docutils literal notranslate"><span class="pre">_esp_wifi_prov</span></code>.</p>
<p>When using Bluetooth LE transport, a custom 128-bit UUID should be set using <a class="reference internal" href="#_CPPv437wifi_prov_scheme_ble_set_service_uuidP7uint8_t" title="wifi_prov_scheme_ble_set_service_uuid"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">wifi_prov_scheme_ble_set_service_uuid()</span></code></a>. This UUID is to be included in the Bluetooth LE advertisement and corresponds to the primary GATT service that provides provisioning endpoints as GATT characteristics. Each GATT characteristic is formed using the primary service UUID as the base, with different auto-assigned 12th and 13th bytes, presumably counting from the 0th byte. Since an endpoint characteristic UUID is auto-assigned, it should not be used to identify the endpoint. Instead, client-side applications should identify the endpoints by reading the User Characteristic Description (<code class="docutils literal notranslate"><span class="pre">0x2901</span></code>) descriptor for each characteristic, which contains the endpoint name of the characteristic. For example, if the service UUID is set to <code class="docutils literal notranslate"><span class="pre">55cc035e-fb27-4f80-be02-3c60828b7451</span></code>, each endpoint characteristic is assigned a UUID like <code class="docutils literal notranslate"><span class="pre">55cc____-fb27-4f80-be02-3c60828b7451</span></code>, with unique values at the 12th and 13th bytes.</p>
<p>Once connected to the device, the provisioning-related protocomm endpoints can be identified as follows:</p>
<table class="docutils align-default" id="id12">
<caption><span class="caption-text">Endpoints Provided by the Provisioning Service</span><a class="headerlink" href="#id12" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 35.0%" />
<col style="width: 35.0%" />
<col style="width: 30.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Endpoint Name <br> i.e., Bluetooth LE + GATT Server</p></th>
<th class="head"><p>URI, i.e., SoftAP <br> + HTTP Server + mDNS</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>prov-session</p></td>
<td><p><a class="reference external" href="http:/">http:/</a>/&lt;mdns-hostname&gt;.local/prov-session</p></td>
<td><p>Security endpoint used for session establishment</p></td>
</tr>
<tr class="row-odd"><td><p>prov-scan</p></td>
<td><p><a class="reference external" href="http://wifi-prov.local/prov-scan">http://wifi-prov.local/prov-scan</a></p></td>
<td><p>the endpoint used for starting Wi-Fi scan and receiving scan results</p></td>
</tr>
<tr class="row-even"><td><p>prov-ctrl</p></td>
<td><p><a class="reference external" href="http://wifi-prov.local/prov-ctrl">http://wifi-prov.local/prov-ctrl</a></p></td>
<td><p>the endpoint used for controlling Wi-Fi provisioning state</p></td>
</tr>
<tr class="row-odd"><td><p>prov-config</p></td>
<td><p><a class="reference external" href="http:/">http:/</a>/&lt;mdns-hostname&gt;.local/prov-config</p></td>
<td><p>the endpoint used for configuring Wi-Fi credentials on device</p></td>
</tr>
<tr class="row-even"><td><p>proto-ver</p></td>
<td><p><a class="reference external" href="http:/">http:/</a>/&lt;mdns-hostname&gt;.local/proto-ver</p></td>
<td><p>the endpoint for retrieving version info</p></td>
</tr>
</tbody>
</table>
<p>Immediately after connecting, the client application may fetch the version/capabilities information from the <code class="docutils literal notranslate"><span class="pre">proto-ver</span></code> endpoint. All communications to this endpoint are unencrypted, hence necessary information, which may be relevant for deciding compatibility, can be retrieved before establishing a secure session. The response is in JSON format and looks like : <code class="docutils literal notranslate"><span class="pre">prov:</span> <span class="pre">{</span> <span class="pre">ver:</span>&#160; <span class="pre">v1.1,</span> <span class="pre">sec_ver:</span> <span class="pre">1,</span> <span class="pre">sec_patch_ver:</span> <span class="pre">0,</span> <span class="pre">cap:</span>&#160; <span class="pre">[no_pop]</span> <span class="pre">},</span> <span class="pre">my_app:</span> <span class="pre">{</span> <span class="pre">ver:</span>&#160; <span class="pre">1.345,</span> <span class="pre">cap:</span>&#160; <span class="pre">[cloud,</span> <span class="pre">local_ctrl]</span> <span class="pre">},....</span></code>.</p>
<p>Here label <code class="docutils literal notranslate"><span class="pre">prov</span></code> provides:</p>
<blockquote>
<div><ul class="simple">
<li><p>provisioning service version <code class="docutils literal notranslate"><span class="pre">ver</span></code></p></li>
<li><p>security version <code class="docutils literal notranslate"><span class="pre">sec_ver</span></code></p></li>
<li><p>security patch version <code class="docutils literal notranslate"><span class="pre">sec_patch_ver</span></code> (default is 0)</p></li>
<li><p>capabilities <code class="docutils literal notranslate"><span class="pre">cap</span></code></p></li>
</ul>
</div></blockquote>
<p>For now, only the <code class="docutils literal notranslate"><span class="pre">no_pop</span></code> capability is supported, which indicates that the service does not require proof of possession for authentication. Any application-related version or capabilities are given by other labels, e.g., <code class="docutils literal notranslate"><span class="pre">my_app</span></code> in this example. These additional fields are set using <a class="reference internal" href="#_CPPv426wifi_prov_mgr_set_app_infoPKcPKcPPKc6size_t" title="wifi_prov_mgr_set_app_info"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">wifi_prov_mgr_set_app_info()</span></code></a>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Client must take into account both the <code class="docutils literal notranslate"><span class="pre">sec_ver</span></code> and <code class="docutils literal notranslate"><span class="pre">sec_patch_ver</span></code> fields, as these are used to determine the security scheme to be used for the session establishment.</p>
</div>
<p>User side applications need to implement the signature handshaking required for establishing and authenticating secure protocomm sessions as per the security scheme configured for use, which is not needed when the manager is configured to use protocomm security 0.</p>
<p>See <a class="reference internal" href="provisioning.html"><span class="doc">Unified Provisioning</span></a> for more details about the secure handshake and encryption used. Applications must use the <code class="docutils literal notranslate"><span class="pre">.proto</span></code> files found under <a class="reference external" href="https://github.com/espressif/esp-idf/tree/v5.4.2/components/protocomm/proto">protocomm/proto</a>, which define the Protobuf message structures supported by <code class="docutils literal notranslate"><span class="pre">prov-session</span></code> endpoint.</p>
<p>Once a session is established, Wi-Fi credentials are configured using the following set of <code class="docutils literal notranslate"><span class="pre">wifi_config</span></code> commands, serialized as Protobuf messages with the corresponding <code class="docutils literal notranslate"><span class="pre">.proto</span></code> files that can be found under <a class="reference external" href="https://github.com/espressif/esp-idf/tree/v5.4.2/components/wifi_provisioning/proto">wifi_provisioning/proto</a>:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get_status</span></code> - For querying the Wi-Fi connection status. The device responds with a status which is one of connecting, connected or disconnected. If the status is disconnected, a disconnection reason is also to be included in the status response.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_config</span></code> - For setting the Wi-Fi connection credentials.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apply_config</span></code> - For applying the credentials saved during <code class="docutils literal notranslate"><span class="pre">set_config</span></code> and starting the Wi-Fi station.</p></li>
</ul>
</div></blockquote>
<p>After session establishment, the client can also request Wi-Fi scan results from the device. The results returned is a list of AP SSIDs, sorted in descending order of signal strength. This allows client applications to display APs nearby to the device at the time of provisioning, and users can select one of the SSIDs and provide the password which is then sent using the <code class="docutils literal notranslate"><span class="pre">wifi_config</span></code> commands described above. The <code class="docutils literal notranslate"><span class="pre">wifi_scan</span></code> endpoint supports the following protobuf commands :</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">scan_start</span></code> - For starting Wi-Fi scan with various options:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">blocking</span></code> (input) - If true, the command returns only when the scanning is finished.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">passive</span></code> (input) - If true, the scan is started in passive mode, which may be slower, instead of active mode.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_channels</span></code> (input) - This specifies whether to scan all channels in one go when zero, or perform scanning of channels in groups, with 120 ms delay between scanning of consecutive groups, and the value of this parameter sets the number of channels in each group. This is useful when transport mode is SoftAP, where scanning all channels in one go may not give the Wi-Fi driver enough time to send out beacons, and hence may cause disconnection with any connected stations. When scanning in groups, the manager waits for at least 120 ms after completing the scan on a group of channels, and thus allows the driver to send out the beacons. For example, given that the total number of Wi-Fi channels is 14, then setting <code class="docutils literal notranslate"><span class="pre">group_channels</span></code> to 3 creates 5 groups, with each group having 3 channels, except the last one which has 14 % 3 = 2 channels. So, when the scan is started, the first 3 channels will be scanned, followed by a 120 ms delay, and then the next 3 channels, and so on, until all the 14 channels have been scanned.One may need to adjust this parameter as having only a few channels in a group may increase the overall scan time, while having too many may again cause disconnection. Usually, a value of 4 should work for most cases. Note that for any other mode of transport, e.g., Bluetooth LE, this can be safely set to 0, and hence achieve the shortest overall scanning time.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">period_ms</span></code> (input) - The scan parameter specifying how long to wait on each channel.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">scan_status</span></code> - It gives the status of scanning process:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scan_finished</span></code> (output) - When the scan has finished, this returns true.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">result_count</span></code> (output) - This gives the total number of results obtained till now. If the scan is yet happening, this number keeps on updating.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">scan_result</span></code> - For fetching the scan results. This can be called even if the scan is still on going.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">start_index</span></code> (input) - Where the index starts from to fetch the entries from the results list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count</span></code> (input) - The number of entries to fetch from the starting index.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">entries</span></code> (output) - The list of entries returned. Each entry consists of <code class="docutils literal notranslate"><span class="pre">ssid</span></code>, <code class="docutils literal notranslate"><span class="pre">channel</span></code> and <code class="docutils literal notranslate"><span class="pre">rssi</span></code> information.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>The client can also control the provisioning state of the device using <code class="docutils literal notranslate"><span class="pre">wifi_ctrl</span></code> endpoint. The <code class="docutils literal notranslate"><span class="pre">wifi_ctrl</span></code> endpoint supports the following protobuf commands:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ctrl_reset</span></code> - Resets internal state machine of the device and clears provisioned credentials only in case of provisioning failures.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctrl_reprov</span></code> - Resets internal state machine of the device and clears provisioned credentials only in case the device is to be provisioned again for new credentials after a previous successful provisioning.</p></li>
</ul>
</div></blockquote>
</section>
<section id="additional-endpoints">
<h3>Additional Endpoints<a class="headerlink" href="#additional-endpoints" title="Permalink to this heading"></a></h3>
<p>In case users want to have some additional protocomm endpoints customized to their requirements, this is done in two steps. First is creation of an endpoint with a specific name, and the second step is the registration of a handler for this endpoint. See <a class="reference internal" href="protocomm.html"><span class="doc">Protocol Communication</span></a> for the function signature of an endpoint handler. A custom endpoint must be created after initialization and before starting the provisioning service. Whereas, the protocomm handler is registered for this endpoint only after starting the provisioning service. Note that in the custom endpoint handler function, memory for the response of such protocomm endpoints should be allocated using heap as it gets freed by the protocomm layer once it has been sent by the transport layer.</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">wifi_prov_mgr_init</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>
<span class="n">wifi_prov_mgr_endpoint_create</span><span class="p">(</span><span class="s">&quot;custom-endpoint&quot;</span><span class="p">);</span>
<span class="n">wifi_prov_mgr_start_provisioning</span><span class="p">(</span><span class="n">security</span><span class="p">,</span><span class="w"> </span><span class="n">pop</span><span class="p">,</span><span class="w"> </span><span class="n">service_name</span><span class="p">,</span><span class="w"> </span><span class="n">service_key</span><span class="p">);</span>
<span class="n">wifi_prov_mgr_endpoint_register</span><span class="p">(</span><span class="s">&quot;custom-endpoint&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">custom_ep_handler</span><span class="p">,</span><span class="w"> </span><span class="n">custom_ep_data</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>When the provisioning service stops, the endpoint is unregistered automatically.</p>
<p>One can also choose to call <a class="reference internal" href="#_CPPv433wifi_prov_mgr_endpoint_unregisterPKc" title="wifi_prov_mgr_endpoint_unregister"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">wifi_prov_mgr_endpoint_unregister()</span></code></a> to manually deactivate an endpoint at runtime. This can also be used to deactivate the internal endpoints used by the provisioning service.</p>
</section>
<section id="when-how-to-stop-the-provisioning-service">
<h3>When/How to Stop the Provisioning Service?<a class="headerlink" href="#when-how-to-stop-the-provisioning-service" title="Permalink to this heading"></a></h3>
<p>The default behavior is that once the device successfully connects using the Wi-Fi credentials set by the <code class="docutils literal notranslate"><span class="pre">apply_config</span></code> command, the provisioning service stops, and Bluetooth LE or SoftAP turns off, automatically after responding to the next <code class="docutils literal notranslate"><span class="pre">get_status</span></code> command. If <code class="docutils literal notranslate"><span class="pre">get_status</span></code> command is not received by the device, the service stops after a 30 s timeout.</p>
<p>On the other hand, if device is not able to connect using the provided Wi-Fi credentials, due to incorrect SSID or passphrase, the service keeps running, and <code class="docutils literal notranslate"><span class="pre">get_status</span></code> keeps responding with disconnected status and reason for disconnection. Any further attempts to provide another set of Wi-Fi credentials, are to be rejected. These credentials are preserved, unless the provisioning service is force started, or NVS erased.</p>
<p>If this default behavior is not desired, it can be disabled by calling <a class="reference internal" href="#_CPPv431wifi_prov_mgr_disable_auto_stop8uint32_t" title="wifi_prov_mgr_disable_auto_stop"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">wifi_prov_mgr_disable_auto_stop()</span></code></a>. Now the provisioning service stops only after an explicit call to <a class="reference internal" href="#_CPPv431wifi_prov_mgr_stop_provisioningv" title="wifi_prov_mgr_stop_provisioning"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">wifi_prov_mgr_stop_provisioning()</span></code></a>, which returns immediately after scheduling a task for stopping the service. The service stops after a certain delay and <code class="docutils literal notranslate"><span class="pre">WIFI_PROV_END</span></code> event gets emitted. This delay is specified by the argument to <a class="reference internal" href="#_CPPv431wifi_prov_mgr_disable_auto_stop8uint32_t" title="wifi_prov_mgr_disable_auto_stop"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">wifi_prov_mgr_disable_auto_stop()</span></code></a>.</p>
<p>The customized behavior is useful for applications which want the provisioning service to be stopped some time after the Wi-Fi connection is successfully established. For example, if the application requires the device to connect to some cloud service and obtain another set of credentials, and exchange these credentials over a custom protocomm endpoint, then after successfully doing so, stop the provisioning service by calling <a class="reference internal" href="#_CPPv431wifi_prov_mgr_stop_provisioningv" title="wifi_prov_mgr_stop_provisioning"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">wifi_prov_mgr_stop_provisioning()</span></code></a> inside the protocomm handler itself. The right amount of delay ensures that the transport resources are freed only after the response from the protocomm handler reaches the client side application.</p>
</section>
</section>
<section id="application-examples">
<h2>Application Examples<a class="headerlink" href="#application-examples" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/tree/v5.4.2/examples/provisioning/wifi_prov_mgr">provisioning/wifi_prov_mgr</a> demonstrates how to use the <cite>wifi_provisioning</cite> manager component to configure ESP32 as a Wi-Fi station with specified credentials, using Bluetooth LE as the default transport for provisioning.</p></li>
</ul>
</section>
<section id="provisioning-tools">
<h2>Provisioning Tools<a class="headerlink" href="#provisioning-tools" title="Permalink to this heading"></a></h2>
<p>Provisioning applications are available for various platforms, along with source code:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Android:</dt><dd><ul>
<li><p><a class="reference external" href="https://play.google.com/store/apps/details?id=com.espressif.provble">Bluetooth LE Provisioning app on Play Store</a>.</p></li>
<li><p><a class="reference external" href="https://play.google.com/store/apps/details?id=com.espressif.provsoftap">SoftAP Provisioning app on Play Store</a>.</p></li>
<li><p>Source code on GitHub: <a class="reference external" href="https://github.com/espressif/esp-idf-provisioning-android">esp-idf-provisioning-android</a>.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>iOS:</dt><dd><ul>
<li><p><a class="reference external" href="https://apps.apple.com/in/app/esp-ble-provisioning/id1473590141">Bluetooth LE Provisioning app on App Store</a>.</p></li>
<li><p><a class="reference external" href="https://apps.apple.com/in/app/esp-softap-provisioning/id1474040630">SoftAP Provisioning app on App Store</a>.</p></li>
<li><p>Source code on GitHub: <a class="reference external" href="https://github.com/espressif/esp-idf-provisioning-ios">esp-idf-provisioning-ios</a>.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Linux/MacOS/Windows: <a class="reference external" href="https://github.com/espressif/esp-idf/tree/v5.4.2/tools/esp_prov">tools/esp_prov</a>, a Python-based command-line tool for provisioning.</p></li>
</ul>
<p>The phone applications offer simple UI and are thus more user centric, while the command-line application is useful as a debugging tool for developers.</p>
</section>
<section id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this heading"></a></h2>
<section id="header-file">
<h3>Header File<a class="headerlink" href="#header-file" title="Permalink to this heading"></a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/wifi_provisioning/include/wifi_provisioning/manager.h">components/wifi_provisioning/include/wifi_provisioning/manager.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;wifi_provisioning/manager.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">wifi_provisioning</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">wifi_provisioning</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES wifi_provisioning
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES wifi_provisioning
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this heading"></a></h3>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv418wifi_prov_mgr_init22wifi_prov_mgr_config_t">
<span id="_CPPv318wifi_prov_mgr_init22wifi_prov_mgr_config_t"></span><span id="_CPPv218wifi_prov_mgr_init22wifi_prov_mgr_config_t"></span><span id="wifi_prov_mgr_init__wifi_prov_mgr_config_t"></span><span class="target" id="manager_8h_1a63f473649b7fc33b20073cdbfa429a47"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_init</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv422wifi_prov_mgr_config_t" title="wifi_prov_mgr_config_t"><span class="n"><span class="pre">wifi_prov_mgr_config_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">config</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418wifi_prov_mgr_init22wifi_prov_mgr_config_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initialize provisioning manager instance. </p>
<p>Configures the manager and allocates internal resources</p>
<p>Configuration specifies the provisioning scheme (transport) and event handlers</p>
<p>Event WIFI_PROV_INIT is emitted right after initialization is complete</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> -- <strong>[in]</strong> Configuration structure</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_FAIL : Fail </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv420wifi_prov_mgr_deinitv">
<span id="_CPPv320wifi_prov_mgr_deinitv"></span><span id="_CPPv220wifi_prov_mgr_deinitv"></span><span id="wifi_prov_mgr_deinit__void"></span><span class="target" id="manager_8h_1a751e816a6e77fdb1d4073ecab2444f1e"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_deinit</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv420wifi_prov_mgr_deinitv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Stop provisioning (if running) and release resource used by the manager. </p>
<p>Event WIFI_PROV_DEINIT is emitted right after de-initialization is finished</p>
<p>If provisioning service is still active when this API is called, it first stops the service, hence emitting WIFI_PROV_END, and then performs the de-initialization </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv428wifi_prov_mgr_is_provisionedPb">
<span id="_CPPv328wifi_prov_mgr_is_provisionedPb"></span><span id="_CPPv228wifi_prov_mgr_is_provisionedPb"></span><span id="wifi_prov_mgr_is_provisioned__bP"></span><span class="target" id="manager_8h_1aff1c08c6c636730b2bc3b28d6010b8e3"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_is_provisioned</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">provisioned</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428wifi_prov_mgr_is_provisionedPb" title="Permalink to this definition"></a><br /></dt>
<dd><p>Checks if device is provisioned. </p>
<p>This checks if Wi-Fi credentials are present on the NVS</p>
<p>The Wi-Fi credentials are assumed to be kept in the same NVS namespace as used by esp_wifi component</p>
<p>If one were to call esp_wifi_set_config() directly instead of going through the provisioning process, this function will still yield true (i.e. device will be found to be provisioned)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calling wifi_prov_mgr_start_provisioning() automatically resets the provision state, irrespective of what the state was prior to making the call.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>provisioned</strong> -- <strong>[out]</strong> True if provisioned, else false</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Retrieved provision state successfully</p></li>
<li><p>ESP_FAIL : Wi-Fi not initialized</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null argument supplied </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv424wifi_prov_mgr_is_sm_idlev">
<span id="_CPPv324wifi_prov_mgr_is_sm_idlev"></span><span id="_CPPv224wifi_prov_mgr_is_sm_idlev"></span><span id="wifi_prov_mgr_is_sm_idle__void"></span><span class="target" id="manager_8h_1ad010120bb5f9fbf366d200c13df82a4c"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_is_sm_idle</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv424wifi_prov_mgr_is_sm_idlev" title="Permalink to this definition"></a><br /></dt>
<dd><p>Checks whether the provisioning state machine is idle. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if state machine is idle, else false </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv432wifi_prov_mgr_start_provisioning20wifi_prov_security_tPKvPKcPKc">
<span id="_CPPv332wifi_prov_mgr_start_provisioning20wifi_prov_security_tPKvPKcPKc"></span><span id="_CPPv232wifi_prov_mgr_start_provisioning20wifi_prov_security_tPKvPKcPKc"></span><span id="wifi_prov_mgr_start_provisioning__wifi_prov_security_t.voidCP.cCP.cCP"></span><span class="target" id="manager_8h_1ab0ddb3a215d6d393faeda3b607755428"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_start_provisioning</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv420wifi_prov_security_t" title="wifi_prov_security_t"><span class="n"><span class="pre">wifi_prov_security_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">security</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">wifi_prov_sec_params</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">service_name</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">service_key</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv432wifi_prov_mgr_start_provisioning20wifi_prov_security_tPKvPKcPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>Start provisioning service. </p>
<p>This starts the provisioning service according to the scheme configured at the time of initialization. For scheme :<ul class="simple">
<li><p>wifi_prov_scheme_ble : This starts protocomm_ble, which internally initializes BLE transport and starts GATT server for handling provisioning requests</p></li>
<li><p>wifi_prov_scheme_softap : This activates SoftAP mode of Wi-Fi and starts protocomm_httpd, which internally starts an HTTP server for handling provisioning requests (If mDNS is active it also starts advertising service with type _esp_wifi_prov._tcp)</p></li>
</ul>
</p>
<p>Event WIFI_PROV_START is emitted right after provisioning starts without failure</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API will start provisioning service even if device is found to be already provisioned, i.e. wifi_prov_mgr_is_provisioned() yields true</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>security</strong> -- <strong>[in]</strong> Specify which protocomm security scheme to use :<ul>
<li><p>WIFI_PROV_SECURITY_0 : For no security</p></li>
<li><p>WIFI_PROV_SECURITY_1 : x25519 secure handshake for session establishment followed by AES-CTR encryption of provisioning messages</p></li>
<li><p>WIFI_PROV_SECURITY_2: SRP6a based authentication and key exchange followed by AES-GCM encryption/decryption of provisioning messages </p></li>
</ul>
</p></li>
<li><p><strong>wifi_prov_sec_params</strong> -- <strong>[in]</strong> Pointer to security params (NULL if not needed). This is not needed for protocomm security 0 This pointer should hold the struct of type wifi_prov_security1_params_t for protocomm security 1 and wifi_prov_security2_params_t for protocomm security 2 respectively. This pointer and its contents should be valid till the provisioning service is running and has not been stopped or de-inited. </p></li>
<li><p><strong>service_name</strong> -- <strong>[in]</strong> Unique name of the service. This translates to:<ul>
<li><p>Wi-Fi SSID when provisioning mode is softAP</p></li>
<li><p>Device name when provisioning mode is BLE </p></li>
</ul>
</p></li>
<li><p><strong>service_key</strong> -- <strong>[in]</strong> Key required by client to access the service (NULL if not needed). This translates to:<ul>
<li><p>Wi-Fi password when provisioning mode is softAP</p></li>
<li><p>ignored when provisioning mode is BLE</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Provisioning started successfully</p></li>
<li><p>ESP_FAIL : Failed to start provisioning service</p></li>
<li><p>ESP_ERR_INVALID_STATE : Provisioning manager not initialized or already started </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv431wifi_prov_mgr_stop_provisioningv">
<span id="_CPPv331wifi_prov_mgr_stop_provisioningv"></span><span id="_CPPv231wifi_prov_mgr_stop_provisioningv"></span><span id="wifi_prov_mgr_stop_provisioning__void"></span><span class="target" id="manager_8h_1a803a3c89c1bbd4b05da46ae0f1725181"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_stop_provisioning</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv431wifi_prov_mgr_stop_provisioningv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Stop provisioning service. </p>
<p>If provisioning service is active, this API will initiate a process to stop the service and return. Once the service actually stops, the event WIFI_PROV_END will be emitted.</p>
<p>If wifi_prov_mgr_deinit() is called without calling this API first, it will automatically stop the provisioning service and emit the WIFI_PROV_END, followed by WIFI_PROV_DEINIT, before returning.</p>
<p>This API will generally be used along with wifi_prov_mgr_disable_auto_stop() in the scenario when the main application has registered its own endpoints, and wishes that the provisioning service is stopped only when some protocomm command from the client side application is received.</p>
<p>Calling this API inside an endpoint handler, with sufficient cleanup_delay, will allow the response / acknowledgment to be sent successfully before the underlying protocomm service is stopped.</p>
<p>Cleaup_delay is set when calling wifi_prov_mgr_disable_auto_stop(). If not specified, it defaults to 1000ms.</p>
<p>For straightforward cases, using this API is usually not necessary as provisioning is stopped automatically once WIFI_PROV_CRED_SUCCESS is emitted. Stopping is delayed (maximum 30 seconds) thus allowing the client side application to query for Wi-Fi state, i.e. after receiving the first query and sending <code class="docutils literal notranslate"><span class="pre">Wi-Fi</span> <span class="pre">state</span> <span class="pre">connected</span></code> response the service is stopped immediately. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv418wifi_prov_mgr_waitv">
<span id="_CPPv318wifi_prov_mgr_waitv"></span><span id="_CPPv218wifi_prov_mgr_waitv"></span><span id="wifi_prov_mgr_wait__void"></span><span class="target" id="manager_8h_1a63cdb8fb428acffb9106d8c43e604e95"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_wait</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418wifi_prov_mgr_waitv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Wait for provisioning service to finish. </p>
<p>Calling this API will block until provisioning service is stopped i.e. till event WIFI_PROV_END is emitted.</p>
<p>This will not block if provisioning is not started or not initialized. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv431wifi_prov_mgr_disable_auto_stop8uint32_t">
<span id="_CPPv331wifi_prov_mgr_disable_auto_stop8uint32_t"></span><span id="_CPPv231wifi_prov_mgr_disable_auto_stop8uint32_t"></span><span id="wifi_prov_mgr_disable_auto_stop__uint32_t"></span><span class="target" id="manager_8h_1a01e238bc3ee04713139a73cd5a4a274e"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_disable_auto_stop</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">cleanup_delay</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv431wifi_prov_mgr_disable_auto_stop8uint32_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Disable auto stopping of provisioning service upon completion. </p>
<p>By default, once provisioning is complete, the provisioning service is automatically stopped, and all endpoints (along with those registered by main application) are deactivated.</p>
<p>This API is useful in the case when main application wishes to close provisioning service only after it receives some protocomm command from the client side app. For example, after connecting to Wi-Fi, the device may want to connect to the cloud, and only once that is successfully, the device is said to be fully configured. But, then it is upto the main application to explicitly call wifi_prov_mgr_stop_provisioning() later when the device is fully configured and the provisioning service is no longer required.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This must be called before executing wifi_prov_mgr_start_provisioning()</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cleanup_delay</strong> -- <strong>[in]</strong> Sets the delay after which the actual cleanup of transport related resources is done after a call to wifi_prov_mgr_stop_provisioning() returns. Minimum allowed value is 100ms. If not specified, this will default to 1000ms.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_ERR_INVALID_STATE : Manager not initialized or provisioning service already started </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv426wifi_prov_mgr_set_app_infoPKcPKcPPKc6size_t">
<span id="_CPPv326wifi_prov_mgr_set_app_infoPKcPKcPPKc6size_t"></span><span id="_CPPv226wifi_prov_mgr_set_app_infoPKcPKcPPKc6size_t"></span><span id="wifi_prov_mgr_set_app_info__cCP.cCP.cCPP.s"></span><span class="target" id="manager_8h_1ac6ecdda7c956ac91fb95aa1bec7940c5"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_set_app_info</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">label</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">version</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">capabilities</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">total_capabilities</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv426wifi_prov_mgr_set_app_infoPKcPKcPPKc6size_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set application version and capabilities in the JSON data returned by proto-ver endpoint. </p>
<p>This function can be called multiple times, to specify information about the various application specific services running on the device, identified by unique labels.</p>
<p>The provisioning service itself registers an entry in the JSON data, by the label &quot;prov&quot;, containing only provisioning service version and capabilities. Application services should use a label other than &quot;prov&quot; so as not to overwrite this.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This must be called before executing wifi_prov_mgr_start_provisioning()</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label</strong> -- <strong>[in]</strong> String indicating the application name.</p></li>
<li><p><strong>version</strong> -- <strong>[in]</strong> String indicating the application version. There is no constraint on format.</p></li>
<li><p><strong>capabilities</strong> -- <strong>[in]</strong> Array of strings with capabilities. These could be used by the client side app to know the application registered endpoint capabilities</p></li>
<li><p><strong>total_capabilities</strong> -- <strong>[in]</strong> Size of capabilities array</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_ERR_INVALID_STATE : Manager not initialized or provisioning service already started</p></li>
<li><p>ESP_ERR_NO_MEM : Failed to allocate memory for version string</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null argument </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv429wifi_prov_mgr_endpoint_createPKc">
<span id="_CPPv329wifi_prov_mgr_endpoint_createPKc"></span><span id="_CPPv229wifi_prov_mgr_endpoint_createPKc"></span><span id="wifi_prov_mgr_endpoint_create__cCP"></span><span class="target" id="manager_8h_1a8b983818bfa3d936e37a56631c20855a"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_endpoint_create</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">ep_name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv429wifi_prov_mgr_endpoint_createPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>Create an additional endpoint and allocate internal resources for it. </p>
<p>This API is to be called by the application if it wants to create an additional endpoint. All additional endpoints will be assigned UUIDs starting from 0xFF54 and so on in the order of execution.</p>
<p>protocomm handler for the created endpoint is to be registered later using wifi_prov_mgr_endpoint_register() after provisioning has started.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API can only be called BEFORE provisioning is started</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Additional endpoints can be used for configuring client provided parameters other than Wi-Fi credentials, that are necessary for the main application and hence must be set prior to starting the application</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After session establishment, the additional endpoints must be targeted first by the client side application before sending Wi-Fi configuration, because once Wi-Fi configuration finishes the provisioning service is stopped and hence all endpoints are unregistered</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ep_name</strong> -- <strong>[in]</strong> unique name of the endpoint</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_FAIL : Failure </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv431wifi_prov_mgr_endpoint_registerPKc23protocomm_req_handler_tPv">
<span id="_CPPv331wifi_prov_mgr_endpoint_registerPKc23protocomm_req_handler_tPv"></span><span id="_CPPv231wifi_prov_mgr_endpoint_registerPKc23protocomm_req_handler_tPv"></span><span id="wifi_prov_mgr_endpoint_register__cCP.protocomm_req_handler_t.voidP"></span><span class="target" id="manager_8h_1a5157021c75c7b27d9c8d8e88333efc9c"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_endpoint_register</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">ep_name</span></span>, <a class="reference internal" href="protocomm.html#_CPPv423protocomm_req_handler_t" title="protocomm_req_handler_t"><span class="n"><span class="pre">protocomm_req_handler_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handler</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">user_ctx</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv431wifi_prov_mgr_endpoint_registerPKc23protocomm_req_handler_tPv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Register a handler for the previously created endpoint. </p>
<p>This API can be called by the application to register a protocomm handler to any endpoint that was created using wifi_prov_mgr_endpoint_create().</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API can only be called AFTER provisioning has started</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Additional endpoints can be used for configuring client provided parameters other than Wi-Fi credentials, that are necessary for the main application and hence must be set prior to starting the application</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After session establishment, the additional endpoints must be targeted first by the client side application before sending Wi-Fi configuration, because once Wi-Fi configuration finishes the provisioning service is stopped and hence all endpoints are unregistered</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ep_name</strong> -- <strong>[in]</strong> Name of the endpoint </p></li>
<li><p><strong>handler</strong> -- <strong>[in]</strong> Endpoint handler function </p></li>
<li><p><strong>user_ctx</strong> -- <strong>[in]</strong> User data</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_FAIL : Failure </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv433wifi_prov_mgr_endpoint_unregisterPKc">
<span id="_CPPv333wifi_prov_mgr_endpoint_unregisterPKc"></span><span id="_CPPv233wifi_prov_mgr_endpoint_unregisterPKc"></span><span id="wifi_prov_mgr_endpoint_unregister__cCP"></span><span class="target" id="manager_8h_1ade23ebf0658107fef950f357a1c2e2b3"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_endpoint_unregister</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">ep_name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv433wifi_prov_mgr_endpoint_unregisterPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>Unregister the handler for an endpoint. </p>
<p>This API can be called if the application wants to selectively unregister the handler of an endpoint while the provisioning is still in progress.</p>
<p>All the endpoint handlers are unregistered automatically when the provisioning stops.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ep_name</strong> -- <strong>[in]</strong> Name of the endpoint </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv428wifi_prov_mgr_get_wifi_stateP21wifi_prov_sta_state_t">
<span id="_CPPv328wifi_prov_mgr_get_wifi_stateP21wifi_prov_sta_state_t"></span><span id="_CPPv228wifi_prov_mgr_get_wifi_stateP21wifi_prov_sta_state_t"></span><span id="wifi_prov_mgr_get_wifi_state__wifi_prov_sta_state_tP"></span><span class="target" id="manager_8h_1a5f6b06eb09bae91514d12c16278a96db"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_get_wifi_state</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv421wifi_prov_sta_state_t" title="wifi_prov_sta_state_t"><span class="n"><span class="pre">wifi_prov_sta_state_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">state</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428wifi_prov_mgr_get_wifi_stateP21wifi_prov_sta_state_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get state of Wi-Fi Station during provisioning. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>state</strong> -- <strong>[out]</strong> Pointer to wifi_prov_sta_state_t variable to be filled</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Successfully retrieved Wi-Fi state</p></li>
<li><p>ESP_FAIL : Provisioning app not running </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv440wifi_prov_mgr_get_wifi_disconnect_reasonP27wifi_prov_sta_fail_reason_t">
<span id="_CPPv340wifi_prov_mgr_get_wifi_disconnect_reasonP27wifi_prov_sta_fail_reason_t"></span><span id="_CPPv240wifi_prov_mgr_get_wifi_disconnect_reasonP27wifi_prov_sta_fail_reason_t"></span><span id="wifi_prov_mgr_get_wifi_disconnect_reason__wifi_prov_sta_fail_reason_tP"></span><span class="target" id="manager_8h_1a327f50df15ad8bf933f616d98727376d"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_get_wifi_disconnect_reason</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv427wifi_prov_sta_fail_reason_t" title="wifi_prov_sta_fail_reason_t"><span class="n"><span class="pre">wifi_prov_sta_fail_reason_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">reason</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv440wifi_prov_mgr_get_wifi_disconnect_reasonP27wifi_prov_sta_fail_reason_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get reason code in case of Wi-Fi station disconnection during provisioning. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>reason</strong> -- <strong>[out]</strong> Pointer to wifi_prov_sta_fail_reason_t variable to be filled</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Successfully retrieved Wi-Fi disconnect reason</p></li>
<li><p>ESP_FAIL : Provisioning app not running </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv427wifi_prov_mgr_configure_staP13wifi_config_t">
<span id="_CPPv327wifi_prov_mgr_configure_staP13wifi_config_t"></span><span id="_CPPv227wifi_prov_mgr_configure_staP13wifi_config_t"></span><span id="wifi_prov_mgr_configure_sta__wifi_config_tP"></span><span class="target" id="manager_8h_1a7429014356ad676f0cc45528322d39fc"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_configure_sta</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="../network/esp_wifi.html#_CPPv413wifi_config_t" title="wifi_config_t"><span class="n"><span class="pre">wifi_config_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">wifi_cfg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv427wifi_prov_mgr_configure_staP13wifi_config_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Runs Wi-Fi as Station with the supplied configuration. </p>
<p>Configures the Wi-Fi station mode to connect to the AP with SSID and password specified in config structure and sets Wi-Fi to run as station.</p>
<p>This is automatically called by provisioning service upon receiving new credentials.</p>
<p>If credentials are to be supplied to the manager via a different mode other than through protocomm, then this API needs to be called.</p>
<p>Event WIFI_PROV_CRED_RECV is emitted after credentials have been applied and Wi-Fi station started</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>wifi_cfg</strong> -- <strong>[in]</strong> Pointer to Wi-Fi configuration structure</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Wi-Fi configured and started successfully</p></li>
<li><p>ESP_FAIL : Failed to set configuration </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv432wifi_prov_mgr_reset_provisioningv">
<span id="_CPPv332wifi_prov_mgr_reset_provisioningv"></span><span id="_CPPv232wifi_prov_mgr_reset_provisioningv"></span><span id="wifi_prov_mgr_reset_provisioning__void"></span><span class="target" id="manager_8h_1acedd0900033a3e362cbb97d19888ef13"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_reset_provisioning</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv432wifi_prov_mgr_reset_provisioningv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Reset Wi-Fi provisioning config. </p>
<p>Calling this API will restore WiFi stack persistent settings to default values.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>ESP_OK : Reset provisioning config successfully</p></li>
<li><p>ESP_FAIL : Failed to reset provisioning config </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv439wifi_prov_mgr_reset_sm_state_on_failurev">
<span id="_CPPv339wifi_prov_mgr_reset_sm_state_on_failurev"></span><span id="_CPPv239wifi_prov_mgr_reset_sm_state_on_failurev"></span><span id="wifi_prov_mgr_reset_sm_state_on_failure__void"></span><span class="target" id="manager_8h_1a508063407ba71bd51f79b6ff12ac0d91"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_reset_sm_state_on_failure</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv439wifi_prov_mgr_reset_sm_state_on_failurev" title="Permalink to this definition"></a><br /></dt>
<dd><p>Reset internal state machine and clear provisioned credentials. </p>
<p>This API should be used to restart provisioning ONLY in the case of provisioning failures without rebooting the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>ESP_OK : Reset provisioning state machine successfully</p></li>
<li><p>ESP_FAIL : Failed to reset provisioning state machine</p></li>
<li><p>ESP_ERR_INVALID_STATE : Manager not initialized </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv444wifi_prov_mgr_reset_sm_state_for_reprovisionv">
<span id="_CPPv344wifi_prov_mgr_reset_sm_state_for_reprovisionv"></span><span id="_CPPv244wifi_prov_mgr_reset_sm_state_for_reprovisionv"></span><span id="wifi_prov_mgr_reset_sm_state_for_reprovision__void"></span><span class="target" id="manager_8h_1a9f5f24e07015f02115f0f7bdfc1b9175"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_reset_sm_state_for_reprovision</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv444wifi_prov_mgr_reset_sm_state_for_reprovisionv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Reset internal state machine and clear provisioned credentials. </p>
<p>This API can be used to restart provisioning ONLY in case the device is to be provisioned again for new credentials after a previous successful provisioning without rebooting the device.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API can be used only if provisioning auto-stop has been disabled using wifi_prov_mgr_disable_auto_stop()</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>ESP_OK : Reset provisioning state machine successfully</p></li>
<li><p>ESP_FAIL : Failed to reset provisioning state machine</p></li>
<li><p>ESP_ERR_INVALID_STATE : Manager not initialized </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="structures">
<h3>Structures<a class="headerlink" href="#structures" title="Permalink to this heading"></a></h3>
<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv425wifi_prov_event_handler_t">
<span id="_CPPv325wifi_prov_event_handler_t"></span><span id="_CPPv225wifi_prov_event_handler_t"></span><span id="wifi_prov_event_handler_t"></span><span class="target" id="structwifi__prov__event__handler__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_event_handler_t</span></span></span><a class="headerlink" href="#_CPPv425wifi_prov_event_handler_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Event handler that is used by the manager while provisioning service is active. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25wifi_prov_event_handler_t8event_cbE">
<span id="_CPPv3N25wifi_prov_event_handler_t8event_cbE"></span><span id="_CPPv2N25wifi_prov_event_handler_t8event_cbE"></span><span id="wifi_prov_event_handler_t::event_cb__wifi_prov_cb_func_t"></span><span class="target" id="structwifi__prov__event__handler__t_1a3602aae5402aa63f88ec56263209f1c8"></span><a class="reference internal" href="#_CPPv419wifi_prov_cb_func_t" title="wifi_prov_cb_func_t"><span class="n"><span class="pre">wifi_prov_cb_func_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">event_cb</span></span></span><a class="headerlink" href="#_CPPv4N25wifi_prov_event_handler_t8event_cbE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Callback function to be executed on provisioning events </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25wifi_prov_event_handler_t9user_dataE">
<span id="_CPPv3N25wifi_prov_event_handler_t9user_dataE"></span><span id="_CPPv2N25wifi_prov_event_handler_t9user_dataE"></span><span id="wifi_prov_event_handler_t::user_data__voidP"></span><span class="target" id="structwifi__prov__event__handler__t_1ae2577110244025c0bffe49babae2bdfd"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">user_data</span></span></span><a class="headerlink" href="#_CPPv4N25wifi_prov_event_handler_t9user_dataE" title="Permalink to this definition"></a><br /></dt>
<dd><p>User context data to pass as parameter to callback function </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv420wifi_prov_conn_cfg_t">
<span id="_CPPv320wifi_prov_conn_cfg_t"></span><span id="_CPPv220wifi_prov_conn_cfg_t"></span><span id="wifi_prov_conn_cfg_t"></span><span class="target" id="structwifi__prov__conn__cfg__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_conn_cfg_t</span></span></span><a class="headerlink" href="#_CPPv420wifi_prov_conn_cfg_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Structure holding the configuration related to Wi-Fi provisioning. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20wifi_prov_conn_cfg_t18wifi_conn_attemptsE">
<span id="_CPPv3N20wifi_prov_conn_cfg_t18wifi_conn_attemptsE"></span><span id="_CPPv2N20wifi_prov_conn_cfg_t18wifi_conn_attemptsE"></span><span id="wifi_prov_conn_cfg_t::wifi_conn_attempts__uint32_t"></span><span class="target" id="structwifi__prov__conn__cfg__t_1aebc5a14cee08e595110ef0c0555ecfbf"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_conn_attempts</span></span></span><a class="headerlink" href="#_CPPv4N20wifi_prov_conn_cfg_t18wifi_conn_attemptsE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Maximum number of allowed connection attempts for Wi-Fi. If value 0 same as legacy behavior of infinite connection attempts. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv416wifi_prov_scheme">
<span id="_CPPv316wifi_prov_scheme"></span><span id="_CPPv216wifi_prov_scheme"></span><span id="wifi_prov_scheme"></span><span class="target" id="structwifi__prov__scheme"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_scheme</span></span></span><a class="headerlink" href="#_CPPv416wifi_prov_scheme" title="Permalink to this definition"></a><br /></dt>
<dd><p>Structure for specifying the provisioning scheme to be followed by the manager. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ready to use schemes are available:<ul class="simple">
<li><p>wifi_prov_scheme_ble : for provisioning over BLE transport + GATT server</p></li>
<li><p>wifi_prov_scheme_softap : for provisioning over SoftAP transport + HTTP server</p></li>
<li><p>wifi_prov_scheme_console : for provisioning over Serial UART transport + Console (for debugging) </p></li>
</ul>
</p>
</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N16wifi_prov_scheme10prov_startE">
<span id="_CPPv3N16wifi_prov_scheme10prov_startE"></span><span id="_CPPv2N16wifi_prov_scheme10prov_startE"></span><span class="target" id="structwifi__prov__scheme_1abd17038457a4e2a3c4983ccb18be26e1"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">prov_start</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="protocomm.html#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">pc</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N16wifi_prov_scheme10prov_startE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function which is to be called by the manager when it is to start the provisioning service associated with a protocomm instance and a scheme specific configuration </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N16wifi_prov_scheme9prov_stopE">
<span id="_CPPv3N16wifi_prov_scheme9prov_stopE"></span><span id="_CPPv2N16wifi_prov_scheme9prov_stopE"></span><span class="target" id="structwifi__prov__scheme_1a09efbee6dd1c130dfb8ca6d77f16c1db"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">prov_stop</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="protocomm.html#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">pc</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N16wifi_prov_scheme9prov_stopE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function which is to be called by the manager to stop the provisioning service previously associated with a protocomm instance </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N16wifi_prov_scheme10new_configE">
<span id="_CPPv3N16wifi_prov_scheme10new_configE"></span><span id="_CPPv2N16wifi_prov_scheme10new_configE"></span><span class="target" id="structwifi__prov__scheme_1ac9a9a896aeddd08c05d58ab8cbd7cbb9"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">new_config</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N16wifi_prov_scheme10new_configE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function which is to be called by the manager to generate a new configuration for the provisioning service, that is to be passed to <a class="reference internal" href="#structwifi__prov__scheme_1abd17038457a4e2a3c4983ccb18be26e1"><span class="std std-ref">prov_start()</span></a></p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N16wifi_prov_scheme13delete_configE">
<span id="_CPPv3N16wifi_prov_scheme13delete_configE"></span><span id="_CPPv2N16wifi_prov_scheme13delete_configE"></span><span class="target" id="structwifi__prov__scheme_1a2ff42c23e70a92e72d3c403e84fd31fb"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">delete_config</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N16wifi_prov_scheme13delete_configE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function which is to be called by the manager to delete a configuration generated using <a class="reference internal" href="#structwifi__prov__scheme_1ac9a9a896aeddd08c05d58ab8cbd7cbb9"><span class="std std-ref">new_config()</span></a></p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N16wifi_prov_scheme18set_config_serviceE">
<span id="_CPPv3N16wifi_prov_scheme18set_config_serviceE"></span><span id="_CPPv2N16wifi_prov_scheme18set_config_serviceE"></span><span class="target" id="structwifi__prov__scheme_1af78b85f385a9eef9f6b0fd7f972d86ff"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">set_config_service</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">service_name</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">service_key</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N16wifi_prov_scheme18set_config_serviceE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function which is to be called by the manager to set the service name and key values in the configuration structure </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N16wifi_prov_scheme19set_config_endpointE">
<span id="_CPPv3N16wifi_prov_scheme19set_config_endpointE"></span><span id="_CPPv2N16wifi_prov_scheme19set_config_endpointE"></span><span class="target" id="structwifi__prov__scheme_1ae0f5a3620e5c09b6ad33450db0b36152"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">set_config_endpoint</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">endpoint_name</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">uuid</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N16wifi_prov_scheme19set_config_endpointE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function which is to be called by the manager to set a protocomm endpoint with an identifying name and UUID in the configuration structure </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N16wifi_prov_scheme9wifi_modeE">
<span id="_CPPv3N16wifi_prov_scheme9wifi_modeE"></span><span id="_CPPv2N16wifi_prov_scheme9wifi_modeE"></span><span id="wifi_prov_scheme::wifi_mode__wifi_mode_t"></span><span class="target" id="structwifi__prov__scheme_1a40f54d96e4fbf87630af86109e932eb7"></span><a class="reference internal" href="../network/esp_wifi.html#_CPPv411wifi_mode_t" title="wifi_mode_t"><span class="n"><span class="pre">wifi_mode_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_mode</span></span></span><a class="headerlink" href="#_CPPv4N16wifi_prov_scheme9wifi_modeE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Sets mode of operation of Wi-Fi during provisioning This is set to :<ul class="simple">
<li><p>WIFI_MODE_APSTA for SoftAP transport</p></li>
<li><p>WIFI_MODE_STA for BLE transport </p></li>
</ul>
</p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv422wifi_prov_mgr_config_t">
<span id="_CPPv322wifi_prov_mgr_config_t"></span><span id="_CPPv222wifi_prov_mgr_config_t"></span><span id="wifi_prov_mgr_config_t"></span><span class="target" id="structwifi__prov__mgr__config__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_config_t</span></span></span><a class="headerlink" href="#_CPPv422wifi_prov_mgr_config_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Structure for specifying the manager configuration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N22wifi_prov_mgr_config_t6schemeE">
<span id="_CPPv3N22wifi_prov_mgr_config_t6schemeE"></span><span id="_CPPv2N22wifi_prov_mgr_config_t6schemeE"></span><span id="wifi_prov_mgr_config_t::scheme__wifi_prov_scheme_t"></span><span class="target" id="structwifi__prov__mgr__config__t_1abe98e1b5fbb1ea7aefa52ffa6a499300"></span><a class="reference internal" href="#_CPPv418wifi_prov_scheme_t" title="wifi_prov_scheme_t"><span class="n"><span class="pre">wifi_prov_scheme_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">scheme</span></span></span><a class="headerlink" href="#_CPPv4N22wifi_prov_mgr_config_t6schemeE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Provisioning scheme to use. Following schemes are already available:<ul class="simple">
<li><p>wifi_prov_scheme_ble : for provisioning over BLE transport + GATT server</p></li>
<li><p>wifi_prov_scheme_softap : for provisioning over SoftAP transport + HTTP server + mDNS (optional)</p></li>
<li><p>wifi_prov_scheme_console : for provisioning over Serial UART transport + Console (for debugging) </p></li>
</ul>
</p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N22wifi_prov_mgr_config_t20scheme_event_handlerE">
<span id="_CPPv3N22wifi_prov_mgr_config_t20scheme_event_handlerE"></span><span id="_CPPv2N22wifi_prov_mgr_config_t20scheme_event_handlerE"></span><span id="wifi_prov_mgr_config_t::scheme_event_handler__wifi_prov_event_handler_t"></span><span class="target" id="structwifi__prov__mgr__config__t_1a5bcd15e19a8bb76185926d01d03607b2"></span><a class="reference internal" href="#_CPPv425wifi_prov_event_handler_t" title="wifi_prov_event_handler_t"><span class="n"><span class="pre">wifi_prov_event_handler_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">scheme_event_handler</span></span></span><a class="headerlink" href="#_CPPv4N22wifi_prov_mgr_config_t20scheme_event_handlerE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Event handler required by the scheme for incorporating scheme specific behavior while provisioning manager is running. Various options may be provided by the scheme for setting this field. Use WIFI_PROV_EVENT_HANDLER_NONE when not used. When using scheme wifi_prov_scheme_ble, the following options are available:<ul class="simple">
<li><p>WIFI_PROV_SCHEME_BLE_EVENT_HANDLER_FREE_BTDM</p></li>
<li><p>WIFI_PROV_SCHEME_BLE_EVENT_HANDLER_FREE_BLE</p></li>
<li><p>WIFI_PROV_SCHEME_BLE_EVENT_HANDLER_FREE_BT </p></li>
</ul>
</p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N22wifi_prov_mgr_config_t17app_event_handlerE">
<span id="_CPPv3N22wifi_prov_mgr_config_t17app_event_handlerE"></span><span id="_CPPv2N22wifi_prov_mgr_config_t17app_event_handlerE"></span><span id="wifi_prov_mgr_config_t::app_event_handler__wifi_prov_event_handler_t"></span><span class="target" id="structwifi__prov__mgr__config__t_1a3ab81e351555aa61035ebe948427b743"></span><a class="reference internal" href="#_CPPv425wifi_prov_event_handler_t" title="wifi_prov_event_handler_t"><span class="n"><span class="pre">wifi_prov_event_handler_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">app_event_handler</span></span></span><a class="headerlink" href="#_CPPv4N22wifi_prov_mgr_config_t17app_event_handlerE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Event handler that can be set for the purpose of incorporating application specific behavior. Use WIFI_PROV_EVENT_HANDLER_NONE when not used. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N22wifi_prov_mgr_config_t18wifi_prov_conn_cfgE">
<span id="_CPPv3N22wifi_prov_mgr_config_t18wifi_prov_conn_cfgE"></span><span id="_CPPv2N22wifi_prov_mgr_config_t18wifi_prov_conn_cfgE"></span><span id="wifi_prov_mgr_config_t::wifi_prov_conn_cfg__wifi_prov_conn_cfg_t"></span><span class="target" id="structwifi__prov__mgr__config__t_1a29e742fbd938ec04bdad29fe2549f9c4"></span><a class="reference internal" href="#_CPPv420wifi_prov_conn_cfg_t" title="wifi_prov_conn_cfg_t"><span class="n"><span class="pre">wifi_prov_conn_cfg_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_conn_cfg</span></span></span><a class="headerlink" href="#_CPPv4N22wifi_prov_mgr_config_t18wifi_prov_conn_cfgE" title="Permalink to this definition"></a><br /></dt>
<dd><p>This config holds the Wi-Fi provisioning related configurations. </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="macros">
<h3>Macros<a class="headerlink" href="#macros" title="Permalink to this heading"></a></h3>
<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.WIFI_PROV_EVENT_HANDLER_NONE">
<span class="target" id="manager_8h_1ab4cbf4b7bbb7d0417e37afdc931ead9f"></span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_EVENT_HANDLER_NONE</span></span></span><a class="headerlink" href="#c.WIFI_PROV_EVENT_HANDLER_NONE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Event handler can be set to none if not used. </p>
</dd></dl>

</section>
<section id="type-definitions">
<h3>Type Definitions<a class="headerlink" href="#type-definitions" title="Permalink to this heading"></a></h3>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv419wifi_prov_cb_func_t">
<span id="_CPPv319wifi_prov_cb_func_t"></span><span id="_CPPv219wifi_prov_cb_func_t"></span><span id="wifi_prov_cb_func_t"></span><span class="target" id="manager_8h_1a908adb45e22aa0dd5185c3137b9e23b9"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_cb_func_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">user_data</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv420wifi_prov_cb_event_t" title="wifi_prov_cb_event_t"><span class="n"><span class="pre">wifi_prov_cb_event_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">event_data</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv419wifi_prov_cb_func_t" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv418wifi_prov_scheme_t">
<span id="_CPPv318wifi_prov_scheme_t"></span><span id="_CPPv218wifi_prov_scheme_t"></span><span id="wifi_prov_scheme_t"></span><span class="target" id="manager_8h_1a2218c4df51ad1b8800ee51026b9e5b26"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv416wifi_prov_scheme" title="wifi_prov_scheme"><span class="n"><span class="pre">wifi_prov_scheme</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_scheme_t</span></span></span><a class="headerlink" href="#_CPPv418wifi_prov_scheme_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Structure for specifying the provisioning scheme to be followed by the manager. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ready to use schemes are available:<ul class="simple">
<li><p>wifi_prov_scheme_ble : for provisioning over BLE transport + GATT server</p></li>
<li><p>wifi_prov_scheme_softap : for provisioning over SoftAP transport + HTTP server</p></li>
<li><p>wifi_prov_scheme_console : for provisioning over Serial UART transport + Console (for debugging) </p></li>
</ul>
</p>
</div>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv420wifi_prov_security_t">
<span id="_CPPv320wifi_prov_security_t"></span><span id="_CPPv220wifi_prov_security_t"></span><span id="wifi_prov_security_t"></span><span class="target" id="manager_8h_1a63d7a2a7c7dc3ee8bc70cb0103815e3d"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv418wifi_prov_security" title="wifi_prov_security"><span class="n"><span class="pre">wifi_prov_security</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_security_t</span></span></span><a class="headerlink" href="#_CPPv420wifi_prov_security_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Security modes supported by the Provisioning Manager. </p>
<p>These are same as the security modes provided by protocomm </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv428wifi_prov_security1_params_t">
<span id="_CPPv328wifi_prov_security1_params_t"></span><span id="_CPPv228wifi_prov_security1_params_t"></span><span id="wifi_prov_security1_params_t"></span><span class="target" id="manager_8h_1a975df5a54126eac7dcb0bda355c83c87"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_security1_params_t</span></span></span><a class="headerlink" href="#_CPPv428wifi_prov_security1_params_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Security 1 params structure This needs to be passed when using WIFI_PROV_SECURITY_1. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv428wifi_prov_security2_params_t">
<span id="_CPPv328wifi_prov_security2_params_t"></span><span id="_CPPv228wifi_prov_security2_params_t"></span><span id="wifi_prov_security2_params_t"></span><span class="target" id="manager_8h_1a14822e5c3031f97235a42a296e6ccc72"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="protocomm.html#_CPPv428protocomm_security2_params_t" title="protocomm_security2_params_t"><span class="n"><span class="pre">protocomm_security2_params_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_security2_params_t</span></span></span><a class="headerlink" href="#_CPPv428wifi_prov_security2_params_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Security 2 params structure This needs to be passed when using WIFI_PROV_SECURITY_2. </p>
</dd></dl>

</section>
<section id="enumerations">
<h3>Enumerations<a class="headerlink" href="#enumerations" title="Permalink to this heading"></a></h3>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv420wifi_prov_cb_event_t">
<span id="_CPPv320wifi_prov_cb_event_t"></span><span id="_CPPv220wifi_prov_cb_event_t"></span><span class="target" id="manager_8h_1a059b90472409847d7baccf92d779c521"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_cb_event_t</span></span></span><a class="headerlink" href="#_CPPv420wifi_prov_cb_event_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Events generated by manager. </p>
<p>These events are generated in order of declaration and, for the stretch of time between initialization and de-initialization of the manager, each event is signaled only once </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N20wifi_prov_cb_event_t14WIFI_PROV_INITE">
<span id="_CPPv3N20wifi_prov_cb_event_t14WIFI_PROV_INITE"></span><span id="_CPPv2N20wifi_prov_cb_event_t14WIFI_PROV_INITE"></span><span class="target" id="manager_8h_1a059b90472409847d7baccf92d779c521afd1769cb86c6c24ee29b69ab8f39b956"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_INIT</span></span></span><a class="headerlink" href="#_CPPv4N20wifi_prov_cb_event_t14WIFI_PROV_INITE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Emitted when the manager is initialized </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N20wifi_prov_cb_event_t15WIFI_PROV_STARTE">
<span id="_CPPv3N20wifi_prov_cb_event_t15WIFI_PROV_STARTE"></span><span id="_CPPv2N20wifi_prov_cb_event_t15WIFI_PROV_STARTE"></span><span class="target" id="manager_8h_1a059b90472409847d7baccf92d779c521a9d0a86a5fef1c3d9d356c6a847d3351a"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_START</span></span></span><a class="headerlink" href="#_CPPv4N20wifi_prov_cb_event_t15WIFI_PROV_STARTE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Indicates that provisioning has started </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N20wifi_prov_cb_event_t24WIFI_PROV_SET_STA_CONFIGE">
<span id="_CPPv3N20wifi_prov_cb_event_t24WIFI_PROV_SET_STA_CONFIGE"></span><span id="_CPPv2N20wifi_prov_cb_event_t24WIFI_PROV_SET_STA_CONFIGE"></span><span class="target" id="manager_8h_1a059b90472409847d7baccf92d779c521ab4934f4fd024dcfd2415c19779d7f248"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_SET_STA_CONFIG</span></span></span><a class="headerlink" href="#_CPPv4N20wifi_prov_cb_event_t24WIFI_PROV_SET_STA_CONFIGE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Emitted before accepting the wifi credentials to set the wifi configurations according to requirement. NOTE - In this case event_data shall be populated with a pointer to <code class="docutils literal notranslate"><a class="reference internal" href="../network/esp_wifi.html#unionwifi__config__t"><span class="std std-ref"><span class="pre">wifi_config_t</span></span></a></code>. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N20wifi_prov_cb_event_t19WIFI_PROV_CRED_RECVE">
<span id="_CPPv3N20wifi_prov_cb_event_t19WIFI_PROV_CRED_RECVE"></span><span id="_CPPv2N20wifi_prov_cb_event_t19WIFI_PROV_CRED_RECVE"></span><span class="target" id="manager_8h_1a059b90472409847d7baccf92d779c521a56cbfb43bb76899296a085d00f1dd1e6"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_CRED_RECV</span></span></span><a class="headerlink" href="#_CPPv4N20wifi_prov_cb_event_t19WIFI_PROV_CRED_RECVE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Emitted when Wi-Fi AP credentials are received via <code class="docutils literal notranslate"><span class="pre">protocomm</span></code> endpoint <code class="docutils literal notranslate"><span class="pre">wifi_config</span></code>. The event data in this case is a pointer to the corresponding <code class="docutils literal notranslate"><a class="reference internal" href="../network/esp_wifi.html#structwifi__sta__config__t"><span class="std std-ref"><span class="pre">wifi_sta_config_t</span></span></a></code> structure </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N20wifi_prov_cb_event_t19WIFI_PROV_CRED_FAILE">
<span id="_CPPv3N20wifi_prov_cb_event_t19WIFI_PROV_CRED_FAILE"></span><span id="_CPPv2N20wifi_prov_cb_event_t19WIFI_PROV_CRED_FAILE"></span><span class="target" id="manager_8h_1a059b90472409847d7baccf92d779c521a3a84219e42a60d254076aa7c0a759309"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_CRED_FAIL</span></span></span><a class="headerlink" href="#_CPPv4N20wifi_prov_cb_event_t19WIFI_PROV_CRED_FAILE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Emitted when device fails to connect to the AP of which the credentials were received earlier on event <code class="docutils literal notranslate"><span class="pre">WIFI_PROV_CRED_RECV</span></code>. The event data in this case is a pointer to the disconnection reason code with type <code class="docutils literal notranslate"><span class="pre">wifi_prov_sta_fail_reason_t</span></code></p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N20wifi_prov_cb_event_t22WIFI_PROV_CRED_SUCCESSE">
<span id="_CPPv3N20wifi_prov_cb_event_t22WIFI_PROV_CRED_SUCCESSE"></span><span id="_CPPv2N20wifi_prov_cb_event_t22WIFI_PROV_CRED_SUCCESSE"></span><span class="target" id="manager_8h_1a059b90472409847d7baccf92d779c521ab52c818c61febd5c11fe3759722a0dc1"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_CRED_SUCCESS</span></span></span><a class="headerlink" href="#_CPPv4N20wifi_prov_cb_event_t22WIFI_PROV_CRED_SUCCESSE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Emitted when device successfully connects to the AP of which the credentials were received earlier on event <code class="docutils literal notranslate"><span class="pre">WIFI_PROV_CRED_RECV</span></code></p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N20wifi_prov_cb_event_t13WIFI_PROV_ENDE">
<span id="_CPPv3N20wifi_prov_cb_event_t13WIFI_PROV_ENDE"></span><span id="_CPPv2N20wifi_prov_cb_event_t13WIFI_PROV_ENDE"></span><span class="target" id="manager_8h_1a059b90472409847d7baccf92d779c521abe9fe35a48ca412b68d4f63e8a19c421"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_END</span></span></span><a class="headerlink" href="#_CPPv4N20wifi_prov_cb_event_t13WIFI_PROV_ENDE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Signals that provisioning service has stopped </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N20wifi_prov_cb_event_t16WIFI_PROV_DEINITE">
<span id="_CPPv3N20wifi_prov_cb_event_t16WIFI_PROV_DEINITE"></span><span id="_CPPv2N20wifi_prov_cb_event_t16WIFI_PROV_DEINITE"></span><span class="target" id="manager_8h_1a059b90472409847d7baccf92d779c521ad2aed047d47fcb617b1c5650fd33ce1b"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_DEINIT</span></span></span><a class="headerlink" href="#_CPPv4N20wifi_prov_cb_event_t16WIFI_PROV_DEINITE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Signals that manager has been de-initialized </p>
</dd></dl>

</dd></dl>

<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv418wifi_prov_security">
<span id="_CPPv318wifi_prov_security"></span><span id="_CPPv218wifi_prov_security"></span><span class="target" id="manager_8h_1a51a7877c57470c50aff26ba4374742c3"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_security</span></span></span><a class="headerlink" href="#_CPPv418wifi_prov_security" title="Permalink to this definition"></a><br /></dt>
<dd><p>Security modes supported by the Provisioning Manager. </p>
<p>These are same as the security modes provided by protocomm </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N18wifi_prov_security20WIFI_PROV_SECURITY_0E">
<span id="_CPPv3N18wifi_prov_security20WIFI_PROV_SECURITY_0E"></span><span id="_CPPv2N18wifi_prov_security20WIFI_PROV_SECURITY_0E"></span><span class="target" id="manager_8h_1a51a7877c57470c50aff26ba4374742c3af476be414ed1949c270a448755d3b7b0"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_SECURITY_0</span></span></span><a class="headerlink" href="#_CPPv4N18wifi_prov_security20WIFI_PROV_SECURITY_0E" title="Permalink to this definition"></a><br /></dt>
<dd><p>No security (plain-text communication) </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N18wifi_prov_security20WIFI_PROV_SECURITY_1E">
<span id="_CPPv3N18wifi_prov_security20WIFI_PROV_SECURITY_1E"></span><span id="_CPPv2N18wifi_prov_security20WIFI_PROV_SECURITY_1E"></span><span class="target" id="manager_8h_1a51a7877c57470c50aff26ba4374742c3a6889ab87db600c0fd18e003f6c0bb942"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_SECURITY_1</span></span></span><a class="headerlink" href="#_CPPv4N18wifi_prov_security20WIFI_PROV_SECURITY_1E" title="Permalink to this definition"></a><br /></dt>
<dd><p>This secure communication mode consists of X25519 key exchange<ul class="simple">
<li><p>proof of possession (pop) based authentication</p></li>
<li><p>AES-CTR encryption </p></li>
</ul>
</p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N18wifi_prov_security20WIFI_PROV_SECURITY_2E">
<span id="_CPPv3N18wifi_prov_security20WIFI_PROV_SECURITY_2E"></span><span id="_CPPv2N18wifi_prov_security20WIFI_PROV_SECURITY_2E"></span><span class="target" id="manager_8h_1a51a7877c57470c50aff26ba4374742c3a12f7f04c7b3e8ea47164184ef1d7f38f"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_SECURITY_2</span></span></span><a class="headerlink" href="#_CPPv4N18wifi_prov_security20WIFI_PROV_SECURITY_2E" title="Permalink to this definition"></a><br /></dt>
<dd><p>This secure communication mode consists of SRP6a based authentication and key exchange<ul class="simple">
<li><p>AES-GCM encryption/decryption </p></li>
</ul>
</p>
</dd></dl>

</dd></dl>

</section>
<section id="id1">
<h3>Header File<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/wifi_provisioning/include/wifi_provisioning/scheme_ble.h">components/wifi_provisioning/include/wifi_provisioning/scheme_ble.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;wifi_provisioning/scheme_ble.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">wifi_provisioning</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">wifi_provisioning</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES wifi_provisioning
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES wifi_provisioning
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id2">
<h3>Functions<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv439wifi_prov_scheme_ble_event_cb_free_btdmPv20wifi_prov_cb_event_tPv">
<span id="_CPPv339wifi_prov_scheme_ble_event_cb_free_btdmPv20wifi_prov_cb_event_tPv"></span><span id="_CPPv239wifi_prov_scheme_ble_event_cb_free_btdmPv20wifi_prov_cb_event_tPv"></span><span id="wifi_prov_scheme_ble_event_cb_free_btdm__voidP.wifi_prov_cb_event_t.voidP"></span><span class="target" id="scheme__ble_8h_1a47f185ce4e89102d0f7b9b13868512ff"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_scheme_ble_event_cb_free_btdm</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">user_data</span></span>, <a class="reference internal" href="#_CPPv420wifi_prov_cb_event_t" title="wifi_prov_cb_event_t"><span class="n"><span class="pre">wifi_prov_cb_event_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">event</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">event_data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv439wifi_prov_scheme_ble_event_cb_free_btdmPv20wifi_prov_cb_event_tPv" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv438wifi_prov_scheme_ble_event_cb_free_blePv20wifi_prov_cb_event_tPv">
<span id="_CPPv338wifi_prov_scheme_ble_event_cb_free_blePv20wifi_prov_cb_event_tPv"></span><span id="_CPPv238wifi_prov_scheme_ble_event_cb_free_blePv20wifi_prov_cb_event_tPv"></span><span id="wifi_prov_scheme_ble_event_cb_free_ble__voidP.wifi_prov_cb_event_t.voidP"></span><span class="target" id="scheme__ble_8h_1a0077462e77e3ae0dbe96f7756e4b347a"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_scheme_ble_event_cb_free_ble</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">user_data</span></span>, <a class="reference internal" href="#_CPPv420wifi_prov_cb_event_t" title="wifi_prov_cb_event_t"><span class="n"><span class="pre">wifi_prov_cb_event_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">event</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">event_data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv438wifi_prov_scheme_ble_event_cb_free_blePv20wifi_prov_cb_event_tPv" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv437wifi_prov_scheme_ble_event_cb_free_btPv20wifi_prov_cb_event_tPv">
<span id="_CPPv337wifi_prov_scheme_ble_event_cb_free_btPv20wifi_prov_cb_event_tPv"></span><span id="_CPPv237wifi_prov_scheme_ble_event_cb_free_btPv20wifi_prov_cb_event_tPv"></span><span id="wifi_prov_scheme_ble_event_cb_free_bt__voidP.wifi_prov_cb_event_t.voidP"></span><span class="target" id="scheme__ble_8h_1a0fcfce7c934bf6919fabf030f2578921"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_scheme_ble_event_cb_free_bt</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">user_data</span></span>, <a class="reference internal" href="#_CPPv420wifi_prov_cb_event_t" title="wifi_prov_cb_event_t"><span class="n"><span class="pre">wifi_prov_cb_event_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">event</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">event_data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv437wifi_prov_scheme_ble_event_cb_free_btPv20wifi_prov_cb_event_tPv" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv437wifi_prov_scheme_ble_set_service_uuidP7uint8_t">
<span id="_CPPv337wifi_prov_scheme_ble_set_service_uuidP7uint8_t"></span><span id="_CPPv237wifi_prov_scheme_ble_set_service_uuidP7uint8_t"></span><span id="wifi_prov_scheme_ble_set_service_uuid__uint8_tP"></span><span class="target" id="scheme__ble_8h_1ae5c5c8e33fb8191e52bb361747492ae3"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_scheme_ble_set_service_uuid</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">uuid128</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv437wifi_prov_scheme_ble_set_service_uuidP7uint8_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set the 128 bit GATT service UUID used for provisioning. </p>
<p>This API is used to override the default 128 bit provisioning service UUID, which is 0000ffff-0000-1000-8000-00805f9b34fb.</p>
<p>This must be called before starting provisioning, i.e. before making a call to wifi_prov_mgr_start_provisioning(), otherwise the default UUID will be used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The data being pointed to by the argument must be valid at least till provisioning is started. Upon start, the manager will store an internal copy of this UUID, and this data can be freed or invalidated afterwards.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>uuid128</strong> -- <strong>[in]</strong> A custom 128 bit UUID</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null argument </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv425wifi_prov_mgr_keep_ble_on7uint8_t">
<span id="_CPPv325wifi_prov_mgr_keep_ble_on7uint8_t"></span><span id="_CPPv225wifi_prov_mgr_keep_ble_on7uint8_t"></span><span id="wifi_prov_mgr_keep_ble_on__uint8_t"></span><span class="target" id="scheme__ble_8h_1a84ee5c25a28a2f9be28d90e300529933"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_mgr_keep_ble_on</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">is_on_after_ble_stop</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv425wifi_prov_mgr_keep_ble_on7uint8_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Keep the BLE on after provisioning. </p>
<p>This API is used to specify whether the BLE should remain on after the provisioning process has stopped.</p>
<p>This must be called before starting provisioning, i.e. before making a call to wifi_prov_mgr_start_provisioning(), otherwise the default behavior will be used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The value being pointed to by the argument must be valid at least until provisioning is started. Upon start, the manager will store an internal copy of this value, and this data can be freed or invalidated afterwards.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>is_on_after_ble_stop</strong> -- <strong>[in]</strong> A boolean indicating if BLE should remain on after provisioning</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null argument </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv433wifi_prov_scheme_ble_set_mfg_dataP7uint8_t7ssize_t">
<span id="_CPPv333wifi_prov_scheme_ble_set_mfg_dataP7uint8_t7ssize_t"></span><span id="_CPPv233wifi_prov_scheme_ble_set_mfg_dataP7uint8_t7ssize_t"></span><span id="wifi_prov_scheme_ble_set_mfg_data__uint8_tP.ssize_t"></span><span class="target" id="scheme__ble_8h_1a4e7ccea80523e96d3902c6f79f0b373e"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_scheme_ble_set_mfg_data</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">mfg_data</span></span>, <span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">mfg_data_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv433wifi_prov_scheme_ble_set_mfg_dataP7uint8_t7ssize_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set manufacturer specific data in scan response. </p>
<p>This must be called before starting provisioning, i.e. before making a call to wifi_prov_mgr_start_provisioning().</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is important to understand that length of custom manufacturer data should be within limits. The manufacturer data goes into scan response along with BLE device name. By default, BLE device name length is of 11 Bytes, however it can vary as per application use case. So, one has to honour the scan response data size limits i.e. (mfg_data_len + 2) &lt; 31 - (device_name_length + 2 ). If the mfg_data length exceeds this limit, the length will be truncated.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mfg_data</strong> -- <strong>[in]</strong> Custom manufacturer data </p></li>
<li><p><strong>mfg_data_len</strong> -- <strong>[in]</strong> Manufacturer data length</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null argument </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv436wifi_prov_scheme_ble_set_random_addrPK7uint8_t">
<span id="_CPPv336wifi_prov_scheme_ble_set_random_addrPK7uint8_t"></span><span id="_CPPv236wifi_prov_scheme_ble_set_random_addrPK7uint8_t"></span><span id="wifi_prov_scheme_ble_set_random_addr__uint8_tCP"></span><span class="target" id="scheme__ble_8h_1a091e4bd3bda3280268c134dcda54d864"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_scheme_ble_set_random_addr</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">rand_addr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv436wifi_prov_scheme_ble_set_random_addrPK7uint8_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set Bluetooth Random address. </p>
<p>This must be called before starting provisioning, i.e. before making a call to wifi_prov_mgr_start_provisioning().</p>
<p>This API can be used in cases where a new identity address is to be used during provisioning. This will result in this device being treated as a new device by remote devices.</p>
<p>
This API is only to be called to set random address. Re-invoking this API after provisioning is started will have no effect.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API will change the existing BD address for the device. The address once set will remain unchanged until BLE stack tear down happens when wifi_prov_mgr_deinit is invoked.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rand_addr</strong> -- <strong>[in]</strong> The static random address to be set of length 6 bytes.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null argument </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="id3">
<h3>Macros<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h3>
<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.WIFI_PROV_SCHEME_BLE_EVENT_HANDLER_FREE_BTDM">
<span class="target" id="scheme__ble_8h_1a7ca608842152bdf89eafe5dbc6ce8bc6"></span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_SCHEME_BLE_EVENT_HANDLER_FREE_BTDM</span></span></span><a class="headerlink" href="#c.WIFI_PROV_SCHEME_BLE_EVENT_HANDLER_FREE_BTDM" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.WIFI_PROV_SCHEME_BLE_EVENT_HANDLER_FREE_BLE">
<span class="target" id="scheme__ble_8h_1af079f29f0836ecc43aabd3d3dd595bfd"></span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_SCHEME_BLE_EVENT_HANDLER_FREE_BLE</span></span></span><a class="headerlink" href="#c.WIFI_PROV_SCHEME_BLE_EVENT_HANDLER_FREE_BLE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.WIFI_PROV_SCHEME_BLE_EVENT_HANDLER_FREE_BT">
<span class="target" id="scheme__ble_8h_1a47d306f88a3ab8b8ff2c866f3c96ca84"></span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_SCHEME_BLE_EVENT_HANDLER_FREE_BT</span></span></span><a class="headerlink" href="#c.WIFI_PROV_SCHEME_BLE_EVENT_HANDLER_FREE_BT" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</section>
<section id="id4">
<h3>Header File<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/wifi_provisioning/include/wifi_provisioning/scheme_softap.h">components/wifi_provisioning/include/wifi_provisioning/scheme_softap.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;wifi_provisioning/scheme_softap.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">wifi_provisioning</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">wifi_provisioning</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES wifi_provisioning
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES wifi_provisioning
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id5">
<h3>Functions<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h3>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv440wifi_prov_scheme_softap_set_httpd_handlePv">
<span id="_CPPv340wifi_prov_scheme_softap_set_httpd_handlePv"></span><span id="_CPPv240wifi_prov_scheme_softap_set_httpd_handlePv"></span><span id="wifi_prov_scheme_softap_set_httpd_handle__voidP"></span><span class="target" id="scheme__softap_8h_1a9b2d3fb2c31628c7aded8a3cfa6cec1e"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_scheme_softap_set_httpd_handle</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv440wifi_prov_scheme_softap_set_httpd_handlePv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Provide HTTPD Server handle externally. </p>
<p>Useful in cases wherein applications need the webserver for some different operations, and do not want the wifi provisioning component to start/stop a new instance.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API should be called before wifi_prov_mgr_start_provisioning()</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>handle</strong> -- <strong>[in]</strong> Handle to HTTPD server instance </p>
</dd>
</dl>
</dd></dl>

</section>
<section id="id6">
<h3>Header File<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/wifi_provisioning/include/wifi_provisioning/scheme_console.h">components/wifi_provisioning/include/wifi_provisioning/scheme_console.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;wifi_provisioning/scheme_console.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">wifi_provisioning</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">wifi_provisioning</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES wifi_provisioning
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES wifi_provisioning
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id7">
<h3>Header File<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/wifi_provisioning/include/wifi_provisioning/wifi_config.h">components/wifi_provisioning/include/wifi_provisioning/wifi_config.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;wifi_provisioning/wifi_config.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">wifi_provisioning</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">wifi_provisioning</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES wifi_provisioning
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES wifi_provisioning
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id8">
<h3>Functions<a class="headerlink" href="#id8" title="Permalink to this heading"></a></h3>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv429wifi_prov_config_data_handler8uint32_tPK7uint8_t7ssize_tPP7uint8_tP7ssize_tPv">
<span id="_CPPv329wifi_prov_config_data_handler8uint32_tPK7uint8_t7ssize_tPP7uint8_tP7ssize_tPv"></span><span id="_CPPv229wifi_prov_config_data_handler8uint32_tPK7uint8_t7ssize_tPP7uint8_tP7ssize_tPv"></span><span id="wifi_prov_config_data_handler__uint32_t.uint8_tCP.ssize_t.uint8_tPP.ssize_tP.voidP"></span><span class="target" id="wifi__config_8h_1a8aba5450fce29d8035d5623c7afad26b"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_config_data_handler</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">session_id</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">inbuf</span></span>, <span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">inlen</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">outbuf</span></span>, <span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">outlen</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">priv_data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv429wifi_prov_config_data_handler8uint32_tPK7uint8_t7ssize_tPP7uint8_tP7ssize_tPv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handler for receiving and responding to requests from master. </p>
<p>This is to be registered as the <code class="docutils literal notranslate"><span class="pre">wifi_config</span></code> endpoint handler (protocomm <code class="docutils literal notranslate"><span class="pre">protocomm_req_handler_t</span></code>) using <code class="docutils literal notranslate"><span class="pre">protocomm_add_endpoint()</span></code></p>
</dd></dl>

</section>
<section id="id9">
<h3>Structures<a class="headerlink" href="#id9" title="Permalink to this heading"></a></h3>
<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv425wifi_prov_sta_conn_info_t">
<span id="_CPPv325wifi_prov_sta_conn_info_t"></span><span id="_CPPv225wifi_prov_sta_conn_info_t"></span><span id="wifi_prov_sta_conn_info_t"></span><span class="target" id="structwifi__prov__sta__conn__info__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_sta_conn_info_t</span></span></span><a class="headerlink" href="#_CPPv425wifi_prov_sta_conn_info_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>WiFi STA connected status information. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25wifi_prov_sta_conn_info_t7ip_addrE">
<span id="_CPPv3N25wifi_prov_sta_conn_info_t7ip_addrE"></span><span id="_CPPv2N25wifi_prov_sta_conn_info_t7ip_addrE"></span><span id="wifi_prov_sta_conn_info_t::ip_addr__cA"></span><span class="target" id="structwifi__prov__sta__conn__info__t_1a734d8968964f0681e3b5542eb39ce698"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ip_addr</span></span></span><span class="p"><span class="pre">[</span></span><span class="n"><span class="pre">IP4ADDR_STRLEN_MAX</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#_CPPv4N25wifi_prov_sta_conn_info_t7ip_addrE" title="Permalink to this definition"></a><br /></dt>
<dd><p>IP Address received by station </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25wifi_prov_sta_conn_info_t5bssidE">
<span id="_CPPv3N25wifi_prov_sta_conn_info_t5bssidE"></span><span id="_CPPv2N25wifi_prov_sta_conn_info_t5bssidE"></span><span id="wifi_prov_sta_conn_info_t::bssid__cA"></span><span class="target" id="structwifi__prov__sta__conn__info__t_1ab3f574ddb08fefe57513bd2b5e76e5e1"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bssid</span></span></span><span class="p"><span class="pre">[</span></span><span class="m"><span class="pre">6</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#_CPPv4N25wifi_prov_sta_conn_info_t5bssidE" title="Permalink to this definition"></a><br /></dt>
<dd><p>BSSID of the AP to which connection was estalished </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25wifi_prov_sta_conn_info_t4ssidE">
<span id="_CPPv3N25wifi_prov_sta_conn_info_t4ssidE"></span><span id="_CPPv2N25wifi_prov_sta_conn_info_t4ssidE"></span><span id="wifi_prov_sta_conn_info_t::ssid__cA"></span><span class="target" id="structwifi__prov__sta__conn__info__t_1ac47bc47e6fe39c5c3aca99f15d193150"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ssid</span></span></span><span class="p"><span class="pre">[</span></span><span class="m"><span class="pre">33</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#_CPPv4N25wifi_prov_sta_conn_info_t4ssidE" title="Permalink to this definition"></a><br /></dt>
<dd><p>SSID of the to which connection was estalished </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25wifi_prov_sta_conn_info_t7channelE">
<span id="_CPPv3N25wifi_prov_sta_conn_info_t7channelE"></span><span id="_CPPv2N25wifi_prov_sta_conn_info_t7channelE"></span><span id="wifi_prov_sta_conn_info_t::channel__uint8_t"></span><span class="target" id="structwifi__prov__sta__conn__info__t_1aef765c169c44869267e1115e33838eb3"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">channel</span></span></span><a class="headerlink" href="#_CPPv4N25wifi_prov_sta_conn_info_t7channelE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Channel of the AP </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25wifi_prov_sta_conn_info_t9auth_modeE">
<span id="_CPPv3N25wifi_prov_sta_conn_info_t9auth_modeE"></span><span id="_CPPv2N25wifi_prov_sta_conn_info_t9auth_modeE"></span><span id="wifi_prov_sta_conn_info_t::auth_mode__uint8_t"></span><span class="target" id="structwifi__prov__sta__conn__info__t_1a3a872cd92a0be7fb2458e0b8c49c72cc"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">auth_mode</span></span></span><a class="headerlink" href="#_CPPv4N25wifi_prov_sta_conn_info_t9auth_modeE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Authorization mode of the AP </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv431wifi_prov_sta_connecting_info_t">
<span id="_CPPv331wifi_prov_sta_connecting_info_t"></span><span id="_CPPv231wifi_prov_sta_connecting_info_t"></span><span id="wifi_prov_sta_connecting_info_t"></span><span class="target" id="structwifi__prov__sta__connecting__info__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_sta_connecting_info_t</span></span></span><a class="headerlink" href="#_CPPv431wifi_prov_sta_connecting_info_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>WiFi STA connecting status information. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N31wifi_prov_sta_connecting_info_t18attempts_remainingE">
<span id="_CPPv3N31wifi_prov_sta_connecting_info_t18attempts_remainingE"></span><span id="_CPPv2N31wifi_prov_sta_connecting_info_t18attempts_remainingE"></span><span id="wifi_prov_sta_connecting_info_t::attempts_remaining__uint32_t"></span><span class="target" id="structwifi__prov__sta__connecting__info__t_1acb786187f706700357f3ce77148ddfc6"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">attempts_remaining</span></span></span><a class="headerlink" href="#_CPPv4N31wifi_prov_sta_connecting_info_t18attempts_remainingE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Number of Wi-Fi connection attempts remaining </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv427wifi_prov_config_get_data_t">
<span id="_CPPv327wifi_prov_config_get_data_t"></span><span id="_CPPv227wifi_prov_config_get_data_t"></span><span id="wifi_prov_config_get_data_t"></span><span class="target" id="structwifi__prov__config__get__data__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_config_get_data_t</span></span></span><a class="headerlink" href="#_CPPv427wifi_prov_config_get_data_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>WiFi status data to be sent in response to <code class="docutils literal notranslate"><span class="pre">get_status</span></code> request from master. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N27wifi_prov_config_get_data_t10wifi_stateE">
<span id="_CPPv3N27wifi_prov_config_get_data_t10wifi_stateE"></span><span id="_CPPv2N27wifi_prov_config_get_data_t10wifi_stateE"></span><span id="wifi_prov_config_get_data_t::wifi_state__wifi_prov_sta_state_t"></span><span class="target" id="structwifi__prov__config__get__data__t_1a6446a33204338113b095c2bf7cd8ad91"></span><a class="reference internal" href="#_CPPv421wifi_prov_sta_state_t" title="wifi_prov_sta_state_t"><span class="n"><span class="pre">wifi_prov_sta_state_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_state</span></span></span><a class="headerlink" href="#_CPPv4N27wifi_prov_config_get_data_t10wifi_stateE" title="Permalink to this definition"></a><br /></dt>
<dd><p>WiFi state of the station </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N27wifi_prov_config_get_data_t11fail_reasonE">
<span id="_CPPv3N27wifi_prov_config_get_data_t11fail_reasonE"></span><span id="_CPPv2N27wifi_prov_config_get_data_t11fail_reasonE"></span><span id="wifi_prov_config_get_data_t::fail_reason__wifi_prov_sta_fail_reason_t"></span><span class="target" id="structwifi__prov__config__get__data__t_1aa0727c01d146fd34ab2e5760de77a129"></span><a class="reference internal" href="#_CPPv427wifi_prov_sta_fail_reason_t" title="wifi_prov_sta_fail_reason_t"><span class="n"><span class="pre">wifi_prov_sta_fail_reason_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fail_reason</span></span></span><a class="headerlink" href="#_CPPv4N27wifi_prov_config_get_data_t11fail_reasonE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Reason for disconnection (valid only when <code class="docutils literal notranslate"><span class="pre">wifi_state</span></code> is <code class="docutils literal notranslate"><span class="pre">WIFI_STATION_DISCONNECTED</span></code>) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N27wifi_prov_config_get_data_t9conn_infoE">
<span id="_CPPv3N27wifi_prov_config_get_data_t9conn_infoE"></span><span id="_CPPv2N27wifi_prov_config_get_data_t9conn_infoE"></span><span id="wifi_prov_config_get_data_t::conn_info__wifi_prov_sta_conn_info_t"></span><span class="target" id="structwifi__prov__config__get__data__t_1a691fa5914f53d2c3cdce2c30d1f9e691"></span><a class="reference internal" href="#_CPPv425wifi_prov_sta_conn_info_t" title="wifi_prov_sta_conn_info_t"><span class="n"><span class="pre">wifi_prov_sta_conn_info_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">conn_info</span></span></span><a class="headerlink" href="#_CPPv4N27wifi_prov_config_get_data_t9conn_infoE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Connection information (valid only when <code class="docutils literal notranslate"><span class="pre">wifi_state</span></code> is <code class="docutils literal notranslate"><span class="pre">WIFI_STATION_CONNECTED</span></code>) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N27wifi_prov_config_get_data_t15connecting_infoE">
<span id="_CPPv3N27wifi_prov_config_get_data_t15connecting_infoE"></span><span id="_CPPv2N27wifi_prov_config_get_data_t15connecting_infoE"></span><span id="wifi_prov_config_get_data_t::connecting_info__wifi_prov_sta_connecting_info_t"></span><span class="target" id="structwifi__prov__config__get__data__t_1aaa37bfe512761a03bce14d0f148d6a7c"></span><a class="reference internal" href="#_CPPv431wifi_prov_sta_connecting_info_t" title="wifi_prov_sta_connecting_info_t"><span class="n"><span class="pre">wifi_prov_sta_connecting_info_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">connecting_info</span></span></span><a class="headerlink" href="#_CPPv4N27wifi_prov_config_get_data_t15connecting_infoE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Connecting information (valid only when <code class="docutils literal notranslate"><span class="pre">wifi_state</span></code> is <code class="docutils literal notranslate"><span class="pre">WIFI_STATION_CONNECTING</span></code>) </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv427wifi_prov_config_set_data_t">
<span id="_CPPv327wifi_prov_config_set_data_t"></span><span id="_CPPv227wifi_prov_config_set_data_t"></span><span id="wifi_prov_config_set_data_t"></span><span class="target" id="structwifi__prov__config__set__data__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_config_set_data_t</span></span></span><a class="headerlink" href="#_CPPv427wifi_prov_config_set_data_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>WiFi config data received by slave during <code class="docutils literal notranslate"><span class="pre">set_config</span></code> request from master. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N27wifi_prov_config_set_data_t4ssidE">
<span id="_CPPv3N27wifi_prov_config_set_data_t4ssidE"></span><span id="_CPPv2N27wifi_prov_config_set_data_t4ssidE"></span><span id="wifi_prov_config_set_data_t::ssid__cA"></span><span class="target" id="structwifi__prov__config__set__data__t_1a26ee3662c7c3ab0342976c1678dcafa2"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ssid</span></span></span><span class="p"><span class="pre">[</span></span><span class="m"><span class="pre">33</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#_CPPv4N27wifi_prov_config_set_data_t4ssidE" title="Permalink to this definition"></a><br /></dt>
<dd><p>SSID of the AP to which the slave is to be connected </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N27wifi_prov_config_set_data_t8passwordE">
<span id="_CPPv3N27wifi_prov_config_set_data_t8passwordE"></span><span id="_CPPv2N27wifi_prov_config_set_data_t8passwordE"></span><span id="wifi_prov_config_set_data_t::password__cA"></span><span class="target" id="structwifi__prov__config__set__data__t_1a96727c31b4acca82a6e35fd827665329"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">password</span></span></span><span class="p"><span class="pre">[</span></span><span class="m"><span class="pre">64</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#_CPPv4N27wifi_prov_config_set_data_t8passwordE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Password of the AP </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N27wifi_prov_config_set_data_t5bssidE">
<span id="_CPPv3N27wifi_prov_config_set_data_t5bssidE"></span><span id="_CPPv2N27wifi_prov_config_set_data_t5bssidE"></span><span id="wifi_prov_config_set_data_t::bssid__cA"></span><span class="target" id="structwifi__prov__config__set__data__t_1ac17b03532d2280db6ed9aca78f60239f"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bssid</span></span></span><span class="p"><span class="pre">[</span></span><span class="m"><span class="pre">6</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#_CPPv4N27wifi_prov_config_set_data_t5bssidE" title="Permalink to this definition"></a><br /></dt>
<dd><p>BSSID of the AP </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N27wifi_prov_config_set_data_t7channelE">
<span id="_CPPv3N27wifi_prov_config_set_data_t7channelE"></span><span id="_CPPv2N27wifi_prov_config_set_data_t7channelE"></span><span id="wifi_prov_config_set_data_t::channel__uint8_t"></span><span class="target" id="structwifi__prov__config__set__data__t_1a71826cdde352d1e5a3210c3977f4b24b"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">channel</span></span></span><a class="headerlink" href="#_CPPv4N27wifi_prov_config_set_data_t7channelE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Channel of the AP </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv425wifi_prov_config_handlers">
<span id="_CPPv325wifi_prov_config_handlers"></span><span id="_CPPv225wifi_prov_config_handlers"></span><span id="wifi_prov_config_handlers"></span><span class="target" id="structwifi__prov__config__handlers"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_config_handlers</span></span></span><a class="headerlink" href="#_CPPv425wifi_prov_config_handlers" title="Permalink to this definition"></a><br /></dt>
<dd><p>Internal handlers for receiving and responding to protocomm requests from master. </p>
<p>This is to be passed as priv_data for protocomm request handler (refer to <code class="docutils literal notranslate"><span class="pre">wifi_prov_config_data_handler()</span></code>) when calling <code class="docutils literal notranslate"><span class="pre">protocomm_add_endpoint()</span></code>. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25wifi_prov_config_handlers18get_status_handlerE">
<span id="_CPPv3N25wifi_prov_config_handlers18get_status_handlerE"></span><span id="_CPPv2N25wifi_prov_config_handlers18get_status_handlerE"></span><span class="target" id="structwifi__prov__config__handlers_1a2745e9c7d36157abd64e05cf0e397c02"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">get_status_handler</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv427wifi_prov_config_get_data_t" title="wifi_prov_config_get_data_t"><span class="n"><span class="pre">wifi_prov_config_get_data_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">resp_data</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv415wifi_prov_ctx_t" title="wifi_prov_ctx_t"><span class="n"><span class="pre">wifi_prov_ctx_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N25wifi_prov_config_handlers18get_status_handlerE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handler function called when connection status of the slave (in WiFi station mode) is requested </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25wifi_prov_config_handlers18set_config_handlerE">
<span id="_CPPv3N25wifi_prov_config_handlers18set_config_handlerE"></span><span id="_CPPv2N25wifi_prov_config_handlers18set_config_handlerE"></span><span class="target" id="structwifi__prov__config__handlers_1ab2771b2929f894f19be1068804254eab"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">set_config_handler</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv427wifi_prov_config_set_data_t" title="wifi_prov_config_set_data_t"><span class="n"><span class="pre">wifi_prov_config_set_data_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">req_data</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv415wifi_prov_ctx_t" title="wifi_prov_ctx_t"><span class="n"><span class="pre">wifi_prov_ctx_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N25wifi_prov_config_handlers18set_config_handlerE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handler function called when WiFi connection configuration (eg. AP SSID, password, etc.) of the slave (in WiFi station mode) is to be set to user provided values </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25wifi_prov_config_handlers20apply_config_handlerE">
<span id="_CPPv3N25wifi_prov_config_handlers20apply_config_handlerE"></span><span id="_CPPv2N25wifi_prov_config_handlers20apply_config_handlerE"></span><span class="target" id="structwifi__prov__config__handlers_1aa34523d1724822eaaa52b487b750b9ad"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">apply_config_handler</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv415wifi_prov_ctx_t" title="wifi_prov_ctx_t"><span class="n"><span class="pre">wifi_prov_ctx_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N25wifi_prov_config_handlers20apply_config_handlerE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handler function for applying the configuration that was set in <code class="docutils literal notranslate"><span class="pre">set_config_handler</span></code>. After applying the station may get connected to the AP or may fail to connect. The slave must be ready to convey the updated connection status information when <code class="docutils literal notranslate"><span class="pre">get_status_handler</span></code> is invoked again by the master. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25wifi_prov_config_handlers3ctxE">
<span id="_CPPv3N25wifi_prov_config_handlers3ctxE"></span><span id="_CPPv2N25wifi_prov_config_handlers3ctxE"></span><span id="wifi_prov_config_handlers::ctx__wifi_prov_ctx_tP"></span><span class="target" id="structwifi__prov__config__handlers_1a0f6799ec11d79e24ac6e32a80611a847"></span><a class="reference internal" href="#_CPPv415wifi_prov_ctx_t" title="wifi_prov_ctx_t"><span class="n"><span class="pre">wifi_prov_ctx_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">ctx</span></span></span><a class="headerlink" href="#_CPPv4N25wifi_prov_config_handlers3ctxE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Context pointer to be passed to above handler functions upon invocation </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="id10">
<h3>Type Definitions<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h3>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv415wifi_prov_ctx_t">
<span id="_CPPv315wifi_prov_ctx_t"></span><span id="_CPPv215wifi_prov_ctx_t"></span><span id="wifi_prov_ctx_t"></span><span class="target" id="wifi__config_8h_1ada31be0259553c17c6a348118c8ab794"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">wifi_prov_ctx</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_ctx_t</span></span></span><a class="headerlink" href="#_CPPv415wifi_prov_ctx_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Type of context data passed to each get/set/apply handler function set in <code class="docutils literal notranslate"><a class="reference internal" href="#structwifi__prov__config__handlers"><span class="std std-ref"><span class="pre">wifi_prov_config_handlers</span></span></a></code> structure. </p>
<p>This is passed as an opaque pointer, thereby allowing it be defined later in application code as per requirements. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv427wifi_prov_config_handlers_t">
<span id="_CPPv327wifi_prov_config_handlers_t"></span><span id="_CPPv227wifi_prov_config_handlers_t"></span><span id="wifi_prov_config_handlers_t"></span><span class="target" id="wifi__config_8h_1a7569a4f7fc57b9796c7875feef57cfdb"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv425wifi_prov_config_handlers" title="wifi_prov_config_handlers"><span class="n"><span class="pre">wifi_prov_config_handlers</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_config_handlers_t</span></span></span><a class="headerlink" href="#_CPPv427wifi_prov_config_handlers_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Internal handlers for receiving and responding to protocomm requests from master. </p>
<p>This is to be passed as priv_data for protocomm request handler (refer to <code class="docutils literal notranslate"><span class="pre">wifi_prov_config_data_handler()</span></code>) when calling <code class="docutils literal notranslate"><span class="pre">protocomm_add_endpoint()</span></code>. </p>
</dd></dl>

</section>
<section id="id11">
<h3>Enumerations<a class="headerlink" href="#id11" title="Permalink to this heading"></a></h3>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv421wifi_prov_sta_state_t">
<span id="_CPPv321wifi_prov_sta_state_t"></span><span id="_CPPv221wifi_prov_sta_state_t"></span><span class="target" id="wifi__config_8h_1a64cbdacbc8b09ae467a9d1701e30c5ec"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_sta_state_t</span></span></span><a class="headerlink" href="#_CPPv421wifi_prov_sta_state_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>WiFi STA status for conveying back to the provisioning master. </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N21wifi_prov_sta_state_t24WIFI_PROV_STA_CONNECTINGE">
<span id="_CPPv3N21wifi_prov_sta_state_t24WIFI_PROV_STA_CONNECTINGE"></span><span id="_CPPv2N21wifi_prov_sta_state_t24WIFI_PROV_STA_CONNECTINGE"></span><span class="target" id="wifi__config_8h_1a64cbdacbc8b09ae467a9d1701e30c5eca6eb262189575763c6a0a0f42508a1c7f"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_STA_CONNECTING</span></span></span><a class="headerlink" href="#_CPPv4N21wifi_prov_sta_state_t24WIFI_PROV_STA_CONNECTINGE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N21wifi_prov_sta_state_t23WIFI_PROV_STA_CONNECTEDE">
<span id="_CPPv3N21wifi_prov_sta_state_t23WIFI_PROV_STA_CONNECTEDE"></span><span id="_CPPv2N21wifi_prov_sta_state_t23WIFI_PROV_STA_CONNECTEDE"></span><span class="target" id="wifi__config_8h_1a64cbdacbc8b09ae467a9d1701e30c5ecafbb71f34667147c3c3a70502acd3f5a3"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_STA_CONNECTED</span></span></span><a class="headerlink" href="#_CPPv4N21wifi_prov_sta_state_t23WIFI_PROV_STA_CONNECTEDE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N21wifi_prov_sta_state_t26WIFI_PROV_STA_DISCONNECTEDE">
<span id="_CPPv3N21wifi_prov_sta_state_t26WIFI_PROV_STA_DISCONNECTEDE"></span><span id="_CPPv2N21wifi_prov_sta_state_t26WIFI_PROV_STA_DISCONNECTEDE"></span><span class="target" id="wifi__config_8h_1a64cbdacbc8b09ae467a9d1701e30c5eca0241c35d80decb36fd547bbe961c0a68"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_STA_DISCONNECTED</span></span></span><a class="headerlink" href="#_CPPv4N21wifi_prov_sta_state_t26WIFI_PROV_STA_DISCONNECTEDE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N21wifi_prov_sta_state_t33WIFI_PROV_STA_CONN_ATTEMPT_FAILEDE">
<span id="_CPPv3N21wifi_prov_sta_state_t33WIFI_PROV_STA_CONN_ATTEMPT_FAILEDE"></span><span id="_CPPv2N21wifi_prov_sta_state_t33WIFI_PROV_STA_CONN_ATTEMPT_FAILEDE"></span><span class="target" id="wifi__config_8h_1a64cbdacbc8b09ae467a9d1701e30c5eca3dcdca168995d5f88e4ff31b39c0a0ae"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_STA_CONN_ATTEMPT_FAILED</span></span></span><a class="headerlink" href="#_CPPv4N21wifi_prov_sta_state_t33WIFI_PROV_STA_CONN_ATTEMPT_FAILEDE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv427wifi_prov_sta_fail_reason_t">
<span id="_CPPv327wifi_prov_sta_fail_reason_t"></span><span id="_CPPv227wifi_prov_sta_fail_reason_t"></span><span class="target" id="wifi__config_8h_1a12b961739b836842361f6545f4c174a6"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi_prov_sta_fail_reason_t</span></span></span><a class="headerlink" href="#_CPPv427wifi_prov_sta_fail_reason_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>WiFi STA connection fail reason. </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N27wifi_prov_sta_fail_reason_t24WIFI_PROV_STA_AUTH_ERRORE">
<span id="_CPPv3N27wifi_prov_sta_fail_reason_t24WIFI_PROV_STA_AUTH_ERRORE"></span><span id="_CPPv2N27wifi_prov_sta_fail_reason_t24WIFI_PROV_STA_AUTH_ERRORE"></span><span class="target" id="wifi__config_8h_1a12b961739b836842361f6545f4c174a6a9f5b5cea7828d2a550986abaccc296d3"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_STA_AUTH_ERROR</span></span></span><a class="headerlink" href="#_CPPv4N27wifi_prov_sta_fail_reason_t24WIFI_PROV_STA_AUTH_ERRORE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N27wifi_prov_sta_fail_reason_t26WIFI_PROV_STA_AP_NOT_FOUNDE">
<span id="_CPPv3N27wifi_prov_sta_fail_reason_t26WIFI_PROV_STA_AP_NOT_FOUNDE"></span><span id="_CPPv2N27wifi_prov_sta_fail_reason_t26WIFI_PROV_STA_AP_NOT_FOUNDE"></span><span class="target" id="wifi__config_8h_1a12b961739b836842361f6545f4c174a6ac8f1aa250047f103e26150260674895b"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WIFI_PROV_STA_AP_NOT_FOUND</span></span></span><a class="headerlink" href="#_CPPv4N27wifi_prov_sta_fail_reason_t26WIFI_PROV_STA_AP_NOT_FOUNDE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

</section>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
             <div class="articleComments">

<style>
    .expand-feedback-content {
        display: none;
    }
    .click-like-or-dislike {
        background-color: #d3d3d3;
        pointer-events: none;
    }
</style>

<script>
    function submitFeedbackForm(user_likes_document) {
        // Send to GA4 the user reaction
        gtag('event', 'user_reaction', {
            'user_likes_document': user_likes_document
        });

        if (user_likes_document === 1) {
            document.querySelector('.like-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContentLike").style.display = 'block';
        } else {
            document.querySelector('.dislike-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContent").style.display = 'block';
        }

        document.querySelector('.like-btn').style.pointerEvents = 'none';
        document.querySelector('.dislike-btn').style.pointerEvents = 'none';
    }
</script>

<hr>

<p style="text-align:center"><strong>Was this page helpful?</strong></p>
<p style="text-align:center">
    <button class="like-btn" onclick="submitFeedbackForm(1)">
        <svg aria-hidden="true" focusable="false" class="color-fg-muted" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M8.834.066c.763.087 1.5.295 2.01.884.505.581.656 1.378.656 2.3 0 .467-.087 1.119-.157 1.637L11.328 5h1.422c.603 0 1.174.085 1.668.333.508.254.911.679 1.137 1.2.453.998.438 2.447.188 4.316l-.04.306c-.105.79-.195 1.473-.313 2.033-.131.63-.315 1.209-.668 1.672C13.97 15.847 12.706 16 11 16c-1.848 0-3.234-.333-4.388-.653-.165-.045-.323-.09-.475-.133-.658-.186-1.2-.34-1.725-.415A1.75 1.75 0 0 1 2.75 16h-1A1.75 1.75 0 0 1 0 14.25v-7.5C0 5.784.784 5 1.75 5h1a1.75 1.75 0 0 1 1.514.872c.258-.105.59-.268.918-.508C5.853 4.874 6.5 4.079 6.5 2.75v-.5c0-1.202.994-2.337 2.334-2.184ZM4.5 13.3c.705.088 1.39.284 2.072.478l.441.125c1.096.305 2.334.598 3.987.598 1.794 0 2.28-.223 2.528-.549.147-.193.276-.505.394-1.07.105-.502.188-1.124.295-1.93l.04-.3c.25-1.882.189-2.933-.068-3.497a.921.921 0 0 0-.442-.48c-.208-.104-.52-.174-.997-.174H11c-.686 0-1.295-.577-1.206-1.336.023-.192.05-.39.076-.586.065-.488.13-.97.13-1.328 0-.809-.144-1.15-.288-1.316-.137-.158-.402-.304-1.048-.378C8.357 1.521 8 1.793 8 2.25v.5c0 1.922-.978 3.128-1.933 3.825a5.831 5.831 0 0 1-1.567.81ZM2.75 6.5h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
    </button>
    <button class="dislike-btn" onclick="submitFeedbackForm(0)">
        <svg aria-hidden="true" focusable="false" class="" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M7.083 15.986c-.763-.087-1.499-.295-2.011-.884-.504-.581-.655-1.378-.655-2.299 0-.468.087-1.12.157-1.638l.015-.112H3.167c-.603 0-1.174-.086-1.669-.334a2.415 2.415 0 0 1-1.136-1.2c-.454-.998-.438-2.447-.188-4.316l.04-.306C.32 4.108.41 3.424.526 2.864c.132-.63.316-1.209.669-1.672C1.947.205 3.211.053 4.917.053c1.848 0 3.234.332 4.388.652l.474.133c.658.187 1.201.341 1.726.415a1.75 1.75 0 0 1 1.662-1.2h1c.966 0 1.75.784 1.75 1.75v7.5a1.75 1.75 0 0 1-1.75 1.75h-1a1.75 1.75 0 0 1-1.514-.872c-.259.105-.59.268-.919.508-.671.491-1.317 1.285-1.317 2.614v.5c0 1.201-.994 2.336-2.334 2.183Zm4.334-13.232c-.706-.089-1.39-.284-2.072-.479l-.441-.125c-1.096-.304-2.335-.597-3.987-.597-1.794 0-2.28.222-2.529.548-.147.193-.275.505-.393 1.07-.105.502-.188 1.124-.295 1.93l-.04.3c-.25 1.882-.19 2.933.067 3.497a.923.923 0 0 0 .443.48c.208.104.52.175.997.175h1.75c.685 0 1.295.577 1.205 1.335-.022.192-.049.39-.075.586-.066.488-.13.97-.13 1.329 0 .808.144 1.15.288 1.316.137.157.401.303 1.048.377.307.035.664-.237.664-.693v-.5c0-1.922.978-3.127 1.932-3.825a5.878 5.878 0 0 1 1.568-.809Zm1.75 6.798h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25Z"></path>
        </svg>
    </button>
</p>

<div class="expand-feedback-content" id="expandContentLike">
    <ul style="text-align:center">
        <li>Thank you! We received your feedback.</li>
        <li>If you have any comments, fill in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=Wi-Fi Provisioning (api-reference/provisioning/wifi_provisioning)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<div class="expand-feedback-content" id="expandContent">
    <ul style="text-align:center">
        <li>We value your feedback.</li>
        <li>Let us know how we can improve this page by filling in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=Wi-Fi Provisioning (api-reference/provisioning/wifi_provisioning)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<br>


             </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="provisioning.html" class="btn btn-neutral float-left" title="Unified Provisioning" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../storage/index.html" class="btn btn-neutral float-right" title="Storage API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016 - 2025, Espressif Systems (Shanghai) Co., Ltd.</p>
  </div>

  <ul class="footer">
        <li>
	    
            
            Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/espressif/sphinx_idf_theme">theme</a>  based on <a href="https://github.com/readthedocs/sphinx_rtd_theme">Read the Docs Sphinx Theme</a>.
         </li>
    <li class="footer-aside">
        <a href="../../esp-idf-en-v5.4.2.zip"> Download HTML</a>
    </li>

  </ul> 

</footer>
        </div>
      </div>
    </section>
  </div>

  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>