<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-73KGWFC8DM"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-73KGWFC8DM');
        </script><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Protocol Communication - ESP32 -  &mdash; ESP-IDF Programming Guide v5.4.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=a60756f2" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=949a1ff5" />
      <link rel="stylesheet" type="text/css" href="../../_static/theme_overrides.css?v=851bd809" />

  
    <link rel="canonical" href="https://docs.espressif.com/projects/esp-idf/en/stable/esp32/api-reference/provisioning/protocomm.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=c241bbaf"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=ff8fa330"></script>
        <script src="https://wavedrom.com/skins/default.js"></script>
        <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <script src="../../_static/js/theme.js"></script>

    
        

    <script type="text/javascript">
        DOCUMENTATION_OPTIONS.PAGENAME = 'api-reference/provisioning/protocomm';
        DOCUMENTATION_OPTIONS.PROJECT_SLUG = 'esp-idf';
        DOCUMENTATION_OPTIONS.LATEST_BRANCH_NAME = 'master';
        DOCUMENTATION_OPTIONS.VERSIONS_URL = 'https://dl.espressif.com/dl/esp-idf/idf_versions.js';
        DOCUMENTATION_OPTIONS.LANGUAGES = ["en", "zh_CN"];
        DOCUMENTATION_OPTIONS.IDF_TARGET = 'esp32';
        DOCUMENTATION_OPTIONS.HAS_IDF_TARGETS = ["esp32", "esp32s2", "esp32s3", "esp32c3", "esp32c2", "esp32c5", "esp32c6", "esp32p4"]
        DOCUMENTATION_OPTIONS.RELEASE = 'v5.4.2';
        DOCUMENTATION_OPTIONS.LANGUAGE_URL = 'en';

    </script>

    <script type="text/javascript" src="https://dl.espressif.com/dl/esp-idf/idf_versions.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Unified Provisioning" href="provisioning.html" />
    <link rel="prev" title="Provisioning API" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ESP-IDF Programming Guide
              <img src="../../_static/espressif-logo.svg" class="logo" alt="Logo"/>
          </a>

          
            <div class="selectors">
              <select id="target-select" style="width: 150px;" hidden>
                <option value="" disabled selected>Choose target...</option>
              </select>
            </div>
          

          <div class="selectors">
            <select id="version-select" style="width: 150px;" hidden>
              <option value="" disabled selected>Choose version...</option>
            </select>
          </div>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Get Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-conventions.html">API Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/index.html">Application Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth® API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error-codes.html">Error Codes Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/index.html">Networking APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peripherals/index.html">Peripherals API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kconfig.html">Project Configuration</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Provisioning API</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Protocol Communication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#enabling-protocomm-security-version">Enabling Protocomm Security Version</a></li>
<li class="toctree-l4"><a class="reference internal" href="#softap-http-transport-example-with-security-2">SoftAP + HTTP Transport Example with Security 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#softap-http-transport-example-with-security-1">SoftAP + HTTP Transport Example with Security 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bluetooth-le-transport-example-with-security-0">Bluetooth LE Transport Example with Security 0</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="provisioning.html">Unified Provisioning</a></li>
<li class="toctree-l3"><a class="reference internal" href="wifi_provisioning.html">Wi-Fi Provisioning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../network/esp_smartconfig.html">SmartConfig</a></li>
<li class="toctree-l3"><a class="reference internal" href="../network/esp_dpp.html">Wi-Fi Easy Connect<sup>TM</sup> (DPP)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">Storage API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system/index.html">System API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hw-reference/index.html">Hardware Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-guides/index.html">API Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration-guides/index.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries-and-frameworks/index.html">Libraries and Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contributions Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">ESP-IDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COPYRIGHT.html">Copyrights and Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../languages.html">Switch Between Languages</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ESP-IDF Programming Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="index.html">Provisioning API</a></li>
      <li class="breadcrumb-item active">Protocol Communication</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/espressif/esp-idf/blob/v5.4.2/docs/en/api-reference/provisioning/protocomm.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="protocol-communication">
<h1>Protocol Communication<a class="headerlink" href="#protocol-communication" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="../../../../../zh_CN/v5.4.2/esp32/api-reference/provisioning/protocomm.html">[中文]</a></p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The Protocol Communication (protocomm) component manages secure sessions and provides the framework for multiple transports. The application can also use the protocomm layer directly to have application-specific extensions for the provisioning or non-provisioning use cases.</p>
<p>Following features are available for provisioning:</p>
<blockquote>
<div><ul>
<li><p>Communication security at the application level</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">protocomm_security0</span></code> (no security)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">protocomm_security1</span></code> (Curve25519 key exchange + AES-CTR encryption/decryption)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">protocomm_security2</span></code> (SRP6a-based key exchange + AES-GCM encryption/decryption)</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Proof-of-possession (support with protocomm_security1 only)</p></li>
<li><p>Salt and Verifier (support with protocomm_security2 only)</p></li>
</ul>
</div></blockquote>
<p>Protocomm internally uses protobuf (protocol buffers) for secure session establishment. Users can choose to implement their own security (even without using protobuf). Protocomm can also be used without any security layer.</p>
<p>Protocomm provides the framework for various transports:</p>
<p><ul class="simple">
<li><p>Bluetooth LE</p></li>
<li><p>Wi-Fi (SoftAP + HTTPD)</p></li>
<li><p>Console, in which case the handler invocation is automatically taken care of on the device side. See Transport Examples below for code snippets.</p></li>
</ul>
</p>
<p>Note that for protocomm_security1 and protocomm_security2, the client still needs to establish sessions by performing the two-way handshake.</p>
<p>See <a class="reference internal" href="provisioning.html"><span class="doc">Unified Provisioning</span></a> for more details about the secure handshake logic.</p>
</section>
<section id="enabling-protocomm-security-version">
<span id="id1"></span><h2>Enabling Protocomm Security Version<a class="headerlink" href="#enabling-protocomm-security-version" title="Permalink to this heading"></a></h2>
<p>The protocomm component provides a project configuration menu to enable/disable support of respective security versions. The respective configuration options are as follows:</p>
<blockquote>
<div><ul class="simple">
<li><p>Support <code class="docutils literal notranslate"><span class="pre">protocomm_security0</span></code>, with no security: <a class="reference internal" href="../kconfig.html#config-esp-protocomm-support-security-version-0"><span class="std std-ref">CONFIG_ESP_PROTOCOMM_SUPPORT_SECURITY_VERSION_0</span></a>, this option is enabled by default.</p></li>
<li><p>Support <code class="docutils literal notranslate"><span class="pre">protocomm_security1</span></code> with Curve25519 key exchange + AES-CTR encryption/decryption: <a class="reference internal" href="../kconfig.html#config-esp-protocomm-support-security-version-1"><span class="std std-ref">CONFIG_ESP_PROTOCOMM_SUPPORT_SECURITY_VERSION_1</span></a>, this option is enabled by default.</p></li>
<li><p>Support <code class="docutils literal notranslate"><span class="pre">protocomm_security2</span></code> with SRP6a-based key exchange + AES-GCM encryption/decryption: <a class="reference internal" href="../kconfig.html#config-esp-protocomm-support-security-version-2"><span class="std std-ref">CONFIG_ESP_PROTOCOMM_SUPPORT_SECURITY_VERSION_2</span></a>.</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Enabling multiple security versions at once offers the ability to control them dynamically but also increases the firmware size.</p>
</div>
</section>
<section id="softap-http-transport-example-with-security-2">
<h2>SoftAP + HTTP Transport Example with Security 2<a class="headerlink" href="#softap-http-transport-example-with-security-2" title="Permalink to this heading"></a></h2>
<p>For sample usage, see <a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/wifi_provisioning/src/scheme_softap.c">wifi_provisioning/src/scheme_softap.c</a>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* The endpoint handler to be registered with protocomm. This simply echoes back the received data. */</span>
<span class="n">esp_err_t</span><span class="w"> </span><span class="nf">echo_req_handler</span><span class="w"> </span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">session_id</span><span class="p">,</span>
<span class="w">                            </span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="kt">ssize_t</span><span class="w"> </span><span class="n">inlen</span><span class="p">,</span>
<span class="w">                            </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">**</span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="kt">ssize_t</span><span class="w"> </span><span class="o">*</span><span class="n">outlen</span><span class="p">,</span>
<span class="w">                            </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">priv_data</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/* Session ID may be used for persistence. */</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Session ID : %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">session_id</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Echo back the received data. */</span>
<span class="w">    </span><span class="o">*</span><span class="n">outlen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inlen</span><span class="p">;</span><span class="w">            </span><span class="cm">/* Output the data length updated. */</span>
<span class="w">    </span><span class="o">*</span><span class="n">outbuf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">inlen</span><span class="p">);</span><span class="w">    </span><span class="cm">/* This is to be deallocated outside. */</span>
<span class="w">    </span><span class="n">memcpy</span><span class="p">(</span><span class="o">*</span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="n">inlen</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Private data that was passed at the time of endpoint creation. */</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">priv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">priv_data</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">priv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Private data : %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">priv</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ESP_OK</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">sec2_salt</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mh">0xf7</span><span class="p">,</span><span class="w"> </span><span class="mh">0x5f</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe2</span><span class="p">,</span><span class="w"> </span><span class="mh">0xbe</span><span class="p">,</span><span class="w"> </span><span class="mh">0xba</span><span class="p">,</span><span class="w"> </span><span class="mh">0x7c</span><span class="p">,</span><span class="w"> </span><span class="mh">0x81</span><span class="p">,</span><span class="w"> </span><span class="mh">0xcd</span><span class="p">};</span>
<span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">sec2_verifier</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mh">0xbf</span><span class="p">,</span><span class="w"> </span><span class="mh">0x86</span><span class="p">,</span><span class="w"> </span><span class="mh">0xce</span><span class="p">,</span><span class="w"> </span><span class="mh">0x63</span><span class="p">,</span><span class="w"> </span><span class="mh">0x8a</span><span class="p">,</span><span class="w"> </span><span class="mh">0xbb</span><span class="p">,</span><span class="w"> </span><span class="mh">0x7e</span><span class="p">,</span><span class="w"> </span><span class="mh">0x2f</span><span class="p">,</span><span class="w"> </span><span class="mh">0x38</span><span class="p">,</span><span class="w"> </span><span class="mh">0xa8</span><span class="p">,</span><span class="w"> </span><span class="mh">0x19</span><span class="p">,</span><span class="w"> </span><span class="mh">0x1b</span><span class="p">,</span><span class="w"> </span><span class="mh">0x35</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0xc9</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe3</span><span class="p">,</span><span class="w"> </span><span class="mh">0xbe</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc3</span><span class="p">,</span><span class="w"> </span><span class="mh">0x2b</span><span class="p">,</span><span class="w"> </span><span class="mh">0x45</span><span class="p">,</span><span class="w"> </span><span class="mh">0xee</span><span class="p">,</span><span class="w"> </span><span class="mh">0x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0x74</span><span class="p">,</span><span class="w"> </span><span class="mh">0x22</span><span class="p">,</span><span class="w"> </span><span class="mh">0x1a</span><span class="p">,</span><span class="w"> </span><span class="mh">0x95</span><span class="p">,</span><span class="w"> </span><span class="mh">0xbe</span><span class="p">,</span><span class="w"> </span><span class="mh">0x62</span><span class="p">,</span><span class="w"> </span><span class="mh">0xf7</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0c</span><span class="p">,</span><span class="w"> </span><span class="mh">0x65</span><span class="p">,</span><span class="w"> </span><span class="mh">0x83</span><span class="p">,</span><span class="w"> </span><span class="mh">0x50</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0xef</span><span class="p">,</span><span class="w"> </span><span class="mh">0xaf</span><span class="p">,</span><span class="w"> </span><span class="mh">0xa5</span><span class="p">,</span><span class="w"> </span><span class="mh">0x94</span><span class="p">,</span><span class="w"> </span><span class="mh">0x4b</span><span class="p">,</span><span class="w"> </span><span class="mh">0xcb</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe1</span><span class="p">,</span><span class="w"> </span><span class="mh">0xce</span><span class="p">,</span><span class="w"> </span><span class="mh">0x59</span><span class="p">,</span><span class="w"> </span><span class="mh">0x2a</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe8</span><span class="p">,</span><span class="w"> </span><span class="mh">0x7b</span><span class="p">,</span><span class="w"> </span><span class="mh">0x27</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc8</span><span class="p">,</span><span class="w"> </span><span class="mh">0x72</span><span class="p">,</span><span class="w"> </span><span class="mh">0x26</span><span class="p">,</span><span class="w"> </span><span class="mh">0x71</span><span class="p">,</span><span class="w"> </span><span class="mh">0xde</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0xb2</span><span class="p">,</span><span class="w"> </span><span class="mh">0xf2</span><span class="p">,</span><span class="w"> </span><span class="mh">0x80</span><span class="p">,</span><span class="w"> </span><span class="mh">0x02</span><span class="p">,</span><span class="w"> </span><span class="mh">0xdd</span><span class="p">,</span><span class="w"> </span><span class="mh">0x11</span><span class="p">,</span><span class="w"> </span><span class="mh">0xf0</span><span class="p">,</span><span class="w"> </span><span class="mh">0x38</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0e</span><span class="p">,</span><span class="w"> </span><span class="mh">0x95</span><span class="p">,</span><span class="w"> </span><span class="mh">0x25</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0xcf</span><span class="p">,</span><span class="w"> </span><span class="mh">0xb3</span><span class="p">,</span><span class="w"> </span><span class="mh">0x3f</span><span class="p">,</span><span class="w"> </span><span class="mh">0xf0</span><span class="p">,</span><span class="w"> </span><span class="mh">0x73</span><span class="p">,</span><span class="w"> </span><span class="mh">0x2a</span><span class="p">,</span><span class="w"> </span><span class="mh">0x25</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0x03</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe8</span><span class="p">,</span><span class="w"> </span><span class="mh">0x51</span><span class="p">,</span><span class="w"> </span><span class="mh">0x72</span><span class="p">,</span><span class="w"> </span><span class="mh">0xef</span><span class="p">,</span><span class="w"> </span><span class="mh">0x6d</span><span class="p">,</span><span class="w"> </span><span class="mh">0x3e</span><span class="p">,</span><span class="w"> </span><span class="mh">0x14</span><span class="p">,</span><span class="w"> </span><span class="mh">0xb9</span><span class="p">,</span><span class="w"> </span><span class="mh">0x2e</span><span class="p">,</span><span class="w"> </span><span class="mh">0x9f</span><span class="p">,</span><span class="w"> </span><span class="mh">0x2a</span><span class="p">,</span><span class="w"> </span><span class="mh">0x90</span><span class="p">,</span><span class="w"> </span><span class="mh">0x9e</span><span class="p">,</span><span class="w"> </span><span class="mh">0x26</span><span class="p">,</span><span class="w"> </span><span class="mh">0xb6</span><span class="p">,</span><span class="w"> </span><span class="mh">0x3e</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc7</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe4</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0x9f</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe3</span><span class="p">,</span><span class="w"> </span><span class="mh">0x20</span><span class="p">,</span><span class="w"> </span><span class="mh">0xce</span><span class="p">,</span><span class="w"> </span><span class="mh">0x28</span><span class="p">,</span><span class="w"> </span><span class="mh">0x7c</span><span class="p">,</span><span class="w"> </span><span class="mh">0xbf</span><span class="p">,</span><span class="w"> </span><span class="mh">0x89</span><span class="p">,</span><span class="w"> </span><span class="mh">0x50</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc9</span><span class="p">,</span><span class="w"> </span><span class="mh">0xb6</span><span class="p">,</span><span class="w"> </span><span class="mh">0xec</span><span class="p">,</span><span class="w"> </span><span class="mh">0xdd</span><span class="p">,</span><span class="w"> </span><span class="mh">0x81</span><span class="p">,</span><span class="w"> </span><span class="mh">0x18</span><span class="p">,</span><span class="w"> </span><span class="mh">0xf1</span><span class="p">,</span><span class="w"> </span><span class="mh">0x1a</span><span class="p">,</span><span class="w"> </span><span class="mh">0xd9</span><span class="p">,</span><span class="w"> </span><span class="mh">0x7a</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0x21</span><span class="p">,</span><span class="w"> </span><span class="mh">0x99</span><span class="p">,</span><span class="w"> </span><span class="mh">0xf1</span><span class="p">,</span><span class="w"> </span><span class="mh">0xee</span><span class="p">,</span><span class="w"> </span><span class="mh">0x71</span><span class="p">,</span><span class="w"> </span><span class="mh">0x2f</span><span class="p">,</span><span class="w"> </span><span class="mh">0xcc</span><span class="p">,</span><span class="w"> </span><span class="mh">0x93</span><span class="p">,</span><span class="w"> </span><span class="mh">0x16</span><span class="p">,</span><span class="w"> </span><span class="mh">0x34</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0c</span><span class="p">,</span><span class="w"> </span><span class="mh">0x79</span><span class="p">,</span><span class="w"> </span><span class="mh">0x46</span><span class="p">,</span><span class="w"> </span><span class="mh">0x23</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe4</span><span class="p">,</span><span class="w"> </span><span class="mh">0x32</span><span class="p">,</span><span class="w"> </span><span class="mh">0xec</span><span class="p">,</span><span class="w"> </span><span class="mh">0x2d</span><span class="p">,</span><span class="w"> </span><span class="mh">0x9e</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0x18</span><span class="p">,</span><span class="w"> </span><span class="mh">0xa6</span><span class="p">,</span><span class="w"> </span><span class="mh">0xb9</span><span class="p">,</span><span class="w"> </span><span class="mh">0xbb</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0a</span><span class="p">,</span><span class="w"> </span><span class="mh">0xcf</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc4</span><span class="p">,</span><span class="w"> </span><span class="mh">0xa8</span><span class="p">,</span><span class="w"> </span><span class="mh">0x32</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc0</span><span class="p">,</span><span class="w"> </span><span class="mh">0x1c</span><span class="p">,</span><span class="w"> </span><span class="mh">0x32</span><span class="p">,</span><span class="w"> </span><span class="mh">0xa3</span><span class="p">,</span><span class="w"> </span><span class="mh">0x97</span><span class="p">,</span><span class="w"> </span><span class="mh">0x66</span><span class="p">,</span><span class="w"> </span><span class="mh">0xf8</span><span class="p">,</span><span class="w"> </span><span class="mh">0x30</span><span class="p">,</span><span class="w"> </span><span class="mh">0xb2</span><span class="p">,</span><span class="w"> </span><span class="mh">0xda</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0xf9</span><span class="p">,</span><span class="w"> </span><span class="mh">0x8d</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc3</span><span class="p">,</span><span class="w"> </span><span class="mh">0x72</span><span class="p">,</span><span class="w"> </span><span class="mh">0x72</span><span class="p">,</span><span class="w"> </span><span class="mh">0x5f</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe5</span><span class="p">,</span><span class="w"> </span><span class="mh">0xee</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc3</span><span class="p">,</span><span class="w"> </span><span class="mh">0x5c</span><span class="p">,</span><span class="w"> </span><span class="mh">0x24</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc8</span><span class="p">,</span><span class="w"> </span><span class="mh">0xdd</span><span class="p">,</span><span class="w"> </span><span class="mh">0x54</span><span class="p">,</span><span class="w"> </span><span class="mh">0x49</span><span class="p">,</span><span class="w"> </span><span class="mh">0xfc</span><span class="p">,</span><span class="w"> </span><span class="mh">0x12</span><span class="p">,</span><span class="w"> </span><span class="mh">0x91</span><span class="p">,</span><span class="w"> </span><span class="mh">0x81</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0x9c</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc3</span><span class="p">,</span><span class="w"> </span><span class="mh">0xac</span><span class="p">,</span><span class="w"> </span><span class="mh">0x64</span><span class="p">,</span><span class="w"> </span><span class="mh">0x5e</span><span class="p">,</span><span class="w"> </span><span class="mh">0xd6</span><span class="p">,</span><span class="w"> </span><span class="mh">0x41</span><span class="p">,</span><span class="w"> </span><span class="mh">0x88</span><span class="p">,</span><span class="w"> </span><span class="mh">0x2f</span><span class="p">,</span><span class="w"> </span><span class="mh">0x23</span><span class="p">,</span><span class="w"> </span><span class="mh">0x66</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc8</span><span class="p">,</span><span class="w"> </span><span class="mh">0xac</span><span class="p">,</span><span class="w"> </span><span class="mh">0xb0</span><span class="p">,</span><span class="w"> </span><span class="mh">0x35</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0b</span><span class="p">,</span><span class="w"> </span><span class="mh">0xf6</span><span class="p">,</span><span class="w"> </span><span class="mh">0x9c</span><span class="p">,</span><span class="w"> </span><span class="mh">0x88</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0x6f</span><span class="p">,</span><span class="w"> </span><span class="mh">0xac</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe1</span><span class="p">,</span><span class="w"> </span><span class="mh">0xf4</span><span class="p">,</span><span class="w"> </span><span class="mh">0xca</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc9</span><span class="p">,</span><span class="w"> </span><span class="mh">0x07</span><span class="p">,</span><span class="w"> </span><span class="mh">0x04</span><span class="p">,</span><span class="w"> </span><span class="mh">0x11</span><span class="p">,</span><span class="w"> </span><span class="mh">0xda</span><span class="p">,</span><span class="w"> </span><span class="mh">0x90</span><span class="p">,</span><span class="w"> </span><span class="mh">0x42</span><span class="p">,</span><span class="w"> </span><span class="mh">0xa9</span><span class="p">,</span><span class="w"> </span><span class="mh">0xf1</span><span class="p">,</span><span class="w"> </span><span class="mh">0x97</span><span class="p">,</span><span class="w"> </span><span class="mh">0x3d</span><span class="p">,</span><span class="w"> </span><span class="mh">0x94</span><span class="p">,</span><span class="w"> </span><span class="mh">0x65</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe4</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0xfb</span><span class="p">,</span><span class="w"> </span><span class="mh">0x52</span><span class="p">,</span><span class="w"> </span><span class="mh">0x22</span><span class="p">,</span><span class="w"> </span><span class="mh">0x3b</span><span class="p">,</span><span class="w"> </span><span class="mh">0x7a</span><span class="p">,</span><span class="w"> </span><span class="mh">0x7b</span><span class="p">,</span><span class="w"> </span><span class="mh">0x9e</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe9</span><span class="p">,</span><span class="w"> </span><span class="mh">0xee</span><span class="p">,</span><span class="w"> </span><span class="mh">0x1c</span><span class="p">,</span><span class="w"> </span><span class="mh">0x44</span><span class="p">,</span><span class="w"> </span><span class="mh">0xd0</span><span class="p">,</span><span class="w"> </span><span class="mh">0x73</span><span class="p">,</span><span class="w"> </span><span class="mh">0x72</span><span class="p">,</span><span class="w"> </span><span class="mh">0x2a</span><span class="p">,</span><span class="w"> </span><span class="mh">0xca</span><span class="p">,</span><span class="w"> </span><span class="mh">0x85</span><span class="p">,</span><span class="w"> </span><span class="mh">0x19</span><span class="p">,</span><span class="w"> </span><span class="mh">0x4a</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0x60</span><span class="p">,</span><span class="w"> </span><span class="mh">0xce</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0a</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc8</span><span class="p">,</span><span class="w"> </span><span class="mh">0x7d</span><span class="p">,</span><span class="w"> </span><span class="mh">0x57</span><span class="p">,</span><span class="w"> </span><span class="mh">0xa4</span><span class="p">,</span><span class="w"> </span><span class="mh">0xf8</span><span class="p">,</span><span class="w"> </span><span class="mh">0x77</span><span class="p">,</span><span class="w"> </span><span class="mh">0x22</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc1</span><span class="p">,</span><span class="w"> </span><span class="mh">0xa5</span><span class="p">,</span><span class="w"> </span><span class="mh">0xfa</span><span class="p">,</span><span class="w"> </span><span class="mh">0xfb</span><span class="p">,</span><span class="w"> </span><span class="mh">0x7b</span><span class="p">,</span><span class="w"> </span><span class="mh">0x91</span><span class="p">,</span><span class="w"> </span><span class="mh">0x3b</span><span class="p">,</span><span class="w"> </span><span class="mh">0xfe</span><span class="p">,</span><span class="w"> </span><span class="mh">0x87</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0x5f</span><span class="p">,</span><span class="w"> </span><span class="mh">0xfe</span><span class="p">,</span><span class="w"> </span><span class="mh">0x05</span><span class="p">,</span><span class="w"> </span><span class="mh">0xd2</span><span class="p">,</span><span class="w"> </span><span class="mh">0xd6</span><span class="p">,</span><span class="w"> </span><span class="mh">0xd3</span><span class="p">,</span><span class="w"> </span><span class="mh">0x74</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe5</span><span class="p">,</span><span class="w"> </span><span class="mh">0x2e</span><span class="p">,</span><span class="w"> </span><span class="mh">0x68</span><span class="p">,</span><span class="w"> </span><span class="mh">0x79</span><span class="p">,</span><span class="w"> </span><span class="mh">0x34</span><span class="p">,</span><span class="w"> </span><span class="mh">0x70</span><span class="p">,</span><span class="w"> </span><span class="mh">0x40</span><span class="p">,</span><span class="w"> </span><span class="mh">0x12</span><span class="p">,</span><span class="w"> </span><span class="mh">0xa8</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe1</span><span class="p">,</span><span class="w"> </span><span class="mh">0xb4</span><span class="p">,</span><span class="w"> </span><span class="mh">0x6c</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0xaa</span><span class="p">,</span><span class="w"> </span><span class="mh">0x46</span><span class="p">,</span><span class="w"> </span><span class="mh">0x73</span><span class="p">,</span><span class="w"> </span><span class="mh">0xcd</span><span class="p">,</span><span class="w"> </span><span class="mh">0x8d</span><span class="p">,</span><span class="w"> </span><span class="mh">0x17</span><span class="p">,</span><span class="w"> </span><span class="mh">0x72</span><span class="p">,</span><span class="w"> </span><span class="mh">0x67</span><span class="p">,</span><span class="w"> </span><span class="mh">0x32</span><span class="p">,</span><span class="w"> </span><span class="mh">0x42</span><span class="p">,</span><span class="w"> </span><span class="mh">0xdc</span><span class="p">,</span><span class="w"> </span><span class="mh">0x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0xd3</span><span class="p">,</span><span class="w"> </span><span class="mh">0x71</span><span class="p">,</span><span class="w"> </span><span class="mh">0x7e</span><span class="p">,</span><span class="w"> </span><span class="mh">0x8b</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x46</span><span class="p">,</span><span class="w"> </span><span class="mh">0x9b</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0x0a</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe9</span><span class="p">,</span><span class="w"> </span><span class="mh">0xb4</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0f</span><span class="p">,</span><span class="w"> </span><span class="mh">0xeb</span><span class="p">,</span><span class="w"> </span><span class="mh">0x70</span><span class="p">,</span><span class="w"> </span><span class="mh">0x52</span><span class="p">,</span><span class="w"> </span><span class="mh">0xdd</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0a</span><span class="p">,</span><span class="w"> </span><span class="mh">0x1c</span><span class="p">,</span><span class="w"> </span><span class="mh">0x7e</span><span class="p">,</span><span class="w"> </span><span class="mh">0x2e</span><span class="p">,</span><span class="w"> </span><span class="mh">0xb0</span><span class="p">,</span><span class="w"> </span><span class="mh">0x61</span><span class="p">,</span><span class="w"> </span><span class="mh">0xa6</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe1</span><span class="p">,</span><span class="w"> </span><span class="mh">0xa3</span><span class="p">,</span><span class="w"> </span><span class="mh">0x34</span><span class="p">,</span><span class="w"> </span><span class="mh">0x4b</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0x2a</span><span class="p">,</span><span class="w"> </span><span class="mh">0x3c</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc4</span><span class="p">,</span><span class="w"> </span><span class="mh">0x5d</span><span class="p">,</span><span class="w"> </span><span class="mh">0x42</span><span class="p">,</span><span class="w"> </span><span class="mh">0x05</span><span class="p">,</span><span class="w"> </span><span class="mh">0x58</span><span class="p">,</span><span class="w"> </span><span class="mh">0x25</span><span class="p">,</span><span class="w"> </span><span class="mh">0xd3</span><span class="p">,</span><span class="w"> </span><span class="mh">0xca</span><span class="p">,</span><span class="w"> </span><span class="mh">0x96</span><span class="p">,</span><span class="w"> </span><span class="mh">0x5c</span><span class="p">,</span><span class="w"> </span><span class="mh">0xb9</span><span class="p">,</span><span class="w"> </span><span class="mh">0x52</span><span class="p">,</span><span class="w"> </span><span class="mh">0xf9</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe9</span><span class="p">,</span><span class="w"> </span><span class="mh">0x80</span><span class="p">,</span><span class="w"> </span><span class="mh">0x75</span><span class="p">,</span><span class="w"> </span><span class="mh">0x3d</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0xc8</span><span class="p">,</span><span class="w"> </span><span class="mh">0x9f</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc7</span><span class="p">,</span><span class="w"> </span><span class="mh">0xb2</span><span class="p">,</span><span class="w"> </span><span class="mh">0xaa</span><span class="p">,</span><span class="w"> </span><span class="mh">0x95</span><span class="p">,</span><span class="w"> </span><span class="mh">0x2e</span><span class="p">,</span><span class="w"> </span><span class="mh">0x76</span><span class="p">,</span><span class="w"> </span><span class="mh">0xb3</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe1</span><span class="p">,</span><span class="w"> </span><span class="mh">0x48</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc1</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0a</span><span class="p">,</span><span class="w"> </span><span class="mh">0xa1</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0a</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe8</span><span class="p">,</span><span class="w"> </span><span class="mh">0xaf</span><span class="p">,</span><span class="w"> </span><span class="mh">0x41</span><span class="p">,</span><span class="w"> </span><span class="mh">0x28</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0xd2</span><span class="p">,</span><span class="w"> </span><span class="mh">0x16</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe1</span><span class="p">,</span><span class="w"> </span><span class="mh">0xa6</span><span class="p">,</span><span class="w"> </span><span class="mh">0xd0</span><span class="p">,</span><span class="w"> </span><span class="mh">0x73</span><span class="p">,</span><span class="w"> </span><span class="mh">0x51</span><span class="p">,</span><span class="w"> </span><span class="mh">0x73</span><span class="p">,</span><span class="w"> </span><span class="mh">0x79</span><span class="p">,</span><span class="w"> </span><span class="mh">0x98</span><span class="p">,</span><span class="w"> </span><span class="mh">0xd9</span><span class="p">,</span><span class="w"> </span><span class="mh">0xb9</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x50</span><span class="p">,</span><span class="w"> </span><span class="mh">0xa2</span><span class="p">,</span><span class="w"> </span><span class="mh">0x4d</span><span class="p">,</span><span class="w"> </span><span class="mh">0x99</span><span class="p">,</span><span class="w"> </span><span class="mh">0x18</span><span class="p">,</span><span class="w"> </span><span class="mh">0x90</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0x70</span><span class="p">,</span><span class="w"> </span><span class="mh">0x27</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe7</span><span class="p">,</span><span class="w"> </span><span class="mh">0x8d</span><span class="p">,</span><span class="w"> </span><span class="mh">0x56</span><span class="p">,</span><span class="w"> </span><span class="mh">0x45</span><span class="p">,</span><span class="w"> </span><span class="mh">0x34</span><span class="p">,</span><span class="w"> </span><span class="mh">0x1f</span><span class="p">,</span><span class="w"> </span><span class="mh">0xb9</span><span class="p">,</span><span class="w"> </span><span class="mh">0x30</span><span class="p">,</span><span class="w"> </span><span class="mh">0xda</span><span class="p">,</span><span class="w"> </span><span class="mh">0xec</span><span class="p">,</span><span class="w"> </span><span class="mh">0x4a</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x27</span><span class="p">,</span><span class="w"> </span><span class="mh">0x9f</span><span class="p">,</span><span class="w"> </span><span class="mh">0xfa</span><span class="p">,</span><span class="w"> </span><span class="mh">0x59</span><span class="p">,</span><span class="w"> </span><span class="mh">0x2e</span><span class="p">,</span>
<span class="w">    </span><span class="mh">0x36</span><span class="p">,</span><span class="w"> </span><span class="mh">0x77</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0xe2</span><span class="p">,</span><span class="w"> </span><span class="mh">0xb6</span><span class="p">,</span><span class="w"> </span><span class="mh">0xeb</span><span class="p">,</span><span class="w"> </span><span class="mh">0xd1</span><span class="p">,</span><span class="w"> </span><span class="mh">0x56</span><span class="p">,</span><span class="w"> </span><span class="mh">0x50</span><span class="p">,</span><span class="w"> </span><span class="mh">0x8e</span><span class="p">};</span>

<span class="cm">/* The example function for launching a protocomm instance over HTTP. */</span>
<span class="n">protocomm_t</span><span class="w"> </span><span class="o">*</span><span class="nf">start_pc</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">protocomm_t</span><span class="w"> </span><span class="o">*</span><span class="n">pc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">protocomm_new</span><span class="p">();</span>


<span class="w">    </span><span class="cm">/* Config for protocomm_httpd_start(). */</span>
<span class="w">    </span><span class="n">protocomm_httpd_config_t</span><span class="w"> </span><span class="n">pc_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PROTOCOMM_HTTPD_DEFAULT_CONFIG</span><span class="p">()</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="cm">/* Start the protocomm server on top of HTTP. */</span>
<span class="w">    </span><span class="n">protocomm_httpd_start</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pc_config</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Create Security2 params object from salt and verifier. It must be valid throughout the scope of protocomm endpoint. This does not need to be static, i.e., could be dynamically allocated and freed at the time of endpoint removal. */</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">protocomm_security2_params_t</span><span class="w"> </span><span class="n">sec2_params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">salt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">salt</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">salt_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">salt</span><span class="p">),</span>
<span class="w">        </span><span class="p">.</span><span class="n">verifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">verifier</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">verifier_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">verifier</span><span class="p">),</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="cm">/* Set security for communication at the application level. Just like for request handlers, setting security creates an endpoint and registers the handler provided by protocomm_security1. One can similarly use protocomm_security0. Only one type of security can be set for a protocomm instance at a time. */</span>
<span class="w">    </span><span class="n">protocomm_set_security</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;security_endpoint&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">protocomm_security2</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">sec2_params</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Private data passed to the endpoint must be valid throughout the scope of protocomm endpoint. This need not be static, i.e., could be dynamically allocated and freed at the time of endpoint removal. */</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">priv_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1234</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/* Add a new endpoint for the protocomm instance, identified by a unique name, and register a handler function along with the private data to be passed at the time of handler execution. Multiple endpoints can be added as long as they are identified by unique names. */</span>
<span class="w">    </span><span class="n">protocomm_add_endpoint</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;echo_req_endpoint&quot;</span><span class="p">,</span>
<span class="w">                           </span><span class="n">echo_req_handler</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="n">priv_data</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">pc</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* The example function for stopping a protocomm instance. */</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">stop_pc</span><span class="p">(</span><span class="n">protocomm_t</span><span class="w"> </span><span class="o">*</span><span class="n">pc</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/* Remove the endpoint identified by its unique name. */</span>
<span class="w">    </span><span class="n">protocomm_remove_endpoint</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;echo_req_endpoint&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Remove the security endpoint identified by its name. */</span>
<span class="w">    </span><span class="n">protocomm_unset_security</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;security_endpoint&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Stop the HTTP server. */</span>
<span class="w">    </span><span class="n">protocomm_httpd_stop</span><span class="p">(</span><span class="n">pc</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Delete, namely deallocate the protocomm instance. */</span>
<span class="w">    </span><span class="n">protocomm_delete</span><span class="p">(</span><span class="n">pc</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="softap-http-transport-example-with-security-1">
<h2>SoftAP + HTTP Transport Example with Security 1<a class="headerlink" href="#softap-http-transport-example-with-security-1" title="Permalink to this heading"></a></h2>
<p>For sample usage, see <a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/wifi_provisioning/src/scheme_softap.c">wifi_provisioning/src/scheme_softap.c</a>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* The endpoint handler to be registered with protocomm. This simply echoes back the received data. */</span>
<span class="n">esp_err_t</span><span class="w"> </span><span class="nf">echo_req_handler</span><span class="w"> </span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">session_id</span><span class="p">,</span>
<span class="w">                            </span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="kt">ssize_t</span><span class="w"> </span><span class="n">inlen</span><span class="p">,</span>
<span class="w">                            </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">**</span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="kt">ssize_t</span><span class="w"> </span><span class="o">*</span><span class="n">outlen</span><span class="p">,</span>
<span class="w">                            </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">priv_data</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/* Session ID may be used for persistence. */</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Session ID : %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">session_id</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Echo back the received data. */</span>
<span class="w">    </span><span class="o">*</span><span class="n">outlen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inlen</span><span class="p">;</span><span class="w">            </span><span class="cm">/* Output the data length updated. */</span>
<span class="w">    </span><span class="o">*</span><span class="n">outbuf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">inlen</span><span class="p">);</span><span class="w">    </span><span class="cm">/* This is to be deallocated outside. */</span>
<span class="w">    </span><span class="n">memcpy</span><span class="p">(</span><span class="o">*</span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="n">inlen</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Private data that was passed at the time of endpoint creation. */</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">priv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">priv_data</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">priv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Private data : %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">priv</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ESP_OK</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* The example function for launching a protocomm instance over HTTP. */</span>
<span class="n">protocomm_t</span><span class="w"> </span><span class="o">*</span><span class="nf">start_pc</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pop_string</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">protocomm_t</span><span class="w"> </span><span class="o">*</span><span class="n">pc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">protocomm_new</span><span class="p">();</span>


<span class="w">    </span><span class="cm">/* Config for protocomm_httpd_start(). */</span>
<span class="w">    </span><span class="n">protocomm_httpd_config_t</span><span class="w"> </span><span class="n">pc_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PROTOCOMM_HTTPD_DEFAULT_CONFIG</span><span class="p">()</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="cm">/* Start the protocomm server on top of HTTP. */</span>
<span class="w">    </span><span class="n">protocomm_httpd_start</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pc_config</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Create security1 params object from pop_string. It must be valid throughout the scope of protocomm endpoint. This need not be static, i.e., could be dynamically allocated and freed at the time of endpoint removal. */</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">protocomm_security1_params_t</span><span class="w"> </span><span class="n">sec1_params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">strdup</span><span class="p">(</span><span class="n">pop_string</span><span class="p">),</span>
<span class="w">        </span><span class="p">.</span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">pop_string</span><span class="p">)</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="cm">/* Set security for communication at the application level. Just like for request handlers, setting security creates an endpoint and registers the handler provided by protocomm_security1. One can similarly use protocomm_security0. Only one type of security can be set for a protocomm instance at a time. */</span>
<span class="w">    </span><span class="n">protocomm_set_security</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;security_endpoint&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">protocomm_security1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">sec1_params</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Private data passed to the endpoint must be valid throughout the scope of protocomm endpoint. This need not be static, i.e., could be dynamically allocated and freed at the time of endpoint removal. */</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">priv_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1234</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/* Add a new endpoint for the protocomm instance identified by a unique name, and register a handler function along with the private data to be passed at the time of handler execution. Multiple endpoints can be added as long as they are identified by unique names. */</span>
<span class="w">    </span><span class="n">protocomm_add_endpoint</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;echo_req_endpoint&quot;</span><span class="p">,</span>
<span class="w">                           </span><span class="n">echo_req_handler</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="n">priv_data</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">pc</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* The example function for stopping a protocomm instance. */</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">stop_pc</span><span class="p">(</span><span class="n">protocomm_t</span><span class="w"> </span><span class="o">*</span><span class="n">pc</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/* Remove the endpoint identified by its unique name. */</span>
<span class="w">    </span><span class="n">protocomm_remove_endpoint</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;echo_req_endpoint&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Remove the security endpoint identified by its name. */</span>
<span class="w">    </span><span class="n">protocomm_unset_security</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;security_endpoint&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Stop the HTTP server. */</span>
<span class="w">    </span><span class="n">protocomm_httpd_stop</span><span class="p">(</span><span class="n">pc</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Delete, namely deallocate the protocomm instance. */</span>
<span class="w">    </span><span class="n">protocomm_delete</span><span class="p">(</span><span class="n">pc</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="bluetooth-le-transport-example-with-security-0">
<h2>Bluetooth LE Transport Example with Security 0<a class="headerlink" href="#bluetooth-le-transport-example-with-security-0" title="Permalink to this heading"></a></h2>
<p>For sample usage, see <a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/wifi_provisioning/src/scheme_ble.c">wifi_provisioning/src/scheme_ble.c</a>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* The example function for launching a secure protocomm instance over Bluetooth LE. */</span>
<span class="n">protocomm_t</span><span class="w"> </span><span class="o">*</span><span class="nf">start_pc</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">protocomm_t</span><span class="w"> </span><span class="o">*</span><span class="n">pc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">protocomm_new</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/* Endpoint UUIDs */</span>
<span class="w">    </span><span class="n">protocomm_ble_name_uuid_t</span><span class="w"> </span><span class="n">nu_lookup_table</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span><span class="s">&quot;security_endpoint&quot;</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFF51</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="s">&quot;echo_req_endpoint&quot;</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFF52</span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="cm">/* Config for protocomm_ble_start(). */</span>
<span class="w">    </span><span class="n">protocomm_ble_config_t</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">service_uuid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="cm">/* LSB &lt;---------------------------------------</span>
<span class="cm">            * ---------------------------------------&gt; MSB */</span>
<span class="w">            </span><span class="mh">0xfb</span><span class="p">,</span><span class="w"> </span><span class="mh">0x34</span><span class="p">,</span><span class="w"> </span><span class="mh">0x9b</span><span class="p">,</span><span class="w"> </span><span class="mh">0x5f</span><span class="p">,</span><span class="w"> </span><span class="mh">0x80</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x80</span><span class="p">,</span>
<span class="w">            </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">.</span><span class="n">nu_lookup_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">nu_lookup_table</span><span class="p">)</span><span class="o">/</span><span class="k">sizeof</span><span class="p">(</span><span class="n">nu_lookup_table</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="w">        </span><span class="p">.</span><span class="n">nu_lookup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nu_lookup_table</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="cm">/* Start protocomm layer on top of Bluetooth LE. */</span>
<span class="w">    </span><span class="n">protocomm_ble_start</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">config</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* For protocomm_security0, Proof of Possession is not used, and can be kept NULL. */</span>
<span class="w">    </span><span class="n">protocomm_set_security</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;security_endpoint&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">protocomm_security0</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">protocomm_add_endpoint</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;echo_req_endpoint&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">echo_req_handler</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">pc</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* The example function for stopping a protocomm instance. */</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">stop_pc</span><span class="p">(</span><span class="n">protocomm_t</span><span class="w"> </span><span class="o">*</span><span class="n">pc</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">protocomm_remove_endpoint</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;echo_req_endpoint&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">protocomm_unset_security</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;security_endpoint&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Stop the Bluetooth LE protocomm service. */</span>
<span class="w">    </span><span class="n">protocomm_ble_stop</span><span class="p">(</span><span class="n">pc</span><span class="p">);</span>

<span class="w">    </span><span class="n">protocomm_delete</span><span class="p">(</span><span class="n">pc</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this heading"></a></h2>
<section id="header-file">
<h3>Header File<a class="headerlink" href="#header-file" title="Permalink to this heading"></a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/protocomm/include/common/protocomm.h">components/protocomm/include/common/protocomm.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;protocomm.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">protocomm</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">protocomm</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES protocomm
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES protocomm
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this heading"></a></h3>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv413protocomm_newv">
<span id="_CPPv313protocomm_newv"></span><span id="_CPPv213protocomm_newv"></span><span id="protocomm_new__void"></span><span class="target" id="protocomm_8h_1a37f028bb512faa053fbe02a00a891620"></span><a class="reference internal" href="#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_new</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv413protocomm_newv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Create a new protocomm instance. </p>
<p>This API will return a new dynamically allocated protocomm instance with all elements of the protocomm_t structure initialized to NULL.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>protocomm_t* : On success</p></li>
<li><p>NULL : No memory for allocating new instance </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv416protocomm_deleteP11protocomm_t">
<span id="_CPPv316protocomm_deleteP11protocomm_t"></span><span id="_CPPv216protocomm_deleteP11protocomm_t"></span><span id="protocomm_delete__protocomm_tP"></span><span class="target" id="protocomm_8h_1a9bdb95ea5ab65d942405691a2f902ebe"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_delete</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pc</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv416protocomm_deleteP11protocomm_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Delete a protocomm instance. </p>
<p>This API will deallocate a protocomm instance that was created using <code class="docutils literal notranslate"><span class="pre">protocomm_new()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pc</strong> -- <strong>[in]</strong> Pointer to the protocomm instance to be deleted </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv422protocomm_add_endpointP11protocomm_tPKc23protocomm_req_handler_tPv">
<span id="_CPPv322protocomm_add_endpointP11protocomm_tPKc23protocomm_req_handler_tPv"></span><span id="_CPPv222protocomm_add_endpointP11protocomm_tPKc23protocomm_req_handler_tPv"></span><span id="protocomm_add_endpoint__protocomm_tP.cCP.protocomm_req_handler_t.voidP"></span><span class="target" id="protocomm_8h_1a9db8520cf4afd44ed0a4f4e6fddf428c"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_add_endpoint</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">ep_name</span></span>, <a class="reference internal" href="#_CPPv423protocomm_req_handler_t" title="protocomm_req_handler_t"><span class="n"><span class="pre">protocomm_req_handler_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">h</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">priv_data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv422protocomm_add_endpointP11protocomm_tPKc23protocomm_req_handler_tPv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Add endpoint request handler for a protocomm instance. </p>
<p>This API will bind an endpoint handler function to the specified endpoint name, along with any private data that needs to be pass to the handler at the time of call.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>An endpoint must be bound to a valid protocomm instance, created using <code class="docutils literal notranslate"><span class="pre">protocomm_new()</span></code>.</p></li>
<li><p>This function internally calls the registered <code class="docutils literal notranslate"><span class="pre">add_endpoint()</span></code> function of the selected transport which is a member of the protocomm_t instance structure.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pc</strong> -- <strong>[in]</strong> Pointer to the protocomm instance </p></li>
<li><p><strong>ep_name</strong> -- <strong>[in]</strong> Endpoint identifier(name) string </p></li>
<li><p><strong>h</strong> -- <strong>[in]</strong> Endpoint handler function </p></li>
<li><p><strong>priv_data</strong> -- <strong>[in]</strong> Pointer to private data to be passed as a parameter to the handler function on call. Pass NULL if not needed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_FAIL : Error adding endpoint / Endpoint with this name already exists</p></li>
<li><p>ESP_ERR_NO_MEM : Error allocating endpoint resource</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null instance/name/handler arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv425protocomm_remove_endpointP11protocomm_tPKc">
<span id="_CPPv325protocomm_remove_endpointP11protocomm_tPKc"></span><span id="_CPPv225protocomm_remove_endpointP11protocomm_tPKc"></span><span id="protocomm_remove_endpoint__protocomm_tP.cCP"></span><span class="target" id="protocomm_8h_1a789adb75606137496368a77cfed1daef"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_remove_endpoint</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">ep_name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv425protocomm_remove_endpointP11protocomm_tPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>Remove endpoint request handler for a protocomm instance. </p>
<p>This API will remove a registered endpoint handler identified by an endpoint name.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This function internally calls the registered <code class="docutils literal notranslate"><span class="pre">remove_endpoint()</span></code> function which is a member of the protocomm_t instance structure.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pc</strong> -- <strong>[in]</strong> Pointer to the protocomm instance </p></li>
<li><p><strong>ep_name</strong> -- <strong>[in]</strong> Endpoint identifier(name) string</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_ERR_NOT_FOUND : Endpoint with specified name doesn't exist</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null instance/name arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv422protocomm_open_sessionP11protocomm_t8uint32_t">
<span id="_CPPv322protocomm_open_sessionP11protocomm_t8uint32_t"></span><span id="_CPPv222protocomm_open_sessionP11protocomm_t8uint32_t"></span><span id="protocomm_open_session__protocomm_tP.uint32_t"></span><span class="target" id="protocomm_8h_1a8f6226f1d5391a18d6b0c71e7f76e4b2"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_open_session</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pc</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">session_id</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv422protocomm_open_sessionP11protocomm_t8uint32_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Allocates internal resources for new transport session. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>An endpoint must be bound to a valid protocomm instance, created using <code class="docutils literal notranslate"><span class="pre">protocomm_new()</span></code>.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pc</strong> -- <strong>[in]</strong> Pointer to the protocomm instance </p></li>
<li><p><strong>session_id</strong> -- <strong>[in]</strong> Unique ID for a communication session</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Request handled successfully</p></li>
<li><p>ESP_ERR_NO_MEM : Error allocating internal resource</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null instance/name arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv423protocomm_close_sessionP11protocomm_t8uint32_t">
<span id="_CPPv323protocomm_close_sessionP11protocomm_t8uint32_t"></span><span id="_CPPv223protocomm_close_sessionP11protocomm_t8uint32_t"></span><span id="protocomm_close_session__protocomm_tP.uint32_t"></span><span class="target" id="protocomm_8h_1a67ff69125ec2eedeb39babdb2a3031f2"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_close_session</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pc</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">session_id</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv423protocomm_close_sessionP11protocomm_t8uint32_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Frees internal resources used by a transport session. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>An endpoint must be bound to a valid protocomm instance, created using <code class="docutils literal notranslate"><span class="pre">protocomm_new()</span></code>.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pc</strong> -- <strong>[in]</strong> Pointer to the protocomm instance </p></li>
<li><p><strong>session_id</strong> -- <strong>[in]</strong> Unique ID for a communication session</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Request handled successfully</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null instance/name arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv420protocomm_req_handleP11protocomm_tPKc8uint32_tPK7uint8_t7ssize_tPP7uint8_tP7ssize_t">
<span id="_CPPv320protocomm_req_handleP11protocomm_tPKc8uint32_tPK7uint8_t7ssize_tPP7uint8_tP7ssize_t"></span><span id="_CPPv220protocomm_req_handleP11protocomm_tPKc8uint32_tPK7uint8_t7ssize_tPP7uint8_tP7ssize_t"></span><span id="protocomm_req_handle__protocomm_tP.cCP.uint32_t.uint8_tCP.ssize_t.uint8_tPP.ssize_tP"></span><span class="target" id="protocomm_8h_1a66546a0610c41163712396e57b887c99"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_req_handle</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">ep_name</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">session_id</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">inbuf</span></span>, <span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">inlen</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">outbuf</span></span>, <span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">outlen</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv420protocomm_req_handleP11protocomm_tPKc8uint32_tPK7uint8_t7ssize_tPP7uint8_tP7ssize_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Calls the registered handler of an endpoint session for processing incoming data and generating the response. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>An endpoint must be bound to a valid protocomm instance, created using <code class="docutils literal notranslate"><span class="pre">protocomm_new()</span></code>.</p></li>
<li><p>Resulting output buffer must be deallocated by the caller.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pc</strong> -- <strong>[in]</strong> Pointer to the protocomm instance </p></li>
<li><p><strong>ep_name</strong> -- <strong>[in]</strong> Endpoint identifier(name) string </p></li>
<li><p><strong>session_id</strong> -- <strong>[in]</strong> Unique ID for a communication session </p></li>
<li><p><strong>inbuf</strong> -- <strong>[in]</strong> Input buffer contains input request data which is to be processed by the registered handler </p></li>
<li><p><strong>inlen</strong> -- <strong>[in]</strong> Length of the input buffer </p></li>
<li><p><strong>outbuf</strong> -- <strong>[out]</strong> Pointer to internally allocated output buffer, where the resulting response data output from the registered handler is to be stored </p></li>
<li><p><strong>outlen</strong> -- <strong>[out]</strong> Buffer length of the allocated output buffer</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Request handled successfully</p></li>
<li><p>ESP_FAIL : Internal error in execution of registered handler</p></li>
<li><p>ESP_ERR_NO_MEM : Error allocating internal resource</p></li>
<li><p>ESP_ERR_NOT_FOUND : Endpoint with specified name doesn't exist</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null instance/name arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv422protocomm_set_securityP11protocomm_tPKcPK20protocomm_security_tPKv">
<span id="_CPPv322protocomm_set_securityP11protocomm_tPKcPK20protocomm_security_tPKv"></span><span id="_CPPv222protocomm_set_securityP11protocomm_tPKcPK20protocomm_security_tPKv"></span><span id="protocomm_set_security__protocomm_tP.cCP.protocomm_security_tCP.voidCP"></span><span class="target" id="protocomm_8h_1abd93a7a33d9af12d1484fc3793179ccc"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_set_security</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">ep_name</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv420protocomm_security_t" title="protocomm_security_t"><span class="n"><span class="pre">protocomm_security_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">sec</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">sec_params</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv422protocomm_set_securityP11protocomm_tPKcPK20protocomm_security_tPKv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Add endpoint security for a protocomm instance. </p>
<p>This API will bind a security session establisher to the specified endpoint name, along with any proof of possession that may be required for authenticating a session client.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>An endpoint must be bound to a valid protocomm instance, created using <code class="docutils literal notranslate"><span class="pre">protocomm_new()</span></code>.</p></li>
<li><p>The choice of security can be any <code class="docutils literal notranslate"><span class="pre">protocomm_security_t</span></code> instance. Choices <code class="docutils literal notranslate"><span class="pre">protocomm_security0</span></code> and <code class="docutils literal notranslate"><span class="pre">protocomm_security1</span></code> and <code class="docutils literal notranslate"><span class="pre">protocomm_security2</span></code> are readily available.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pc</strong> -- <strong>[in]</strong> Pointer to the protocomm instance </p></li>
<li><p><strong>ep_name</strong> -- <strong>[in]</strong> Endpoint identifier(name) string </p></li>
<li><p><strong>sec</strong> -- <strong>[in]</strong> Pointer to endpoint security instance </p></li>
<li><p><strong>sec_params</strong> -- <strong>[in]</strong> Pointer to security params (NULL if not needed) The pointer should contain the security params struct of appropriate security version. For protocomm security version 1 and 2 sec_params should contain pointer to struct of type protocomm_security1_params_t and protocmm_security2_params_t respectively. The contents of this pointer must be valid till the security session has been running and is not closed. </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_FAIL : Error adding endpoint / Endpoint with this name already exists</p></li>
<li><p>ESP_ERR_INVALID_STATE : Security endpoint already set</p></li>
<li><p>ESP_ERR_NO_MEM : Error allocating endpoint resource</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null instance/name/handler arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv424protocomm_unset_securityP11protocomm_tPKc">
<span id="_CPPv324protocomm_unset_securityP11protocomm_tPKc"></span><span id="_CPPv224protocomm_unset_securityP11protocomm_tPKc"></span><span id="protocomm_unset_security__protocomm_tP.cCP"></span><span class="target" id="protocomm_8h_1a04f61745971fe767703988f33facae24"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_unset_security</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">ep_name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv424protocomm_unset_securityP11protocomm_tPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>Remove endpoint security for a protocomm instance. </p>
<p>This API will remove a registered security endpoint identified by an endpoint name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pc</strong> -- <strong>[in]</strong> Pointer to the protocomm instance </p></li>
<li><p><strong>ep_name</strong> -- <strong>[in]</strong> Endpoint identifier(name) string</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_ERR_NOT_FOUND : Endpoint with specified name doesn't exist</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null instance/name arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv421protocomm_set_versionP11protocomm_tPKcPKc">
<span id="_CPPv321protocomm_set_versionP11protocomm_tPKcPKc"></span><span id="_CPPv221protocomm_set_versionP11protocomm_tPKcPKc"></span><span id="protocomm_set_version__protocomm_tP.cCP.cCP"></span><span class="target" id="protocomm_8h_1a4f9ec6fa55bde3d3e7d2af9c033ce560"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_set_version</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">ep_name</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">version</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv421protocomm_set_versionP11protocomm_tPKcPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set endpoint for version verification. </p>
<p>This API can be used for setting an application specific protocol version which can be verified by clients through the endpoint.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>An endpoint must be bound to a valid protocomm instance, created using <code class="docutils literal notranslate"><span class="pre">protocomm_new()</span></code>.</p></li>
</ul>
</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pc</strong> -- <strong>[in]</strong> Pointer to the protocomm instance </p></li>
<li><p><strong>ep_name</strong> -- <strong>[in]</strong> Endpoint identifier(name) string </p></li>
<li><p><strong>version</strong> -- <strong>[in]</strong> Version identifier(name) string</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_FAIL : Error adding endpoint / Endpoint with this name already exists</p></li>
<li><p>ESP_ERR_INVALID_STATE : Version endpoint already set</p></li>
<li><p>ESP_ERR_NO_MEM : Error allocating endpoint resource</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null instance/name/handler arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv423protocomm_unset_versionP11protocomm_tPKc">
<span id="_CPPv323protocomm_unset_versionP11protocomm_tPKc"></span><span id="_CPPv223protocomm_unset_versionP11protocomm_tPKc"></span><span id="protocomm_unset_version__protocomm_tP.cCP"></span><span class="target" id="protocomm_8h_1ac252f6e897105d35824e843c99230edd"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_unset_version</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">ep_name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv423protocomm_unset_versionP11protocomm_tPKc" title="Permalink to this definition"></a><br /></dt>
<dd><p>Remove version verification endpoint from a protocomm instance. </p>
<p>This API will remove a registered version endpoint identified by an endpoint name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pc</strong> -- <strong>[in]</strong> Pointer to the protocomm instance </p></li>
<li><p><strong>ep_name</strong> -- <strong>[in]</strong> Endpoint identifier(name) string</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_ERR_NOT_FOUND : Endpoint with specified name doesn't exist</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null instance/name arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv425protocomm_get_sec_versionP11protocomm_tPiP7uint8_t">
<span id="_CPPv325protocomm_get_sec_versionP11protocomm_tPiP7uint8_t"></span><span id="_CPPv225protocomm_get_sec_versionP11protocomm_tPiP7uint8_t"></span><span id="protocomm_get_sec_version__protocomm_tP.iP.uint8_tP"></span><span class="target" id="protocomm_8h_1a759045f1ffc984b51825c7cf898e23ac"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_get_sec_version</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pc</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">sec_ver</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">sec_patch_ver</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv425protocomm_get_sec_versionP11protocomm_tPiP7uint8_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the security version of the protocomm instance. </p>
<p>This API will return the security version of the protocomm instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pc</strong> -- <strong>[in]</strong> Pointer to the protocomm instance </p></li>
<li><p><strong>sec_ver</strong> -- <strong>[out]</strong> Pointer to the security version </p></li>
<li><p><strong>sec_patch_ver</strong> -- <strong>[out]</strong> Pointer to the security patch version</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null instance/name arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="type-definitions">
<h3>Type Definitions<a class="headerlink" href="#type-definitions" title="Permalink to this heading"></a></h3>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv423protocomm_req_handler_t">
<span id="_CPPv323protocomm_req_handler_t"></span><span id="_CPPv223protocomm_req_handler_t"></span><span id="protocomm_req_handler_t"></span><span class="target" id="protocomm_8h_1af0bb71b922cf9a418a1151ad553c8f95"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_req_handler_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">session_id</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">inbuf</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="n"><span class="pre">inlen</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">outbuf</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">outlen</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">priv_data</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv423protocomm_req_handler_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function prototype for protocomm endpoint handler. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv411protocomm_t">
<span id="_CPPv311protocomm_t"></span><span id="_CPPv211protocomm_t"></span><span id="protocomm_t"></span><span class="target" id="protocomm_8h_1a27b1e4598dccc907b988b4c256cb2bf9"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">protocomm</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_t</span></span></span><a class="headerlink" href="#_CPPv411protocomm_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>This structure corresponds to a unique instance of protocomm returned when the API <code class="docutils literal notranslate"><span class="pre">protocomm_new()</span></code> is called. The remaining Protocomm APIs require this object as the first parameter. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Structure of the protocomm object is kept private </p>
</div>
</dd></dl>

</section>
<section id="id2">
<h3>Header File<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/protocomm/include/security/protocomm_security.h">components/protocomm/include/security/protocomm_security.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;protocomm_security.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">protocomm</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">protocomm</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES protocomm
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES protocomm
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="structures">
<h3>Structures<a class="headerlink" href="#structures" title="Permalink to this heading"></a></h3>
<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv426protocomm_security1_params">
<span id="_CPPv326protocomm_security1_params"></span><span id="_CPPv226protocomm_security1_params"></span><span id="protocomm_security1_params"></span><span class="target" id="structprotocomm__security1__params"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_security1_params</span></span></span><a class="headerlink" href="#_CPPv426protocomm_security1_params" title="Permalink to this definition"></a><br /></dt>
<dd><p>Protocomm Security 1 parameters: Proof Of Possession. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N26protocomm_security1_params4dataE">
<span id="_CPPv3N26protocomm_security1_params4dataE"></span><span id="_CPPv2N26protocomm_security1_params4dataE"></span><span id="protocomm_security1_params::data__uint8_tCP"></span><span class="target" id="structprotocomm__security1__params_1a7e3cb3fb2b5570ec9292209d2c68166c"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">data</span></span></span><a class="headerlink" href="#_CPPv4N26protocomm_security1_params4dataE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to buffer containing the proof of possession data </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N26protocomm_security1_params3lenE">
<span id="_CPPv3N26protocomm_security1_params3lenE"></span><span id="_CPPv2N26protocomm_security1_params3lenE"></span><span id="protocomm_security1_params::len__uint16_t"></span><span class="target" id="structprotocomm__security1__params_1a279205c3f1ad95ec4bdf60cc587a6c02"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">len</span></span></span><a class="headerlink" href="#_CPPv4N26protocomm_security1_params3lenE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Length (in bytes) of the proof of possession data </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv426protocomm_security2_params">
<span id="_CPPv326protocomm_security2_params"></span><span id="_CPPv226protocomm_security2_params"></span><span id="protocomm_security2_params"></span><span class="target" id="structprotocomm__security2__params"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_security2_params</span></span></span><a class="headerlink" href="#_CPPv426protocomm_security2_params" title="Permalink to this definition"></a><br /></dt>
<dd><p>Protocomm Security 2 parameters: Salt and Verifier. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N26protocomm_security2_params4saltE">
<span id="_CPPv3N26protocomm_security2_params4saltE"></span><span id="_CPPv2N26protocomm_security2_params4saltE"></span><span id="protocomm_security2_params::salt__cCP"></span><span class="target" id="structprotocomm__security2__params_1a6a81e5cefe52c6991efc1f3a21d9958a"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">salt</span></span></span><a class="headerlink" href="#_CPPv4N26protocomm_security2_params4saltE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to the buffer containing the salt </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N26protocomm_security2_params8salt_lenE">
<span id="_CPPv3N26protocomm_security2_params8salt_lenE"></span><span id="_CPPv2N26protocomm_security2_params8salt_lenE"></span><span id="protocomm_security2_params::salt_len__uint16_t"></span><span class="target" id="structprotocomm__security2__params_1ac9a8d705fe4a34b07b257c6d0ba86ddc"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">salt_len</span></span></span><a class="headerlink" href="#_CPPv4N26protocomm_security2_params8salt_lenE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Length (in bytes) of the salt </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N26protocomm_security2_params8verifierE">
<span id="_CPPv3N26protocomm_security2_params8verifierE"></span><span id="_CPPv2N26protocomm_security2_params8verifierE"></span><span id="protocomm_security2_params::verifier__cCP"></span><span class="target" id="structprotocomm__security2__params_1a00551f2135f87dc76e133814f9ac9c6e"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">verifier</span></span></span><a class="headerlink" href="#_CPPv4N26protocomm_security2_params8verifierE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to the buffer containing the verifier </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N26protocomm_security2_params12verifier_lenE">
<span id="_CPPv3N26protocomm_security2_params12verifier_lenE"></span><span id="_CPPv2N26protocomm_security2_params12verifier_lenE"></span><span id="protocomm_security2_params::verifier_len__uint16_t"></span><span class="target" id="structprotocomm__security2__params_1ac8551c5aa2d1116771393376fb3d9e94"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">verifier_len</span></span></span><a class="headerlink" href="#_CPPv4N26protocomm_security2_params12verifier_lenE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Length (in bytes) of the verifier </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv418protocomm_security">
<span id="_CPPv318protocomm_security"></span><span id="_CPPv218protocomm_security"></span><span id="protocomm_security"></span><span class="target" id="structprotocomm__security"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_security</span></span></span><a class="headerlink" href="#_CPPv418protocomm_security" title="Permalink to this definition"></a><br /></dt>
<dd><p>Protocomm security object structure. </p>
<p>The member functions are used for implementing secure protocomm sessions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This structure should not have any dynamic members to allow re-entrancy </p>
</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18protocomm_security3verE">
<span id="_CPPv3N18protocomm_security3verE"></span><span id="_CPPv2N18protocomm_security3verE"></span><span id="protocomm_security::ver__i"></span><span class="target" id="structprotocomm__security_1ab49e4bf557883a1f4620d235e6418c59"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ver</span></span></span><a class="headerlink" href="#_CPPv4N18protocomm_security3verE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Unique version number of security implementation </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18protocomm_security9patch_verE">
<span id="_CPPv3N18protocomm_security9patch_verE"></span><span id="_CPPv2N18protocomm_security9patch_verE"></span><span id="protocomm_security::patch_ver__uint8_t"></span><span class="target" id="structprotocomm__security_1a3af919037fe0e4ac52a82fe8fe12a236"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">patch_ver</span></span></span><a class="headerlink" href="#_CPPv4N18protocomm_security9patch_verE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Patch version number of security implementation </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18protocomm_security4initE">
<span id="_CPPv3N18protocomm_security4initE"></span><span id="_CPPv2N18protocomm_security4initE"></span><span class="target" id="structprotocomm__security_1aeb33c465ce70e0cce46b961bb9b1a2f3"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">init</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv427protocomm_security_handle_t" title="protocomm_security_handle_t"><span class="n"><span class="pre">protocomm_security_handle_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">handle</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N18protocomm_security4initE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function for initializing/allocating security infrastructure </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18protocomm_security7cleanupE">
<span id="_CPPv3N18protocomm_security7cleanupE"></span><span id="_CPPv2N18protocomm_security7cleanupE"></span><span class="target" id="structprotocomm__security_1a6e4e76fc63b99b4894fe926c041b0a65"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">cleanup</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv427protocomm_security_handle_t" title="protocomm_security_handle_t"><span class="n"><span class="pre">protocomm_security_handle_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">handle</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N18protocomm_security7cleanupE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function for deallocating security infrastructure </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18protocomm_security21new_transport_sessionE">
<span id="_CPPv3N18protocomm_security21new_transport_sessionE"></span><span id="_CPPv2N18protocomm_security21new_transport_sessionE"></span><span class="target" id="structprotocomm__security_1a316fb471136b4a9bc5dd3877add7024a"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">new_transport_session</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv427protocomm_security_handle_t" title="protocomm_security_handle_t"><span class="n"><span class="pre">protocomm_security_handle_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">handle</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">session_id</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N18protocomm_security21new_transport_sessionE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Starts new secure transport session with specified ID </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18protocomm_security23close_transport_sessionE">
<span id="_CPPv3N18protocomm_security23close_transport_sessionE"></span><span id="_CPPv2N18protocomm_security23close_transport_sessionE"></span><span class="target" id="structprotocomm__security_1a3fc7becde4139cbe4f4cc1aa77d1fb49"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">close_transport_session</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv427protocomm_security_handle_t" title="protocomm_security_handle_t"><span class="n"><span class="pre">protocomm_security_handle_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">handle</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">session_id</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N18protocomm_security23close_transport_sessionE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Closes a secure transport session with specified ID </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18protocomm_security20security_req_handlerE">
<span id="_CPPv3N18protocomm_security20security_req_handlerE"></span><span id="_CPPv2N18protocomm_security20security_req_handlerE"></span><span class="target" id="structprotocomm__security_1af6dc81dcbe79159e9b9f69696dd1584f"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">security_req_handler</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv427protocomm_security_handle_t" title="protocomm_security_handle_t"><span class="n"><span class="pre">protocomm_security_handle_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">handle</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sec_params</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">session_id</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">inbuf</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="n"><span class="pre">inlen</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">outbuf</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">outlen</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">priv_data</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N18protocomm_security20security_req_handlerE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handler function for authenticating connection request and establishing secure session </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18protocomm_security7encryptE">
<span id="_CPPv3N18protocomm_security7encryptE"></span><span id="_CPPv2N18protocomm_security7encryptE"></span><span class="target" id="structprotocomm__security_1ab9f7d56bd54fe7d3fc3dbbc99bb6e9f0"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">encrypt</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv427protocomm_security_handle_t" title="protocomm_security_handle_t"><span class="n"><span class="pre">protocomm_security_handle_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">handle</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">session_id</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">inbuf</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="n"><span class="pre">inlen</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">outbuf</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">outlen</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N18protocomm_security7encryptE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function which implements the encryption algorithm </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18protocomm_security7decryptE">
<span id="_CPPv3N18protocomm_security7decryptE"></span><span id="_CPPv2N18protocomm_security7decryptE"></span><span class="target" id="structprotocomm__security_1a12594d57086ebf0d835948153324b66d"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">decrypt</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv427protocomm_security_handle_t" title="protocomm_security_handle_t"><span class="n"><span class="pre">protocomm_security_handle_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">handle</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">session_id</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">inbuf</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="n"><span class="pre">inlen</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">outbuf</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">outlen</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N18protocomm_security7decryptE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function which implements the decryption algorithm </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="id3">
<h3>Type Definitions<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h3>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv428protocomm_security1_params_t">
<span id="_CPPv328protocomm_security1_params_t"></span><span id="_CPPv228protocomm_security1_params_t"></span><span id="protocomm_security1_params_t"></span><span class="target" id="protocomm__security_8h_1ae7a1b65aeafe692d2e39ead7df5b8926"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv426protocomm_security1_params" title="protocomm_security1_params"><span class="n"><span class="pre">protocomm_security1_params</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_security1_params_t</span></span></span><a class="headerlink" href="#_CPPv428protocomm_security1_params_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Protocomm Security 1 parameters: Proof Of Possession. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv424protocomm_security_pop_t">
<span id="_CPPv324protocomm_security_pop_t"></span><span id="_CPPv224protocomm_security_pop_t"></span><span id="protocomm_security_pop_t"></span><span class="target" id="protocomm__security_8h_1a4850233e7dbb6fca187bfc7046c2ee57"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv428protocomm_security1_params_t" title="protocomm_security1_params_t"><span class="n"><span class="pre">protocomm_security1_params_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_security_pop_t</span></span></span><a class="headerlink" href="#_CPPv424protocomm_security_pop_t" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv428protocomm_security2_params_t">
<span id="_CPPv328protocomm_security2_params_t"></span><span id="_CPPv228protocomm_security2_params_t"></span><span id="protocomm_security2_params_t"></span><span class="target" id="protocomm__security_8h_1acaa0e54a139970e2e112ea343b51042a"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv426protocomm_security2_params" title="protocomm_security2_params"><span class="n"><span class="pre">protocomm_security2_params</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_security2_params_t</span></span></span><a class="headerlink" href="#_CPPv428protocomm_security2_params_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Protocomm Security 2 parameters: Salt and Verifier. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv427protocomm_security_handle_t">
<span id="_CPPv327protocomm_security_handle_t"></span><span id="_CPPv227protocomm_security_handle_t"></span><span id="protocomm_security_handle_t"></span><span class="target" id="protocomm__security_8h_1aec904c117ecfd4a89846c5b4b95e9d9d"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_security_handle_t</span></span></span><a class="headerlink" href="#_CPPv427protocomm_security_handle_t" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv420protocomm_security_t">
<span id="_CPPv320protocomm_security_t"></span><span id="_CPPv220protocomm_security_t"></span><span id="protocomm_security_t"></span><span class="target" id="protocomm__security_8h_1a53ee55ae5cc032899f8e3a1d66d06207"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv418protocomm_security" title="protocomm_security"><span class="n"><span class="pre">protocomm_security</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_security_t</span></span></span><a class="headerlink" href="#_CPPv420protocomm_security_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Protocomm security object structure. </p>
<p>The member functions are used for implementing secure protocomm sessions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This structure should not have any dynamic members to allow re-entrancy </p>
</div>
</dd></dl>

</section>
<section id="enumerations">
<h3>Enumerations<a class="headerlink" href="#enumerations" title="Permalink to this heading"></a></h3>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv434protocomm_security_session_event_t">
<span id="_CPPv334protocomm_security_session_event_t"></span><span id="_CPPv234protocomm_security_session_event_t"></span><span class="target" id="protocomm__security_8h_1a367576588da70165c2fd4aca1da97a82"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_security_session_event_t</span></span></span><a class="headerlink" href="#_CPPv434protocomm_security_session_event_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Events generated by the protocomm security layer. </p>
<p>These events are generated while establishing secured session. </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N34protocomm_security_session_event_t35PROTOCOMM_SECURITY_SESSION_SETUP_OKE">
<span id="_CPPv3N34protocomm_security_session_event_t35PROTOCOMM_SECURITY_SESSION_SETUP_OKE"></span><span id="_CPPv2N34protocomm_security_session_event_t35PROTOCOMM_SECURITY_SESSION_SETUP_OKE"></span><span class="target" id="protocomm__security_8h_1a367576588da70165c2fd4aca1da97a82abb50016b2a64c8b607651f0826c280c8"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PROTOCOMM_SECURITY_SESSION_SETUP_OK</span></span></span><a class="headerlink" href="#_CPPv4N34protocomm_security_session_event_t35PROTOCOMM_SECURITY_SESSION_SETUP_OKE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Secured session established successfully </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N34protocomm_security_session_event_t50PROTOCOMM_SECURITY_SESSION_INVALID_SECURITY_PARAMSE">
<span id="_CPPv3N34protocomm_security_session_event_t50PROTOCOMM_SECURITY_SESSION_INVALID_SECURITY_PARAMSE"></span><span id="_CPPv2N34protocomm_security_session_event_t50PROTOCOMM_SECURITY_SESSION_INVALID_SECURITY_PARAMSE"></span><span class="target" id="protocomm__security_8h_1a367576588da70165c2fd4aca1da97a82aa7b0b704cb3dc598cdb2edd05ba81287"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PROTOCOMM_SECURITY_SESSION_INVALID_SECURITY_PARAMS</span></span></span><a class="headerlink" href="#_CPPv4N34protocomm_security_session_event_t50PROTOCOMM_SECURITY_SESSION_INVALID_SECURITY_PARAMSE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Received invalid (NULL) security parameters (username / client public-key) </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N34protocomm_security_session_event_t47PROTOCOMM_SECURITY_SESSION_CREDENTIALS_MISMATCHE">
<span id="_CPPv3N34protocomm_security_session_event_t47PROTOCOMM_SECURITY_SESSION_CREDENTIALS_MISMATCHE"></span><span id="_CPPv2N34protocomm_security_session_event_t47PROTOCOMM_SECURITY_SESSION_CREDENTIALS_MISMATCHE"></span><span class="target" id="protocomm__security_8h_1a367576588da70165c2fd4aca1da97a82a07db2990f1cc01f843446b822f248a88"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PROTOCOMM_SECURITY_SESSION_CREDENTIALS_MISMATCH</span></span></span><a class="headerlink" href="#_CPPv4N34protocomm_security_session_event_t47PROTOCOMM_SECURITY_SESSION_CREDENTIALS_MISMATCHE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Received incorrect credentials (username / PoP) </p>
</dd></dl>

</dd></dl>

</section>
<section id="id4">
<h3>Header File<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/protocomm/include/security/protocomm_security0.h">components/protocomm/include/security/protocomm_security0.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;protocomm_security0.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">protocomm</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">protocomm</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES protocomm
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES protocomm
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id5">
<h3>Header File<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/protocomm/include/security/protocomm_security1.h">components/protocomm/include/security/protocomm_security1.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;protocomm_security1.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">protocomm</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">protocomm</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES protocomm
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES protocomm
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id6">
<h3>Header File<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/protocomm/include/security/protocomm_security2.h">components/protocomm/include/security/protocomm_security2.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;protocomm_security2.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">protocomm</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">protocomm</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES protocomm
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES protocomm
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id7">
<h3>Header File<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/protocomm/include/crypto/srp6a/esp_srp.h">components/protocomm/include/crypto/srp6a/esp_srp.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;esp_srp.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">protocomm</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">protocomm</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES protocomm
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES protocomm
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id8">
<h3>Functions<a class="headerlink" href="#id8" title="Permalink to this heading"></a></h3>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv412esp_srp_init13esp_ng_type_t">
<span id="_CPPv312esp_srp_init13esp_ng_type_t"></span><span id="_CPPv212esp_srp_init13esp_ng_type_t"></span><span id="esp_srp_init__esp_ng_type_t"></span><span class="target" id="esp__srp_8h_1ace059dd5f934666bed606b003018a758"></span><a class="reference internal" href="#_CPPv416esp_srp_handle_t" title="esp_srp_handle_t"><span class="n"><span class="pre">esp_srp_handle_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">esp_srp_init</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv413esp_ng_type_t" title="esp_ng_type_t"><span class="n"><span class="pre">esp_ng_type_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">ng</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv412esp_srp_init13esp_ng_type_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initialize srp context for given NG type. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the handle gets freed with <code class="docutils literal notranslate"><span class="pre">esp_srp_free</span></code></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ng</strong> -- NG type given by <code class="docutils literal notranslate"><span class="pre">esp_ng_type_t</span></code></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>esp_srp_handle_t* srp handle</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv412esp_srp_freeP16esp_srp_handle_t">
<span id="_CPPv312esp_srp_freeP16esp_srp_handle_t"></span><span id="_CPPv212esp_srp_freeP16esp_srp_handle_t"></span><span id="esp_srp_free__esp_srp_handle_tP"></span><span class="target" id="esp__srp_8h_1ae5c226d5e1f3419ddb491b90f4dd72f2"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_srp_free</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv416esp_srp_handle_t" title="esp_srp_handle_t"><span class="n"><span class="pre">esp_srp_handle_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">hd</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv412esp_srp_freeP16esp_srp_handle_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>free esp_srp_context </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>hd</strong> -- handle to be free </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv418esp_srp_srv_pubkeyP16esp_srp_handle_tPKciPKciiPPcPiPPc">
<span id="_CPPv318esp_srp_srv_pubkeyP16esp_srp_handle_tPKciPKciiPPcPiPPc"></span><span id="_CPPv218esp_srp_srv_pubkeyP16esp_srp_handle_tPKciPKciiPPcPiPPc"></span><span id="esp_srp_srv_pubkey__esp_srp_handle_tP.cCP.i.cCP.i.i.cPP.iP.cPP"></span><span class="target" id="esp__srp_8h_1a70b9e12d515b2aba95c50cb77bf5a833"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_srp_srv_pubkey</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv416esp_srp_handle_t" title="esp_srp_handle_t"><span class="n"><span class="pre">esp_srp_handle_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">hd</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">username</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">username_len</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pass</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">pass_len</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">salt_len</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">bytes_B</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">len_B</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">bytes_salt</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418esp_srp_srv_pubkeyP16esp_srp_handle_tPKciPKciiPPcPiPPc" title="Permalink to this definition"></a><br /></dt>
<dd><p>Returns B (pub key) and salt. [Step2.b]. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>*bytes_B MUST NOT BE FREED BY THE CALLER </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>*bytes_salt MUST NOT BE FREE BY THE CALLER </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hd</strong> -- esp_srp handle </p></li>
<li><p><strong>username</strong> -- Username not expected NULL terminated </p></li>
<li><p><strong>username_len</strong> -- Username length </p></li>
<li><p><strong>pass</strong> -- Password not expected to be NULL terminated </p></li>
<li><p><strong>pass_len</strong> -- Pasword length </p></li>
<li><p><strong>salt_len</strong> -- Salt length </p></li>
<li><p><strong>bytes_B</strong> -- Public Key returned </p></li>
<li><p><strong>len_B</strong> -- Length of the public key </p></li>
<li><p><strong>bytes_salt</strong> -- Salt bytes generated </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>esp_err_t ESP_OK on success, appropriate error otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv425esp_srp_gen_salt_verifierPKciPKciPPciPPcPi">
<span id="_CPPv325esp_srp_gen_salt_verifierPKciPKciPPciPPcPi"></span><span id="_CPPv225esp_srp_gen_salt_verifierPKciPKciPPciPPcPi"></span><span id="esp_srp_gen_salt_verifier__cCP.i.cCP.i.cPP.i.cPP.iP"></span><span class="target" id="esp__srp_8h_1a3991d43dfd2c9932734ef19bf32eecbd"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_srp_gen_salt_verifier</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">username</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">username_len</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pass</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">pass_len</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">bytes_salt</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">salt_len</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">verifier</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">verifier_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv425esp_srp_gen_salt_verifierPKciPKciPPciPPcPi" title="Permalink to this definition"></a><br /></dt>
<dd><p>Generate salt-verifier pair, given username, password and salt length. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>if API has returned ESP_OK, salt and verifier generated need to be freed by caller </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Usually, username and password are not saved on the device. Rather salt and verifier are generated outside the device and are embedded. this covenience API can be used to generate salt and verifier on the fly for development use case. OR for devices which intentionally want to generate different password each time and can send it to the client securely. e.g., a device has a display and it shows the pin </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>username</strong> -- <strong>[in]</strong> username </p></li>
<li><p><strong>username_len</strong> -- <strong>[in]</strong> length of the username </p></li>
<li><p><strong>pass</strong> -- <strong>[in]</strong> password </p></li>
<li><p><strong>pass_len</strong> -- <strong>[in]</strong> length of the password </p></li>
<li><p><strong>bytes_salt</strong> -- <strong>[out]</strong> generated salt on successful generation, or NULL </p></li>
<li><p><strong>salt_len</strong> -- <strong>[in]</strong> salt length </p></li>
<li><p><strong>verifier</strong> -- <strong>[out]</strong> generated verifier on successful generation, or NULL </p></li>
<li><p><strong>verifier_len</strong> -- <strong>[out]</strong> length of the generated verifier </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>esp_err_t ESP_OK on success, appropriate error otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv425esp_srp_set_salt_verifierP16esp_srp_handle_tPKciPKci">
<span id="_CPPv325esp_srp_set_salt_verifierP16esp_srp_handle_tPKciPKci"></span><span id="_CPPv225esp_srp_set_salt_verifierP16esp_srp_handle_tPKciPKci"></span><span id="esp_srp_set_salt_verifier__esp_srp_handle_tP.cCP.i.cCP.i"></span><span class="target" id="esp__srp_8h_1a76e8856dda8a086f3662f977e23bb546"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_srp_set_salt_verifier</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv416esp_srp_handle_t" title="esp_srp_handle_t"><span class="n"><span class="pre">esp_srp_handle_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">hd</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">salt</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">salt_len</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">verifier</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">verifier_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv425esp_srp_set_salt_verifierP16esp_srp_handle_tPKciPKci" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set the Salt and Verifier pre-generated for a given password. This should be used only if the actual password is not available. The public key can then be generated using <a class="reference internal" href="#esp__srp_8h_1a535fbb3086b0c079acc0d5002a3ffec3"><span class="std std-ref">esp_srp_srv_pubkey_from_salt_verifier()</span></a> and not <a class="reference internal" href="#esp__srp_8h_1a70b9e12d515b2aba95c50cb77bf5a833"><span class="std std-ref">esp_srp_srv_pubkey()</span></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hd</strong> -- esp_srp_handle </p></li>
<li><p><strong>salt</strong> -- pre-generated salt bytes </p></li>
<li><p><strong>salt_len</strong> -- length of the salt bytes </p></li>
<li><p><strong>verifier</strong> -- pre-generated verifier </p></li>
<li><p><strong>verifier_len</strong> -- length of the verifier bytes </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>esp_err_t ESP_OK on success, appropriate error otherwise </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv437esp_srp_srv_pubkey_from_salt_verifierP16esp_srp_handle_tPPcPi">
<span id="_CPPv337esp_srp_srv_pubkey_from_salt_verifierP16esp_srp_handle_tPPcPi"></span><span id="_CPPv237esp_srp_srv_pubkey_from_salt_verifierP16esp_srp_handle_tPPcPi"></span><span id="esp_srp_srv_pubkey_from_salt_verifier__esp_srp_handle_tP.cPP.iP"></span><span class="target" id="esp__srp_8h_1a535fbb3086b0c079acc0d5002a3ffec3"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_srp_srv_pubkey_from_salt_verifier</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv416esp_srp_handle_t" title="esp_srp_handle_t"><span class="n"><span class="pre">esp_srp_handle_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">hd</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">bytes_B</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">len_B</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv437esp_srp_srv_pubkey_from_salt_verifierP16esp_srp_handle_tPPcPi" title="Permalink to this definition"></a><br /></dt>
<dd><p>Returns B (pub key)[Step2.b] when the salt and verifier are set using <a class="reference internal" href="#esp__srp_8h_1a76e8856dda8a086f3662f977e23bb546"><span class="std std-ref">esp_srp_set_salt_verifier()</span></a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>*bytes_B MUST NOT BE FREED BY THE CALLER </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hd</strong> -- esp_srp handle </p></li>
<li><p><strong>bytes_B</strong> -- Key returned to the called </p></li>
<li><p><strong>len_B</strong> -- Length of the key returned </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>esp_err_t ESP_OK on success, appropriate error otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv423esp_srp_get_session_keyP16esp_srp_handle_tPciPPcP8uint16_t">
<span id="_CPPv323esp_srp_get_session_keyP16esp_srp_handle_tPciPPcP8uint16_t"></span><span id="_CPPv223esp_srp_get_session_keyP16esp_srp_handle_tPciPPcP8uint16_t"></span><span id="esp_srp_get_session_key__esp_srp_handle_tP.cP.i.cPP.uint16_tP"></span><span class="target" id="esp__srp_8h_1a9531bedd73051b17550a0cbf53e333b2"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_srp_get_session_key</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv416esp_srp_handle_t" title="esp_srp_handle_t"><span class="n"><span class="pre">esp_srp_handle_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">hd</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">bytes_A</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len_A</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">bytes_key</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">len_key</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv423esp_srp_get_session_keyP16esp_srp_handle_tPciPPcP8uint16_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get session key in <code class="docutils literal notranslate"><span class="pre">*bytes_key</span></code> given by len in <code class="docutils literal notranslate"><span class="pre">*len_key</span></code>. [Step2.c]. </p>
<p>This calculated session key is used for further communication given the proofs are exchanged/authenticated with <code class="docutils literal notranslate"><span class="pre">esp_srp_exchange_proofs</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>*bytes_key MUST NOT BE FREED BY THE CALLER </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hd</strong> -- esp_srp handle </p></li>
<li><p><strong>bytes_A</strong> -- Private Key </p></li>
<li><p><strong>len_A</strong> -- Private Key length </p></li>
<li><p><strong>bytes_key</strong> -- Key returned to the caller </p></li>
<li><p><strong>len_key</strong> -- length of the key in *bytes_key </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>esp_err_t ESP_OK on success, appropriate error otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv423esp_srp_exchange_proofsP16esp_srp_handle_tPc8uint16_tPcPc">
<span id="_CPPv323esp_srp_exchange_proofsP16esp_srp_handle_tPc8uint16_tPcPc"></span><span id="_CPPv223esp_srp_exchange_proofsP16esp_srp_handle_tPc8uint16_tPcPc"></span><span id="esp_srp_exchange_proofs__esp_srp_handle_tP.cP.uint16_t.cP.cP"></span><span class="target" id="esp__srp_8h_1a3a1cbb1c38c6438b3d0558c9e4c89e7c"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_srp_exchange_proofs</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv416esp_srp_handle_t" title="esp_srp_handle_t"><span class="n"><span class="pre">esp_srp_handle_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">hd</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">username</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">username_len</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">bytes_user_proof</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">bytes_host_proof</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv423esp_srp_exchange_proofsP16esp_srp_handle_tPc8uint16_tPcPc" title="Permalink to this definition"></a><br /></dt>
<dd><p>Complete the authentication. If this step fails, the session_key exchanged should not be used. </p>
<p>This is the final authentication step in SRP algorithm [Step4.1, Step4.b, Step4.c]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hd</strong> -- esp_srp handle </p></li>
<li><p><strong>username</strong> -- Username not expected NULL terminated </p></li>
<li><p><strong>username_len</strong> -- Username length </p></li>
<li><p><strong>bytes_user_proof</strong> -- param in </p></li>
<li><p><strong>bytes_host_proof</strong> -- parameter out (should be SHA512_DIGEST_LENGTH) bytes in size </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>esp_err_t ESP_OK if user's proof is ok and subsequently bytes_host_proof is populated with our own proof. </p>
</dd>
</dl>
</dd></dl>

</section>
<section id="id9">
<h3>Type Definitions<a class="headerlink" href="#id9" title="Permalink to this heading"></a></h3>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv416esp_srp_handle_t">
<span id="_CPPv316esp_srp_handle_t"></span><span id="_CPPv216esp_srp_handle_t"></span><span id="esp_srp_handle_t"></span><span class="target" id="esp__srp_8h_1a4d2e720d9d429f2db866dc8734a82909"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">esp_srp_handle</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_srp_handle_t</span></span></span><a class="headerlink" href="#_CPPv416esp_srp_handle_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>esp_srp handle as the result of <code class="docutils literal notranslate"><span class="pre">esp_srp_init</span></code></p>
<p>The handle is returned by <code class="docutils literal notranslate"><span class="pre">esp_srp_init</span></code> on successful init. It is then passed for subsequent API calls as an argument. <code class="docutils literal notranslate"><span class="pre">esp_srp_free</span></code> can be used to clean up the handle. After <code class="docutils literal notranslate"><span class="pre">esp_srp_free</span></code> the handle becomes invalid. </p>
</dd></dl>

</section>
<section id="id10">
<h3>Enumerations<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h3>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv413esp_ng_type_t">
<span id="_CPPv313esp_ng_type_t"></span><span id="_CPPv213esp_ng_type_t"></span><span class="target" id="esp__srp_8h_1a78cc71b2efc490ae5deccb9f36a6eaff"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_ng_type_t</span></span></span><a class="headerlink" href="#_CPPv413esp_ng_type_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Large prime+generator to be used for the algorithm. </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N13esp_ng_type_t11ESP_NG_3072E">
<span id="_CPPv3N13esp_ng_type_t11ESP_NG_3072E"></span><span id="_CPPv2N13esp_ng_type_t11ESP_NG_3072E"></span><span class="target" id="esp__srp_8h_1a78cc71b2efc490ae5deccb9f36a6eaffaf13c1198b85310e9ea9aa1eb727700f3"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ESP_NG_3072</span></span></span><a class="headerlink" href="#_CPPv4N13esp_ng_type_t11ESP_NG_3072E" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="id11">
<h3>Header File<a class="headerlink" href="#id11" title="Permalink to this heading"></a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/protocomm/include/transports/protocomm_httpd.h">components/protocomm/include/transports/protocomm_httpd.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;protocomm_httpd.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">protocomm</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">protocomm</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES protocomm
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES protocomm
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id12">
<h3>Functions<a class="headerlink" href="#id12" title="Permalink to this heading"></a></h3>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv421protocomm_httpd_startP11protocomm_tPK24protocomm_httpd_config_t">
<span id="_CPPv321protocomm_httpd_startP11protocomm_tPK24protocomm_httpd_config_t"></span><span id="_CPPv221protocomm_httpd_startP11protocomm_tPK24protocomm_httpd_config_t"></span><span id="protocomm_httpd_start__protocomm_tP.protocomm_httpd_config_tCP"></span><span class="target" id="protocomm__httpd_8h_1a7dbe14ee8e099c8b987e490784cd2d4b"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_httpd_start</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv424protocomm_httpd_config_t" title="protocomm_httpd_config_t"><span class="n"><span class="pre">protocomm_httpd_config_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">config</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv421protocomm_httpd_startP11protocomm_tPK24protocomm_httpd_config_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Start HTTPD protocomm transport. </p>
<p>This API internally creates a framework to allow endpoint registration and security configuration for the protocomm.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a singleton. ie. Protocomm can have multiple instances, but only one instance can be bound to an HTTP transport layer.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pc</strong> -- <strong>[in]</strong> Protocomm instance pointer obtained from protocomm_new() </p></li>
<li><p><strong>config</strong> -- <strong>[in]</strong> Pointer to config structure for initializing HTTP server</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments</p></li>
<li><p>ESP_ERR_NOT_SUPPORTED : Transport layer bound to another protocomm instance</p></li>
<li><p>ESP_ERR_INVALID_STATE : Transport layer already bound to this protocomm instance</p></li>
<li><p>ESP_ERR_NO_MEM : Memory allocation for server resource failed</p></li>
<li><p>ESP_ERR_HTTPD_* : HTTP server error on start </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv420protocomm_httpd_stopP11protocomm_t">
<span id="_CPPv320protocomm_httpd_stopP11protocomm_t"></span><span id="_CPPv220protocomm_httpd_stopP11protocomm_t"></span><span id="protocomm_httpd_stop__protocomm_tP"></span><span class="target" id="protocomm__httpd_8h_1ace54bdf94e43d7a05615c55aaf040385"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_httpd_stop</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pc</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv420protocomm_httpd_stopP11protocomm_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Stop HTTPD protocomm transport. </p>
<p>This API cleans up the HTTPD transport protocomm and frees all the handlers registered with the protocomm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pc</strong> -- <strong>[in]</strong> Same protocomm instance that was passed to protocomm_httpd_start()</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null / incorrect protocomm instance pointer </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="unions">
<h3>Unions<a class="headerlink" href="#unions" title="Permalink to this heading"></a></h3>
<dl class="cpp union">
<dt class="sig sig-object cpp" id="_CPPv429protocomm_httpd_config_data_t">
<span id="_CPPv329protocomm_httpd_config_data_t"></span><span id="_CPPv229protocomm_httpd_config_data_t"></span><span class="target" id="unionprotocomm__httpd__config__data__t"></span><span class="k"><span class="pre">union</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_httpd_config_data_t</span></span></span><a class="headerlink" href="#_CPPv429protocomm_httpd_config_data_t" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;protocomm_httpd.h&gt;</em></div>
<p>Protocomm HTTPD Configuration Data </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N29protocomm_httpd_config_data_t6handleE">
<span id="_CPPv3N29protocomm_httpd_config_data_t6handleE"></span><span id="_CPPv2N29protocomm_httpd_config_data_t6handleE"></span><span id="protocomm_httpd_config_data_t::handle__voidP"></span><span class="target" id="unionprotocomm__httpd__config__data__t_1aa5124a1cd7db82b24fd064c516b16612"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">handle</span></span></span><a class="headerlink" href="#_CPPv4N29protocomm_httpd_config_data_t6handleE" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Server Handle, if ext_handle_provided is set to true </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N29protocomm_httpd_config_data_t6configE">
<span id="_CPPv3N29protocomm_httpd_config_data_t6configE"></span><span id="_CPPv2N29protocomm_httpd_config_data_t6configE"></span><span id="protocomm_httpd_config_data_t::config__protocomm_http_server_config_t"></span><span class="target" id="unionprotocomm__httpd__config__data__t_1a811597a2fc91ee7192321f9848ea0166"></span><a class="reference internal" href="#_CPPv430protocomm_http_server_config_t" title="protocomm_http_server_config_t"><span class="n"><span class="pre">protocomm_http_server_config_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">config</span></span></span><a class="headerlink" href="#_CPPv4N29protocomm_httpd_config_data_t6configE" title="Permalink to this definition"></a><br /></dt>
<dd><p>HTTP Server Configuration, if a server is not already active </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="id13">
<h3>Structures<a class="headerlink" href="#id13" title="Permalink to this heading"></a></h3>
<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv430protocomm_http_server_config_t">
<span id="_CPPv330protocomm_http_server_config_t"></span><span id="_CPPv230protocomm_http_server_config_t"></span><span id="protocomm_http_server_config_t"></span><span class="target" id="structprotocomm__http__server__config__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_http_server_config_t</span></span></span><a class="headerlink" href="#_CPPv430protocomm_http_server_config_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Config parameters for protocomm HTTP server. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N30protocomm_http_server_config_t4portE">
<span id="_CPPv3N30protocomm_http_server_config_t4portE"></span><span id="_CPPv2N30protocomm_http_server_config_t4portE"></span><span id="protocomm_http_server_config_t::port__uint16_t"></span><span class="target" id="structprotocomm__http__server__config__t_1a6a657a170ca7492de686cf3266026ceb"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">port</span></span></span><a class="headerlink" href="#_CPPv4N30protocomm_http_server_config_t4portE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Port on which the HTTP server will listen </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N30protocomm_http_server_config_t10stack_sizeE">
<span id="_CPPv3N30protocomm_http_server_config_t10stack_sizeE"></span><span id="_CPPv2N30protocomm_http_server_config_t10stack_sizeE"></span><span id="protocomm_http_server_config_t::stack_size__s"></span><span class="target" id="structprotocomm__http__server__config__t_1a943ac3fd909df6ce0072f5792bbe2ce9"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stack_size</span></span></span><a class="headerlink" href="#_CPPv4N30protocomm_http_server_config_t10stack_sizeE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Stack size of server task, adjusted depending upon stack usage of endpoint handler </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N30protocomm_http_server_config_t13task_priorityE">
<span id="_CPPv3N30protocomm_http_server_config_t13task_priorityE"></span><span id="_CPPv2N30protocomm_http_server_config_t13task_priorityE"></span><span id="protocomm_http_server_config_t::task_priority__unsigned"></span><span class="target" id="structprotocomm__http__server__config__t_1ae40fc5696ab94bfbbf494dff1f7dd6d8"></span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">task_priority</span></span></span><a class="headerlink" href="#_CPPv4N30protocomm_http_server_config_t13task_priorityE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Priority of server task </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv424protocomm_httpd_config_t">
<span id="_CPPv324protocomm_httpd_config_t"></span><span id="_CPPv224protocomm_httpd_config_t"></span><span id="protocomm_httpd_config_t"></span><span class="target" id="structprotocomm__httpd__config__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_httpd_config_t</span></span></span><a class="headerlink" href="#_CPPv424protocomm_httpd_config_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Config parameters for protocomm HTTP server. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N24protocomm_httpd_config_t19ext_handle_providedE">
<span id="_CPPv3N24protocomm_httpd_config_t19ext_handle_providedE"></span><span id="_CPPv2N24protocomm_httpd_config_t19ext_handle_providedE"></span><span id="protocomm_httpd_config_t::ext_handle_provided__b"></span><span class="target" id="structprotocomm__httpd__config__t_1ab08c05354a3a95bdb78fbfb434ffd343"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ext_handle_provided</span></span></span><a class="headerlink" href="#_CPPv4N24protocomm_httpd_config_t19ext_handle_providedE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Flag to indicate of an external HTTP Server Handle has been provided. In such as case, protocomm will use the same HTTP Server and not start a new one internally. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N24protocomm_httpd_config_t4dataE">
<span id="_CPPv3N24protocomm_httpd_config_t4dataE"></span><span id="_CPPv2N24protocomm_httpd_config_t4dataE"></span><span id="protocomm_httpd_config_t::data__protocomm_httpd_config_data_t"></span><span class="target" id="structprotocomm__httpd__config__t_1a1f4c60fb5f4c6b4d9320e8eff539cc7f"></span><a class="reference internal" href="#_CPPv429protocomm_httpd_config_data_t" title="protocomm_httpd_config_data_t"><span class="n"><span class="pre">protocomm_httpd_config_data_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">data</span></span></span><a class="headerlink" href="#_CPPv4N24protocomm_httpd_config_t4dataE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Protocomm HTTPD Configuration Data </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="macros">
<h3>Macros<a class="headerlink" href="#macros" title="Permalink to this heading"></a></h3>
<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.PROTOCOMM_HTTPD_DEFAULT_CONFIG">
<span class="target" id="protocomm__httpd_8h_1aefb3e82b2e7771802541ec94eae7867b"></span><span class="sig-name descname"><span class="n"><span class="pre">PROTOCOMM_HTTPD_DEFAULT_CONFIG</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#c.PROTOCOMM_HTTPD_DEFAULT_CONFIG" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</section>
<section id="id14">
<h3>Header File<a class="headerlink" href="#id14" title="Permalink to this heading"></a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/protocomm/include/transports/protocomm_ble.h">components/protocomm/include/transports/protocomm_ble.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;protocomm_ble.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">protocomm</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">protocomm</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES protocomm
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES protocomm
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id15">
<h3>Functions<a class="headerlink" href="#id15" title="Permalink to this heading"></a></h3>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv419protocomm_ble_startP11protocomm_tPK22protocomm_ble_config_t">
<span id="_CPPv319protocomm_ble_startP11protocomm_tPK22protocomm_ble_config_t"></span><span id="_CPPv219protocomm_ble_startP11protocomm_tPK22protocomm_ble_config_t"></span><span id="protocomm_ble_start__protocomm_tP.protocomm_ble_config_tCP"></span><span class="target" id="protocomm__ble_8h_1abed95eab34dc13bfddc48d20f1735b54"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_ble_start</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv422protocomm_ble_config_t" title="protocomm_ble_config_t"><span class="n"><span class="pre">protocomm_ble_config_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">config</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419protocomm_ble_startP11protocomm_tPK22protocomm_ble_config_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Start Bluetooth Low Energy based transport layer for provisioning. </p>
<p>Initialize and start required BLE service for provisioning. This includes the initialization for characteristics/service for BLE.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pc</strong> -- <strong>[in]</strong> Protocomm instance pointer obtained from protocomm_new() </p></li>
<li><p><strong>config</strong> -- <strong>[in]</strong> Pointer to config structure for initializing BLE</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_FAIL : Simple BLE start error</p></li>
<li><p>ESP_ERR_NO_MEM : Error allocating memory for internal resources</p></li>
<li><p>ESP_ERR_INVALID_STATE : Error in ble config</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null arguments </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv418protocomm_ble_stopP11protocomm_t">
<span id="_CPPv318protocomm_ble_stopP11protocomm_t"></span><span id="_CPPv218protocomm_ble_stopP11protocomm_t"></span><span id="protocomm_ble_stop__protocomm_tP"></span><span class="target" id="protocomm__ble_8h_1a845bd66134f96ec3ccddde2e98f68226"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_ble_stop</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411protocomm_t" title="protocomm_t"><span class="n"><span class="pre">protocomm_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pc</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418protocomm_ble_stopP11protocomm_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Stop Bluetooth Low Energy based transport layer for provisioning. </p>
<p>Stops service/task responsible for BLE based interactions for provisioning</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You might want to optionally reclaim memory from Bluetooth. Refer to the documentation of <code class="docutils literal notranslate"><span class="pre">esp_bt_mem_release</span></code> in that case.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pc</strong> -- <strong>[in]</strong> Same protocomm instance that was passed to protocomm_ble_start()</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK : Success</p></li>
<li><p>ESP_FAIL : Simple BLE stop error</p></li>
<li><p>ESP_ERR_INVALID_ARG : Null / incorrect protocomm instance </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="id16">
<h3>Structures<a class="headerlink" href="#id16" title="Permalink to this heading"></a></h3>
<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv49name_uuid">
<span id="_CPPv39name_uuid"></span><span id="_CPPv29name_uuid"></span><span id="name_uuid"></span><span class="target" id="structname__uuid"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">name_uuid</span></span></span><a class="headerlink" href="#_CPPv49name_uuid" title="Permalink to this definition"></a><br /></dt>
<dd><p>This structure maps handler required by protocomm layer to UUIDs which are used to uniquely identify BLE characteristics from a smartphone or a similar client device. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N9name_uuid4nameE">
<span id="_CPPv3N9name_uuid4nameE"></span><span id="_CPPv2N9name_uuid4nameE"></span><span id="name_uuid::name__cCP"></span><span class="target" id="structname__uuid_1a9b24ae00fd547e2ae5e0dace1927d882"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">name</span></span></span><a class="headerlink" href="#_CPPv4N9name_uuid4nameE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Name of the handler, which is passed to protocomm layer </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N9name_uuid4uuidE">
<span id="_CPPv3N9name_uuid4uuidE"></span><span id="_CPPv2N9name_uuid4uuidE"></span><span id="name_uuid::uuid__uint16_t"></span><span class="target" id="structname__uuid_1aee5fcf6c244bd9a3e8c190de3c3ef6ed"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uuid</span></span></span><a class="headerlink" href="#_CPPv4N9name_uuid4uuidE" title="Permalink to this definition"></a><br /></dt>
<dd><p>UUID to be assigned to the BLE characteristic which is mapped to the handler </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv421protocomm_ble_event_t">
<span id="_CPPv321protocomm_ble_event_t"></span><span id="_CPPv221protocomm_ble_event_t"></span><span id="protocomm_ble_event_t"></span><span class="target" id="structprotocomm__ble__event__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_ble_event_t</span></span></span><a class="headerlink" href="#_CPPv421protocomm_ble_event_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Structure for BLE events in Protocomm. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N21protocomm_ble_event_t8evt_typeE">
<span id="_CPPv3N21protocomm_ble_event_t8evt_typeE"></span><span id="_CPPv2N21protocomm_ble_event_t8evt_typeE"></span><span id="protocomm_ble_event_t::evt_type__uint16_t"></span><span class="target" id="structprotocomm__ble__event__t_1a0324137060b363e6c4fd4afa90105604"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">evt_type</span></span></span><a class="headerlink" href="#_CPPv4N21protocomm_ble_event_t8evt_typeE" title="Permalink to this definition"></a><br /></dt>
<dd><p>This field indicates the type of BLE event that occurred. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N21protocomm_ble_event_t11conn_handleE">
<span id="_CPPv3N21protocomm_ble_event_t11conn_handleE"></span><span id="_CPPv2N21protocomm_ble_event_t11conn_handleE"></span><span id="protocomm_ble_event_t::conn_handle__uint16_t"></span><span class="target" id="structprotocomm__ble__event__t_1a6a1753501795716d3af75f8e6b9a960f"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">conn_handle</span></span></span><a class="headerlink" href="#_CPPv4N21protocomm_ble_event_t11conn_handleE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The handle of the relevant connection. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N21protocomm_ble_event_t11conn_statusE">
<span id="_CPPv3N21protocomm_ble_event_t11conn_statusE"></span><span id="_CPPv2N21protocomm_ble_event_t11conn_statusE"></span><span id="protocomm_ble_event_t::conn_status__uint16_t"></span><span class="target" id="structprotocomm__ble__event__t_1aa93a82dd3e921be805a8bd7d4aaa3fe1"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">conn_status</span></span></span><a class="headerlink" href="#_CPPv4N21protocomm_ble_event_t11conn_statusE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The status of the connection attempt; o 0: the connection was successfully established. o BLE host error code: the connection attempt failed for the specified reason. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N21protocomm_ble_event_t17disconnect_reasonE">
<span id="_CPPv3N21protocomm_ble_event_t17disconnect_reasonE"></span><span id="_CPPv2N21protocomm_ble_event_t17disconnect_reasonE"></span><span id="protocomm_ble_event_t::disconnect_reason__uint16_t"></span><span class="target" id="structprotocomm__ble__event__t_1af406c5f5b21543aa037140504f5432b9"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">disconnect_reason</span></span></span><a class="headerlink" href="#_CPPv4N21protocomm_ble_event_t17disconnect_reasonE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Return code indicating the reason for the disconnect. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv420protocomm_ble_config">
<span id="_CPPv320protocomm_ble_config"></span><span id="_CPPv220protocomm_ble_config"></span><span id="protocomm_ble_config"></span><span class="target" id="structprotocomm__ble__config"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_ble_config</span></span></span><a class="headerlink" href="#_CPPv420protocomm_ble_config" title="Permalink to this definition"></a><br /></dt>
<dd><p>Config parameters for protocomm BLE service. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20protocomm_ble_config11device_nameE">
<span id="_CPPv3N20protocomm_ble_config11device_nameE"></span><span id="_CPPv2N20protocomm_ble_config11device_nameE"></span><span id="protocomm_ble_config::device_name__cA"></span><span class="target" id="structprotocomm__ble__config_1a2371124a71a6daef79959965153f6400"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">device_name</span></span></span><span class="p"><span class="pre">[</span></span><span class="n"><span class="pre">MAX_BLE_DEVNAME_LEN</span></span><span class="w"> </span><span class="o"><span class="pre">+</span></span><span class="w"> </span><span class="m"><span class="pre">1</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#_CPPv4N20protocomm_ble_config11device_nameE" title="Permalink to this definition"></a><br /></dt>
<dd><p>BLE device name being broadcast at the time of provisioning </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20protocomm_ble_config12service_uuidE">
<span id="_CPPv3N20protocomm_ble_config12service_uuidE"></span><span id="_CPPv2N20protocomm_ble_config12service_uuidE"></span><span id="protocomm_ble_config::service_uuid__uint8_tA"></span><span class="target" id="structprotocomm__ble__config_1a3365693352fbeeb94f54623a3330379a"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">service_uuid</span></span></span><span class="p"><span class="pre">[</span></span><span class="n"><span class="pre">BLE_UUID128_VAL_LENGTH</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#_CPPv4N20protocomm_ble_config12service_uuidE" title="Permalink to this definition"></a><br /></dt>
<dd><p>128 bit UUID of the provisioning service </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20protocomm_ble_config17manufacturer_dataE">
<span id="_CPPv3N20protocomm_ble_config17manufacturer_dataE"></span><span id="_CPPv2N20protocomm_ble_config17manufacturer_dataE"></span><span id="protocomm_ble_config::manufacturer_data__uint8_tP"></span><span class="target" id="structprotocomm__ble__config_1affce437b5f10fdab9795a984c7d7dccd"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">manufacturer_data</span></span></span><a class="headerlink" href="#_CPPv4N20protocomm_ble_config17manufacturer_dataE" title="Permalink to this definition"></a><br /></dt>
<dd><p>BLE device manufacturer data pointer in advertisement </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20protocomm_ble_config21manufacturer_data_lenE">
<span id="_CPPv3N20protocomm_ble_config21manufacturer_data_lenE"></span><span id="_CPPv2N20protocomm_ble_config21manufacturer_data_lenE"></span><span id="protocomm_ble_config::manufacturer_data_len__ssize_t"></span><span class="target" id="structprotocomm__ble__config_1aecbf32c967a65c80310768ffa3e37fe4"></span><span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">manufacturer_data_len</span></span></span><a class="headerlink" href="#_CPPv4N20protocomm_ble_config21manufacturer_data_lenE" title="Permalink to this definition"></a><br /></dt>
<dd><p>BLE device manufacturer data length in advertisement </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20protocomm_ble_config15nu_lookup_countE">
<span id="_CPPv3N20protocomm_ble_config15nu_lookup_countE"></span><span id="_CPPv2N20protocomm_ble_config15nu_lookup_countE"></span><span id="protocomm_ble_config::nu_lookup_count__ssize_t"></span><span class="target" id="structprotocomm__ble__config_1af0911f726f0e46fd00f071e610b3a53e"></span><span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nu_lookup_count</span></span></span><a class="headerlink" href="#_CPPv4N20protocomm_ble_config15nu_lookup_countE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Number of entries in the Name-UUID lookup table </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20protocomm_ble_config9nu_lookupE">
<span id="_CPPv3N20protocomm_ble_config9nu_lookupE"></span><span id="_CPPv2N20protocomm_ble_config9nu_lookupE"></span><span id="protocomm_ble_config::nu_lookup__protocomm_ble_name_uuid_tP"></span><span class="target" id="structprotocomm__ble__config_1a06bf8d25a9ae3a4ed2e3a4bbf0f7fc58"></span><a class="reference internal" href="#_CPPv425protocomm_ble_name_uuid_t" title="protocomm_ble_name_uuid_t"><span class="n"><span class="pre">protocomm_ble_name_uuid_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">nu_lookup</span></span></span><a class="headerlink" href="#_CPPv4N20protocomm_ble_config9nu_lookupE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to the Name-UUID lookup table </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20protocomm_ble_config11ble_bondingE">
<span id="_CPPv3N20protocomm_ble_config11ble_bondingE"></span><span id="_CPPv2N20protocomm_ble_config11ble_bondingE"></span><span id="protocomm_ble_config::ble_bonding__unsigned"></span><span class="target" id="structprotocomm__ble__config_1adbf11d11c23edf99c56c513cc44bb27c"></span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ble_bonding</span></span></span><a class="headerlink" href="#_CPPv4N20protocomm_ble_config11ble_bondingE" title="Permalink to this definition"></a><br /></dt>
<dd><p>BLE bonding </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20protocomm_ble_config9ble_sm_scE">
<span id="_CPPv3N20protocomm_ble_config9ble_sm_scE"></span><span id="_CPPv2N20protocomm_ble_config9ble_sm_scE"></span><span id="protocomm_ble_config::ble_sm_sc__unsigned"></span><span class="target" id="structprotocomm__ble__config_1af7f76572dcd646a91ae3a1e3603921c3"></span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ble_sm_sc</span></span></span><a class="headerlink" href="#_CPPv4N20protocomm_ble_config9ble_sm_scE" title="Permalink to this definition"></a><br /></dt>
<dd><p>BLE security flag </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20protocomm_ble_config19ble_link_encryptionE">
<span id="_CPPv3N20protocomm_ble_config19ble_link_encryptionE"></span><span id="_CPPv2N20protocomm_ble_config19ble_link_encryptionE"></span><span id="protocomm_ble_config::ble_link_encryption__unsigned"></span><span class="target" id="structprotocomm__ble__config_1a3b68b7fdc682177c1360dff049b8e0b0"></span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ble_link_encryption</span></span></span><a class="headerlink" href="#_CPPv4N20protocomm_ble_config19ble_link_encryptionE" title="Permalink to this definition"></a><br /></dt>
<dd><p>BLE security flag </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20protocomm_ble_config8ble_addrE">
<span id="_CPPv3N20protocomm_ble_config8ble_addrE"></span><span id="_CPPv2N20protocomm_ble_config8ble_addrE"></span><span id="protocomm_ble_config::ble_addr__uint8_tP"></span><span class="target" id="structprotocomm__ble__config_1abb1cbb7915d501da42da905f2af847e0"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">ble_addr</span></span></span><a class="headerlink" href="#_CPPv4N20protocomm_ble_config8ble_addrE" title="Permalink to this definition"></a><br /></dt>
<dd><p>BLE address </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20protocomm_ble_config11keep_ble_onE">
<span id="_CPPv3N20protocomm_ble_config11keep_ble_onE"></span><span id="_CPPv2N20protocomm_ble_config11keep_ble_onE"></span><span id="protocomm_ble_config::keep_ble_on__unsigned"></span><span class="target" id="structprotocomm__ble__config_1ac73ade55348b37187236f48bc56913b8"></span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">keep_ble_on</span></span></span><a class="headerlink" href="#_CPPv4N20protocomm_ble_config11keep_ble_onE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Flag to keep BLE on </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20protocomm_ble_config10ble_notifyE">
<span id="_CPPv3N20protocomm_ble_config10ble_notifyE"></span><span id="_CPPv2N20protocomm_ble_config10ble_notifyE"></span><span id="protocomm_ble_config::ble_notify__unsigned"></span><span class="target" id="structprotocomm__ble__config_1a2dfd5faefe83b375523503aeb1f794b3"></span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ble_notify</span></span></span><a class="headerlink" href="#_CPPv4N20protocomm_ble_config10ble_notifyE" title="Permalink to this definition"></a><br /></dt>
<dd><p>BLE characteristic notify flag </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="id17">
<h3>Macros<a class="headerlink" href="#id17" title="Permalink to this heading"></a></h3>
<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.MAX_BLE_DEVNAME_LEN">
<span class="target" id="protocomm__ble_8h_1a2508f7570e00e207a7acbf449e500fac"></span><span class="sig-name descname"><span class="n"><span class="pre">MAX_BLE_DEVNAME_LEN</span></span></span><a class="headerlink" href="#c.MAX_BLE_DEVNAME_LEN" title="Permalink to this definition"></a><br /></dt>
<dd><p>BLE device name cannot be larger than this value 31 bytes (max scan response size) - 1 byte (length) - 1 byte (type) = 29 bytes </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.BLE_UUID128_VAL_LENGTH">
<span class="target" id="protocomm__ble_8h_1a5c61a39d35f6ada137f65f9c8d9f93d8"></span><span class="sig-name descname"><span class="n"><span class="pre">BLE_UUID128_VAL_LENGTH</span></span></span><a class="headerlink" href="#c.BLE_UUID128_VAL_LENGTH" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.MAX_BLE_MANUFACTURER_DATA_LEN">
<span class="target" id="protocomm__ble_8h_1a004c46ff096da51750dd6baef44f3fea"></span><span class="sig-name descname"><span class="n"><span class="pre">MAX_BLE_MANUFACTURER_DATA_LEN</span></span></span><a class="headerlink" href="#c.MAX_BLE_MANUFACTURER_DATA_LEN" title="Permalink to this definition"></a><br /></dt>
<dd><p>Theoretically, the limit for max manufacturer length remains same as BLE device name i.e. 31 bytes (max scan response size) - 1 byte (length) - 1 byte (type) = 29 bytes However, manufacturer data goes along with BLE device name in scan response. So, it is important to understand the actual length should be smaller than (29 - (BLE device name length) - 2). </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.BLE_ADDR_LEN">
<span class="target" id="protocomm__ble_8h_1a466729c9ee7357f9989ffb4e0d4ff6e3"></span><span class="sig-name descname"><span class="n"><span class="pre">BLE_ADDR_LEN</span></span></span><a class="headerlink" href="#c.BLE_ADDR_LEN" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</section>
<section id="id18">
<h3>Type Definitions<a class="headerlink" href="#id18" title="Permalink to this heading"></a></h3>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv425protocomm_ble_name_uuid_t">
<span id="_CPPv325protocomm_ble_name_uuid_t"></span><span id="_CPPv225protocomm_ble_name_uuid_t"></span><span id="protocomm_ble_name_uuid_t"></span><span class="target" id="protocomm__ble_8h_1a92393cc9a9fc602248c2f16182ee99ee"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv49name_uuid" title="name_uuid"><span class="n"><span class="pre">name_uuid</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_ble_name_uuid_t</span></span></span><a class="headerlink" href="#_CPPv425protocomm_ble_name_uuid_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>This structure maps handler required by protocomm layer to UUIDs which are used to uniquely identify BLE characteristics from a smartphone or a similar client device. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv422protocomm_ble_config_t">
<span id="_CPPv322protocomm_ble_config_t"></span><span id="_CPPv222protocomm_ble_config_t"></span><span id="protocomm_ble_config_t"></span><span class="target" id="protocomm__ble_8h_1ac7cbc940deab30ccf2feca60fe55d294"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv420protocomm_ble_config" title="protocomm_ble_config"><span class="n"><span class="pre">protocomm_ble_config</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_ble_config_t</span></span></span><a class="headerlink" href="#_CPPv422protocomm_ble_config_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Config parameters for protocomm BLE service. </p>
</dd></dl>

</section>
<section id="id19">
<h3>Enumerations<a class="headerlink" href="#id19" title="Permalink to this heading"></a></h3>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv431protocomm_transport_ble_event_t">
<span id="_CPPv331protocomm_transport_ble_event_t"></span><span id="_CPPv231protocomm_transport_ble_event_t"></span><span class="target" id="protocomm__ble_8h_1a03c0552535f27e7b74f67370c747fdc7"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">protocomm_transport_ble_event_t</span></span></span><a class="headerlink" href="#_CPPv431protocomm_transport_ble_event_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Events generated by BLE transport. </p>
<p>These events are generated when the BLE transport is paired and disconnected. </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N31protocomm_transport_ble_event_t33PROTOCOMM_TRANSPORT_BLE_CONNECTEDE">
<span id="_CPPv3N31protocomm_transport_ble_event_t33PROTOCOMM_TRANSPORT_BLE_CONNECTEDE"></span><span id="_CPPv2N31protocomm_transport_ble_event_t33PROTOCOMM_TRANSPORT_BLE_CONNECTEDE"></span><span class="target" id="protocomm__ble_8h_1a03c0552535f27e7b74f67370c747fdc7aeb5c0d4adc5d613e9d4f83080d2ee02a"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PROTOCOMM_TRANSPORT_BLE_CONNECTED</span></span></span><a class="headerlink" href="#_CPPv4N31protocomm_transport_ble_event_t33PROTOCOMM_TRANSPORT_BLE_CONNECTEDE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N31protocomm_transport_ble_event_t36PROTOCOMM_TRANSPORT_BLE_DISCONNECTEDE">
<span id="_CPPv3N31protocomm_transport_ble_event_t36PROTOCOMM_TRANSPORT_BLE_DISCONNECTEDE"></span><span id="_CPPv2N31protocomm_transport_ble_event_t36PROTOCOMM_TRANSPORT_BLE_DISCONNECTEDE"></span><span class="target" id="protocomm__ble_8h_1a03c0552535f27e7b74f67370c747fdc7ab897ad9f997493d2e536dfa12845fe9d"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PROTOCOMM_TRANSPORT_BLE_DISCONNECTED</span></span></span><a class="headerlink" href="#_CPPv4N31protocomm_transport_ble_event_t36PROTOCOMM_TRANSPORT_BLE_DISCONNECTEDE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

</section>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
             <div class="articleComments">

<style>
    .expand-feedback-content {
        display: none;
    }
    .click-like-or-dislike {
        background-color: #d3d3d3;
        pointer-events: none;
    }
</style>

<script>
    function submitFeedbackForm(user_likes_document) {
        // Send to GA4 the user reaction
        gtag('event', 'user_reaction', {
            'user_likes_document': user_likes_document
        });

        if (user_likes_document === 1) {
            document.querySelector('.like-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContentLike").style.display = 'block';
        } else {
            document.querySelector('.dislike-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContent").style.display = 'block';
        }

        document.querySelector('.like-btn').style.pointerEvents = 'none';
        document.querySelector('.dislike-btn').style.pointerEvents = 'none';
    }
</script>

<hr>

<p style="text-align:center"><strong>Was this page helpful?</strong></p>
<p style="text-align:center">
    <button class="like-btn" onclick="submitFeedbackForm(1)">
        <svg aria-hidden="true" focusable="false" class="color-fg-muted" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M8.834.066c.763.087 1.5.295 2.01.884.505.581.656 1.378.656 2.3 0 .467-.087 1.119-.157 1.637L11.328 5h1.422c.603 0 1.174.085 1.668.333.508.254.911.679 1.137 1.2.453.998.438 2.447.188 4.316l-.04.306c-.105.79-.195 1.473-.313 2.033-.131.63-.315 1.209-.668 1.672C13.97 15.847 12.706 16 11 16c-1.848 0-3.234-.333-4.388-.653-.165-.045-.323-.09-.475-.133-.658-.186-1.2-.34-1.725-.415A1.75 1.75 0 0 1 2.75 16h-1A1.75 1.75 0 0 1 0 14.25v-7.5C0 5.784.784 5 1.75 5h1a1.75 1.75 0 0 1 1.514.872c.258-.105.59-.268.918-.508C5.853 4.874 6.5 4.079 6.5 2.75v-.5c0-1.202.994-2.337 2.334-2.184ZM4.5 13.3c.705.088 1.39.284 2.072.478l.441.125c1.096.305 2.334.598 3.987.598 1.794 0 2.28-.223 2.528-.549.147-.193.276-.505.394-1.07.105-.502.188-1.124.295-1.93l.04-.3c.25-1.882.189-2.933-.068-3.497a.921.921 0 0 0-.442-.48c-.208-.104-.52-.174-.997-.174H11c-.686 0-1.295-.577-1.206-1.336.023-.192.05-.39.076-.586.065-.488.13-.97.13-1.328 0-.809-.144-1.15-.288-1.316-.137-.158-.402-.304-1.048-.378C8.357 1.521 8 1.793 8 2.25v.5c0 1.922-.978 3.128-1.933 3.825a5.831 5.831 0 0 1-1.567.81ZM2.75 6.5h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
    </button>
    <button class="dislike-btn" onclick="submitFeedbackForm(0)">
        <svg aria-hidden="true" focusable="false" class="" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M7.083 15.986c-.763-.087-1.499-.295-2.011-.884-.504-.581-.655-1.378-.655-2.299 0-.468.087-1.12.157-1.638l.015-.112H3.167c-.603 0-1.174-.086-1.669-.334a2.415 2.415 0 0 1-1.136-1.2c-.454-.998-.438-2.447-.188-4.316l.04-.306C.32 4.108.41 3.424.526 2.864c.132-.63.316-1.209.669-1.672C1.947.205 3.211.053 4.917.053c1.848 0 3.234.332 4.388.652l.474.133c.658.187 1.201.341 1.726.415a1.75 1.75 0 0 1 1.662-1.2h1c.966 0 1.75.784 1.75 1.75v7.5a1.75 1.75 0 0 1-1.75 1.75h-1a1.75 1.75 0 0 1-1.514-.872c-.259.105-.59.268-.919.508-.671.491-1.317 1.285-1.317 2.614v.5c0 1.201-.994 2.336-2.334 2.183Zm4.334-13.232c-.706-.089-1.39-.284-2.072-.479l-.441-.125c-1.096-.304-2.335-.597-3.987-.597-1.794 0-2.28.222-2.529.548-.147.193-.275.505-.393 1.07-.105.502-.188 1.124-.295 1.93l-.04.3c-.25 1.882-.19 2.933.067 3.497a.923.923 0 0 0 .443.48c.208.104.52.175.997.175h1.75c.685 0 1.295.577 1.205 1.335-.022.192-.049.39-.075.586-.066.488-.13.97-.13 1.329 0 .808.144 1.15.288 1.316.137.157.401.303 1.048.377.307.035.664-.237.664-.693v-.5c0-1.922.978-3.127 1.932-3.825a5.878 5.878 0 0 1 1.568-.809Zm1.75 6.798h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25Z"></path>
        </svg>
    </button>
</p>

<div class="expand-feedback-content" id="expandContentLike">
    <ul style="text-align:center">
        <li>Thank you! We received your feedback.</li>
        <li>If you have any comments, fill in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=Protocol Communication (api-reference/provisioning/protocomm)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<div class="expand-feedback-content" id="expandContent">
    <ul style="text-align:center">
        <li>We value your feedback.</li>
        <li>Let us know how we can improve this page by filling in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=Protocol Communication (api-reference/provisioning/protocomm)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<br>


             </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Provisioning API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="provisioning.html" class="btn btn-neutral float-right" title="Unified Provisioning" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016 - 2025, Espressif Systems (Shanghai) Co., Ltd.</p>
  </div>

  <ul class="footer">
        <li>
	    
            
            Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/espressif/sphinx_idf_theme">theme</a>  based on <a href="https://github.com/readthedocs/sphinx_rtd_theme">Read the Docs Sphinx Theme</a>.
         </li>
    <li class="footer-aside">
        <a href="../../esp-idf-en-v5.4.2.zip"> Download HTML</a>
    </li>

  </ul> 

</footer>
        </div>
      </div>
    </section>
  </div>

  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>