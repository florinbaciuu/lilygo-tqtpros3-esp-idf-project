<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-73KGWFC8DM"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-73KGWFC8DM');
        </script><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Memory Management for MMU Supported Memory - ESP32 -  &mdash; ESP-IDF Programming Guide v5.4.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=a60756f2" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=949a1ff5" />
      <link rel="stylesheet" type="text/css" href="../../_static/theme_overrides.css?v=851bd809" />

  
    <link rel="canonical" href="https://docs.espressif.com/projects/esp-idf/en/stable/esp32/api-reference/system/mm.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=c241bbaf"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=ff8fa330"></script>
        <script src="https://wavedrom.com/skins/default.js"></script>
        <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <script src="../../_static/js/theme.js"></script>

    
        

    <script type="text/javascript">
        DOCUMENTATION_OPTIONS.PAGENAME = 'api-reference/system/mm';
        DOCUMENTATION_OPTIONS.PROJECT_SLUG = 'esp-idf';
        DOCUMENTATION_OPTIONS.LATEST_BRANCH_NAME = 'master';
        DOCUMENTATION_OPTIONS.VERSIONS_URL = 'https://dl.espressif.com/dl/esp-idf/idf_versions.js';
        DOCUMENTATION_OPTIONS.LANGUAGES = ["en", "zh_CN"];
        DOCUMENTATION_OPTIONS.IDF_TARGET = 'esp32';
        DOCUMENTATION_OPTIONS.HAS_IDF_TARGETS = ["esp32", "esp32s2", "esp32s3", "esp32c3", "esp32c2", "esp32c5", "esp32c6", "esp32p4"]
        DOCUMENTATION_OPTIONS.RELEASE = 'v5.4.2';
        DOCUMENTATION_OPTIONS.LANGUAGE_URL = 'en';

    </script>

    <script type="text/javascript" src="https://dl.espressif.com/dl/esp-idf/idf_versions.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Heap Memory Debugging" href="heap_debug.html" />
    <link rel="prev" title="Heap Memory Allocation" href="mem_alloc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ESP-IDF Programming Guide
              <img src="../../_static/espressif-logo.svg" class="logo" alt="Logo"/>
          </a>

          
            <div class="selectors">
              <select id="target-select" style="width: 150px;" hidden>
                <option value="" disabled selected>Choose target...</option>
              </select>
            </div>
          

          <div class="selectors">
            <select id="version-select" style="width: 150px;" hidden>
              <option value="" disabled selected>Choose version...</option>
            </select>
          </div>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Get Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-conventions.html">API Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/index.html">Application Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth® API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error-codes.html">Error Codes Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/index.html">Networking APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peripherals/index.html">Peripherals API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kconfig.html">Project Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/index.html">Provisioning API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">Storage API</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">System API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="app_image_format.html">App Image Format</a></li>
<li class="toctree-l3"><a class="reference internal" href="bootloader_image_format.html">Bootloader Image Format</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_trace.html">Application Level Tracing</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_function_with_shared_stack.html">Call Function with External Stack</a></li>
<li class="toctree-l3"><a class="reference internal" href="chip_revision.html">Chip Revision</a></li>
<li class="toctree-l3"><a class="reference internal" href="console.html">Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="efuse.html">eFuse Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_err.html">Error Code and Helper Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_https_ota.html">ESP HTTPS OTA</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_event.html">Event Loop Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="freertos.html">FreeRTOS Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="freertos_idf.html">FreeRTOS (IDF)</a></li>
<li class="toctree-l3"><a class="reference internal" href="freertos_additions.html">FreeRTOS (Supplemental Features)</a></li>
<li class="toctree-l3"><a class="reference internal" href="mem_alloc.html">Heap Memory Allocation</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Memory Management for MMU Supported Memory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#physical-memory-types">Physical Memory Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#virtual-memory-capabilities">Virtual Memory Capabilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="#memory-management-drivers">Memory Management Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#thread-safety">Thread Safety</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="heap_debug.html">Heap Memory Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_timer.html">ESP Timer (High Resolution Timer)</a></li>
<li class="toctree-l3"><a class="reference internal" href="internal-unstable.html">Internal and Unstable APIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="ipc.html">Inter-Processor Call (IPC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="intr_alloc.html">Interrupt Allocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="log.html">Logging library</a></li>
<li class="toctree-l3"><a class="reference internal" href="misc_system_api.html">Miscellaneous System APIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="ota.html">Over The Air Updates (OTA)</a></li>
<li class="toctree-l3"><a class="reference internal" href="perfmon.html">Performance Monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="power_management.html">Power Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="pthread.html">POSIX Support (Including POSIX Threads Support)</a></li>
<li class="toctree-l3"><a class="reference internal" href="random.html">Random Number Generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="sleep_modes.html">Sleep Modes</a></li>
<li class="toctree-l3"><a class="reference internal" href="soc_caps.html">SoC Capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="system_time.html">System Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="himem.html">Himem</a></li>
<li class="toctree-l3"><a class="reference internal" href="ulp.html">ULP Coprocessor Programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="wdts.html">Watchdogs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hw-reference/index.html">Hardware Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-guides/index.html">API Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration-guides/index.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries-and-frameworks/index.html">Libraries and Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contributions Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">ESP-IDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COPYRIGHT.html">Copyrights and Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../languages.html">Switch Between Languages</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ESP-IDF Programming Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="index.html">System API</a></li>
      <li class="breadcrumb-item active">Memory Management for MMU Supported Memory</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/espressif/esp-idf/blob/v5.4.2/docs/en/api-reference/system/mm.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="memory-management-for-mmu-supported-memory">
<h1>Memory Management for MMU Supported Memory<a class="headerlink" href="#memory-management-for-mmu-supported-memory" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="../../../../../zh_CN/v5.4.2/esp32/api-reference/system/mm.html">[中文]</a></p>
<div class="toctree-wrapper compound">
</div>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h2>
<p>ESP32 Memory Management Unit (MMU) is relatively simple. It can do memory address translation between physical memory addresses and virtual memory addresses. So CPU can access physical memories via virtual addresses. There are multiple types of virtual memory addresses, which have different capabilities.</p>
<p>ESP-IDF provides a memory mapping driver that manages the relation between these physical memory addresses and virtual memory addresses, so as to achieve some features such as reading from SPI flash via a pointer.</p>
<p>Memory mapping driver is actually a capabilities-based virtual memory address allocator that allows applications to make virtual memory address allocations for different purposes. In the following chapters, we call this driver <code class="docutils literal notranslate"><span class="pre">esp_mmap</span></code> driver.</p>
<p>ESP-IDF also provides a memory synchronization driver which can be used for potential memory desynchronization scenarios.</p>
</section>
<section id="physical-memory-types">
<h2>Physical Memory Types<a class="headerlink" href="#physical-memory-types" title="Permalink to this heading"></a></h2>
<p>Memory mapping driver currently supports mapping to following physical memory type(s):</p>
<p><ul class="simple">
<li><p>SPI flash</p></li>
</ul>
</p>
</section>
<section id="virtual-memory-capabilities">
<h2>Virtual Memory Capabilities<a class="headerlink" href="#virtual-memory-capabilities" title="Permalink to this heading"></a></h2>
<p><ul class="simple">
<li><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">MMU_MEM_CAP_EXEC</span></code>: This capability indicates that the virtual memory address has the execute permission. Note this permission scope is within the MMU hardware.</p></li>
<li><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">MMU_MEM_CAP_READ</span></code>: This capability indicates that the virtual memory address has the read permission. Note this permission scope is within the MMU hardware.</p></li>
<li><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">MMU_MEM_CAP_WRITE</span></code>: This capability indicates that the virtual memory address has the write permission. Note this permission scope is within the MMU hardware.</p></li>
<li><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">MMU_MEM_CAP_32BIT</span></code>: This capability indicates that the virtual memory address allows for 32 bits or multiples of 32 bits access.</p></li>
<li><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">MMU_MEM_CAP_8BIT</span></code>: This capability indicates that the virtual memory address allows for 8 bits or multiples of 8 bits access.</p></li>
</ul>
</p>
<p>8 MB external memory addresses (from 0x40400000 to 0x40C00000) which have the <code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">MMU_MEM_CAP_EXEC</span></code> and <code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">MMU_MEM_CAP_READ</span></code> capabilities are not available for users to allocate, due to hardware limitations.</p>
<p>You can call <a class="reference internal" href="#_CPPv447esp_mmu_map_get_max_consecutive_free_block_size14mmu_mem_caps_t12mmu_target_tP6size_t" title="esp_mmu_map_get_max_consecutive_free_block_size"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_mmu_map_get_max_consecutive_free_block_size()</span></code></a> to know the largest consecutive mappable block size with certain capabilities.</p>
</section>
<section id="memory-management-drivers">
<h2>Memory Management Drivers<a class="headerlink" href="#memory-management-drivers" title="Permalink to this heading"></a></h2>
<section id="driver-concept">
<h3>Driver Concept<a class="headerlink" href="#driver-concept" title="Permalink to this heading"></a></h3>
<section id="terminology">
<h4>Terminology<a class="headerlink" href="#terminology" title="Permalink to this heading"></a></h4>
<p>The virtual memory pool is made up with one or multiple virtual memory regions, see below figure:</p>
<a class="reference internal image-reference" href="../../_images/mem_pool.png"><img alt="../../_images/mem_pool.png" class="align-center" src="../../_images/mem_pool.png" style="width: 649.6px; height: 116.80000000000001px;" /></a>
<ul class="simple">
<li><p>A virtual memory pool stands for the whole virtual address range that can be mapped to physical memory.</p></li>
<li><p>A virtual memory region is a range of virtual address with same attributes.</p></li>
<li><p>A virtual memory block is a piece of virtual address range that is dynamically mapped.</p></li>
<li><p>A slot is the virtual address range between two virtual memory blocks.</p></li>
<li><p>A physical memory block is a piece of physical address range that is to-be-mapped or already mapped to a virtual memory block.</p></li>
<li><p>Dynamical mapping is done by calling <code class="docutils literal notranslate"><span class="pre">esp_mmap</span></code> driver API <a class="reference internal" href="#_CPPv411esp_mmu_map11esp_paddr_t6size_t12mmu_target_t14mmu_mem_caps_tiPPv" title="esp_mmu_map"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_mmu_map()</span></code></a>. This API maps the given physical memory block to a virtual memory block which is allocated by the <code class="docutils literal notranslate"><span class="pre">esp_mmap</span></code> driver.</p></li>
</ul>
</section>
<section id="relation-between-memory-blocks">
<h4>Relation Between Memory Blocks<a class="headerlink" href="#relation-between-memory-blocks" title="Permalink to this heading"></a></h4>
<p>When mapping a physical memory block A, block A can have one of the following relations with another previously mapped physical memory block B:</p>
<ul>
<li><p>Enclosed: block A is completely enclosed within block B, see figure below:</p>
<a class="reference internal image-reference" href="../../_images/enclosed.png"><img alt="../../_images/enclosed.png" class="align-center" src="../../_images/enclosed.png" style="width: 439.20000000000005px; height: 162.4px;" /></a>
</li>
<li><p>Identical: block A is completely the same as block B, see figure below:</p>
<a class="reference internal image-reference" href="../../_images/identical.png"><img alt="../../_images/identical.png" class="align-center" src="../../_images/identical.png" style="width: 476.0px; height: 169.60000000000002px;" /></a>
<p>Note that <code class="docutils literal notranslate"><span class="pre">esp_mmap</span></code> driver considers the identical scenario <strong>the same as the enclosed scenario</strong>.</p>
</li>
<li><p>Overlapped: block A is overlapped with block B, see figure below:</p>
<a class="reference internal image-reference" href="../../_images/overlapped.png"><img alt="../../_images/overlapped.png" class="align-center" src="../../_images/overlapped.png" style="width: 581.6px; height: 166.4px;" /></a>
<p>There is a special condition, when block A entirely encloses block B, see figure below:</p>
<a class="reference internal image-reference" href="../../_images/inversed_enclosed.png"><img alt="../../_images/inversed_enclosed.png" class="align-center" src="../../_images/inversed_enclosed.png" style="width: 553.6999999999999px; height: 178.5px;" /></a>
<p>Note that <code class="docutils literal notranslate"><span class="pre">esp_mmap</span></code> driver considers this scenario <strong>the same as the overlapped scenario</strong>.</p>
</li>
</ul>
</section>
</section>
<section id="driver-behaviour">
<h3>Driver Behaviour<a class="headerlink" href="#driver-behaviour" title="Permalink to this heading"></a></h3>
<section id="memory-map">
<h4>Memory Map<a class="headerlink" href="#memory-map" title="Permalink to this heading"></a></h4>
<p>You can call <a class="reference internal" href="#_CPPv411esp_mmu_map11esp_paddr_t6size_t12mmu_target_t14mmu_mem_caps_tiPPv" title="esp_mmu_map"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_mmu_map()</span></code></a> to do a dynamical mapping. This API can allocate a certain size of virtual memory block according to the virtual memory capabilities you selected, then map this virtual memory block to the physical memory block as you requested. The <code class="docutils literal notranslate"><span class="pre">esp_mmap</span></code> driver supports mapping to one or more types of physical memory, so you should specify the physical memory target when mapping.</p>
<p>By default, physical memory blocks and virtual memory blocks are one-to-one mapped. This means, when calling <a class="reference internal" href="#_CPPv411esp_mmu_map11esp_paddr_t6size_t12mmu_target_t14mmu_mem_caps_tiPPv" title="esp_mmu_map"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_mmu_map()</span></code></a>:</p>
<ul class="simple">
<li><p>If it is the enclosed scenario, this API will return an <a class="reference internal" href="esp_err.html#c.ESP_ERR_INVALID_STATE" title="ESP_ERR_INVALID_STATE"><code class="xref c c-macro docutils literal notranslate"><span class="pre">ESP_ERR_INVALID_STATE</span></code></a>. The <code class="docutils literal notranslate"><span class="pre">out_ptr</span></code> will be assigned to the start virtual memory address of the previously mapped one which encloses the to-be-mapped one.</p></li>
<li><p>If it is the identical scenario, this API will behaves exactly the same as the enclosed scenario.</p></li>
<li><p>If it is the overlapped scenario, this API will by default return an <a class="reference internal" href="esp_err.html#c.ESP_ERR_INVALID_ARG" title="ESP_ERR_INVALID_ARG"><code class="xref c c-macro docutils literal notranslate"><span class="pre">ESP_ERR_INVALID_ARG</span></code></a>. This means, <code class="docutils literal notranslate"><span class="pre">esp_mmap</span></code> driver by default does not allow mapping a physical memory address to multiple virtual memory addresses.</p></li>
</ul>
<p>Specially, you can use <a class="reference internal" href="#c.ESP_MMU_MMAP_FLAG_PADDR_SHARED" title="ESP_MMU_MMAP_FLAG_PADDR_SHARED"><code class="xref c c-macro docutils literal notranslate"><span class="pre">ESP_MMU_MMAP_FLAG_PADDR_SHARED</span></code></a>. This flag stands for one-to-multiple mapping between a physical address and multiple virtual addresses:</p>
<ul class="simple">
<li><p>If it is the overlapped scenario, this API will allocate a new virtual memory block as requested, then map to the given physical memory block.</p></li>
</ul>
</section>
<section id="memory-unmap">
<h4>Memory Unmap<a class="headerlink" href="#memory-unmap" title="Permalink to this heading"></a></h4>
<p>You can call <a class="reference internal" href="#_CPPv413esp_mmu_unmapPv" title="esp_mmu_unmap"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_mmu_unmap()</span></code></a> to unmap a previously mapped memory block. This API returns an <a class="reference internal" href="esp_err.html#c.ESP_ERR_NOT_FOUND" title="ESP_ERR_NOT_FOUND"><code class="xref c c-macro docutils literal notranslate"><span class="pre">ESP_ERR_NOT_FOUND</span></code></a> if you are trying to unmap a virtual memory block that is not mapped to any physical memory block yet.</p>
</section>
<section id="memory-address-conversion">
<h4>Memory Address Conversion<a class="headerlink" href="#memory-address-conversion" title="Permalink to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">esp_mmap</span></code> driver provides two helper APIs to do the conversion between virtual memory address and physical memory address：</p>
<ul class="simple">
<li><p><a class="reference internal" href="#_CPPv422esp_mmu_vaddr_to_paddrPvP11esp_paddr_tP12mmu_target_t" title="esp_mmu_vaddr_to_paddr"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_mmu_vaddr_to_paddr()</span></code></a> converts virtual address to physical address.</p></li>
<li><p><a class="reference internal" href="#_CPPv422esp_mmu_paddr_to_vaddr11esp_paddr_t12mmu_target_t11mmu_vaddr_tPPv" title="esp_mmu_paddr_to_vaddr"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_mmu_paddr_to_vaddr()</span></code></a> converts physical address to virtual address.</p></li>
</ul>
</section>
<section id="memory-synchronization">
<h4>Memory Synchronization<a class="headerlink" href="#memory-synchronization" title="Permalink to this heading"></a></h4>
<p>MMU supported physical memories can be accessed by one or multiple methods.</p>
<p>SPI flash can be accessed by SPI1 (ESP-IDF <code class="docutils literal notranslate"><span class="pre">esp_flash</span></code> driver APIs), or by pointers. ESP-IDF <code class="docutils literal notranslate"><span class="pre">esp_flash</span></code> driver APIs have already considered the memory synchronization, so users do not need to worry about this.</p>
<p>PSRAM can be accessed by pointers, hardware guarantees the data consistency when PSRAM is only accessed via pointers.</p>
</section>
</section>
</section>
<section id="thread-safety">
<h2>Thread Safety<a class="headerlink" href="#thread-safety" title="Permalink to this heading"></a></h2>
<p>Following APIs in <code class="docutils literal notranslate"><span class="pre">esp_mmu_map.h</span></code> are not guaranteed to be thread-safe:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#_CPPv430esp_mmu_map_dump_mapped_blocksP4FILE" title="esp_mmu_map_dump_mapped_blocks"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_mmu_map_dump_mapped_blocks()</span></code></a></p></li>
</ul>
<p>APIs in <code class="docutils literal notranslate"><span class="pre">esp_cache.h</span></code> are guaranteed to be thread-safe.</p>
</section>
<section id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this heading"></a></h2>
<section id="api-reference-esp-mmap-driver">
<h3>API Reference - ESP MMAP Driver<a class="headerlink" href="#api-reference-esp-mmap-driver" title="Permalink to this heading"></a></h3>
<section id="header-file">
<h4>Header File<a class="headerlink" href="#header-file" title="Permalink to this heading"></a></h4>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/v5.4.2/components/esp_mm/include/esp_mmu_map.h">components/esp_mm/include/esp_mmu_map.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;esp_mmu_map.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">esp_mm</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">esp_mm</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES esp_mm
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES esp_mm
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="functions">
<h4>Functions<a class="headerlink" href="#functions" title="Permalink to this heading"></a></h4>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv411esp_mmu_map11esp_paddr_t6size_t12mmu_target_t14mmu_mem_caps_tiPPv">
<span id="_CPPv311esp_mmu_map11esp_paddr_t6size_t12mmu_target_t14mmu_mem_caps_tiPPv"></span><span id="_CPPv211esp_mmu_map11esp_paddr_t6size_t12mmu_target_t14mmu_mem_caps_tiPPv"></span><span id="esp_mmu_map__esp_paddr_t.s.mmu_target_t.mmu_mem_caps_t.i.voidPP"></span><span class="target" id="esp__mmu__map_8h_1a91e7cb6994050b60bc217422b0d473b3"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_mmu_map</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411esp_paddr_t" title="esp_paddr_t"><span class="n"><span class="pre">esp_paddr_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">paddr_start</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">size</span></span>, <span class="n"><span class="pre">mmu_target_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">target</span></span>, <span class="n"><span class="pre">mmu_mem_caps_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">caps</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">flags</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">out_ptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv411esp_mmu_map11esp_paddr_t6size_t12mmu_target_t14mmu_mem_caps_tiPPv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Map a physical memory block to external virtual address block, with given capabilities. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>paddr_start</strong> -- <strong>[in]</strong> Start address of the physical memory block </p></li>
<li><p><strong>size</strong> -- <strong>[in]</strong> Size to be mapped. Size will be rounded up by to the nearest multiple of MMU page size </p></li>
<li><p><strong>target</strong> -- <strong>[in]</strong> Physical memory target you're going to map to, see <code class="docutils literal notranslate"><span class="pre">mmu_target_t</span></code></p></li>
<li><p><strong>caps</strong> -- <strong>[in]</strong> Memory capabilities, see <code class="docutils literal notranslate"><span class="pre">mmu_mem_caps_t</span></code></p></li>
<li><p><strong>flags</strong> -- <strong>[in]</strong> Mmap flags </p></li>
<li><p><strong>out_ptr</strong> -- <strong>[out]</strong> Start address of the mapped virtual memory</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK</p></li>
<li><p>ESP_ERR_INVALID_ARG: Invalid argument, see printed logs</p></li>
<li><p>ESP_ERR_NOT_SUPPORTED: Only on ESP32, PSRAM is not a supported physical memory target</p></li>
<li><p>ESP_ERR_NOT_FOUND: No enough size free block to use</p></li>
<li><p>ESP_ERR_NO_MEM: Out of memory, this API will allocate some heap memory for internal usage</p></li>
<li><p>ESP_ERR_INVALID_STATE: Paddr is mapped already, this API will return corresponding <code class="docutils literal notranslate"><span class="pre">vaddr_start</span> <span class="pre">+</span> <span class="pre">new_block_offset</span></code> as per the previously mapped block. Only to-be-mapped paddr block is totally enclosed by a previously mapped block will lead to this error. (Identical scenario will behave similarly) new_block_start new_block_end |----- New Block -----| |------------ Block ------------| block_start block_end </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv413esp_mmu_unmapPv">
<span id="_CPPv313esp_mmu_unmapPv"></span><span id="_CPPv213esp_mmu_unmapPv"></span><span id="esp_mmu_unmap__voidP"></span><span class="target" id="esp__mmu__map_8h_1a59b186646a84d170e7a8ae452d122403"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_mmu_unmap</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">ptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv413esp_mmu_unmapPv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Unmap a previously mapped virtual memory block. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ptr</strong> -- <strong>[in]</strong> Start address of the virtual memory</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK</p></li>
<li><p>ESP_ERR_INVALID_ARG: Null pointer</p></li>
<li><p>ESP_ERR_NOT_FOUND: Vaddr is not in external memory, or it's not mapped yet </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv447esp_mmu_map_get_max_consecutive_free_block_size14mmu_mem_caps_t12mmu_target_tP6size_t">
<span id="_CPPv347esp_mmu_map_get_max_consecutive_free_block_size14mmu_mem_caps_t12mmu_target_tP6size_t"></span><span id="_CPPv247esp_mmu_map_get_max_consecutive_free_block_size14mmu_mem_caps_t12mmu_target_tP6size_t"></span><span id="esp_mmu_map_get_max_consecutive_free_block_size__mmu_mem_caps_t.mmu_target_t.sP"></span><span class="target" id="esp__mmu__map_8h_1a011ff3f3569de1d3edc7ca2bdf3f04c0"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_mmu_map_get_max_consecutive_free_block_size</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">mmu_mem_caps_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">caps</span></span>, <span class="n"><span class="pre">mmu_target_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">target</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">out_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv447esp_mmu_map_get_max_consecutive_free_block_size14mmu_mem_caps_t12mmu_target_tP6size_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get largest consecutive free external virtual memory block size, with given capabilities and given physical target. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>caps</strong> -- <strong>[in]</strong> Bitwise OR of MMU_MEM_CAP_* flags indicating the memory block </p></li>
<li><p><strong>target</strong> -- <strong>[in]</strong> Physical memory target you're going to map to, see <code class="docutils literal notranslate"><span class="pre">mmu_target_t</span></code>. </p></li>
<li><p><strong>out_len</strong> -- <strong>[out]</strong> Largest free block length, in bytes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK</p></li>
<li><p>ESP_ERR_INVALID_ARG: Invalid arguments, could be null pointer </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv430esp_mmu_map_dump_mapped_blocksP4FILE">
<span id="_CPPv330esp_mmu_map_dump_mapped_blocksP4FILE"></span><span id="_CPPv230esp_mmu_map_dump_mapped_blocksP4FILE"></span><span id="esp_mmu_map_dump_mapped_blocks__FILEP"></span><span class="target" id="esp__mmu__map_8h_1acf0bb6a4fbd47588c824d9c2c8634369"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_mmu_map_dump_mapped_blocks</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">FILE</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">stream</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv430esp_mmu_map_dump_mapped_blocksP4FILE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Dump all the previously mapped blocks</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API shall not be called from an ISR. </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API does not guarantee thread safety</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stream</strong> -- stream to print information to; use stdout or stderr to print to the console; use fmemopen/open_memstream to print to a string buffer. </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv422esp_mmu_vaddr_to_paddrPvP11esp_paddr_tP12mmu_target_t">
<span id="_CPPv322esp_mmu_vaddr_to_paddrPvP11esp_paddr_tP12mmu_target_t"></span><span id="_CPPv222esp_mmu_vaddr_to_paddrPvP11esp_paddr_tP12mmu_target_t"></span><span id="esp_mmu_vaddr_to_paddr__voidP.esp_paddr_tP.mmu_target_tP"></span><span class="target" id="esp__mmu__map_8h_1a083df5db0190769b494b3704693e4be2"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_mmu_vaddr_to_paddr</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">vaddr</span></span>, <a class="reference internal" href="#_CPPv411esp_paddr_t" title="esp_paddr_t"><span class="n"><span class="pre">esp_paddr_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">out_paddr</span></span>, <span class="n"><span class="pre">mmu_target_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">out_target</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv422esp_mmu_vaddr_to_paddrPvP11esp_paddr_tP12mmu_target_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Convert virtual address to physical address. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vaddr</strong> -- <strong>[in]</strong> Virtual address </p></li>
<li><p><strong>out_paddr</strong> -- <strong>[out]</strong> Physical address </p></li>
<li><p><strong>out_target</strong> -- <strong>[out]</strong> Physical memory target, see <code class="docutils literal notranslate"><span class="pre">mmu_target_t</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK</p></li>
<li><p>ESP_ERR_INVALID_ARG: Null pointer, or vaddr is not within external memory</p></li>
<li><p>ESP_ERR_NOT_FOUND: Vaddr is not mapped yet </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv422esp_mmu_paddr_to_vaddr11esp_paddr_t12mmu_target_t11mmu_vaddr_tPPv">
<span id="_CPPv322esp_mmu_paddr_to_vaddr11esp_paddr_t12mmu_target_t11mmu_vaddr_tPPv"></span><span id="_CPPv222esp_mmu_paddr_to_vaddr11esp_paddr_t12mmu_target_t11mmu_vaddr_tPPv"></span><span id="esp_mmu_paddr_to_vaddr__esp_paddr_t.mmu_target_t.mmu_vaddr_t.voidPP"></span><span class="target" id="esp__mmu__map_8h_1adaf56c9cd6661fd1c89630d860ca5d35"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_mmu_paddr_to_vaddr</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv411esp_paddr_t" title="esp_paddr_t"><span class="n"><span class="pre">esp_paddr_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">paddr</span></span>, <span class="n"><span class="pre">mmu_target_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">target</span></span>, <span class="n"><span class="pre">mmu_vaddr_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">type</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">out_vaddr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv422esp_mmu_paddr_to_vaddr11esp_paddr_t12mmu_target_t11mmu_vaddr_tPPv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Convert physical address to virtual address. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>paddr</strong> -- <strong>[in]</strong> Physical address </p></li>
<li><p><strong>target</strong> -- <strong>[in]</strong> Physical memory target, see <code class="docutils literal notranslate"><span class="pre">mmu_target_t</span></code></p></li>
<li><p><strong>type</strong> -- <strong>[in]</strong> Virtual address type, could be either instruction or data </p></li>
<li><p><strong>out_vaddr</strong> -- <strong>[out]</strong> Virtual address</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK</p></li>
<li><p>ESP_ERR_INVALID_ARG: Null pointer</p></li>
<li><p>ESP_ERR_NOT_FOUND: Paddr is not mapped yet </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv423esp_mmu_paddr_find_capsK11esp_paddr_tP14mmu_mem_caps_t">
<span id="_CPPv323esp_mmu_paddr_find_capsK11esp_paddr_tP14mmu_mem_caps_t"></span><span id="_CPPv223esp_mmu_paddr_find_capsK11esp_paddr_tP14mmu_mem_caps_t"></span><span id="esp_mmu_paddr_find_caps__esp_paddr_tC.mmu_mem_caps_tP"></span><span class="target" id="esp__mmu__map_8h_1a4bfe4d2699ebb5dbd2406b9406ced7f7"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_mmu_paddr_find_caps</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv411esp_paddr_t" title="esp_paddr_t"><span class="n"><span class="pre">esp_paddr_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">paddr</span></span>, <span class="n"><span class="pre">mmu_mem_caps_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">out_caps</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv423esp_mmu_paddr_find_capsK11esp_paddr_tP14mmu_mem_caps_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>If the physical address is mapped, this API will provide the capabilities of the virtual address where the physical address is mapped to. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>: Only return value is ESP_OK(which means physically address is successfully mapped), then caps you get make sense. </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API only check one page (see CONFIG_MMU_PAGE_SIZE), starting from the <code class="docutils literal notranslate"><span class="pre">paddr</span></code></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>paddr</strong> -- <strong>[in]</strong> Physical address </p></li>
<li><p><strong>out_caps</strong> -- <strong>[out]</strong> Bitwise OR of MMU_MEM_CAP_* flags indicating the capabilities of a virtual address where the physical address is mapped to. </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ESP_OK: Physical address successfully mapped.</p></li>
<li><p>ESP_ERR_INVALID_ARG: Null pointer</p></li>
<li><p>ESP_ERR_NOT_FOUND: Physical address is not mapped successfully. </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="macros">
<h4>Macros<a class="headerlink" href="#macros" title="Permalink to this heading"></a></h4>
<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.ESP_MMU_MMAP_FLAG_PADDR_SHARED">
<span class="target" id="esp__mmu__map_8h_1a9a063f199b909883dfa6ce4a5636db7b"></span><span class="sig-name descname"><span class="n"><span class="pre">ESP_MMU_MMAP_FLAG_PADDR_SHARED</span></span></span><a class="headerlink" href="#c.ESP_MMU_MMAP_FLAG_PADDR_SHARED" title="Permalink to this definition"></a><br /></dt>
<dd><p>Share this mapping. </p>
<p>MMU Memory Mapping Driver APIs for MMU supported memory</p>
<p>Driver Backgrounds:</p>
</dd></dl>

</section>
<section id="type-definitions">
<h4>Type Definitions<a class="headerlink" href="#type-definitions" title="Permalink to this heading"></a></h4>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv411esp_paddr_t">
<span id="_CPPv311esp_paddr_t"></span><span id="_CPPv211esp_paddr_t"></span><span id="esp_paddr_t"></span><span class="target" id="esp__mmu__map_8h_1ac16c8b3daf2378dee18e4f3e3f676062"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esp_paddr_t</span></span></span><a class="headerlink" href="#_CPPv411esp_paddr_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Physical memory type. </p>
</dd></dl>

</section>
</section>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
             <div class="articleComments">

<style>
    .expand-feedback-content {
        display: none;
    }
    .click-like-or-dislike {
        background-color: #d3d3d3;
        pointer-events: none;
    }
</style>

<script>
    function submitFeedbackForm(user_likes_document) {
        // Send to GA4 the user reaction
        gtag('event', 'user_reaction', {
            'user_likes_document': user_likes_document
        });

        if (user_likes_document === 1) {
            document.querySelector('.like-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContentLike").style.display = 'block';
        } else {
            document.querySelector('.dislike-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContent").style.display = 'block';
        }

        document.querySelector('.like-btn').style.pointerEvents = 'none';
        document.querySelector('.dislike-btn').style.pointerEvents = 'none';
    }
</script>

<hr>

<p style="text-align:center"><strong>Was this page helpful?</strong></p>
<p style="text-align:center">
    <button class="like-btn" onclick="submitFeedbackForm(1)">
        <svg aria-hidden="true" focusable="false" class="color-fg-muted" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M8.834.066c.763.087 1.5.295 2.01.884.505.581.656 1.378.656 2.3 0 .467-.087 1.119-.157 1.637L11.328 5h1.422c.603 0 1.174.085 1.668.333.508.254.911.679 1.137 1.2.453.998.438 2.447.188 4.316l-.04.306c-.105.79-.195 1.473-.313 2.033-.131.63-.315 1.209-.668 1.672C13.97 15.847 12.706 16 11 16c-1.848 0-3.234-.333-4.388-.653-.165-.045-.323-.09-.475-.133-.658-.186-1.2-.34-1.725-.415A1.75 1.75 0 0 1 2.75 16h-1A1.75 1.75 0 0 1 0 14.25v-7.5C0 5.784.784 5 1.75 5h1a1.75 1.75 0 0 1 1.514.872c.258-.105.59-.268.918-.508C5.853 4.874 6.5 4.079 6.5 2.75v-.5c0-1.202.994-2.337 2.334-2.184ZM4.5 13.3c.705.088 1.39.284 2.072.478l.441.125c1.096.305 2.334.598 3.987.598 1.794 0 2.28-.223 2.528-.549.147-.193.276-.505.394-1.07.105-.502.188-1.124.295-1.93l.04-.3c.25-1.882.189-2.933-.068-3.497a.921.921 0 0 0-.442-.48c-.208-.104-.52-.174-.997-.174H11c-.686 0-1.295-.577-1.206-1.336.023-.192.05-.39.076-.586.065-.488.13-.97.13-1.328 0-.809-.144-1.15-.288-1.316-.137-.158-.402-.304-1.048-.378C8.357 1.521 8 1.793 8 2.25v.5c0 1.922-.978 3.128-1.933 3.825a5.831 5.831 0 0 1-1.567.81ZM2.75 6.5h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
    </button>
    <button class="dislike-btn" onclick="submitFeedbackForm(0)">
        <svg aria-hidden="true" focusable="false" class="" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M7.083 15.986c-.763-.087-1.499-.295-2.011-.884-.504-.581-.655-1.378-.655-2.299 0-.468.087-1.12.157-1.638l.015-.112H3.167c-.603 0-1.174-.086-1.669-.334a2.415 2.415 0 0 1-1.136-1.2c-.454-.998-.438-2.447-.188-4.316l.04-.306C.32 4.108.41 3.424.526 2.864c.132-.63.316-1.209.669-1.672C1.947.205 3.211.053 4.917.053c1.848 0 3.234.332 4.388.652l.474.133c.658.187 1.201.341 1.726.415a1.75 1.75 0 0 1 1.662-1.2h1c.966 0 1.75.784 1.75 1.75v7.5a1.75 1.75 0 0 1-1.75 1.75h-1a1.75 1.75 0 0 1-1.514-.872c-.259.105-.59.268-.919.508-.671.491-1.317 1.285-1.317 2.614v.5c0 1.201-.994 2.336-2.334 2.183Zm4.334-13.232c-.706-.089-1.39-.284-2.072-.479l-.441-.125c-1.096-.304-2.335-.597-3.987-.597-1.794 0-2.28.222-2.529.548-.147.193-.275.505-.393 1.07-.105.502-.188 1.124-.295 1.93l-.04.3c-.25 1.882-.19 2.933.067 3.497a.923.923 0 0 0 .443.48c.208.104.52.175.997.175h1.75c.685 0 1.295.577 1.205 1.335-.022.192-.049.39-.075.586-.066.488-.13.97-.13 1.329 0 .808.144 1.15.288 1.316.137.157.401.303 1.048.377.307.035.664-.237.664-.693v-.5c0-1.922.978-3.127 1.932-3.825a5.878 5.878 0 0 1 1.568-.809Zm1.75 6.798h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25Z"></path>
        </svg>
    </button>
</p>

<div class="expand-feedback-content" id="expandContentLike">
    <ul style="text-align:center">
        <li>Thank you! We received your feedback.</li>
        <li>If you have any comments, fill in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=Memory Management for MMU Supported Memory (api-reference/system/mm)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<div class="expand-feedback-content" id="expandContent">
    <ul style="text-align:center">
        <li>We value your feedback.</li>
        <li>Let us know how we can improve this page by filling in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=Memory Management for MMU Supported Memory (api-reference/system/mm)&version=esp32 v5.4.2 (v5.4.2)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<br>


             </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mem_alloc.html" class="btn btn-neutral float-left" title="Heap Memory Allocation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="heap_debug.html" class="btn btn-neutral float-right" title="Heap Memory Debugging" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016 - 2025, Espressif Systems (Shanghai) Co., Ltd.</p>
  </div>

  <ul class="footer">
        <li>
	    
            
            Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/espressif/sphinx_idf_theme">theme</a>  based on <a href="https://github.com/readthedocs/sphinx_rtd_theme">Read the Docs Sphinx Theme</a>.
         </li>
    <li class="footer-aside">
        <a href="../../esp-idf-en-v5.4.2.zip"> Download HTML</a>
    </li>

  </ul> 

</footer>
        </div>
      </div>
    </section>
  </div>

  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>